var App={_version:"3.37.4",_assetsUrl:[window.location.protocol,window.location.hostname].join("//"),Elements:{},Nodes:{},Test:[]},Module={};cm._variables["%AppVersion%"]="App._version",cm._variables["%AppAssetsUrl%"]="App._assetsUrl",cm.define("App.AbstractModule",{extend:"Com.AbstractController",events:["onEnableEditing","onEnableEditable","onDisableEditing","onDisableEditable","onToggleVisibility"],params:{renderStructure:!1,embedStructureOnRender:!1,controllerEvents:!0,customEvents:!0,isEditing:null}},function(){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("App.AbstractModule",function(e,n,t,o){t.construct=function(){var e=this;e.isEditing=null,e.isVisible=null,e.enableEditingHandler=e.enableEditing.bind(e),e.disableEditingHandler=e.disableEditing.bind(e),e.toggleVisibilityEventHandler=e.toggleVisibilityEvent.bind(e),o.prototype.construct.apply(e,arguments)},t.onSetCustomEvents=function(){var e=this;cm.customEvent.add(e.params.node,"enableEditable",e.enableEditingHandler),cm.customEvent.add(e.params.node,"disableEditable",e.disableEditingHandler),cm.customEvent.add(e.params.node,"toggleVisibility",e.toggleVisibilityEventHandler)},t.onUnsetCustomEvents=function(){var e=this;cm.customEvent.remove(e.params.node,"enableEditable",e.enableEditingHandler),cm.customEvent.remove(e.params.node,"disableEditable",e.disableEditingHandler),cm.customEvent.remove(e.params.node,"toggleVisibility",e.toggleVisibilityEventHandler)},t.renderViewModel=function(){var e=this;return cm.isBoolean(e.params.isEditing)&&(e.params.isEditing?e.enableEditing():e.disableEditing()),e.triggerEvent("onRenderViewModel"),e},t.toggleVisibilityEvent=function(e){this.toggleVisibility(e.state)},t.enableEditing=function(){var e=this;return cm.isBoolean(e.isEditing)&&e.isEditing||(e.isEditing=!0,cm.replaceClass(e.params.node,"is-not-editing",["is-editing","is-editable"]),e.triggerEvent("onEnableEditing"),e.triggerEvent("onEnableEditable")),e},t.disableEditing=function(){var e=this;return cm.isBoolean(e.isEditing)&&!e.isEditing||(e.isEditing=!1,cm.replaceClass(e.params.node,["is-editing","is-editable"],"is-not-editing"),e.triggerEvent("onDisableEditing"),e.triggerEvent("onDisableEditable")),e},t.toggleVisibility=function(e){var n=this;return cm.isBoolean(n.isVisible)&&n.isVisible===e||(n.isVisible=e,cm.toggleClass(n.node,"is-visible",e),cm.toggleClass(n.node,"is-hidden",!e),n.triggerEvent("onToggleVisibility",e)),n}}),cm.define("App.AbstractForm",{extend:"Com.AbstractController"},function(e){Com.AbstractController.apply(this,arguments)}),cm.define("App.AbstractModuleElement",{extend:"App.AbstractModule",events:["onChange","onValidate"],params:{renderStructure:!1,embedStructureOnRender:!1,validate:!1,validateHidden:!1,required:!1,pattern:"^\\s*$",match:!1,targetController:!1,memorable:!0,remember:!1,inputEvent:"input"}},function(){App.AbstractModule.apply(this,arguments)}),cm.getConstructor("App.AbstractModuleElement",function(e,n,t,o){t.construct=function(){var e=this;e.nodes={errors:{}},e.changeEventHandler=e.changeEvent.bind(e),o.prototype.construct.apply(e,arguments)},t.onConstructEnd=function(){this.restoreLocalValue()},t.renderViewModel=function(){var e=this;o.prototype.renderViewModel.apply(e,arguments),e.params.targetController?e.renderController():cm.isEmpty(e.nodes.inputs)?e.nodes.input&&e.renderInput(e.nodes.input):e.renderInputs(),cm.forEach(e.nodes.errors.items,function(e){e.type=cm.getData(e.message,"type"),cm.addClass(e.message,"hidden margin-none")})},t.renderController=function(){var n=this;cm.find(n.params.targetController,n.params.name,n.nodes.field,function(e){n.components.controller=e,n.components.controller.addEvent("onChange",n.changeEventHandler)})},t.renderInputs=function(){var n=this;cm.forEach(n.nodes.inputs,function(e){n.renderInput(e.input)})},t.renderInput=function(e){cm.addEvent(e,this.params.inputEvent,this.changeEventHandler)},t.changeEvent=function(){var e=this,n=e.get();e.saveLocalValue(),e.triggerEvent("onChange",n)},t.saveLocalValue=function(){var e,n=this;n.params.memorable&&n.params.remember&&(e=n.get(),n.storageWrite("value",e))},t.restoreLocalValue=function(){var e,n=this;n.params.memorable&&n.params.remember&&(e=n.storageRead("value"),cm.isEmpty(e)||n.set(e))},t.setMultiple=function(t){cm.isArray(value)&&cm.forEach(this.nodes.inputs,function(e,n){t[n]&&(e.input.value=t[n])})},t.getMultiple=function(){var n=[];return cm.forEach(this.nodes.inputs,function(e){n.push(e.input.value)}),n},t.validateValue=function(){var e=this,n={value:e.get(),type:null,valid:!0};return e.params.required&&cm.isEmpty(n.value)?(n.type="required",n.valid=!1):!e.params.validate||cm.isEmpty(n.value)||cm.isEmpty(e.params.pattern)||(n.type=e.params.pattern,n.regexp=new RegExp(e.params.pattern),n.valid=n.regexp.test(n.value),n.valid=e.params.match?n.valid:!n.valid),n},t.showError=function(n){var e=this;return cm.addClass(e.nodes.field,"error"),cm.removeClass(e.nodes.errors.container,"hidden"),cm.forEach(e.nodes.errors.items,function(e){n===e.type?cm.removeClass(e.message,"hidden"):cm.addClass(e.message,"hidden")}),e},t.hideError=function(){var e=this;return cm.removeClass(e.nodes.field,"error"),cm.addClass(e.nodes.errors.container,"hidden"),cm.forEach(e.nodes.errors.items,function(e){cm.addClass(e.message,"hidden")}),e},t.set=function(e){var n=this;return n.components.controller?n.components.controller.set(e):cm.isEmpty(n.nodes.inputs)?n.nodes.input.value=e:n.setMultiple(e),n},t.get=function(){var e=this;return e.components.controller?e.components.controller.get():cm.isEmpty(e.nodes.inputs)?e.nodes.input.value:e.getMultiple()},t.validate=function(){var e,n=this;return!n.params.required&&!n.params.validate||!1===n.isVisible&&!n.params.validateHidden||((e=n.validateValue()).valid?n.hideError():n.showError(e.type),n.triggerEvent("onValidate",e),e.valid)},t.clear=function(){return this.hideError(),this}}),App.FlowScenario=[{title:"Edit Header and Footer",order:2,type:"flow",flow:"forced",data:[{position:"template:left-top",arrow:"left",overlays:{main:"transparent",sidebar:"transparent",topMenu:"dark",template:"dark"},sidebar:!1,topMenu:!1,content:"<h3>Click on Layouts</h3>"},{position:"template:left-top",arrow:"left",overlays:{main:"transparent",sidebar:"transparent",topMenu:"dark",template:"dark"},sidebar:"layouts",topMenu:!1,content:"<h3>Click on Inner Page Layout</h3>"},{position:"template:center",arrow:!1,overlays:{main:"transparent",sidebar:"dark",topMenu:"dark",template:"light"},sidebar:!1,topMenu:!1,url:"admin/template/layout/content/",content:'<h3>You\'re in the right place!</h3><p>Your header and footer can be edited in "Inner Page Layout". These changes will be applied to all pages using this layout.</p>'}]},{title:"How to change or edit templates",order:3,type:"flow",flow:"forced",data:[{position:"topMenuItem:modules:container:right",arrow:"top",overlays:{main:"transparent",sidebar:"dark",topMenu:"transparent",template:"dark"},sidebar:!1,topMenu:!1,content:"<h3>Hover over Modules > Create</h3>"},{position:"topMenuItem:modules:dropdown:right",arrow:"left",overlays:{main:"transparent",sidebar:"dark",topMenu:"transparent",template:"dark"},sidebar:!1,topMenu:"modules",content:"<h3>Click on Templates</h3>"},{position:"template:top",arrow:"bottom",overlays:{main:"transparent",sidebar:"dark",topMenu:"dark",template:"transparent"},sidebar:!1,topMenu:!1,url:"admin/template-library",content:"<h3>Here are your existing templates</h3><p>You can customize any of these</p>"},{position:"template:top",arrow:"bottom",overlays:{main:"transparent",sidebar:"dark",topMenu:"dark",template:"transparent"},sidebar:!1,topMenu:!1,content:"<h3>Click Template Library</h3><p>To browse new templates</p>"},{position:"template:center",arrow:!1,overlays:{main:"transparent",sidebar:"dark",topMenu:"dark",template:"light"},sidebar:!1,topMenu:!1,content:'<h3>Here you can download new templates</h3><p>By hovering over the template and clicking "Install"</p>'}]},{title:"How to edit styles",order:4,type:"flow",flow:"forced",data:[{position:"topMenuItem:modules:container:right",arrow:"top",overlays:{main:"transparent",sidebar:"dark",topMenu:"transparent",template:"dark"},sidebar:!1,topMenu:!1,content:"<h3>Hover over Modules > Create</h3>"},{position:"topMenuItem:modules:dropdown:right",arrow:"left",overlays:{main:"transparent",sidebar:"dark",topMenu:"transparent",template:"dark"},sidebar:!1,topMenu:"modules",content:"<h3>Click on Templates</h3>"},{position:"template:top",arrow:"bottom",overlays:{main:"transparent",sidebar:"dark",topMenu:"dark",template:"transparent"},sidebar:!1,topMenu:!1,url:"admin/template-library",content:'<h3>Hover over any of your existing templates</h3><p>And select "Customize"</p>'},{position:"template:top",arrow:"bottom",overlays:{main:"transparent",sidebar:"dark",topMenu:"dark",template:"transparent"},sidebar:!1,topMenu:!1,url:"admin/template/editor/edit/",content:"<h3>Click on Template Default Styles</h3>"},{position:"template:center",arrow:!1,overlays:{main:"transparent",sidebar:"dark",topMenu:"dark",template:"light"},sidebar:!1,topMenu:!1,content:"<h3>Select any text style</h3><p>To edit the font, colours, etc.</p>"}]},{title:"Help Tour",order:1,type:"tour",data:[{position:"window:center",arrow:!1,overlays:{main:"transparent",sidebar:"dark",topMenu:"dark",template:"dark"},sidebar:!1,topMenu:!1,content:"<h3>QuickSilk Online Tour!</h3><p>Welcome to QuickSilk! Use the buttons at the bottom of each help bubble to quickly discover how to navigate and use the QuickSilk software. This online tour automatically appears the first time you login. Anytime after this, simply click on the help tour menu item for a quick refresher.</p>"},{position:"topMenuItem:user:dropdown:left",arrow:"right",overlays:{main:"transparent",sidebar:"dark",topMenu:"transparent",template:"dark"},sidebar:!1,topMenu:"user",content:"<h3>User Menu</h3><p>Click on your name to view the admin panel (future), your profile, or to logout. The View Profile link provides the ability to manage your subscription and billing, password, forum settings, working groups and public profile.</p>"},{position:"topMenuItem:modules:dropdown:right",arrow:"left",overlays:{main:"transparent",sidebar:"dark",topMenu:"transparent",template:"dark"},sidebar:!1,topMenu:"modules",content:"<h3>Modules</h3><p>The Module manager allows you to work on your modules from the administration panel. Simply mouse over the Modules menu and then scroll down and click on the module you wish to work with. </p>"},{position:"template:left-top",arrow:"left",overlays:{main:"transparent",sidebar:"transparent",topMenu:"dark",template:"dark"},sidebar:!1,topMenu:!1,content:"<h3>Left Panel Slider</h3><p>The left slider widget provides you with quick access to the modules, pages, layouts and template features. Simply click on the icon for the tab you wish to use.</p>"},{position:"template:left-top",arrow:"left",overlays:{main:"transparent",sidebar:"transparent",topMenu:"dark",template:"dark"},sidebar:"template-manager",topMenu:!1,content:"<h3>Installed Modules</h3><p>The modules tab provides quick access to the modules that you've subscribed to. Once you've opened a page or a template, open the modules tab to drag and drop the modules you wish to include.</p>"},{position:"template:left-top",arrow:"left",overlays:{main:"transparent",sidebar:"transparent",topMenu:"dark",template:"dark"},sidebar:"pages",topMenu:!1,content:"<h3>Site Pages</h3><p>The site pages tab allows you to quickly open, modify and manage your website pages. Simply open the tab and click on the web page you wish to work on.</p>"},{position:"template:left-top",arrow:"left",overlays:{main:"transparent",sidebar:"transparent",topMenu:"dark",template:"dark"},sidebar:"layouts",topMenu:!1,content:"<h3>Page Layouts</h3><p>Use the page layout tab to open, modify and manage the layouts of your various web page templates. A page layout will consist of the common elements you have on every page.</p>"},{position:"template:left-top",arrow:"left",overlays:{main:"transparent",sidebar:"transparent",topMenu:"dark",template:"dark"},sidebar:"templates",topMenu:!1,content:"<h3>Templates</h3><p>The templates tab displays the different custom or predesigned templates that you've installed and are immediately available for use on your website. If you want to view or install other templates, you'll do so from the template gallery.</p>"},{position:"template:center",arrow:!1,overlays:{main:"transparent",sidebar:"dark",topMenu:"dark",template:"light"},sidebar:!1,topMenu:!1,content:"<h3>Drop Area</h3><p>The drop area is where you drag and drop the modules. To move a module onto a page or template place your mouse on the desired module icon, hold down the left button on your mouse, and drag the module to the highlighted area of the page you wish to drop it, then let go of the mouse button.</p>"},{position:"topMenuItem:support:container:right",arrow:"top",overlays:{main:"transparent",sidebar:"dark",topMenu:"transparent",template:"dark"},sidebar:!1,topMenu:"support",content:"<h3>Need Help?</h3><p>Are you stuck, experiencing an issue, found a bug or have a suggestion? Simply click on this link and send us a message. FYI, to assist in the troubleshooting process we automatically collect information on the operating system, browser and browser version you are using. Our goal is to respond to your message within 1 business day.</p>"}]}],App._Blocks={},cm.define("App.Block",{extend:"Com.AbstractController",events:["onRemove","onEnableEditing","onDisableEditing","onToggleVisibility"],params:{renderStructure:!1,embedStructureOnRender:!1,removeOnDestruct:!0,controllerEvents:!0,customEvents:!1,resizeEvent:!0,scrollEvent:!0,type:"template-manager",instanceId:!1,positionId:0,zone:0,parentPositionId:0,layerId:0,index:!1,locked:!1,visible:!0,removable:!0,sticky:!1,animated:!1,effect:"none",editorName:"app-editor",templateName:"app-template",templateController:"Template"}},function(){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("App.Block",function(e,n,t,o){t.onConstructStart=function(){var e=this;e.nodes={container:cm.node("div"),block:{container:cm.node("div"),inner:cm.node("div"),drag:[],menu:{edit:cm.node("div"),duplicate:cm.node("div"),delete:cm.node("div")}}},e.isTemplateRequired=!1,e.isDummy=!1,e.isRemoved=!1,e.isEditing=null,e.isVisible=null,e.isProcessed=!1,e.styleObject=null,e.dimensions=null,e.pageDimensions={},e.index=null,e.node=null,e.zone=null,e.zones=[],e.constructZoneHandler=e.constructZone.bind(e),e.animProcessHandler=e.animProcess.bind(e)},t.onValidateParamsEnd=function(){var e=this,n=(e.node=e.params.node,cm.isNumber(e.params.instanceId)||cm.isString(e.params.instanceId)?(e.params.name=[e.params.type,e.params.instanceId,e.params.positionId].join("_"),e.params.zoneName=[e.params.type,e.params.instanceId,e.params.parentPositionId,e.params.zone].join("_")):(e.params.name=[e.params.type,e.params.positionId].join("_"),e.params.zoneName=[e.params.type,e.params.parentPositionId,e.params.zone].join("_")),e.node.getAttribute("data-index"));cm.isEmpty(n)||(e.params.index=parseInt(n),e.params.node.removeAttribute("data-index")),e.index=e.params.index,e.params.animated&&(e.params.animated=!(cm.isEmpty(e.params.effect)||"none"===e.params.effect)),App._Blocks[e.params.name]=e},t.onDestructStart=function(){var e=this;for(e.destructZone(e.zone),e.destructEditor(e.components.editor);e.zones.length;)e.zones[0].remove();delete App._Blocks[e.params.name]},t.onSetEvents=function(){cm.customEvent.add(this.node,"redraw",this.redrawHandler)},t.onUnsetEvents=function(){cm.customEvent.remove(this.node,"redraw",this.redrawHandler)},t.onRedraw=function(){this.getDimensions(),this.isEditing?this.redrawOnEditing():this.redrawOnNormal()},t.onScroll=function(){this.isEditing||this.animProcess()},t.renderViewModel=function(){var n=this;o.prototype.renderViewModel.apply(n,arguments),n.getTemplate(),cm.find("App.Editor",n.params.editorName,null,function(e){new cm.Finder("App.Zone",n.params.zoneName,null,n.constructZoneHandler),n.constructEditor(e)})},t.redrawOnNormal=function(){var e,n,t,o=this;o.params.sticky&&(cm.addClass(o.node,"is-sticky"),o.getTemplate(),o.components.template)&&(e=cm.getPageSize("winHeight")-o.dimensions.margin.top-o.dimensions.margin.bottom-(o.components.template.getTopMenuDimensions("height")||0)-(o.components.template.getFixedHeaderHeight()||0),n=o.dimensions.margin.top+(o.components.template.getTopMenuDimensions("height")||0)+(o.components.template.getFixedHeaderHeight()||0),t=o.dimensions.margin.bottom,o.node.style.top=n+"px",o.node.style.bottomIndent=t+"px",o.nodes.block.container.style.maxHeight=e+"px"),o.params.animated&&o.animEnable()},t.redrawOnEditing=function(){var e=this;e.params.sticky&&(cm.removeClass(e.node,"is-sticky"),e.node.style.top="",e.node.style.bottom="",e.nodes.block.container.style.maxHeight=""),e.params.animated&&e.animDisable()},t.animEnable=function(){var e=this;return cm.addClass(e.nodes.block.container,"cm-animate"),cm.addClass(e.nodes.block.container,["pre",e.params.effect].join("-")),e.animRestore(),e.animProcess(),e},t.animDisable=function(){var e=this;return cm.removeClass(e.nodes.block.container,"cm-animate"),cm.removeClass(e.nodes.block.container,["pre",e.params.effect].join("-")),cm.removeClass(e.nodes.block.container,"animate__animated"),cm.removeClass(e.nodes.block.container,["animate",e.params.effect].join("__")),e},t.animProcess=function(){var e=this;e.isProcessed||(e.getDimensions(),e.getPageDimensions(),e.dimensions.offset.height<e.pageDimensions.winHeight?0<=e.dimensions.offset.top&&e.dimensions.offset.bottom<=e.pageDimensions.winHeight&&e.animSet():(e.dimensions.offset.top<0&&e.dimensions.bottom>=e.pageDimensions.winHeight/2||e.dimensions.offset.bottom>e.pageDimensions.winHeight&&e.dimensions.offset.top<=e.pageDimensions.winHeight/2)&&e.animSet())},t.animRestore=function(){this.isProcessed=!1,cm.removeClass(this.nodes.block.container,"animate__animated"),cm.removeClass(this.nodes.block.container,["animate",this.params.effect].join("__"))},t.animSet=function(){this.isProcessed=!0,cm.addClass(this.nodes.block.container,"animate__animated"),cm.addClass(this.nodes.block.container,["animate",this.params.effect].join("__"))},t.addZone=function(e){return this.zones.push(e),this},t.removeZone=function(e){return cm.arrayRemove(this.zones,e),this},t.setZone=function(e,n){var t=this;return t.index=n,t.destructZone(t.zone),t.constructZone(e),t},t.unsetZone=function(){return this.destructZone(this.zone),this},t.constructZone=function(e){e&&(this.zone=e,this.zone.addBlock(this,this.index))},t.destructZone=function(e){e&&(this.zone=e,this.zone.removeBlock(this),this.zone=null)},t.constructEditor=function(e){e&&(this.components.editor=e,this.components.editor.addBlock(this,this.index))},t.destructEditor=function(e){e&&(this.components.editor=e,this.components.editor.removeBlock(this))},t.getTemplate=function(){var n=this;n.components.template||(n.components.template=cm.reducePath(n.params.templateController,window),n.components.template)||cm.find("App.Template",n.params.templateName,null,function(e){n.components.template=e})},t.enableEditing=function(){var e=this;return cm.isBoolean(e.isEditing)&&e.isEditing||(e.isEditing=!0,cm.addClass(e.node,"is-editing"),e.params.locked||(cm.addClass(e.node,"is-editable"),cm.customEvent.trigger(e.node,"enableEditable",{direction:"child",self:!1})),cm.customEvent.trigger(e.node,"enableEditing",{direction:"child",self:!1}),e.triggerEvent("onEnableEditing"),cm.removeClass(e.nodes.block.container,"cm__animate"),e.toggleVisibility(!0)),e},t.disableEditing=function(){var e=this;return cm.isBoolean(e.isEditing)&&!e.isEditing||(e.isEditing=!1,cm.removeClass(e.node,"is-editing"),e.params.locked||(cm.removeClass(e.node,"is-editable"),cm.customEvent.trigger(e.node,"disableEditable",{direction:"child",self:!1})),cm.customEvent.trigger(e.node,"disableEditing",{direction:"child",self:!1}),e.triggerEvent("onDisableEditing"),cm.addClass(e.nodes.block.container,"cm__animate"),e.toggleVisibility(e.params.visible)),e},t.register=function(e){var n=App._Zones[this.params.zoneName];return this.constructZone(n),this.constructEditor(e),this},t.remove=function(){var e=this;return e.isRemoved||(e.isRemoved=!0,e.destruct(),e.triggerEvent("onRemove")),e},t.getIndex=function(){var e=this;return e.zone?(e.index=e.zone.getBlockIndex(e),e.index):null},t.getLower=function(){var e=this.getIndex();return this.zone.getBlock(e+1)||null},t.getUpper=function(){var e=this.getIndex();return this.zone.getBlock(e-1)||null},t.getDragNodes=function(){var n=[];return cm.forEach(this.nodes.block.drag,function(e){n.push(e.container)}),n},t.getMenuNodes=function(){return this.nodes.block.menu},t.getInnerNode=function(){return this.nodes.block.inner},t.getDimensions=function(){var e=this;return e.styleObject||(e.styleObject=cm.getStyleObject(e.node)),e.dimensions=cm.getNodeOffset(e.node,e.styleObject,null),e.dimensions},t.updateDimensions=function(){var e=this;return e.dimensions=cm.getNodeOffset(e.node,e.styleObject,e.dimensions),e.dimensions},t.getPageDimensions=function(){return this.pageDimensions=cm.getPageSize(),this.pageDimensions},t.toggleVisibility=function(e){var n=this;return cm.isBoolean(n.isVisible)&&n.isVisible===e||(n.isVisible=e,cm.toggleClass(n.node,"is-visible",e),cm.toggleClass(n.node,"is-hidden",!e),cm.customEvent.trigger(n.node,"toggleVisibility",{state:e,direction:"child",self:!1}),n.triggerEvent("onToggleVisibility",e),n.redraw()),n}}),cm.define("App.Chart",{extend:"Com.AbstractController",params:{renderStructure:!0,embedStructureOnRender:!0,embedStructure:"append",width:"auto",height:"auto",type:"doughnut",showLegend:!1,simpleData:[],simpleOptions:{},simpleBackgroundColor:"@LESS.CmColor-Primary-DarkDefault",data:{},options:{}}},function(e){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("App.Chart",function(e,n,t,o){t.renderView=function(){var e=this;e.triggerEvent("onRenderViewStart"),e.nodes.container=cm.node("div",{class:"app__chart"},e.nodes.canvas=cm.node("canvas",{width:e.params.width,height:e.params.height}),e.nodes.legend=cm.node("div",{class:"chart__legend"})),e.triggerEvent("onRenderViewProcess"),e.triggerEvent("onRenderViewEnd")},t.renderViewModel=function(){var n=this;cm.isEmpty(n.params.simpleData)||n.processSimpleData(),cm.loadScript({path:"Chart",src:"%AppAssetsUrl%/libs/chartjs/Chart.min.js?%AppVersion%",callback:function(e){e&&(n.components.chart=new e(n.nodes.canvas,{type:n.params.type,data:n.params.data,options:n.params.options}),n.params.showLegend)&&(n.nodes.legend.innerHTML=n.components.chart.generateLegend())}})},t.processSimpleData=function(){var n=this,t=cm.merge({data:[],backgroundColor:n.params.simpleBackgroundColor},n.params.simpleOptions);n.params.data={labels:[],datasets:[t]},cm.forEach(n.params.simpleData,function(e){n.params.data.labels.push(e.label),t.data.push(e.value)})}}),cm.define("App.ChartHubspotContacs",{extend:"App.Chart",params:{width:"100%",height:"30em",type:"horizontalBar",simpleOptions:{label:"Count of Contacts",fill:!1},options:{scales:{xAxes:[{ticks:{beginAtZero:!0}}]}}}},function(e){App.Chart.apply(this,arguments)}),cm.define("App.Dashboard",{modules:["Params","Events"],events:["onRenderStart","onRender","onDragStart","onMove","onDrop","onRemoveStart","onRemove","onRemoveEnd","onReplaceStart","onReplace","onReplaceEnd","onAppendStart","onAppend","onAppendEnd"],params:{draggableContainer:"document.body",scrollNode:"document.body",scrollSpeed:1,scrollStep:48,useGracefulDegradation:!0,dropDuration:400,moveDuration:200,highlightPlaceholders:!0,placeholderHeight:0,"Com.Overlay":{container:"document.body",duration:0,autoOpen:!1,removeOnClose:!0,showSpinner:!1,showContent:!1,position:"fixed",theme:"transparent"}}},function(e){function o(e,n){if(!e.button&&!r.isProccess&&!r.currentBlock){r.isProccess=!0,r.pointerType=e.type;var t=C(e);switch(t.state="start",cm.addClass(document.body,"app__dashboard__body"),r.components.overlays.open(),r.currentZones=g(n),r.currentBlocks=f(n),r.triggerEvent("onDragStart",{item:n,node:n.node,zone:n.zone}),l(n,t),y(),h(),b(v(t)),r.pointerType){case"mousedown":cm.addEvent(window,"mousemove",i),cm.addEvent(window,"mouseup",c);break;case"touchstart":cm.addEvent(window,"touchmove",i),cm.addEvent(window,"touchend",c)}cm.addEvent(window,"scroll",d),cm.customEvent.add(window,"pageSizeChange",d),cm.preventDefault(e)}}function a(e,n){var t;r.isProccess=!0,(n=cm.merge({onStart:function(){},onEnd:function(){},triggerEvent:!0},n)).onStart(),n.triggerEvent&&r.triggerEvent("onRemoveStart",e),e.node&&cm.hasParentNode(e.node)?(e.updateDimensions(),cm.addClass(e.node,"is-dropping",!0),e===r.currentBlock?(t=e.node,m(e,{left:-e.dimensions.outer.width,top:e.dimensions.outer.top,opacity:0})):(t=cm.Node("div",{class:"app__dashboard__helper"}),cm.insertAfter(t,e.node),cm.appendChild(e.node,t),cm.transition(t,{properties:{height:"0px",opacity:0},duration:r.params.dropDuration}))):t=e.node,setTimeout(function(){cm.remove(t),e.unsetZone().remove(),n.triggerEvent&&(r.triggerEvent("onRemove",e),r.triggerEvent("onRemoveEnd",e)),r.isProccess=!1,n.onEnd()},r.params.dropDuration)}function t(e){var n=0,t=0;0===e?(r.isScrollProccess=!1,r.anim.scroll.stop()):r.isScrollProccess||(r.isScrollProccess=!0,n=e<0?(t=0,cm.getBodyScrollTop()*r.params.scrollSpeed):(t=Math.max(cm.getBodyScrollHeight()-cm._pageSize.winHeight,0))*r.params.scrollSpeed,r.anim.scroll.go({style:{docScrollTop:t},duration:n,anim:"smooth"}))}var r=this,s=(r.isGracefulDegradation=!1,r.isScrollProccess=!1,r.isProccess=!1,r.pointerType=null,r.components={},r.anim={},r.zones=[],r.blocks=[],r.dummyBlocks=[],r.currentZones=null,r.currentBlocks=null,r.currentBlock=null,r.currentBlockZone=null,r.currentBlockOffset=null,r.currentBellow=null,function(){if(r.currentBellow&&r.currentBellow.zone)r.currentBellow.zone.unactive();u(),r.currentZones=[],r.currentBlocks=[],r.currentBlock=null,r.currentBlockZone=null,r.currentBlockOffset={left:0,top:0},r.currentBellow={zone:null,block:null,position:null},r.isProccess=!1}),i=function(e){var n=C(e);n.state="move",n.top+r.params.scrollStep>cm._pageSize.winHeight?t(1):n.top-r.params.scrollStep<0?t(-1):t(0),m(r.currentBlock,n,!0),b(v(n)),cm.preventDefault(e)},c=function(){if(r.currentBellow.zone&&"remove"!==r.currentBellow.zone.params.type){var e,n,t=r.currentBlock,o={index:r.currentBellow.index,zone:r.currentBellow.zone,placeholder:r.placeholder,onEnd:s};if((o=cm.merge({index:0,zone:null,placeholder:null,onStart:function(){},onEnd:function(){}},o))["onStart"](),o.zone.getDimensions(),t.isDummy)t.showSpinner();if(e=o.zone.dimensions["inner"]["width"]-t.dimensions["margin"]["left"]-t.dimensions["margin"]["right"],t.node.style.width=[e,"px"].join(""),n=t.node.offsetHeight+t.dimensions["margin"]["top"]+t.dimensions["margin"]["bottom"],t.node.style.width=[t.dimensions["offset"]["width"],"px"].join(""),cm.addClass(t.node,"is-dropping",true),o.placeholder){o.placeholder.getDimensions();m(t,{left:o.placeholder.dimensions["outer"]["left"]-t.dimensions["margin"]["left"],top:o.placeholder.dimensions["outer"]["top"]-t.dimensions["margin"]["top"],width:e});o.placeholder.show(n,r.params["dropDuration"],true)}else m(t,{left:o.zone.dimensions["inner"]["left"]-t.dimensions["margin"]["left"],top:o.zone.dimensions["inner"]["top"]-t.dimensions["margin"]["top"],width:e});setTimeout(function(){p(t);if(o.placeholder)cm.insertAfter(t.node,o.placeholder.node);else cm.appendChild(t.node,o.zone.node);t.setZone(o.zone,o["index"]);r.triggerEvent("onDrop",t);o["onEnd"]()},r.params["dropDuration"])}else a(r.currentBlock,{onEnd:s});switch(cm.forEach(r.currentZones,function(e){e.unhighlight()}),r.components.overlays.close(),cm.removeClass(document.body,"app__dashboard__body"),r.pointerType){case"mousedown":cm.removeEvent(window,"mousemove",i),cm.removeEvent(window,"mouseup",c);break;case"touchstart":cm.removeEvent(window,"touchmove",i),cm.removeEvent(window,"touchend",c)}cm.removeEvent(window,"scroll",d),cm.customEvent.remove(window,"pageSizeChange",d)},d=function(e){e=C(e);h(),b(v(e))},l=function(e,n){var t=e.getDimensions();r.currentBlockOffset.top=n.top-t.outer.top,r.currentBlockOffset.left=n.left-t.outer.left,e.isDummy?r.currentBlock=e.clone():(r.currentBlockZone=e.zone,r.currentBlock=e.unsetZone()),cm.appendChild(r.currentBlock.node,r.params.draggableContainer),cm.addClass(r.currentBlock.node,"is-immediately"),cm.addClass(r.currentBlock.node,"is-dragging"),cm.addClass(r.currentBlock.node,"is-active",!0),m(r.currentBlock,{top:t.outer.top,left:t.outer.left,width:t.offset.width}),r.currentBlock.updateDimensions(),setTimeout(function(){cm.removeClass(r.currentBlock.node,"is-immediately")},5)},m=function(e,n,t){var o=n.top,a=n.left,e=n.node||e.node;t&&(o-=r.currentBlockOffset.top,a-=r.currentBlockOffset.left),cm.isUndefined(n.width)||(e.style.width=[n.width,"px"].join("")),cm.isUndefined(n.height)||(e.style.height=[n.height,"px"].join("")),cm.isUndefined(n.opacity)||(e.style.opacity=n.opacity),cm.setCSSTranslate(e,[a,"px"].join(""),[o,"px"].join(""))},p=function(e){cm.removeClass(e.node,"is-immediately is-dragging is-dropping is-active",!0),e.node.style.left="",e.node.style.top="",e.node.style.width="",e.node.style.opacity="",cm.clearCSSTranslate(e.node)},n=function(e){r.placeholder||(r.placeholder=new App.DashboardPlaceholder({highlight:r.params.highlightPlaceholders,animate:!r.isGracefulDegradation,events:{onShowEnd:h}})),"start"!==e.params.state||r.currentBlock.isDummy||r.placeholder.show(r.currentBlock.dimensions.outer.height),e.block?r.placeholder.embed(e.block.node,e.position):e.zone&&r.placeholder.embed(e.zone.node,"last"),r.placeholder.show(r.params.placeholderHeight,r.params.moveDuration)},u=function(){r.placeholder&&r.placeholder.remove()},h=function(){cm.forEach(r.currentZones,function(e){e.updateDimensions()}),cm.forEach(r.currentBlocks,function(e){e.updateDimensions()})},g=function(n){return r.zones.filter(function(e){return!(e.params.locked||"remove"!==e.params.type&&n.params.type!==e.params.type||"remove"===e.params.type&&!n.params.removable||cm.inArray(e.params.disallow,n.params.keyword)||cm.isParent(n.params.node,e.params.node))})},f=function(n){return r.blocks.filter(function(e){return n.params.type===e.params.type&&!cm.isParent(n.params.node,e.params.node)})},v=function(n){var e,t,o={zone:null,block:null,index:0,position:null,params:n};return cm.forEach(r.currentZones,function(e){n.left>=e.dimensions.offset.left&&n.left<e.dimensions.offset.right&&n.top>=e.dimensions.offset.top&&n.top<=e.dimensions.offset.bottom&&(!o.zone||e.dimensions.offset.width<o.zone.dimensions.offset.width||e.dimensions.offset.height<o.zone.dimensions.offset.height)&&(o.zone=e)}),o.zone||(o.zone=r.currentBellow.zone),o.zone||(o.zone=r.currentBlockZone),o.zone&&(cm.forEach(o.zone.blocks,function(e){n.top>=e.dimensions.outer.top&&n.top<=e.dimensions.outer.bottom&&(o.block=e,n.top-e.dimensions.outer.top<e.dimensions.outer.height/2?o.position="top":o.position="bottom")}),!o.block)&&o.zone.blocks.length&&(e=o.zone.blocks[0],t=o.zone.blocks[o.zone.blocks.length-1],e&&n.top<e.dimensions.outer.top?(o.block=e,o.position="top"):t&&(o.block=t,o.position="bottom")),o.block&&(o.index="top"===o.position?o.block.getIndex():o.block.getIndex()+1),o},b=function(e){r.currentBellow.zone&&r.currentBellow.zone.isActive&&r.currentBellow.zone!==e.zone&&r.currentBellow.zone.unactive(),e.zone&&!e.zone.isActive&&e.zone.active(),e.block||e.zone?n(e):u(),r.currentBellow=e},y=function(){cm.forEach(r.currentZones,function(e){e.highlight()})},C=function(e){return/pageSizeChange|sctoll/.test(e.type)?cm._clientPosition:cm.getEventClientPosition(e)};r.addBlock=function(e){var n,t;return e.isDummy?(t=e,cm.forEach(t.getDragNodes(),function(e){cm.addEvent(e,"touchstart",function(e){o(e,t)}),cm.addEvent(e,"mousedown",function(e){o(e,t)})}),r.dummyBlocks.push(t)):(n=e,cm.forEach(n.getDragNodes(),function(e){cm.addEvent(e,"touchstart",function(e){o(e,n)}),cm.addEvent(e,"mousedown",function(e){o(e,n)}),cm.addEvent(e,"contextmenu",function(e){cm.preventDefault(e)})}),p(n),r.blocks.push(n)),r},r.removeBlock=function(e,n){return a(e,n),r},r.replaceBlock=function(e,n){var t,o,a;return t=e,o=n,e=r.params.dropDuration/2,r.isProccess=!0,(o=cm.merge({block:null,zone:null,triggerEvent:!0,index:!1,onStart:function(){},onEnd:function(){}},o)).onStart(),o.triggerEvent&&r.triggerEvent("onReplaceStart",{node:t}),cm.isNumber(o.index)&&t.setAttribute("data-index",o.index.toString()),a=cm.node("div"),o.block?(cm.insertAfter(a,o.block.node),cm.appendChild(o.block.node,a),cm.appendChild(t,a),cm.transition(o.block.node,{properties:{opacity:0},duration:e})):(cm.appendChild(a,o.zone.node),cm.appendChild(t,a),a.style.height=0),cm.addClass(t,"is-replacing",!0),cm.addClass(a,"app__dashboard__helper",!0),n=cm.getNodeOffset(t),cm.transition(a,{properties:{height:[n.outer.height,"px"].join("")},duration:r.params.dropDuration}),cm.transition(t,{properties:{opacity:1},duration:e,delayIn:e}),setTimeout(function(){o.block&&o.block.unsetZone().remove(),cm.removeClass(t,"is-replacing"),cm.insertAfter(t,a),cm.remove(a),o.triggerEvent&&(r.triggerEvent("onReplace",{node:t}),r.triggerEvent("onReplaceEnd",{node:t})),r.isProccess=!1,o.onEnd()},r.params.dropDuration),r},r.appendBlock=function(e,n){var t,o,a;return t=e,o=n,r.isProccess=!0,(o=cm.merge({block:null,zone:null,triggerEvent:!0,index:!1,onStart:function(){},onEnd:function(){}},o)).onStart(),o.triggerEvent&&r.triggerEvent("onAppendStart",{node:t}),cm.isNumber(o.index)&&t.setAttribute("data-index",o.index.toString()),(a=cm.node("div")).style.height=0,o.block?cm.insertAfter(a,o.block.node):cm.appendChild(a,o.zone.node),cm.appendChild(t,a),cm.addClass(t,"is-replacing",!0),cm.addClass(a,"app__dashboard__helper",!0),e=cm.getNodeOffset(t),cm.transition(a,{properties:{height:[e.outer.height,"px"].join("")},duration:r.params.dropDuration}),cm.transition(t,{properties:{opacity:1},duration:r.params.dropDuration}),setTimeout(function(){cm.removeClass(t,"is-replacing"),cm.insertAfter(t,a),cm.remove(a),o.triggerEvent&&(r.triggerEvent("onAppend",{node:t}),r.triggerEvent("onAppendEnd",{node:t})),r.isProccess=!1,o.onEnd()},r.params.dropDuration),r},r.addZone=function(e){return r.zones.push(e),r},r.params.dropDuration=cm.getTransitionDurationFromLESS("AppDashboard-DropDuration",r.params.dropDuration),r.params.moveDuration=cm.getTransitionDurationFromLESS("AppDashboard-MoveDuration",r.params.moveDuration),r.setParams(e),r.convertEvents(r.params.events),r.params["Com.Overlay"].container=r.params.draggableContainer,cm.isMobile()&&(r.isGracefulDegradation=!0),r.isGracefulDegradation=!0,r.triggerEvent("onRenderStart"),s(),cm.getConstructor("Com.Overlay",function(e){r.components.overlays=new e(r.params["Com.Overlay"])}),r.anim.scroll=new cm.Animation(r.params.scrollNode),r.triggerEvent("onRender")}),cm.define("App.DashboardPlaceholder",{modules:["Params","Events","Langs"],events:["onRenderStart","onRender","onShowEnd","onHideEnd"],params:{highlight:!0,animate:!0,container:cm.node("div"),insert:"appendChild"}},function(e){var o=this;o.nodes={},o.node=null,o.container=null,o.insert=null,o.styleObject=null,o.offsets=null,o.dimensions=null,o.isAnimate=!1,o.isShow=!1,o.isEmbed=!1,o.transitionInterval=null,o.transitionDurationProperty=null,o.height=0;o.embed=function(e,n){if(cm.isNode(e)){switch(n){case"top":n="insertBefore";break;case"bottom":n="insertAfter";break;case"first":n="insertFirst";break;default:n="appendChild"}o.container===e&&o.insert===n||(o.isEmbed=!0,o.container=e,o.insert=n,cm[o.insert](o.node,o.container),o.getDimensions())}return o},o.remove=function(){return cm.remove(o.node),o.isEmbed=!1,o.container=null,o.insert=null,o.height=null,o.nodes.container.style.height="0px",o},o.show=function(e,n,t){return t=cm.isUndefined(t)?o.isAnimate:t,e!==o.height&&(o.isShow=!0,t&&(o.nodes.container.style[o.transitionDurationProperty]=[n,"ms"].join("")),o.height=e,o.nodes.container.style.height=[o.height,"px"].join(""),o.transitionInterval&&clearTimeout(o.transitionInterval),o.transitionInterval=setTimeout(function(){o.triggerEvent("onShowEnd")},n+30)),o},o.hide=function(e,n){return n=cm.isUndefined(n)?o.isAnimate:n,height!==o.height&&(o.isShow=!1,n&&(o.nodes.container.style[o.transitionDurationProperty]=[e,"ms"].join("")),o.height=0,o.nodes.container.style.height=[o.height,"px"].join(""),o.transitionInterval&&clearTimeout(o.transitionInterval),o.transitionInterval=setTimeout(function(){o.triggerEvent("onHideEnd")},e+30)),o},o.getDimensions=function(){return o.styleObject||(o.styleObject=cm.getStyleObject(o.node)),o.dimensions=cm.getNodeOffset(o.node,o.styleObject,null),o.dimensions},o.updateDimensions=function(){return o.dimensions=cm.getNodeOffset(o.node,o.styleObject,o.dimensions),o.dimensions},o.setParams(e),o.convertEvents(o.params.events),o.transitionDurationProperty=cm.getSupportedStyle("transition-duration"),o.isAnimate=o.params.animate&&o.transitionDurationProperty,o.triggerEvent("onRenderStart"),o.nodes.container=cm.node("div",{class:"app__dashboard__placeholder is-active is-highlight"}),o.node=o.nodes.container,o.embed(o.params.container,o.params.insert),o.triggerEvent("onRender")}),App._DummyBlocks=[],cm.define("App.DummyBlock",{modules:["Params","Events","DataNodes","DataConfig","Stack"],events:["onRenderStart","onRender","onRemove"],params:{node:cm.Node("div"),name:"",keyword:"",type:"template-manager",removable:!0,editorName:"app-editor"}},function(e){function t(e){e&&(o.zone=e,o.zone.removeBlock(o),o.zone=null)}var o=this,n=(o.isDummy=!0,o.isEditing=!1,o.isRemoved=!1,o.styleObject=null,o.dimensions=null,o.components={},o.nodes={container:cm.node("div"),dummy:cm.node("div")},o.index=null,o.node=null,o.zone=null,function(){o.params.name=[o.params.type,o.params.keyword].join("_"),App._DummyBlocks.push(o)}),a=function(){o.node=o.params.node,s(),o.getDimensions(),cm.find("App.Editor",o.params.editorName,null,r)},r=function(e){e&&(o.components.editor=e,o.components.editor.addBlock(o,o.index))},s=function(){o.nodes.spinner=cm.node("div",{class:"app__block-spinner"},cm.node("div",{class:"pt__box-loader is-absolute"},cm.node("div",{class:"inner"}))),o.nodes.container.appendChild(o.nodes.spinner)};o.register=function(e){return r(e),o},o.enableEditing=function(){return cm.isBoolean(o.isEditing)&&o.isEditing||(o.isEditing=!0,cm.addClass(o.params.node,"is-editing is-editable is-visible")),o},o.disableEditing=function(){return cm.isBoolean(o.isEditing)&&!o.isEditing||(o.isEditing=!1,cm.removeClass(o.params.node,"is-editing is-editable is-visible")),o},o.setZone=function(e,n){return o.index=n,t(o.zone),(n=e)&&(o.zone=n,o.zone.addBlock(o,o.index)),o},o.unsetZone=function(){return t(o.zone),o},o.getIndex=function(){return o.zone?(o.index=o.zone.getBlockIndex(o),o.index):null},o.getLower=function(){var e=o.getIndex();return o.zone.getBlock(e)||null},o.getUpper=function(){var e=o.getIndex();return o.zone.getBlock(e-1)||null},o.getDragNodes=function(){return[o.node]},o.showSpinner=function(){return cm.addClass(o.nodes.spinner,"is-visible",!0),o},o.hideSpinner=function(){return cm.removeClass(o.nodes.spinner,"is-visible"),o},o.clone=function(){var e={node:cm.clone(o.node,!0)};return o.cloneComponent(e)},o.remove=function(){return o.isRemoved||(o.isRemoved=!0,cm.arrayRemove(App._DummyBlocks,o),o.removeFromStack(),cm.remove(o.node),o.triggerEvent("onRemove")),o},o.getDimensions=function(){return o.styleObject||(o.styleObject=cm.getStyleObject(o.node)),o.dimensions=cm.getNodeOffset(o.node,o.styleObject,null),o.dimensions},o.updateDimensions=function(){return o.dimensions=cm.getNodeOffset(o.node,o.styleObject,o.dimensions),o.dimensions},o.setParams(e),o.convertEvents(o.params.events),o.getDataNodes(o.params.node),o.getDataConfig(o.params.node),n(),o.triggerEvent("onRenderStart"),a(),o.addToStack(o.params.node),o.triggerEvent("onRender")}),cm.define("App.Editor",{modules:["Params","Events","DataConfig","DataNodes","Stack","Storage"],events:["onRenderStart","onRender","onProcessStart","onExpand","onCollapse","onResize","create","place","replace","move","delete","update","duplicate","copy","createRequest","replaceRequest","moveRequest","deleteRequest","updateRequest","duplicateRequest","copyRequest","onProcessEnd"],params:{node:cm.node("div"),name:"app-editor",topMenuName:"app-topmenu",sidebarName:"app-sidebar",templateName:"app-template",editorType:"template-manager","App.Dashboard":{},"Com.Overlay":{container:"document.body",autoOpen:!1,removeOnClose:!0,showSpinner:!0,showContent:!1,position:"fixed",theme:"light"}}},function(e){var t=this,n=(t.types=["template-manager","form-manager","listing-directory-card"],t.components={},t.nodes={},t.zones=[],t.blocks=[],t.dummyBlocks=[],t.editorType=null,t.isRendered=!1,t.isProcessed=!1,t.isExpanded=null,function(){t.triggerEvent("onProcessStart"),cm.forEach(App._Zones,function(e){e.register(t)}),cm.forEach(App._Blocks,function(e){e.register(t)}),cm.forEach(App._DummyBlocks,function(e){e.register(t)}),cm.addClass(cm.getDocumentHtml(),"is-editor"),(t.components.sidebar&&t.components.sidebar.isExpanded?o:a)(),!t.components.sidebar&&t.components.topmenu&&cm.find("Com.GridlistHelper",null,null,function(e){e.enableEditing()}),t.isRendered=!0}),o=function(){cm.isBoolean(t.isExpanded)&&t.isExpanded||(t.isExpanded=!0,cm.replaceClass(cm.getDocumentHtml(),"is-editor--collapsed","is-editor--expanded"),cm.addClass(cm.getDocumentHtml(),"is-editing"),cm.forEach(t.zones,function(e){e.enableEditing()}),cm.forEach(t.blocks,function(e){e.enableEditing()}),cm.forEach(t.dummyBlocks,function(e){e.enableEditing()}),t.components.template.enableEditing(),t.triggerEvent("onExpand"))},a=function(){cm.isBoolean(t.isExpanded)&&!t.isExpanded||(t.isExpanded=!1,cm.replaceClass(cm.getDocumentHtml(),"is-editor--expanded","is-editor--collapsed"),cm.removeClass(cm.getDocumentHtml(),"is-editing"),cm.forEach(t.zones,function(e){e.disableEditing()}),cm.forEach(t.blocks,function(e){e.disableEditing()}),cm.forEach(t.dummyBlocks,function(e){e.disableEditing()}),t.components.template.disableEditing(),t.triggerEvent("onCollapse"))},r=function(e){cm.inArray(t.types,e)&&e!==t.editorType&&(t.editorType=e)},s=function(e,n){n.isDummy?t.createRequest(n):t.moveRequest(n)},i=function(e,n){n.isDummy||t.deleteRequest(n)};t.createRequest=function(e){return t.triggerEvent("createRequest",e),t},t.deleteRequest=function(e){return t.triggerEvent("deleteRequest",e),t},t.moveRequest=function(e){return t.triggerEvent("moveRequest",e),t},t.replaceRequest=function(e){return t.triggerEvent("replaceRequest",e),t},t.updateRequest=function(e){return t.triggerEvent("updateRequest",e),t},t.duplicateRequest=function(e){return t.triggerEvent("duplicateRequest",e),t},t.copyRequest=function(e){return t.triggerEvent("copyRequest",e),t},t.create=function(e,n){return e&&n&&(e=cm.isNode(e)?e:cm.strToHTML(e),t.components.dashboard.replaceBlock(e,{block:n,zone:n.zone,index:n.getIndex(),onEnd:function(){t.triggerEvent("create",e),t.triggerEvent("onProcessEnd",e),t.components.template.redraw()}})),t},t.place=function(e,n){return e&&n&&(e=cm.isNode(e)?e:cm.strToHTML(e),t.components.dashboard.appendBlock(e,{onEnd:function(){t.triggerEvent("place",e),t.triggerEvent("onProcessEnd",e),t.components.template.redraw()}})),t},t.replace=function(e,n){return e&&n&&(e=cm.isNode(e)?e:cm.strToHTML(e),t.components.dashboard.replaceBlock(e,{block:n,zone:n.zone,index:n.getIndex(),onEnd:function(){t.triggerEvent("replace",e),t.triggerEvent("onProcessEnd",e),t.components.template.redraw()}})),t},t.delete=function(e){return e&&t.components.dashboard.removeBlock(e,{triggerEvent:!1,onEnd:function(){t.triggerEvent("delete",e.node),t.triggerEvent("onProcessEnd",e.node),t.components.template.redraw()}}),t},t.duplicate=function(e,n){return e&&n&&(e=cm.isNode(e)?e:cm.strToHTML(e),t.components.dashboard.appendBlock(e,{block:n,zone:n.zone,index:n.getIndex()+1,onEnd:function(){t.triggerEvent("duplicate",e),t.triggerEvent("onProcessEnd",e),t.components.template.redraw()}})),t},t.copy=function(e,n){return e&&n&&(e=cm.isNode(e)?e:cm.strToHTML(e),t.triggerEvent("copy",e),t.triggerEvent("onProcessEnd",e),t.components.template.redraw()),t},t.update=function(e,n){return e&&n&&(e=cm.isNode(e)?e:cm.strToHTML(e),cm.clearNode(n.getInnerNode()),cm.appendChild(e,n.getInnerNode()),t.triggerEvent("update",e),t.triggerEvent("onProcessEnd",e),t.components.template.redraw()),t},t.addZone=function(e){return t.zones.push(e),t.components.dashboard.addZone(e),t.isRendered&&(t.components.sidebar&&t.components.sidebar.isExpanded?e.enableEditing():e.disableEditing()),t},t.removeZone=function(e){return cm.arrayRemove(t.zones,e),t},t.addBlock=function(e){var n;return(e.isDummy?t.dummyBlocks:(n=e.getMenuNodes(),cm.addEvent(n.edit,"click",function(){t.replaceRequest(e)}),cm.addEvent(n.duplicate,"click",function(){t.duplicateRequest(e)}),cm.addEvent(n.delete,"click",function(){t.deleteRequest(e)}),cm.addEvent(n.copy,"click",function(){t.copyRequest(e)}),t.blocks)).push(e),t.components.dashboard.addBlock(e),t.isRendered&&(t.components.sidebar&&t.components.sidebar.isExpanded?e.enableEditing():e.disableEditing()),t},t.removeBlock=function(e){return e.isDummy?cm.arrayRemove(t.dummyBlocks,e):cm.arrayRemove(t.blocks,e),t},t.setParams(e),t.convertEvents(t.params.events),t.getDataNodes(t.params.node),t.getDataConfig(t.params.node),t.addToStack(t.params.node),t.triggerEvent("onRenderStart"),t.editorType=t.params.editorType,cm.getConstructor("App.Dashboard",function(e,n){t.components.dashboard=new e(t.params[n]).addEvent("onDrop",s).addEvent("onRemove",i)}),cm.find("App.TopMenu",t.params.topMenuName,null,function(e){t.components.topmenu=e}),cm.find("App.Sidebar",t.params.sidebarName,null,function(e){t.components.sidebar=e.addEvent("onExpandEnd",o).addEvent("onCollapseStart",a).addEvent("onTabShow",function(e,n){r(n.id)})}),cm.find("App.Template",t.params.templateName,null,function(e){t.components.template=e}),n(),t.triggerEvent("onRender")}),cm.define("App.elFinderFileManager",{extend:"Com.AbstractFileManager",params:{lazy:!1,config:{url:"",lang:{},dotFiles:!1,useBrowserHistory:!1,resizable:!1,width:"auto",height:"auto",commandsOptions:{getfile:{folders:!1,multiple:!1}}}}},function(e){this.getFilesProcessType=null,this.isLoaded=!1,Com.AbstractFileManager.apply(this,arguments)}),cm.getConstructor("App.elFinderFileManager",function(e,n,t,o){t.construct=function(){this.getFilesEventHandler=this.getFilesEvent.bind(this),o.prototype.construct.apply(this,arguments)},t.get=function(){var e=this;return e.getFilesProcessType="get",e.components.controller?e.components.controller.exec("getfile"):o.prototype.get.apply(e,arguments),e},t.complete=function(){var e=this;return e.getFilesProcessType="complete",e.components.controller?e.components.controller.exec("getfile"):o.prototype.complete.apply(e,arguments),e},t.redraw=function(){return this.components.controller&&this.components.controller.resize("auto","auto"),this.triggerEvent("onRedraw"),this},t.renderController=function(){var e=this;return e.components.controller||("undefined"!=typeof elFinder?(e.isLoaded=!0,e.components.controller=new elFinder(e.nodes.holder.inner,cm.merge(e.params.config,{commandsOptions:{getfile:{multiple:e.isMultiple}},getFileCallback:e.getFilesEventHandler})),cm.removeClass(e.nodes.holder.container,"is-hidden",!0),e.components.controller.show(),e.components.controller.resize("auto","auto")):cm.errorLog({name:e._name.full,message:["elFinder does not exists."].join(" ")})),e},t.getFilesEvent=function(e){var n=this;return n.processFiles(e),("get"===n.getFilesProcessType?o.prototype.get:o.prototype.complete).call(n),n.getFilesProcessType=null,n},t.convertFile=function(e){return!(!e||"directory"===e.mime)&&{value:e.url,name:e.name,mime:e.mime,size:e.size,url:e.url,source:"elFinder"}}}),cm.define("App.elFinderFileManagerContainer",{extend:"Com.AbstractFileManagerContainer",params:{constructor:"App.elFinderFileManager"}},function(e){Com.AbstractFileManagerContainer.apply(this,arguments)}),cm.define("App.FileInput",{extend:"Com.FileInput",params:{fileManager:!0,fileManagerConstructor:"App.elFinderFileManagerContainer",fileUploader:!0,fileUploaderConstructor:"App.FileUploaderContainer"}},function(e){Com.FileInput.apply(this,arguments)}),cm.define("App.FileUploader",{extend:"Com.AbstractController",events:["onSelect","onComplete","onGet"],params:{max:0,completeOnSelect:!0,local:!0,localConstructor:"App.FileUploaderLocal",localParams:{embedStructure:"append",showStats:!0,fileList:!1},fileManagerLazy:!0,fileManager:!0,fileManagerConstructor:"App.elFinderFileManager",fileManagerParams:{embedStructure:"append",showStats:!0,fullSize:!0},stock:!1,stockConstructor:"App.ShutterstockManager",stockParams:{embedStructure:"append",showStats:!0,fullSize:!0},showStats:!1,statsConstructor:"Com.FileStats",statsParams:{embedStructure:"append",toggleBox:!1,inline:!0},"Com.Tabset":{embedStructure:"append",toggleOnHashChange:!1,calculateMaxHeight:!0}},strings:{tab_local:"Select From PC",tab_filemanager:"File Manager",tab_stock:"Shutterstock",browse_local_single:"Choose file",browse_local_multiple:"Choose files",or:"or",browse:"Browse"}},function(e){var n=this;n.nodes={},n.components={},n.items=[],n.activeTab=null,Com.AbstractController.apply(n,arguments)}),cm.getConstructor("App.FileUploader",function(e,n,t,o){t.construct=function(){this.completeHandler=this.complete.bind(this),o.prototype.construct.apply(this,arguments)},t.get=function(){var e,n=this;if(n.activeTab)switch(n.activeTab.id){case"local":e=n.components.local.get(),n.afterGet(e);break;case"fileManager":n.components.fileManager.get()}return n},t.complete=function(){var e,n=this;if(n.activeTab)switch(n.activeTab.id){case"local":e=n.components.local.get(),n.afterComplete(e);break;case"fileManager":n.components.fileManager.complete();break;case"stock":n.components.stock.complete()}return n},t.validateParams=function(){var e=this;e.params.localParams.max=e.params.max,e.params.fileManagerParams.max=e.params.max,e.params.fileManagerParams.lazy=e.params.fileManagerLazy,e.params.stock.max=e.params.max,e.params.stock.lazy=e.params.fileManagerLazy},t.renderView=function(){var e=this;return e.triggerEvent("onRenderViewStart"),e.nodes.container=cm.node("div",{class:"app__file-uploader"},e.nodes.inner=cm.node("div",{class:"inner"},e.nodes.content=cm.node("div",{class:"app__file-uploader__content"}))),e.params.local&&(e.nodes.local=e.renderLocal()),e.params.fileManager&&(e.nodes.fileManager=e.renderFileManager()),e.params.stock&&(e.nodes.stock=e.renderStock()),e.triggerEvent("onRenderViewProcess"),e.triggerEvent("onRenderViewEnd"),e},t.renderViewModel=function(){var t=this;return t.params.local&&cm.getConstructor(t.params.localConstructor,function(e){t.components.local=new e(cm.merge(t.params.localParams,{node:t.nodes.local.holder})),t.params.completeOnSelect&&t.components.local.addEvent("onSelect",function(e,n){t.afterComplete(n)})}),t.params.fileManager&&cm.getConstructor(t.params.fileManagerConstructor,function(e){t.components.fileManager=new e(cm.merge(t.params.fileManagerParams,{node:t.nodes.fileManager.holder})),t.components.fileManager.addEvent("onGet",function(e,n){t.afterGet(n)}),t.components.fileManager.addEvent("onComplete",function(e,n){t.afterComplete(n)})}),t.params.stock&&cm.getConstructor(t.params.stockConstructor,function(e){t.components.stock=new e(cm.merge(t.params.stockParams,{node:t.nodes.stock.holder})),t.components.stock.addEvent("onGet",function(e,n){t.afterGet(n)}),t.components.stock.addEvent("onComplete",function(e,n){t.afterComplete(n)})}),t.renderTabset(),t.params.showStats&&cm.getConstructor(t.params.statsConstructor,function(e){t.components.stats=new e(cm.merge(t.params.statsParams,{container:t.nodes.content}))}),t},t.renderTabset=function(){var t=this;return cm.getConstructor("Com.Tabset",function(e,n){t.components.tabset=new e(cm.merge(t.params[n],{container:t.nodes.content})),t.components.tabset.addEvent("onTabShow",function(e,n){switch(t.activeTab=n,t.activeTab.id){case"fileManager":t.components.fileManager&&t.components.fileManager.load();break;case"stock":t.components.stock&&t.components.stock.load()}}),t.renderTabs()}),t},t.renderTabs=function(){var e,n=this;n.params.local&&(n.components.tabset.addTab({id:"local",title:n.lang("tab_local"),content:n.nodes.local.li}),cm.isEmpty(e))&&(e="local"),n.params.fileManager&&(n.components.tabset.addTab({id:"fileManager",title:n.lang("tab_filemanager"),content:n.nodes.fileManager.li}),cm.isEmpty(e))&&(e="fileManager"),n.params.stock&&(n.components.tabset.addTab({id:"stock",title:n.lang("tab_stock"),content:n.nodes.stock.li}),cm.isEmpty(e))&&(e="stock"),n.components.tabset.set(e)},t.renderLocal=function(){var e={};return e.li=cm.node("li",e.container=cm.node("div",{class:"app__file-uploader__local-container"},e.holder=cm.node("div",{class:"app__file-uploader__holder"}))),e},t.renderFileManager=function(){var e={};return e.li=cm.node("li",e.container=cm.node("div",{class:"app__file-uploader__file-manager is-fullsize"},e.holder=cm.node("div",{class:"app__file-uploader__holder"}))),e},t.renderStock=function(){var e={};return e.li=cm.node("li",e.container=cm.node("div",{class:"app__file-uploader__stock is-fullsize"},e.holder=cm.node("div",{class:"app__file-uploader__holder"}))),e},t.afterGet=function(e){return this.items=e,this.triggerEvent("onGet",this.items),this},t.afterComplete=function(e){return this.items=e,this.triggerEvent("onComplete",this.items),this}}),cm.define("App.FileUploaderContainer",{extend:"Com.AbstractContainer",events:["onComplete","onGet"],params:{constructor:"App.FileUploader",action:"",placeholder:!0,placeholderConstructor:"Com.DialogContainer",placeholderParams:{renderButtons:!0,params:{width:"1000"}}},strings:{title_single:"Please select file",title_multiple:"Please select files",close:"Cancel",save:"Select"}},function(e){Com.AbstractContainer.apply(this,arguments)}),cm.getConstructor("App.FileUploaderContainer",function(e,n,t,o){t.construct=function(){var e=this;e.isRequest=!1,e.getHandler=e.get.bind(e),e.completeHandler=e.complete.bind(e),e.afterCompleteHandler=e.afterComplete.bind(e),o.prototype.construct.apply(e,arguments)},t.validateParams=function(){var e=this;o.prototype.validateParams.apply(e,arguments),e.isRequest=!cm.isEmpty(e.params.action)&&window.Request&&window.Request.send,e.setLangs({title:!e.params.params.max||1<e.params.params.max?e.lang("title_multiple"):e.lang("title_single")})},t.get=function(e){e&&cm.preventDefault(e);return this.components.controller&&this.components.controller.get&&this.components.controller.get(),this},t.complete=function(e){e&&cm.preventDefault(e);return this.components.controller&&this.components.controller.complete&&this.components.controller.complete(),this},t.renderControllerEvents=function(){var t=this;return o.prototype.renderControllerEvents.apply(t,arguments),t.components.controller.addEvent("onGet",function(e,n){t.afterGet(n)}),t.components.controller.addEvent("onComplete",function(e,n){t.afterComplete(n)}),t.isRequest&&t.components.controller.addEvent("onComplete",function(e,n){Request.send(t.params.action,n,"post",{node:t.params.node,controller:t})}),t},t.renderPlaceholderButtons=function(){var e=this;return e.components.placeholder.addButton({name:"close",label:e.lang("close"),style:"button-transparent",callback:e.closeHandler}),e.components.placeholder.addButton({name:"save",label:e.lang("save"),style:"button-primary",callback:e.completeHandler}),e},t.afterGet=function(e){return this.triggerEvent("onGet",e),this},t.afterComplete=function(e){return this.triggerEvent("onComplete",e),this.close(),this}}),cm.define("App.FileUploaderLocal",{extend:"Com.AbstractController",events:["onSelect"],params:{max:0,fileList:!0,fileListConstructor:"App.MultipleFileInput",fileListParams:{local:!1,dropzone:!1,fileManager:!1,fileUploader:!1,embedStructure:"append"},dropzone:!0,dropzoneConstructor:"Com.FileDropzone",dropzoneParams:{embedStructure:"append",rollover:!1,height:350},showOverlay:!0,overlayDelay:"cm._config.loadDelay","Com.Overlay":{autoOpen:!1,removeOnClose:!0,showSpinner:!0,showContent:!1,position:"absolute",theme:"light"},showStats:!0,statsConstructor:"Com.FileStats",statsParams:{embedStructure:"append",toggleBox:!1,inline:!0},"Com.FileReader":{}},strings:{browse_local_single:"Choose file",browse_local_multiple:"Choose files",or:"or",browse:"Browse"}},function(e){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("App.FileUploaderLocal",function(e,n,t,o){t.construct=function(){var e=this;e.nodes={},e.components={},e.items=[],e.isMultiple=!1,e.isProccesing=!1,e.overlayDelay=null,e.browseActionHandler=e.browseAction.bind(e),e.processFilesHandler=e.processFiles.bind(e),o.prototype.construct.apply(e,arguments)},t.get=function(){return this.items},t.validateParams=function(){var e=this;return e.isMultiple=!e.params.max||1<e.params.max,e.setLangs({browse_local:!e.params.max||1<e.params.max?e.lang("browse_local_multiple"):e.lang("browse_local_single")}),e.params.fileListParams.max=e.params.max,e.params.dropzoneParams.max=e.params.max,e},t.renderView=function(){var e=this;e.triggerEvent("onRenderViewStart"),e.nodes.container=cm.node("div",{class:"app__file-uploader__local"},e.nodes.holder=cm.node("div",{class:"app__file-uploader__holder"},cm.node("div",{class:"pt__buttons pull-center"},cm.node("div",{class:"inner"},cm.node("div",{class:"browse-button"},cm.node("button",{type:"button",class:"button button-primary button--xlarge"},e.lang("browse_local")),cm.node("div",{class:"inner"},e.nodes.input=cm.node("input",{type:"file"}))))))),e.params.dropzone&&(e.nodes.dropzoneHolder=cm.node("div",{class:"app__file-uploader__holder"},cm.node("div",{class:"app__file-uploader__title"},e.lang("or")),e.nodes.dropzone=cm.node("div",{class:"app__file-uploader__dropzone"})),cm.appendChild(e.nodes.dropzoneHolder,e.nodes.container)),e.params.fileList&&(e.nodes.files=cm.node("div",{class:"app__file-uploader__files is-hidden"}),cm.appendChild(e.nodes.files,e.nodes.container)),e.isMultiple&&e.nodes.input.setAttribute("multiple","multiple"),e.triggerEvent("onRenderViewProcess"),cm.addEvent(e.nodes.input,"change",e.browseActionHandler),e.triggerEvent("onRenderViewEnd")},t.renderViewModel=function(){var t=this;cm.getConstructor("Com.Overlay",function(e,n){t.components.overlay=new e(cm.merge(t.params[n],{container:t.nodes.container}))}),t.params.showStats&&cm.getConstructor(t.params.statsConstructor,function(e){t.components.stats=new e(cm.merge(t.params.statsParams,{container:t.nodes.container}))}),cm.getConstructor("Com.FileReader",function(e,n){t.components.reader=new e(t.params[n])}),t.params.dropzone&&cm.getConstructor(t.params.dropzoneConstructor,function(e){t.components.dropzone=new e(cm.merge(t.params.dropzoneParams,{container:t.nodes.dropzone})),t.components.dropzone.addEvent("onSelect",function(e,n){t.processFiles(n)})}),t.params.fileList&&cm.getConstructor(t.params.fileListConstructor,function(e){t.components.fileList=new e(cm.merge(t.params.fileListParams,{node:t.nodes.files})),t.components.fileList.addEvent("onItemAddEnd",function(){t.components.fileList.get().length&&cm.removeClass(t.nodes.files,"is-hidden")}),t.components.fileList.addEvent("onItemRemoveEnd",function(){t.components.fileList.get().length||cm.addClass(t.nodes.files,"is-hidden")})})},t.browseAction=function(n){var e=this,t=e.params.max?Math.min(n.target.files.length,e.params.max-e.items.length):n.target.files.length,o=[];return cm.preventDefault(n),cm.forEach(t,function(e){o.push(n.target.files[e])}),e.processFiles(o),e},t.processFiles=function(e){var t=this,o=e.length;return t.params.showOverlay&&(t.overlayDelay=setTimeout(function(){t.components.overlay&&!t.components.overlay.isOpen&&t.components.overlay.open()},t.params.overlayDelay)),cm.forEach(e,function(e,n){t.components.reader.read(e,function(e){t.items[n]=e,cm.getCount(t.items)===o&&t.finalizeFiles()})}),t},t.finalizeFiles=function(){var e=this;return e.components.fileList&&e.renderFileList(),e.params.showOverlay&&(e.overlayDelay&&clearTimeout(e.overlayDelay),e.components.overlay)&&e.components.overlay.isOpen&&e.components.overlay.close(),e.triggerEvent("onSelect",e.items),e},t.renderFileList=function(){var n=this;return cm.forEach(n.items,function(e){n.components.fileList.addItem({value:e},!0)}),n}}),cm.define("App.Flow",{extend:"Com.AbstractController",params:{renderStructure:!0,embedStructureOnRender:!0,controllerEvents:!0,scenario:App.FlowScenario,directorConstructor:"App.FlowDirector",directorParams:{autoStart:!1}},strings:{description:"Choose a course:"}},function(e){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("App.Flow",function(e,n,t){var o=t._inherit;t.onConstructStart=function(){this.items=[],this.renderListItemHandler=this.renderListItem.bind(this)},t.onValidateParams=function(){var e=this;cm.isString(e.params.scenario)&&(e.params.scenario=cm.parseJSON(e.params.scenario)),e.params.scenario=cm.arraySort(e.params.scenario,"order","desc")},t.onDestructProcess=function(){this.components.director&&!this.components.director.isRunning&&this.components.director.destruct()},t.renderView=function(){var e=this;e.nodes.container=cm.node("div",{class:"app__flow__list"},cm.node("h4",e.lang("description")),cm.node("div",{class:"pt__listing-items"},e.nodes.items=cm.node("ul"))),cm.forEach(e.params.scenario,e.renderListItemHandler)},t.renderListItem=function(n){var t=this,o={};(n.nodes=o).container=cm.node("li",o.link=cm.node("a",n.title)),cm.addEvent(o.link,"click",function(e){cm.preventDefault(e),t.components.director.setScenario(n.data).setTarget(o.link).start()}),cm.appendChild(o.container,t.nodes.items),t.items.push(n)},t.renderViewModel=function(){var n=this;o.prototype.renderViewModel.apply(n,arguments),cm.getConstructor(n.params.directorConstructor,function(e){n.components.director=new e(n.params.directorParams)})}}),cm.define("App.FlowContainer",{extend:"Com.AbstractContainer",params:{constructor:"App.Flow",placeholder:!0,placeholderConstructor:"Com.DialogContainer",placeholderParams:{params:{width:500,className:"app__flow__dialog",documentScroll:!0}}},strings:{title:"QuickSilk Flow"}},function(e){Com.AbstractContainer.apply(this,arguments)}),cm.getConstructor("App.FlowContainer",function(e,n,t){t._inherit}),cm.define("App.FlowDirector",{extend:"Com.AbstractController",params:{renderStructure:!1,embedStructureOnRender:!1,controllerEvents:!0,destructOnStop:!0,container:"document.body",name:"app-helptour",sidebarName:"app-sidebar",topMenuName:"app-topmenu",templateName:"app-template",notificationName:"app-notification",duration:500,adaptiveFrom:768,popupIndent:24,overlayConstructor:"Com.Overlay",overlayParams:{container:"document.body",autoOpen:!1,removeOnClose:!0,showSpinner:!1,showContent:!1,name:"",theme:"transparent",position:"absolute"}},strings:{next:"Next",back:"Back",close:"Close",cancel:"Cancel",finish:"Finish"}},function(e){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("App.FlowDirector",function(e,n,t){var o=t._inherit;t.onConstructStart=function(){var e=this;e.isRunning=!1,e.scenario=App.HelpTourScenario,e.dimensions={sidebarCollapsed:0,sidebarExpanded:0,topMenu:0,popupHeight:0,popupSelfHeight:0,popupContentHeight:0},e.startOptions={sidebarExpanded:!1,sidebarTab:"modules",notificationShow:!1},e.startX=0,e.startY=0,e.components={overlays:{}},e.currentStage=-1,e.currentScene=null,e.currentSceneNode=null,e.previousStage=null,e.previousScene=null,e.previousSceneNode=null,e.sceneIntervals={},e.startHandler=e.start.bind(e),e.stopHandler=e.stop.bind(e),e.nextHandler=e.next.bind(e),e.prevHandler=e.prev.bind(e),e.prepareHandler=e.prepare.bind(e),e.keyDownEventHandler=e.keyDownEvent.bind(e)},t.onValidateParamsProcess=function(){this.params.overlayParams.container=this.params.container,this.params.overlayParams.name=[this.params.name,"overlay"].join("-")},t.onGetLESSVariablesProcess=function(){this.params.duration=cm.getTransitionDurationFromLESS("AppHelpTour-Duration",this.params.duration),this.params.adaptiveFrom=cm.getLESSVariable("AppHelpTour-AdaptiveFrom",this.params.adaptiveFrom,!0)},t.onSetEvents=function(){cm.addEvent(window,"keydown",this.keyDownEventHandler)},t.onUnsetEvents=function(){cm.removeEvent(window,"keydown",this.keyDownEventHandler)},t.onRedraw=function(){this.isRunning&&this.setPopupPosition()},t.renderViewModel=function(){var n=this;return o.prototype.renderViewModel.apply(n,arguments),cm.getConstructor(n.params.overlayConstructor,function(e){n.components.overlays.main=new e(cm.merge(n.params.overlayParams,{position:"fixed"})),n.components.overlays.sidebar=new e(n.params.overlayParams),n.components.overlays.topMenu=new e(n.params.overlayParams),n.components.overlays.template=new e(cm.merge(n.params.overlayParams,{position:"fixed"}))}),n},t.prepare=function(){var n=this;return cm.find("App.Sidebar",n.params.sidebarName,null,function(e){n.components.sidebar=e,n.components.overlays.sidebar.embed(n.components.sidebar.getNodes("inner"))}),cm.find("App.TopMenu",n.params.topMenuName,null,function(e){n.components.topMenu=e,n.components.overlays.topMenu.embed(n.components.topMenu.getNodes("inner"))}),cm.find("App.Template",n.params.templateName,null,function(e){n.components.template=e,n.components.overlays.template.embed(n.components.template.getNodes("container"))}),cm.find("App.Notification",n.params.notificationName,null,function(e){n.components.notification=e}),!!(n.components.sidebar&&n.components.topMenu&&n.components.template)||(cm.errorLog({type:"error",name:n._name.full,message:["Required components does not constructed."].join(" ")}),!1)},t.start=function(){var e=this,n=e.prepare();!e.isRunning&&n&&(e.isRunning=!0,cm.find("Com.AbstractContainer",null,null,function(e){e.close()},{childs:!0}),e.renderPopup(),e.startOptions.sidebarExpanded=e.components.sidebar.isExpanded,e.components.sidebar.isExpanded&&e.components.sidebar.collapse(),e.startOptions.sidebarTab=e.components.sidebar.getTab(),e.components.sidebar.unsetTab(),e.components.notification&&(e.startOptions.notificationShow=e.components.notification.isShow,e.components.notification.isShow)&&e.components.notification.hide(),e.components.topMenu.collapse(),cm.forEach(e.components.overlays,function(e){e.open()}),e.setStage(0))},t.stop=function(){var e=this;return e.isRunning&&(e.isRunning=!1,e.removePopup(),e.startOptions.sidebarExpanded&&!e.components.sidebar.isExpanded?e.components.sidebar.expand():!e.startOptions.sidebarExpanded&&e.components.sidebar.isExpanded&&e.components.sidebar.collapse(),e.components.sidebar.setTab(e.startOptions.sidebarTab),e.components.notification&&(e.startOptions.notificationShow&&!e.components.notification.isShow?e.components.notification.show():!e.startOptions.notificationShow&&e.components.notification.isShow&&e.components.notification.hide()),cm.forEach(e.components.overlays,function(e){e.close()}),e.unsetStage(),e.params.destructOnStop)&&e.destruct(),e},t.next=function(){var e=this;return 0<=e.currentStage&&(e.scenario[e.currentStage+1]?e.setStage(e.currentStage+1):e.stop()),e},t.prev=function(){var e=this;return 0<=e.currentStage&&(e.scenario[e.currentStage-1]?e.setStage(e.currentStage-1):e.stop()),e},t.setScenario=function(e){return this.scenario=e,this},t.setStage=function(e){var t=this;t.scenario[e]&&(t.unsetStage(),t.currentStage=e,t.currentScene=t.scenario[e],cm.forEach(t.currentScene.overlays,function(e,n){t.components.overlays[n].setTheme(e)}),t.currentScene.sidebar?t.components.sidebar.setTab(t.currentScene.sidebar).expand():t.components.sidebar.unsetTab().collapse(),t.components.topMenu.setActiveItem(t.currentScene.topMenu),t.currentScene.arrow&&cm.addClass(t.nodes.popupArrows[t.currentScene.arrow],"is-show"),0===t.currentStage?(t.nodes.back.innerHTML=t.lang("close"),t.nodes.next.innerHTML=t.lang("next")):t.currentStage===t.scenario.length-1?(t.nodes.back.innerHTML=t.lang("back"),t.nodes.next.innerHTML=t.lang("finish")):(t.nodes.back.innerHTML=t.lang("back"),t.nodes.next.innerHTML=t.lang("next")),t.previousStage||cm.addClass(t.nodes.popupContent,"is-immediately",!0),t.currentSceneNode=cm.node("div",{class:"popup__content__item",innerHTML:t.currentScene.content}),cm.appendChild(t.currentSceneNode,t.nodes.popupContent),cm.addClass(t.currentSceneNode,"is-show",!0),t.setPopupPosition(),t.currentScene.construct)&&t.currentScene.construct.call(t)},t.unsetStage=function(){var e,n=this;0<=n.currentStage&&(n.previousStage=n.currentStage,n.previousScene=n.currentScene,n.previousSceneNode=n.currentSceneNode,n.components.topMenu.unsetActiveItem(n.previousScene.topMenu),n.previousScene.arrow&&cm.removeClass(n.nodes.popupArrows[n.previousScene.arrow],"is-show"),cm.forEach(n.sceneIntervals,function(e){clearInterval(e)}),e=n.previousSceneNode,setTimeout(function(){cm.remove(e)},n.params.duration),setTimeout(function(){cm.removeClass(n.nodes.popupContent,"is-immediately",!0)},5),n.previousScene.destruct)&&n.previousScene.destruct.call(n),n.currentStage=-1},t.renderPopup=function(){var e=this;e.nodes.popupArrows={},e.nodes.popup=cm.node("div",{class:"app__helptour__popup"},e.nodes.popupArrows.top=cm.node("div",{class:"popup__arrow popup__arrow--top"}),e.nodes.popupArrows.right=cm.node("div",{class:"popup__arrow popup__arrow--right"}),e.nodes.popupArrows.bottom=cm.node("div",{class:"popup__arrow popup__arrow--bottom"}),e.nodes.popupArrows.left=cm.node("div",{class:"popup__arrow popup__arrow--left"}),e.nodes.popupClose=cm.node("div",{class:"popup__close",title:e.lang("close")}),e.nodes.popupContent=cm.node("div",{class:"popup__content"}),e.nodes.popupButtons=cm.node("div",{class:"popup__buttons"},cm.node("div",{class:"btn-wrap pull-center"},e.nodes.back=cm.node("button",e.lang("back")),e.nodes.next=cm.node("button",e.lang("next"))))),e.setPopupStartPosition(),cm.appendChild(e.nodes.popup,e.params.container),cm.addClass(e.nodes.popup,"is-show",!0),cm.addEvent(e.nodes.popupClose,"click",e.stopHandler),cm.addEvent(e.nodes.next,"click",e.nextHandler),cm.addEvent(e.nodes.back,"click",e.prevHandler)},t.removePopup=function(){var e=this;e.setPopupStartPosition(),cm.removeClass(e.nodes.popup,"is-show"),setTimeout(function(){cm.remove(e.nodes.popup)},e.params.duration)},t.setPopupStartPosition=function(){var e=this;e.startX||(e.startX=[Math.round(cm.getX(e.params.node)+e.params.node.offsetWidth/2),"px"].join("")),e.startY||(e.startY=[Math.round(cm.getY(e.params.node)+e.params.node.offsetHeight/2),"px"].join("")),cm.setCSSTranslate(e.nodes.popup,e.startX,e.startY,0,"scale(0)")},t.setPopupPosition=function(){var e,n,t,o,a,r,s=this;if(s.currentScene){if((n=cm.getPageSize()).winWidth>s.params.adaptiveFrom)switch(s.getDimensions(),e=s.currentScene.position.split(":"),a=s.dimensions.popupContentHeight,e[0]){case"window":switch(e[1]){case"top":o=Math.round((n.winWidth-s.nodes.popup.offsetWidth)/2),t=s.params.popupIndent;break;case"bottom":o=Math.round((n.winWidth-s.nodes.popup.offsetWidth)/2),t=n.winHeight-s.dimensions.popupHeight-s.params.popupIndent;break;default:o=Math.round((n.winWidth-s.nodes.popup.offsetWidth)/2),t=Math.round((n.winHeight-s.dimensions.popupHeight)/2)}break;case"topMenu":e[1],o=Math.round((n.winWidth-s.nodes.popup.offsetWidth)/2),t=s.dimensions.topMenu+s.params.popupIndent;break;case"topMenuItem":o=(r=s.components.topMenu.getItem(e[1]))?e[2]&&"dropdown"===e[2]&&r.dropdown?e[3]&&"left"===e[3]?cm.getX(r.dropdown)-s.nodes.popup.offsetWidth-s.params.popupIndent:cm.getX(r.dropdown)+r.dropdown.offsetWidth+s.params.popupIndent:r.container?e[3]&&"left"===e[3]?cm.getX(r.container)+r.container.offsetWidth-s.nodes.popup.offsetWidth:cm.getX(r.container):Math.round((n.winWidth-s.nodes.popup.offsetWidth)/2):Math.round((n.winWidth-s.nodes.popup.offsetWidth)/2),t=s.dimensions.topMenu+s.params.popupIndent;break;case"template":switch(e[1]){case"top":o=s.components.sidebar.isExpanded?s.dimensions.sidebarExpanded:s.dimensions.sidebarCollapsed,o=Math.round((n.winWidth+o-s.nodes.popup.offsetWidth)/2),t=s.dimensions.topMenu+s.params.popupIndent;break;case"bottom":o=s.components.sidebar.isExpanded?s.dimensions.sidebarExpanded:s.dimensions.sidebarCollapsed,o=Math.round((n.winWidth+o-s.nodes.popup.offsetWidth)/2),t=n.winHeight-s.dimensions.popupHeight-s.params.popupIndent;break;case"left":o=(s.components.sidebar.isExpanded?s.dimensions.sidebarExpanded:s.dimensions.sidebarCollapsed)+s.params.popupIndent,t=Math.round((n.winHeight-s.dimensions.popupHeight)/2);break;case"left-top":o=(s.components.sidebar.isExpanded?s.dimensions.sidebarExpanded:s.dimensions.sidebarCollapsed)+s.params.popupIndent,t=s.dimensions.topMenu+s.params.popupIndent;break;default:o=s.components.sidebar.isExpanded?s.dimensions.sidebarExpanded:s.dimensions.sidebarCollapsed,o=Math.round((n.winWidth+o-s.nodes.popup.offsetWidth)/2),t=Math.round((n.winHeight+s.dimensions.topMenu-s.dimensions.popupHeight)/2)}break;default:o=Math.round((n.winWidth-s.nodes.popup.offsetWidth)/2),t=Math.round((n.winHeight-s.dimensions.popupHeight)/2)}else t=o=0,a="auto";s.nodes.popupContent.style.height="auto"===a?a:[a,"px"].join(""),cm.setCSSTranslate(s.nodes.popup,[o,"px"].join(""),[t,"px"].join(""),0,"scale(1)")}},t.getDimensions=function(){var e=this;e.dimensions.sidebarCollapsed=cm.getLESSVariable("AppSidebar-WidthCollapsed",0,!0),e.dimensions.sidebarExpanded=cm.getLESSVariable("AppSidebar-WidthExpanded",0,!0),e.dimensions.topMenu=cm.getLESSVariable("AppTopMenu-Height",0,!0),e.dimensions.popupSelfHeight||(e.dimensions.popupSelfHeight=e.nodes.popup.offsetHeight),e.currentSceneNode&&(e.dimensions.popupContentHeight=e.currentSceneNode.offsetHeight),e.dimensions.popupHeight=e.dimensions.popupSelfHeight+e.dimensions.popupContentHeight},t.keyDownEvent=function(e){if(this.isRunning)switch(cm.preventDefault(e),e.keyCode){case 27:this.stop();break;case 37:this.prev();break;case 39:this.next()}},t.setTarget=function(e){return cm.isNode(e)&&(this.params.node=e),this}}),cm.define("App.FontInput",{extend:"Com.AbstractInput",params:{renderStructure:!0,embedStructureOnRender:!0,embedStructure:"replace",controllerEvents:!0,setHiddenInput:!0,setContentInput:!0,className:"app__file-input",styles:{"font-family":["Arial, Helvetica, sans-serif","Arial Black, Gadget, sans-serif","Courier New, Courier, monospace","Georgia, serif","Impact, Charcoal, sans-serif","Lucida Console, Monaco, monospace","Lucida Sans Unicode, Lucida Grande, sans-serif","Palatino Linotype, Book Antiqua, Palatino, serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],"line-height":[8,10,12,16,20,24,28,32,36,40,48,56,64,72,80,88,96,108,120],"font-size":[8,9,10,11,12,13,14,18,20,22,24,28,32,36,42,48,54,60,72,96],"font-weight":[100,200,300,400,500,600,700,800,900],"font-style":["normal","italic"],"text-decoration":["none","underline"]},styleBinds:{"font-weight":{normal:400,bold:700}},controls:{"font-family":!0,"line-height":!0,"font-size":!0,"font-weight":!0,"font-style":!0,"text-decoration":!0,color:!0,background:!0},showResetButtons:!0,overrideControls:!0,previewTag:"div","Com.Tooltip":{targetEvent:"click",hideOnReClick:!0,top:"targetHeight + 6",left:"-6",className:"app__stylizer-tooltip"},"Com.Select":{renderInBody:!1},"Com.ColorPicker":{renderInBody:!1,showLabel:!1,showClearButton:!1}},strings:{100:"Thin",200:"Extra Light",300:"Light",400:"Regular",500:"Medium",600:"Semi Bold",700:"Bold",800:"Extra Bold",900:"Black"}},function(e){Com.AbstractInput.apply(this,arguments)}),cm.getConstructor("App.FontInput",function(e,n,t,o){t.onConstructStart=function(){this.previousRawValue=null,this.rawValue=null},t.onValidateParamsEnd=function(){var t=this;cm.isString(t.params.value)&&(t.params.value=cm.parseJSON(t.params.value)),cm.isString(t.params.defaultValue)&&(t.params.defaultValue=cm.parseJSON(t.params.defaultValue)),t.validateItemConfig(t.params.value),t.validateItemConfig(t.params.defaultValue),t.extendGlobalConfig(t.params.value),t.extendGlobalConfig(t.params.defaultValue),t.sortGlobalConfig(),t.params.overrideControls&&cm.forEach(t.params.controls,function(e,n){t.params.controls[n]=!(!t.params.defaultValue[n]&&!t.params.value[n])})},t.validateItemConfig=function(e){var n=this;return e["line-height"]&&"normal"!==e["line-height"]&&(e["line-height"]=parseFloat(e["line-height"])),e["font-size"]&&(e["font-size"]=parseFloat(e["font-size"])),e["font-weight"]&&(n.params.styleBinds["font-weight"][e["font-weight"]]&&(e["font-weight"]=n.params.styleBinds["font-weight"][e["font-weight"]]),e["font-weight"]=parseInt(e["font-weight"]),e["font-weight"]=cm.inArray(n.params.styles["font-weight"],e["font-weight"])?e["font-weight"]:400),e["font-style"]&&(e["font-style"]=cm.inArray(n.params.styles["font-style"],e["font-style"])?e["font-style"]:"normal"),e["text-decoration"]&&(e["text-decoration"]=cm.inArray(n.params.styles["text-decoration"],e["text-decoration"])?e["text-decoration"]:"none"),e},t.extendGlobalConfig=function(e){var n=this;return e["font-size"]&&!cm.inArray(n.params.styles["font-size"],e["font-size"])&&n.params.styles["font-size"].push(e["font-size"]),e["line-height"]&&!cm.inArray(n.params.styles["line-height"],e["line-height"])&&n.params.styles["line-height"].push(e["line-height"]),e["font-family"]&&!cm.inArray(n.params.styles["font-family"],e["font-family"])&&n.params.styles["font-family"].push(e["font-family"]),e},t.sortGlobalConfig=function(){return this.params.styles["font-size"].sort(function(e,n){return e-n}),this.params.styles["line-height"].sort(function(e,n){return"normal"===e?-1:"normal"===n?1:e-n}),this.params.styles["font-family"].sort(function(e,n){e=e.toLowerCase().replace(/["']/g,""),n=n.toLowerCase().replace(/["']/g,"");return e<n?-1:n<e?1:0}),this},t.renderContent=function(){var e=this,n={};return(e.nodes.content=n).container=cm.node("div",{class:"app__stylizer__item"},n.preview=cm.node(e.params.previewTag,{class:"item-preview",innerHTML:e.params.placeholder})),cm.addClass(n.preview,e.params.previewClassName),e.renderTooltipView(),n.container},t.renderViewModel=function(){var t=this;return o.prototype.renderViewModel.apply(t,arguments),t.renderTooltipControls(),cm.getConstructor("Com.Tooltip",function(e,n){t.components.tooltip=new e(cm.merge(t.params[n],{content:t.nodes.tooltip.container,target:t.nodes.content.container,events:{onShowStart:function(){cm.addClass(t.nodes.content.container,"active")},onHideStart:function(){cm.removeClass(t.nodes.content.container,"active")}}}))}),t},t.renderTooltipView=function(){var e={};return e.container=cm.node("div",{class:"pt__toolbar"},e.inner=cm.node("div",{class:"inner"},e.group1=cm.node("ul",{class:"group"}),e.group2=cm.node("ul",{class:"group"}),e.group3=cm.node("ul",{class:"group"}),e.group4=cm.node("ul",{class:"group"}))),(this.nodes.tooltip=e).container},t.renderTooltipControls=function(){var e=this;e.params.controls["font-family"]&&e.renderFontFamilyControl(),e.params.controls["font-weight"]&&e.renderFontWeightControl(),e.params.controls["font-style"]&&e.renderFontStyleControl(),e.params.controls["text-decoration"]&&e.renderTextDecorationControl(),e.params.controls["font-size"]&&e.renderFontSizeControl(),e.params.controls["line-height"]&&e.renderLineHeightControl(),e.params.controls.color&&e.renderColorControl(),e.params.controls.background&&e.renderBackgroundControl(),e.params.showResetButtons?e.renderResetControl():cm.remove(e.nodes.tooltip.group4)},t.renderFontFamilyControl=function(){var t=this;return t.nodes.tooltip.group2.appendChild(cm.node("li",{class:"is-select size-default"},t.nodes.tooltip["font-family"]=cm.node("select",{title:t.lang("Font")}))),cm.forEach(t.params.styles["font-family"],function(e){t.nodes.tooltip["font-family"].appendChild(cm.node("option",{value:e,style:{"font-family":e}},e.replace(/["']/g,"").split(",")[0]))}),cm.getConstructor("Com.Select",function(e,n){t.components["font-family"]=new e(cm.merge(t.params[n],{node:t.nodes.tooltip["font-family"],events:{onChange:function(e,n){t.set(cm.merge(t.value,{"font-family":n}),!0)}}}))}),t},t.renderFontWeightControl=function(){var t=this;return t.nodes.tooltip.group1.appendChild(t.nodes.tooltip["font-weight-button"]=cm.node("li",{class:"button button-secondary is-icon"},cm.node("span",{class:"icon toolbar bold"}))),cm.addEvent(t.nodes.tooltip["font-weight-button"],"click",function(){t.set(cm.merge(t.value,{"font-weight":400<t.value["font-weight"]?400:700}),!0)}),t.nodes.tooltip.group2.appendChild(cm.node("li",{class:"is-select size-medium"},t.nodes.tooltip["font-weight"]=cm.node("select",{title:t.lang("Weight")}))),cm.forEach(t.params.styles["font-weight"],function(e){t.nodes.tooltip["font-weight"].appendChild(cm.node("option",{value:e},t.lang(e)))}),cm.getConstructor("Com.Select",function(e,n){t.components["font-weight"]=new e(cm.merge(t.params[n],{node:t.nodes.tooltip["font-weight"],events:{onChange:function(e,n){t.set(cm.merge(t.value,{"font-weight":n}),!0)}}}))}),t},t.renderFontStyleControl=function(){var e=this;return e.nodes.tooltip.group1.appendChild(e.nodes.tooltip["font-style-button"]=cm.node("li",{class:"button button-secondary is-icon"},cm.node("span",{class:"icon toolbar italic"}))),cm.addEvent(e.nodes.tooltip["font-style-button"],"click",function(){e.set(cm.merge(e.value,{"font-style":"italic"===e.value["font-style"]?"normal":"italic"}),!0)}),e},t.renderTextDecorationControl=function(){var e=this;e.nodes.tooltip.group1.appendChild(e.nodes.tooltip["text-decoration-button"]=cm.node("li",{class:"button button-secondary is-icon"},cm.node("span",{class:"icon toolbar underline"}))),cm.addEvent(e.nodes.tooltip["text-decoration-button"],"click",function(){e.set(cm.merge(e.value,{"text-decoration":"underline"===e.value["text-decoration"]?"none":"underline"}),!0)})},t.renderFontSizeControl=function(){var t=this;t.nodes.tooltip.group2.appendChild(cm.node("li",{class:"is-select size-xsmall"},t.nodes.tooltip["font-size"]=cm.node("select",{title:t.lang("Size")}))),cm.forEach(t.params.styles["font-size"],function(e){t.nodes.tooltip["font-size"].appendChild(cm.node("option",{value:e},e))}),cm.getConstructor("Com.Select",function(e,n){t.components["font-size"]=new e(cm.merge(t.params[n],{node:t.nodes.tooltip["font-size"],events:{onChange:function(e,n){t.set(cm.merge(t.value,{"font-size":n}),!0)}}}))})},t.renderLineHeightControl=function(){var t=this;t.nodes.tooltip.group2.appendChild(cm.node("li",{class:"is-select size-xsmall"},t.nodes.tooltip["line-height"]=cm.node("select",{title:t.lang("Leading")}))),cm.forEach(t.params.styles["line-height"],function(e){t.nodes.tooltip["line-height"].appendChild(cm.node("option",{value:e},"normal"===e?t.lang("auto"):e))}),cm.getConstructor("Com.Select",function(e,n){t.components["line-height"]=new e(cm.merge(t.params[n],{node:t.nodes.tooltip["line-height"],events:{onChange:function(e,n){t.set(cm.merge(t.value,{"line-height":n}),!0)}}}))})},t.renderColorControl=function(){var t=this;t.nodes.tooltip.group3.appendChild(cm.node("li",{class:"is-select size-field"},t.nodes.tooltip.color=cm.node("input",{type:"text",title:t.lang("Color")}))),cm.getConstructor("Com.ColorPicker",function(e,n){t.components.color=new e(cm.merge(t.params[n],{node:t.nodes.tooltip.color,defaultValue:t.params.defaultValue.color,events:{onChange:function(e,n){t.set(cm.merge(t.value,{color:n}),!0)}}}))})},t.renderBackgroundControl=function(){var t=this;t.nodes.tooltip.group3.appendChild(cm.node("li",{class:"is-select size-field"},t.nodes.tooltip.background=cm.node("input",{type:"text",title:t.lang("Background")}))),cm.getConstructor("Com.ColorPicker",function(e,n){t.components.background=new e(cm.merge(t.params[n],{node:t.nodes.tooltip.background,defaultValue:t.params.defaultValue.background,events:{onChange:function(e,n){t.set(cm.merge(t.value,{background:n}),!0)}}}))})},t.renderResetControl=function(){var e=this;e.nodes.tooltip.group4.appendChild(cm.node("li",e.nodes.tooltip["reset-button"]=cm.node("div",{class:"button button-primary"},e.lang("Reset")))),cm.addEvent(e.nodes.tooltip["reset-button"],"click",function(){e.clear(!0)})},t.validateValue=function(e){return(e=cm.isObject(e)?this.validateItemConfig(e):this.params.defaultValue)._type="font",e},t.saveValue=function(e){var t=this;return t.previousRawValue=cm.clone(t.rawValue),t.rawValue=cm.clone(e),t.previousValue=cm.clone(t.value),t.value=cm.clone(e),cm.forEach(t.value,function(e,n){switch(n){case"font-size":case"line-height":t.value[n]=cm.isNumber(e)||/^\d+$/.test(e)?e+"px":e}}),t.params.setHiddenInput&&t.saveHiddenValue(t.value),t.params.setContentInput&&t.setData(t.valueText),t},t.setData=function(){var t=this;cm.forEach(t.rawValue,function(e,n){switch(t.components[n]&&t.components[n].set(e,!1),n){case"font-weight":400<e?cm.addClass(t.nodes.tooltip["font-weight-button"],"active"):cm.removeClass(t.nodes.tooltip["font-weight-button"],"active");break;case"text-decoration":"underline"===e?cm.addClass(t.nodes.tooltip["text-decoration-button"],"active"):cm.removeClass(t.nodes.tooltip["text-decoration-button"],"active");break;case"font-style":"italic"===e?cm.addClass(t.nodes.tooltip["font-style-button"],"active"):cm.removeClass(t.nodes.tooltip["font-style-button"],"active")}t.nodes.content.preview.style[cm.styleStrToKey(n)]=t.value[n]})}}),cm.define("App.FormStyles",{extend:"Com.AbstractController",params:{renderStructure:!1,embedStructureOnRender:!1,controllerEvents:!0}},function(e){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("App.FormStyles",function(e,n,t){t._inherit}),cm.define("App.HelpTour",{modules:["Params","Events","Langs","DataConfig","DataNodes","Stack"],events:["onRender"],params:{node:cm.Node("div"),container:"document.body",name:"app-helptour",sidebarName:"app-sidebar",topMenuName:"app-topmenu",templateName:"app-template",notificationName:"app-notification",duration:500,adaptiveFrom:768,autoStart:!1,popupIndent:24,"Com.Overlay":{container:"document.body",autoOpen:!1,removeOnClose:!0,showSpinner:!1,showContent:!1,name:"",theme:"transparent",position:"absolute"}},strings:{next:"Next",back:"Back",close:"Close",cancel:"Cancel",finish:"Finish"}},function(e){function n(){var e;0<=s.currentStage&&(s.previousStage=s.currentStage,s.previousScene=s.currentScene,s.previousSceneNode=s.currentSceneNode,s.components.topMenu.unsetActiveItem(s.previousScene.topMenu),s.previousScene.arrow&&cm.removeClass(s.nodes.popupArrows[s.previousScene.arrow],"is-show"),cm.forEach(s.sceneIntervals,function(e){clearInterval(e)}),e=s.previousSceneNode,setTimeout(function(){cm.remove(e)},s.params.duration),s.previousScene.destruct)&&s.previousScene.destruct.call(s),s.currentStage=-1}var s=this,i={sidebarCollapsed:0,sidebarExpanded:0,topMenu:0,popupHeight:0,popupSelfHeight:0,popupContentHeight:0},t={sidebarExpanded:!1,sidebarTab:"modules",notificationShow:!1},c=(s.nodes={},s.components={overlays:{}},s.currentStage=-1,s.currentScene=null,s.currentSceneNode=null,s.previousStage=null,s.previousScene=null,s.previousSceneNode=null,s.sceneIntervals={},function(){i.sidebarCollapsed=cm.getLESSVariable("AppSidebar-WidthCollapsed",0,!0),i.sidebarExpanded=cm.getLESSVariable("AppSidebar-WidthExpanded",0,!0),i.topMenu=cm.getLESSVariable("AppTopMenu-Height",0,!0),i.popupSelfHeight||(i.popupSelfHeight=s.nodes.popup.offsetHeight),s.currentSceneNode&&(i.popupContentHeight=s.currentSceneNode.offsetHeight),i.popupHeight=i.popupSelfHeight+i.popupContentHeight}),o=function(){if(cm.find("App.Sidebar",s.params.sidebarName,null,function(e){s.components.sidebar=e,s.components.overlays.sidebar.embed(s.components.sidebar.getNodes("inner"))}),cm.find("App.TopMenu",s.params.topMenuName,null,function(e){s.components.topMenu=e,s.components.overlays.topMenu.embed(s.components.topMenu.getNodes("inner"))}),cm.find("App.Template",s.params.templateName,null,function(e){s.components.template=e,s.components.overlays.template.embed(s.components.template.getNodes("container"))}),cm.find("App.Notification",s.params.notificationName,null,function(e){s.components.notification=e}),s.components.sidebar&&s.components.topMenu&&s.components.template){if(cm.find("Com.AbstractContainer",null,null,function(e){e.close()},{childs:true}),d(),t["sidebarExpanded"]=s.components["sidebar"].isExpanded,s.components["sidebar"].isExpanded)s.components["sidebar"].collapse();if(t["sidebarTab"]=s.components["sidebar"].getTab(),s.components["sidebar"].unsetTab(),s.components["notification"]){t["notificationShow"]=s.components["notification"].isShow;if(s.components["notification"].isShow)s.components["notification"].hide()}s.components["topMenu"].collapse(),cm.forEach(s.components["overlays"],function(e){e.open()}),r(0)}else cm.errorLog({type:"error",name:s._name.full,message:["Required components does not constructed."].join(" ")})},a=function(){cm.removeEvent(window,"resize",p),cm.removeEvent(window,"keydown",m),l(),cm.removeClass(s.nodes.popup,"is-show"),setTimeout(function(){cm.remove(s.nodes.popup)},s.params.duration),t.sidebarExpanded&&!s.components.sidebar.isExpanded?s.components.sidebar.expand():!t.sidebarExpanded&&s.components.sidebar.isExpanded&&s.components.sidebar.collapse(),s.components.sidebar.setTab(t.sidebarTab),s.components.notification&&(t.notificationShow&&!s.components.notification.isShow?s.components.notification.show():!t.notificationShow&&s.components.notification.isShow&&s.components.notification.hide()),cm.forEach(s.components.overlays,function(e){e.close()}),n()},r=function(e){App.HelpTourScenario[e]&&(n(),s.currentStage=e,s.currentScene=App.HelpTourScenario[e],cm.forEach(s.currentScene.overlays,function(e,n){s.components.overlays[n].setTheme(e)}),s.currentScene.sidebar?s.components.sidebar.setTab(s.currentScene.sidebar).expand():s.components.sidebar.unsetTab().collapse(),s.components.topMenu.setActiveItem(s.currentScene.topMenu),s.currentScene.arrow&&cm.addClass(s.nodes.popupArrows[s.currentScene.arrow],"is-show"),0===s.currentStage?(s.nodes.back.innerHTML=s.lang("close"),s.nodes.next.innerHTML=s.lang("next")):s.currentStage===App.HelpTourScenario.length-1?(s.nodes.back.innerHTML=s.lang("back"),s.nodes.next.innerHTML=s.lang("finish")):(s.nodes.back.innerHTML=s.lang("back"),s.nodes.next.innerHTML=s.lang("next")),s.currentSceneNode=cm.Node("div",{class:"popup__content__item",innerHTML:s.currentScene.content}),s.nodes.popupContent.appendChild(s.currentSceneNode),cm.addClass(s.currentSceneNode,"is-show",!0),p(),s.currentScene.construct)&&s.currentScene.construct.call(s)},d=function(){s.nodes.popupArrows={},s.nodes.popup=cm.Node("div",{class:"app__helptour__popup"},s.nodes.popupArrows.top=cm.Node("div",{class:"popup__arrow popup__arrow--top"}),s.nodes.popupArrows.right=cm.Node("div",{class:"popup__arrow popup__arrow--right"}),s.nodes.popupArrows.bottom=cm.Node("div",{class:"popup__arrow popup__arrow--bottom"}),s.nodes.popupArrows.left=cm.Node("div",{class:"popup__arrow popup__arrow--left"}),s.nodes.popupClose=cm.Node("div",{class:"popup__close",title:s.lang("close")}),s.nodes.popupContent=cm.Node("div",{class:"popup__content"}),s.nodes.popupButtons=cm.Node("div",{class:"popup__buttons"},cm.Node("div",{class:"btn-wrap pull-center"},s.nodes.back=cm.Node("button",s.lang("back")),s.nodes.next=cm.Node("button",s.lang("next"))))),l(),s.params.container.appendChild(s.nodes.popup),cm.addClass(s.nodes.popup,"is-show",!0),cm.addEvent(s.nodes.popupClose,"click",a),cm.addEvent(s.nodes.next,"click",s.next),cm.addEvent(s.nodes.back,"click",s.prev),cm.addEvent(window,"resize",p),cm.addEvent(window,"keydown",m)},l=function(){var e=[Math.round(cm.getX(s.params.node)+s.params.node.offsetWidth/2),"px"].join(""),n=[Math.round(cm.getY(s.params.node)+s.params.node.offsetHeight/2),"px"].join("");cm.setCSSTranslate(s.nodes.popup,e,n,0,"scale(0)")},m=function(e){switch(cm.preventDefault(e),e.keyCode){case 27:a();break;case 37:s.prev();break;case 39:s.next()}},p=function(){var e,n,t,o,a,r;if(s.currentScene){if((n=cm.getPageSize()).winWidth>s.params.adaptiveFrom)switch(c(),e=s.currentScene.position.split(":"),a=i.popupContentHeight,e[0]){case"window":switch(e[1]){case"top":o=Math.round((n.winWidth-s.nodes.popup.offsetWidth)/2),t=s.params.popupIndent;break;case"bottom":o=Math.round((n.winWidth-s.nodes.popup.offsetWidth)/2),t=n.winHeight-i.popupHeight-s.params.popupIndent;break;default:o=Math.round((n.winWidth-s.nodes.popup.offsetWidth)/2),t=Math.round((n.winHeight-i.popupHeight)/2)}break;case"topMenu":e[1],o=Math.round((n.winWidth-s.nodes.popup.offsetWidth)/2),t=i.topMenu+s.params.popupIndent;break;case"topMenuItem":o=(r=s.components.topMenu.getItem(e[1]))?e[2]&&"dropdown"===e[2]&&r.dropdown?e[3]&&"left"===e[3]?cm.getX(r.dropdown)-s.nodes.popup.offsetWidth-s.params.popupIndent:cm.getX(r.dropdown)+r.dropdown.offsetWidth+s.params.popupIndent:r.container?e[3]&&"left"===e[3]?cm.getX(r.container)+r.container.offsetWidth-s.nodes.popup.offsetWidth:cm.getX(r.container):Math.round((n.winWidth-s.nodes.popup.offsetWidth)/2):Math.round((n.winWidth-s.nodes.popup.offsetWidth)/2),t=i.topMenu+s.params.popupIndent;break;case"template":switch(e[1]){case"top":o=s.components.sidebar.isExpanded?i.sidebarExpanded:i.sidebarCollapsed,o=Math.round((n.winWidth+o-s.nodes.popup.offsetWidth)/2),t=i.topMenu+s.params.popupIndent;break;case"bottom":o=s.components.sidebar.isExpanded?i.sidebarExpanded:i.sidebarCollapsed,o=Math.round((n.winWidth+o-s.nodes.popup.offsetWidth)/2),t=n.winHeight-i.popupHeight-s.params.popupIndent;break;case"left":o=(s.components.sidebar.isExpanded?i.sidebarExpanded:i.sidebarCollapsed)+s.params.popupIndent,t=Math.round((n.winHeight-i.popupHeight)/2);break;case"left-top":o=(s.components.sidebar.isExpanded?i.sidebarExpanded:i.sidebarCollapsed)+s.params.popupIndent,t=i.topMenu+s.params.popupIndent;break;default:o=s.components.sidebar.isExpanded?i.sidebarExpanded:i.sidebarCollapsed,o=Math.round((n.winWidth+o-s.nodes.popup.offsetWidth)/2),t=Math.round((n.winHeight+i.topMenu-i.popupHeight)/2)}break;default:o=Math.round((n.winWidth-s.nodes.popup.offsetWidth)/2),t=Math.round((n.winHeight-i.popupHeight)/2)}else t=o=0,a="auto";s.nodes.popupContent.style.height="auto"===a?a:[a,"px"].join(""),cm.setCSSTranslate(s.nodes.popup,[o,"px"].join(""),[t,"px"].join(""),0,"scale(1)")}};s.start=function(){return o(),s},s.stop=function(){return a(),s},s.next=function(){return 0<=s.currentStage&&(App.HelpTourScenario[s.currentStage+1]?r(s.currentStage+1):a()),s},s.prev=function(){return 0<=s.currentStage&&(App.HelpTourScenario[s.currentStage-1]?r(s.currentStage-1):a()),s},s.params.duration=cm.getTransitionDurationFromLESS("AppHelpTour-Duration",s.params.duration),s.params.adaptiveFrom=cm.getLESSVariable("AppHelpTour-AdaptiveFrom",s.params.adaptiveFrom,!0),s.setParams(e),s.convertEvents(s.params.events),s.getDataNodes(s.params.node),s.getDataConfig(s.params.node),s.addToStack(s.params.node),s.params["Com.Overlay"].container=s.params.container,s.params["Com.Overlay"].name=[s.params.name,"overlay"].join("-"),cm.getConstructor("Com.Overlay",function(e){s.components.overlays.main=new e(cm.merge(s.params["Com.Overlay"],{position:"fixed"})),s.components.overlays.sidebar=new e(s.params["Com.Overlay"]),s.components.overlays.topMenu=new e(s.params["Com.Overlay"]),s.components.overlays.template=new e(cm.merge(s.params["Com.Overlay"],{position:"fixed"})),cm.addEvent(s.params.node,"click",o)}),s.triggerEvent("onRender"),s.params.autoStart&&o()}),App.HelpTourScenario=[{position:"window:center",arrow:!1,overlays:{main:"transparent",sidebar:"dark",topMenu:"dark",template:"dark"},sidebar:!1,topMenu:!1,content:"<h3>QuickSilk Online Tour!</h3><p>Welcome to QuickSilk! Use the buttons at the bottom of each help bubble to quickly discover how to navigate and use the QuickSilk software. This online tour automatically appears the first time you login. Anytime after this, simply click on the help tour menu item for a quick refresher.</p>"},{position:"topMenuItem:user:dropdown:left",arrow:"right",overlays:{main:"transparent",sidebar:"dark",topMenu:"transparent",template:"dark"},sidebar:!1,topMenu:"user",content:"<h3>User Menu</h3><p>Click on your name to view the admin panel (future), your profile, or to logout. The View Profile link provides the ability to manage your subscription and billing, password, forum settings, working groups and public profile.</p>"},{position:"topMenuItem:modules:dropdown:right",arrow:"left",overlays:{main:"transparent",sidebar:"dark",topMenu:"transparent",template:"dark"},sidebar:!1,topMenu:"modules",content:"<h3>Modules</h3><p>The Module manager allows you to work on your modules from the administration panel. Simply mouse over the Modules menu and then scroll down and click on the module you wish to work with. </p>"},{position:"template:left-top",arrow:"left",overlays:{main:"transparent",sidebar:"transparent",topMenu:"dark",template:"dark"},sidebar:!1,topMenu:!1,content:"<h3>Left Panel Slider</h3><p>The left slider widget provides you with quick access to the modules, pages, layouts and template features. Simply click on the icon for the tab you wish to use.</p>"},{position:"template:left-top",arrow:"left",overlays:{main:"transparent",sidebar:"transparent",topMenu:"dark",template:"dark"},sidebar:"template-manager",topMenu:!1,content:"<h3>Installed Modules</h3><p>The modules tab provides quick access to the modules that you've subscribed to. Once you've opened a page or a template, open the modules tab to drag and drop the modules you wish to include.</p>"},{position:"template:left-top",arrow:"left",overlays:{main:"transparent",sidebar:"transparent",topMenu:"dark",template:"dark"},sidebar:"pages",topMenu:!1,content:"<h3>Site Pages</h3><p>The site pages tab allows you to quickly open, modify and manage your website pages. Simply open the tab and click on the web page you wish to work on.</p>"},{position:"template:left-top",arrow:"left",overlays:{main:"transparent",sidebar:"transparent",topMenu:"dark",template:"dark"},sidebar:"layouts",topMenu:!1,content:"<h3>Page Layouts</h3><p>Use the page layout tab to open, modify and manage the layouts of your various web page templates. A page layout will consist of the common elements you have on every page.</p>"},{position:"template:left-top",arrow:"left",overlays:{main:"transparent",sidebar:"transparent",topMenu:"dark",template:"dark"},sidebar:"templates",topMenu:!1,content:"<h3>Templates</h3><p>The templates tab displays the different custom or predesigned templates that you've installed and are immediately available for use on your website. If you want to view or install other templates, you'll do so from the template gallery.</p>"},{position:"template:center",arrow:!1,overlays:{main:"transparent",sidebar:"dark",topMenu:"dark",template:"light"},sidebar:!1,topMenu:!1,content:"<h3>Drop Area</h3><p>The drop area is where you drag and drop the modules. To move a module onto a page or template place your mouse on the desired module icon, hold down the left button on your mouse, and drag the module to the highlighted area of the page you wish to drop it, then let go of the mouse button.</p>"},{position:"topMenuItem:support:container:right",arrow:"top",overlays:{main:"transparent",sidebar:"dark",topMenu:"transparent",template:"dark"},sidebar:!1,topMenu:"support",content:"<h3>Need Help?</h3><p>Are you stuck, experiencing an issue, found a bug or have a suggestion? Simply click on this link and send us a message. FYI, to assist in the troubleshooting process we automatically collect information on the operating system, browser and browser version you are using. Our goal is to respond to your message within 1 business day.</p>"}],cm.define("App.ImageInput",{extend:"Com.ImageInput",params:{fileManager:!0,fileManagerConstructor:"App.elFinderFileManagerContainer",fileUploader:!0,fileUploaderConstructor:"App.FileUploaderContainer"}},function(e){Com.ImageInput.apply(this,arguments)}),cm.define("App.LivePreviewContent",{extend:"Com.AbstractController",params:{name:"app-livepreview",renderStructure:!0,embedStructureOnRender:!1,"Com.Overlay":{removeOnClose:!0,showSpinner:!0,showContent:!1,position:"absolute",theme:"light"}}},function(e){this.isPower=!0,this.isPowerProcess=!1,this.powerCount=0,Com.AbstractController.apply(this,arguments)}),cm.getConstructor("App.LivePreviewContent",function(e,n,t){var o=t._inherit;t.construct=function(){var e=this;return e.devicePowerToggleHandler=e.devicePowerToggle.bind(e),o.prototype.construct.apply(e,arguments),e},t.renderView=function(){return this.renderLoaderView(),this},t.renderViewModel=function(){var t=this;return o.prototype.renderViewModel.apply(t,arguments),cm.getConstructor("Com.Overlay",function(e,n){t.components.overlay=new e(cm.merge(t.params[n],{container:t.nodes.deviceScreen}))}),cm.addEvent(t.nodes.iframe,"load",function(){t.components.overlay&&t.components.overlay.close()}),cm.addEvent(t.nodes.devicePower,"mousedown",t.devicePowerToggleHandler),t},t.setView=function(e){return cm.removeClass(this.nodes.container,"is-desktop is-tablet is-mobile"),cm.addClass(this.nodes.container,["is",e].join("-")),this},t.setTemplate=function(e){return this.components.overlay&&this.components.overlay.open(),this.nodes.iframe.src=e,this},t.renderLoaderView=function(){var e=this;return e.nodes.loader={},e.nodes.loader.container=cm.node("div",{class:"device__loader is-hidden"},cm.node("div",{class:"inner"},cm.node("div",{class:"icon app-i__quicksilk"}))),e.nodes.blues={},e.nodes.blues.container=cm.node("div",{class:"device__blues is-hidden"},cm.node("div",{class:"inner"},cm.node("p","A problem has been detected and QuickSilk has been shut down to prevent damage to your device."),cm.node("p","The problem seems to be caused by the following file: FAKEPOWERBUTTON.SYS"),cm.node("p","POWER_FAULT_IN_NONPOWERED_BUTTON"),cm.node("p","If this is the first time you've seen this Stop error screen, restart your device. If this screen appears again, check to make sure you are not pressing power button."),cm.node("p","Technical Information:"),cm.node("p","*** START"),cm.node("p","010101000110100001100101011100100110010100100000011000010111001001100101001000000110111001101111001000000100010101100001011100110111010001100101011100100010000001000101011001110110011101110011001000000111010101110000001000000110100001100101011100100110010100101100001000000110011101101111001000000110000101110111011000010111100100100001"),cm.node("p","*** END"))),cm.appendChild(e.nodes.blues.container,e.nodes.deviceScreen),cm.appendChild(e.nodes.loader.container,e.nodes.deviceScreen),e},t.devicePowerToggle=function(){var e=this;return e.isPowerProcess||(e.isPower?e.devicePowerOff():e.devicePowerOn()),e},t.devicePowerOff=function(){var e=this;return e.isPower=!1,e.isPowerProcess=!0,cm.addClass(e.nodes.deviceContent,"is-hidden"),cm.addClass(e.nodes.blues.container,"is-hidden"),setTimeout(function(){e.isPowerProcess=!1},500),e},t.devicePowerOn=function(){var e=this;return e.powerCount++,e.isPower=!0,e.isPowerProcess=!0,1==e.powerCount?e.devicePowerOnFailed():e.devicePowerOnNormal(),e},t.devicePowerOnNormal=function(){var e=this;return cm.replaceClass(e.nodes.deviceContent,"is-hidden","is-loading"),cm.removeClass(e.nodes.loader.container,"is-hidden"),setTimeout(function(){cm.removeClass(e.nodes.deviceContent,"is-loading"),cm.addClass(e.nodes.loader.container,"is-loaded"),setTimeout(function(){cm.replaceClass(e.nodes.loader.container,"is-loaded","is-hidden"),setTimeout(function(){e.isPowerProcess=!1},500)},500)},1500),e},t.devicePowerOnFailed=function(){var e=this;return cm.replaceClass(e.nodes.blues.container,"is-hidden","is-loading"),cm.removeClass(e.nodes.loader.container,"is-hidden"),setTimeout(function(){cm.removeClass(e.nodes.blues.container,"is-loading"),cm.addClass(e.nodes.loader.container,"is-loaded"),setTimeout(function(){cm.replaceClass(e.nodes.loader.container,"is-loaded","is-hidden"),setTimeout(function(){e.isPowerProcess=!1},500)},500)},1500),e}}),cm.define("App.LivePreviewMenu",{extend:"Com.AbstractController",params:{name:"app-livepreview",topMenuName:"app-topmenu",contentName:"app-livepreview",renderStructure:!1,embedStructureOnRender:!1}},function(e){this.template=null,Com.AbstractController.apply(this,arguments)}),cm.getConstructor("App.LivePreviewMenu",function(e,n,t){var o=t._inherit;t.renderViewModel=function(){var t=this;return o.prototype.renderViewModel.apply(t,arguments),cm.find("Com.Select","templates",t.nodes.container,function(e){t.components.select=e,t.components.select.addEvent("onChange",function(e,n){t.setTemplate(n)}),t.setTemplate(t.components.select.get())}),new cm.Finder("App.TopMenu",t.params.topMenuName,null,function(e){t.components.topMenu=e}),new cm.Finder("App.LivePreviewContent",t.params.contentName,null,function(e){t.components.content=e}),cm.addEvent(t.nodes.desktop,"click",function(){t.reset(),t.setView("desktop")}),cm.addEvent(t.nodes.tablet,"click",function(){t.reset(),t.setView("tablet")}),cm.addEvent(t.nodes.mobile,"click",function(){t.reset(),t.setView("mobile")}),cm.addEvent(t.nodes.select,"click",function(){t.storageWrite("template",t.template);try{window.close()}catch(e){}}),t},t.reset=function(){return cm.removeClass(this.nodes.desktop,"active"),cm.removeClass(this.nodes.tablet,"active"),cm.removeClass(this.nodes.mobile,"active"),this},t.setView=function(e){var n=this;return cm.addClass(n.nodes[e],"active"),n.components.content&&n.components.content.setView(e),n.components.topMenu&&n.components.topMenu.collapse(),n},t.setTemplate=function(e){var n=this;return n.template=e,n.components.content&&n.components.content.setTemplate(e),n.components.topMenu&&n.components.topMenu.collapse(),n}}),cm.define("App.LoginBox",{modules:["Params","DataConfig","DataNodes"],events:["onRender"],params:{node:cm.Node("div"),"Com.Tooltip":{targetEvent:"click",hideOnReClick:!0,preventClickEvent:!0,adaptiveX:!0,adaptiveY:!0,scroll:!1,left:"(targetWidth - selfWidth) / 2",top:"targetHeight + 8",className:"app-pt__box-login__tooltip"}}},function(e){var n=this,t={},o=(n.nodes={button:cm.Node("div"),target:cm.Node("div")},function(){t.tooltip=new Com.Tooltip(cm.merge(n.params["Com.Tooltip"],{target:n.nodes.button,content:n.nodes.target,events:{onShow:a}}))}),a=function(){var e=cm.getByAttr("type","text",n.nodes.target)[0];e&&e.focus()};n.setParams(e),n.getDataNodes(n.params.node),n.getDataConfig(n.params.node),o()}),cm.define("App.MenuConstructor",{extend:"App.AbstractForm",params:{node:cm.node("div"),embedStructure:"none",renderStructure:!1,collectorPriority:100,namePrefix:"params"}},function(e){this.items={},App.AbstractForm.apply(this,arguments)}),cm.getConstructor("App.MenuConstructor",function(e,n,t){var a=t._inherit;t.construct=function(){var e=this;return e.destructProcessHander=e.destructProcess.bind(e),e.addEvent("onDestructProcess",e.destructProcessHander),a.prototype.construct.apply(e,arguments),e},t.destructProcess=function(){return this.components.finder&&this.components.finder.remove(),this},t.renderViewModel=function(){var o=this;return a.prototype.renderViewModel.apply(o,arguments),cm.forEach(App.MenuConstructorNames,function(e,n){var t={variable:n,name:o.getName(e),selfName:o.getSelfName(e)};cm.find("*",t.name,o.nodes.container,function(e){t.controller=e,t.controller.addEvent("onChange",function(e,n){t.value=n,o.processPreview()}),t.value=t.controller.get()}),o.items[t.variable]=t}),o.components.finder=new cm.Finder("App.MenuConstructorPreview",null,null,function(e){o.components.preview=e,o.processPreview()},{multiple:!0}),o},t.getName=function(e){return this.params.namePrefix+e.split(".").map(function(e){return"["+e+"]"}).join("")},t.getSelfName=function(e){return e.split(".").pop()},t.processPreview=function(){var o,a={};cm.forEach(this.items,function(t){if(void 0!==t.value)switch(t.value._type){case"file":a[t.variable]=cm.URLToCSSURL(t.value.url);break;case"font":cm.forEach(t.value,function(e,n){a[t.variable+App.MenuConstructorNamesFont[n]]=e});break;default:/BorderSize|Padding/.test(t.variable)&&(o=t.value.split(/\s+/),cm.forEach(App.MenuConstructorNamesBox,function(e,n){a[[t.variable,e].join("-")]=o[n]})),a[t.variable]=t.value}}),this.components.preview&&this.components.preview.set(a)}}),App.MenuConstructorNamesBox=["Top","Right","Bottom","Left"],App.MenuConstructorNamesFont={"line-height":"LineHeight","font-weight":"Weight","font-style":"Style","text-decoration":"Decoration","font-family":"Family","font-size":"Size",color:"Color"},App.MenuConstructorNames={"Primary-Item-Padding":"primary_items.inner-padding","Primary-Item-Indent":"primary_items.inner-between","Primary-Default-BackgroundColor":"primary_items.default.background-color","Primary-Default-BackgroundImage":"primary_items.default.background-image","Primary-Default-BackgroundRepeat":"primary_items.default.background-repeat","Primary-Default-BackgroundPosition":"primary_items.default.background-position","Primary-Default-BackgroundScaling":"primary_items.default.background-scaling","Primary-Default-BackgroundAttachment":"primary_items.default.background-attachment","Primary-Default-BorderSize":"primary_items.default.border-size","Primary-Default-BorderStyle":"primary_items.default.border-style","Primary-Default-BorderColor":"primary_items.default.border-color","Primary-Default-BorderRadius":"primary_items.default.border-radius","Primary-Default-FontLineHeight":"primary_items.default.font.line-height","Primary-Default-FontWeight":"primary_items.default.font.font-weight","Primary-Default-FontStyle":"primary_items.default.font.font-style","Primary-Default-FontDecoration":"primary_items.default.font.text-decoration","Primary-Default-FontFamily":"primary_items.default.font.font-family","Primary-Default-FontSize":"primary_items.default.font.font-size","Primary-Default-FontColor":"primary_items.default.font.color","Primary-Default-Font":"primary_items.default.font","Primary-Hover-BackgroundColor":"primary_items.hover.background-color","Primary-Hover-BackgroundImage":"primary_items.hover.background-image","Primary-Hover-BackgroundRepeat":"primary_items.hover.background-repeat","Primary-Hover-BackgroundPosition":"primary_items.hover.background-position","Primary-Hover-BackgroundScaling":"primary_items.hover.background-scaling","Primary-Hover-BackgroundAttachment":"primary_items.hover.background-attachment","Primary-Hover-BorderSize":"primary_items.hover.border-size","Primary-Hover-BorderStyle":"primary_items.hover.border-style","Primary-Hover-BorderColor":"primary_items.hover.border-color","Primary-Hover-BorderRadius":"primary_items.hover.border-radius","Primary-Hover-FontLineHeight":"primary_items.hover.font.line-height","Primary-Hover-FontWeight":"primary_items.hover.font.font-weight","Primary-Hover-FontStyle":"primary_items.hover.font.font-style","Primary-Hover-FontDecoration":"primary_items.hover.font.text-decoration","Primary-Hover-FontFamily":"primary_items.hover.font.font-family","Primary-Hover-FontSize":"primary_items.hover.font.font-size","Primary-Hover-FontColor":"primary_items.hover.font.color","Primary-Hover-Font":"primary_items.hover.font","Primary-Active-BackgroundColor":"primary_items.active.background-color","Primary-Active-BackgroundImage":"primary_items.active.background-image","Primary-Active-BackgroundRepeat":"primary_items.active.background-repeat","Primary-Active-BackgroundPosition":"primary_items.active.background-position","Primary-Active-BackgroundScaling":"primary_items.active.background-scaling","Primary-Active-BackgroundAttachment":"primary_items.active.background-attachment","Primary-Active-BorderSize":"primary_items.active.border-size","Primary-Active-BorderStyle":"primary_items.active.border-style","Primary-Active-BorderColor":"primary_items.active.border-color","Primary-Active-BorderRadius":"primary_items.active.border-radius","Primary-Active-FontLineHeight":"primary_items.active.font.line-height","Primary-Active-FontWeight":"primary_items.active.font.font-weight","Primary-Active-FontStyle":"primary_items.active.font.font-style","Primary-Active-FontDecoration":"primary_items.active.font.text-decoration","Primary-Active-FontFamily":"primary_items.active.font.font-family","Primary-Active-FontSize":"primary_items.active.font.font-size","Primary-Active-FontColor":"primary_items.active.font.color","Primary-Active-Font":"primary_items.active.font","Primary-Container-Padding":"primary_container.inner-padding","Primary-Container-BackgroundColor":"primary_container.background-color","Primary-Container-BackgroundImage":"primary_container.background-image","Primary-Container-BackgroundRepeat":"primary_container.background-repeat","Primary-Container-BackgroundPosition":"primary_container.background-position","Primary-Container-BackgroundScaling":"primary_container.background-scaling","Primary-Container-BackgroundAttachment":"primary_container.background-attachment","Primary-Container-BorderSize":"primary_container.border-size","Primary-Container-BorderStyle":"primary_container.border-style","Primary-Container-BorderColor":"primary_container.border-color","Primary-Container-BorderRadius":"primary_container.border-radius","Secondary-Item-Padding":"secondary_items.inner-padding","Secondary-Item-Indent":"secondary_items.inner-between","Secondary-Default-BackgroundColor":"secondary_items.default.background-color","Secondary-Default-BackgroundImage":"secondary_items.default.background-image","Secondary-Default-BackgroundRepeat":"secondary_items.default.background-repeat","Secondary-Default-BackgroundPosition":"secondary_items.default.background-position","Secondary-Default-BackgroundScaling":"secondary_items.default.background-scaling","Secondary-Default-BackgroundAttachment":"secondary_items.default.background-attachment","Secondary-Default-BorderSize":"secondary_items.default.border-size","Secondary-Default-BorderStyle":"secondary_items.default.border-style","Secondary-Default-BorderColor":"secondary_items.default.border-color","Secondary-Default-BorderRadius":"secondary_items.default.border-radius","Secondary-Default-FontLineHeight":"secondary_items.default.font.line-height","Secondary-Default-FontWeight":"secondary_items.default.font.font-weight","Secondary-Default-FontStyle":"secondary_items.default.font.font-style","Secondary-Default-FontDecoration":"secondary_items.default.font.text-decoration","Secondary-Default-FontFamily":"secondary_items.default.font.font-family","Secondary-Default-FontSize":"secondary_items.default.font.font-size","Secondary-Default-FontColor":"secondary_items.default.font.color","Secondary-Default-Font":"secondary_items.default.font","Secondary-Hover-BackgroundColor":"secondary_items.hover.background-color","Secondary-Hover-BackgroundImage":"secondary_items.hover.background-image","Secondary-Hover-BackgroundRepeat":"secondary_items.hover.background-repeat","Secondary-Hover-BackgroundPosition":"secondary_items.hover.background-position","Secondary-Hover-BackgroundScaling":"secondary_items.hover.background-scaling","Secondary-Hover-BackgroundAttachment":"secondary_items.hover.background-attachment","Secondary-Hover-BorderSize":"secondary_items.hover.border-size","Secondary-Hover-BorderStyle":"secondary_items.hover.border-style","Secondary-Hover-BorderColor":"secondary_items.hover.border-color","Secondary-Hover-BorderRadius":"secondary_items.hover.border-radius","Secondary-Hover-FontLineHeight":"secondary_items.hover.font.line-height","Secondary-Hover-FontWeight":"secondary_items.hover.font.font-weight","Secondary-Hover-FontStyle":"secondary_items.hover.font.font-style","Secondary-Hover-FontDecoration":"secondary_items.hover.font.text-decoration","Secondary-Hover-FontFamily":"secondary_items.hover.font.font-family","Secondary-Hover-FontSize":"secondary_items.hover.font.font-size","Secondary-Hover-FontColor":"secondary_items.hover.font.color","Secondary-Hover-Font":"secondary_items.hover.font","Secondary-Active-BackgroundColor":"secondary_items.active.background-color","Secondary-Active-BackgroundImage":"secondary_items.active.background-image","Secondary-Active-BackgroundRepeat":"secondary_items.active.background-repeat","Secondary-Active-BackgroundPosition":"secondary_items.active.background-position","Secondary-Active-BackgroundScaling":"secondary_items.active.background-scaling","Secondary-Active-BackgroundAttachment":"secondary_items.active.background-attachment","Secondary-Active-BorderSize":"secondary_items.active.border-size","Secondary-Active-BorderStyle":"secondary_items.active.border-style","Secondary-Active-BorderColor":"secondary_items.active.border-color","Secondary-Active-BorderRadius":"secondary_items.active.border-radius","Secondary-Active-FontLineHeight":"secondary_items.active.font.line-height","Secondary-Active-FontWeight":"secondary_items.active.font.font-weight","Secondary-Active-FontStyle":"secondary_items.active.font.font-style","Secondary-Active-FontDecoration":"secondary_items.active.font.text-decoration","Secondary-Active-FontFamily":"secondary_items.active.font.font-family","Secondary-Active-FontSize":"secondary_items.active.font.font-size","Secondary-Active-FontColor":"secondary_items.active.font.color","Secondary-Active-Font":"secondary_items.active.font","Secondary-Container-Padding":"secondary_container.inner-padding","Secondary-Container-BackgroundColor":"secondary_container.background-color","Secondary-Container-BackgroundImage":"secondary_container.background-image","Secondary-Container-BackgroundRepeat":"secondary_container.background-repeat","Secondary-Container-BackgroundScaling":"secondary_container.background-scaling","Secondary-Container-BackgroundPosition":"secondary_container.background-position","Secondary-Container-BackgroundAttachment":"secondary_container.background-attachment","Secondary-Container-BorderSize":"secondary_container.border-size","Secondary-Container-BorderStyle":"secondary_container.border-style","Secondary-Container-BorderColor":"secondary_container.border-color","Secondary-Container-BorderRadius":"secondary_container.border-radius","Mobile-Padding":"mobile.inner-padding","Mobile-BackgroundColor":"mobile.background-color","Mobile-BackgroundImage":"mobile.menu-icon","Mobile-BorderSize":"mobile.border-size","Mobile-BorderStyle":"mobile.border-style","Mobile-BorderColor":"mobile.border-color","Mobile-BorderRadius":"mobile.border-radius","Mobile-FontLineHeight":"mobile.font.line-height","Mobile-FontWeight":"mobile.font.font-weight","Mobile-FontStyle":"mobile.font.font-style","Mobile-FontDecoration":"mobile.font.font-style","Mobile-FontFamily":"mobile.font.font-family","Mobile-FontSize":"mobile.font.font-size","Mobile-FontColor":"mobile.font.font-color","Mobile-Font":"mobile.font"},cm.define("App.MenuConstructorPreview",{extend:"Com.AbstractController",params:{node:cm.node("div"),embedStructure:"none",renderStructure:!1,collectorPriority:100}},function(e){this.lessDefault=null,this.lessVariables={},Com.AbstractController.apply(this,arguments)}),cm.getConstructor("App.MenuConstructorPreview",function(e,n,t){var o=t._inherit;t.set=function(e){return this.lessVariables=e||{},this.parseLess(),this},t.renderViewModel=function(){var t=this;return o.prototype.renderViewModel.apply(t,arguments),t.lessDefault=t.nodes.less.innerHTML,cm.loadScript({path:"less",src:"%assetsUrl%/libs/less/less.min.js?%version%",callback:function(e){e&&(t.components.less=e,t.parseLess())}}),cm.find("Module.Menu",null,t.nodes.contentInner,function(e){t.components.menu=e}),cm.find("Com.ColorPicker","background",t.nodes.title.container,function(e){t.components.background=e,t.components.background.addEvent("onChange",function(e,n){t.nodes.contentInner.style.backgroundColor=n})}),cm.find("Com.Select","view",t.nodes.title.container,function(e){t.components.view=e,t.components.view.addEvent("onChange",function(e,n){switch(t.components.menu&&t.components.menu.setView(n),n){case"horizontal":t.components.submenu&&t.components.submenu.set("dropdown"),cm.addClass(t.nodes.title.toolbar.submenu,"is-hidden");break;case"vertical":t.components.submenu&&t.components.submenu.set("visible"),cm.removeClass(t.nodes.title.toolbar.submenu,"is-hidden");break;case"mobile":cm.addClass(t.nodes.title.toolbar.submenu,"is-hidden")}})}),cm.find("Com.Select","submenu",t.nodes.title.container,function(e){t.components.submenu=e,t.components.submenu.addEvent("onChange",function(e,n){t.components.menu&&t.components.menu.setSubmenuView(n)})}),cm.find("Com.Select","align",t.nodes.title.container,function(e){t.components.align=e,t.components.align.addEvent("onChange",function(e,n){t.components.menu&&t.components.menu.setAlign(n)})}),t},t.parseLess=function(){var t=this;return t.components.less&&t.components.less.render(t.lessDefault,{modifyVars:t.lessVariables},function(e,n){n&&!cm.isEmpty(n.css)&&(t.nodes.css.innerHTML=n.css)}),t}}),cm.define("App.MultipleFileInput",{extend:"Com.MultipleFileInput",params:{inputConstructor:"App.FileInput",local:!0,fileManager:!0,fileManagerConstructor:"App.elFinderFileManagerContainer",fileUploader:!0,fileUploaderConstructor:"App.FileUploaderContainer"}},function(e){Com.MultipleFileInput.apply(this,arguments)}),cm.define("App.Notification",{extend:"Com.AbstractController",params:{renderStructure:!1,embedStructureOnRender:!1,controllerEvents:!0,show:"inherit",remember:!0,rememberTime:!1}},function(e){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("App.Notification",function(e,n,t){t._inherit;t.onConstructStart=function(){var e=this;e.isShow=null,e.showHandler=e.show.bind(e),e.hideHandler=e.hide.bind(e)},t.onConstructEnd=function(){var e,n,t=this;t.isShow="inherit"===t.params.show?cm.isClass(t.nodes.container,"is-show"):t.params.show,t.params.remember&&(e=t.storageRead("isShow"),n=t.storageRead("date"),cm.isUndefined(e)||cm.isUndefined(n)||(n=!!t.params.rememberTime&&Date.now()-parseInt(t.params.rememberTime)>parseInt(n),t.isShow=n?t.isShow:e)),t.isShow?t.show(!0,!0):t.hide(!0,!0)},t.renderViewModel=function(){var e=this;cm.addEvent(e.nodes.close,"click",function(){e.hide()})},t.show=function(e,n){var t=this;return!n&&cm.isBoolean(t.isShow)&&t.isShow||(t.params.remember&&(t.storageWrite("isShow",!0),t.storageWrite("date",Date.now())),e&&cm.addClass(t.nodes.container,"is-immediately",!0),t.isShow=!0,cm.replaceClass(t.nodes.container,"is-hide","is-show"),e&&setTimeout(function(){cm.removeClass(t.nodes.container,"is-immediately")},5)),t},t.hide=function(e,n){var t=this;return(n||!cm.isBoolean(t.isShow)||t.isShow)&&(t.params.remember&&(t.storageWrite("isShow",!1),t.storageWrite("date",Date.now())),e&&cm.addClass(t.nodes.container,"is-immediately"),t.isShow=!1,cm.replaceClass(t.nodes.container,"is-show","is-hide"),e)&&setTimeout(function(){cm.removeClass(t.nodes.container,"is-immediately")},5),t},t.toggle=function(){return this.isShow?this.hide():this.show(),this}}),cm.define("App.Panel",{extend:"Com.AbstractController",events:["onOpenStart","onOpen","onOpenEnd","onCloseStart","onClose","onCloseEnd","onError","onSaveStart","onSave","onSaveEnd","onSaveError","onSaveSuccess","onSaveFailure","onLoadStart","onLoad","onLoadEnd","onLoadError","onCancelStart","onCancel"],params:{node:cm.node("div"),container:"document.body",name:"",embedStructure:"append",embedStructureOnRender:!1,customEvents:!0,constructCollector:!0,removeOnDestruct:!0,type:"full",duration:"cm._config.animDurationLong",autoOpen:!0,destructOnClose:!0,removeOnClose:!0,showCloseButton:!0,showBackButton:!1,showButtons:!0,showOverlay:!0,overlayDelay:0,overlayPosition:"content",title:null,content:null,responseKey:"data",responseContentKey:"data.content",responseTitleKey:"data.title",responseStatusKey:"data.success",responsePreviewKey:"data.preview",renderContentOnSuccess:!1,closeOnSuccess:!0,get:{type:"json",method:"GET",url:"",params:""},post:{type:"json",method:"POST",url:"",params:""},"Com.Request":{wrapContent:!0,swapContentOnError:!1,renderContentOnSuccess:!1,autoSend:!1,responseKey:"data",responseHTML:!0},"Com.Overlay":{autoOpen:!1,removeOnClose:!0,showSpinner:!0,showContent:!1,position:"absolute",theme:"light"}},strings:{close:"Close",back:"Back",cancel:"Cancel",save:"Save",saving:"Saving...",reload:"Reload",cancelDescription:"Cancel"}},function(e){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("App.Panel",function(e,n,t){var o=t._inherit;t.construct=function(e){var n=this;return n.nodes={},n.components={},n.isOpen=!1,n.isHide=!1,n.isLoaded=!1,n.isDestructed=!1,n.isProccesing=!1,n.destructOnClose=!1,n.hasGetRequest=!1,n.hasPostRequest=!1,n.isGetRequest=!1,n.isPostRequest=!1,n.transitionInterval=null,n.openHandler=n.open.bind(n),n.closeHandler=n.close.bind(n),n.saveHandler=n.save.bind(n),n.cancelHandler=n.cancel.bind(n),n.loadHandler=n.load.bind(n),n.transitionOpenHandler=n.transitionOpen.bind(n),n.transitionCloseHandler=n.transitionClose.bind(n),n.windowKeydownHandler=n.windowKeydown.bind(n),n.constructEndHandler=n.constructEnd.bind(n),n.setEventsProcessHandler=n.setEventsProcess.bind(n),n.unsetEventsProcessHandler=n.unsetEventsProcess.bind(n),n.onGetLESSVariablesProcessHandler=n.onGetLESSVariablesProcess.bind(n),n.addEvent("onConstructEnd",n.constructEndHandler),n.addEvent("onGetLESSVariablesProcess",n.onGetLESSVariablesProcessHandler),n.addEvent("onSetEventsProcess",n.setEventsProcessHandler),n.addEvent("onUnsetEventsProcess",n.unsetEventsProcessHandler),o.prototype.construct.apply(n,arguments),n},t.destruct=function(){var e=this;return e.isOpen?(e.destructOnClose=!0,e.close()):e.isDestructed||(e.destructOnClose=e.params.destructOnClose,o.prototype.destruct.apply(e,arguments)),e},t.constructEnd=function(){return this.params.autoOpen&&this.open(),this},t.validateParams=function(){var e=this;return e.triggerEvent("onValidateParamsStart"),e.triggerEvent("onValidateParamsProcess"),e.params["Com.Request"].overlayParams=e.params["Com.Overlay"],e.params["Com.Request"].showOverlay=e.params.showOverlay,e.params["Com.Request"].overlayDelay=e.params.overlayDelay,e.params["Com.Request"].responseKey=e.params.responseKey,e.params["Com.Request"].responseHTMLKey=e.params.responseContentKey,e.params["Com.Request"].responseStatusKey=e.params.responseStatusKey,e.params["Com.Request"].renderContentOnSuccess=e.params.renderContentOnSuccess,e.destructOnClose=e.params.destructOnClose,e.hasGetRequest=!cm.isEmpty(e.params.get.url),e.hasPostRequest=!cm.isEmpty(e.params.post.url),e.triggerEvent("onValidateParamsEnd"),e},t.onGetLESSVariablesProcess=function(){return this.params.duration=cm.getTransitionDurationFromLESS("AppPanel-Duration",this.params.duration),this},t.setEventsProcess=function(){return cm.addEvent(window,"keydown",this.windowKeydownHandler),this},t.unsetEventsProcess=function(){return cm.removeEvent(window,"keydown",this.windowKeydownHandler),this},t.open=function(){var e=this;return e.isDestructed&&(e.setEvents(),e.isDestructed=!1),e.isOpen||(e.embedStructure(e.nodes.container),e.addToStack(e.nodes.container),e.triggerEvent("onOpenStart"),e.hasGetRequest?e.load():(e.isLoaded=!0,e.showButton(["close","save"]),e.params.showButtons&&e.showButtons(!0),cm.customEvent.trigger(e.nodes.contentHolder,"redraw",{direction:"child",self:!1})),e.nodes.contentHolder.scrollTop=0,cm.addClass(e.nodes.container,"is-open",!0),e.transitionInterval=setTimeout(e.transitionOpenHandler,e.params.duration)),e},t.close=function(){var e=this;return e.isProccesing&&e.cancel(),e.isOpen&&(e.triggerEvent("onCloseStart"),cm.removeClass(e.nodes.container,"is-open",!0),e.transitionInterval=setTimeout(e.transitionCloseHandler,e.params.duration)),e},t.hide=function(){return this.isHide||(this.isHide=!0,cm.replaceClass(this.nodes.container,"is-show","is-hide")),this},t.show=function(){return this.isHide&&(this.isHide=!1,cm.replaceClass(this.nodes.container,"is-hide","is-show")),this},t.save=function(){var e,n=this;return n.isProccesing&&n.cancel(),n.isPostRequest=!0,n.triggerEvent("onSaveStart"),n.hasPostRequest?((e=cm.clone(n.params.post)).formData?e.params=new FormData(n.nodes.contentHolder):e.params=cm.merge(e.params,cm.getFDO(n.nodes.contentHolder)),n.showButton(["cancel","saving"]),n.components.request.setAction(e,"update").send()):(n.showButton(["close","save"]),n.triggerEvent("onSave"),n.triggerEvent("onSaveEnd")),n},t.load=function(){var e=this;return e.isProccesing&&e.cancel(),e.isGetRequest=!0,e.triggerEvent("onLoadStart"),e.hasGetRequest?(e.showButton("cancel"),e.components.request.setAction(e.params.get,"update").send()):(e.showButton(["close","save"]),e.triggerEvent("onLoad"),e.triggerEvent("onLoadEnd")),e},t.cancel=function(){var e=this;return e.triggerEvent("onCancelStart"),e.components.request.abort(),e.isLoaded?e.showButton(["close","save"]):e.showButton(["close","reload"]),e.triggerEvent("onCancel"),e},t.setTitle=function(e){var n=this;return cm.customEvent.trigger(n.nodes.label,"destruct",{direction:"child",self:!1}),cm.clearNode(n.nodes.label),e=cm.strToHTML(e),cm.isEmpty(e)||(cm.appendNodes(e,n.nodes.label),n.constructCollector(n.nodes.label)),n},t.setContent=function(e){var n=this;return cm.customEvent.trigger(n.nodes.contentHolder,"destruct",{direction:"child",self:!1}),cm.clearNode(n.nodes.contentHolder),e=cm.strToHTML(e),cm.isEmpty(e)||(cm.appendNodes(e,n.nodes.contentHolder),n.constructCollector(n.nodes.contentHolder)),n},t.setPreview=function(e){var n=this;return cm.customEvent.trigger(n.nodes.previewHolder,"destruct",{direction:"child",self:!1}),cm.clearNode(n.nodes.previewHolder),e=cm.strToHTML(e),cm.isEmpty(e)||(cm.addClass(n.nodes.previewHolder,"is-show"),cm.appendNodes(e,n.nodes.previewHolder),n.constructCollector(n.nodes.previewHolder)),n},t.renderView=function(){var e=this;return e.nodes.container=cm.node("div",{class:"app__panel"},e.nodes.dialogHolder=cm.node("div",{class:"app__panel__dialog-holder"},e.nodes.dialog=cm.node("div",{class:"app__panel__dialog"},e.nodes.inner=cm.node("div",{class:"inner"},e.nodes.title=cm.node("div",{class:"title"},e.nodes.label=cm.node("div",{class:"label"})),e.nodes.content=cm.node("div",{class:"content"},e.nodes.contentHolder=cm.node("div",{class:"inner"}))))),e.nodes.previewHolder=cm.node("div",{class:"app__panel__preview-holder"},e.nodes.preview=cm.node("div",{class:"app__panel__preview"},cm.node("div",{class:"inner"},cm.node("div",{class:"title"}),cm.node("div",{class:"content"}))))),e.params.showCloseButton&&(e.nodes.close=cm.node("div",{class:"icon cm-i cm-i__circle-close",title:e.lang("close")}),cm.addEvent(e.nodes.close,"click",e.closeHandler),cm.insertLast(e.nodes.close,e.nodes.title)),e.params.showBackButton&&(e.nodes.back=cm.node("div",{class:"icon cm-i cm-i__circle-arrow-left",title:e.lang("back")}),cm.addEvent(e.nodes.back,"click",e.closeHandler),cm.insertFirst(e.nodes.back,e.nodes.title)),e.renderButtonsView(),e.params.showButtons&&cm.appendChild(e.nodes.buttons,e.nodes.inner),e},t.renderViewModel=function(){var t=this;return o.prototype.renderViewModel.apply(t,arguments),"content"===t.params.overlayPosition?(t.params["Com.Overlay"].container=t.nodes.content,t.params["Com.Request"].overlayContainer=t.nodes.content):(t.params["Com.Overlay"].container=t.nodes.dialog,t.params["Com.Request"].overlayContainer=t.nodes.dialog),(t.hasGetRequest||t.hasPostRequest)&&(t.params["Com.Request"].container=t.nodes.contentHolder,cm.getConstructor("Com.Request",function(e,n){t.components.request=new e(t.params[n]),t.components.request.addEvent("onStart",function(){t.isProccesing=!0}).addEvent("onEnd",function(){t.isProccesing=!1,t.params.showButtons&&t.showButtons(),t.isGetRequest?t.triggerEvent("onLoadEnd"):t.isPostRequest&&t.triggerEvent("onSaveEnd"),t.isGetRequest=!1,t.isPostRequest=!1}).addEvent("onSuccess",function(e,n){t.isGetRequest?t.loadResponse(n):t.isPostRequest&&t.saveResponse(n)}).addEvent("onError",function(){t.isGetRequest?t.loadError():t.isPostRequest&&t.saveError()}).addEvent("onContentRender",function(){t.constructCollector(t.nodes.contentHolder)}).addEvent("onContentRenderEnd",function(){cm.customEvent.trigger(t.nodes.contentHolder,"redraw",{direction:"child",self:!1})})})),cm.isEmpty(t.params.title)||t.setTitle(t.params.title),cm.isEmpty(t.params.content)||t.setContent(t.params.content),t},t.setAttributes=function(){return o.prototype.setAttributes.apply(this,arguments),cm.addClass(this.nodes.container,["app__panel",this.params.type].join("--")),this},t.showButton=function(e){var n=this;cm.forEach(n.nodes.button,function(e){cm.addClass(e,"display-none")}),cm.isArray(e)?cm.forEach(e,function(e){n.nodes.button[e]&&cm.removeClass(n.nodes.button[e],"display-none")}):n.nodes.button[e]&&cm.removeClass(n.nodes.button[e],"display-none")},t.showButtons=function(e){var n=this;return cm.appendChild(n.nodes.buttons,n.nodes.inner),e&&cm.addClass(n.nodes.buttons,"is-immediately",!0),cm.addClass(n.nodes.buttons,"is-show",!0),n},t.renderButtonsView=function(){var e=this;return e.nodes.button={},e.nodes.buttons=cm.node("div",{class:"buttons"},cm.node("div",{class:"inner"},cm.node("div",{class:"pt__buttons pull-justify"},cm.node("div",{class:"inner"},e.nodes.button.close=cm.node("div",{class:"button button-danger"},e.lang("close")),e.nodes.button.cancel=cm.node("div",{class:"button button-danger"},e.lang("cancel")),e.nodes.button.save=cm.node("div",{class:"button button-primary"},e.lang("save")),e.nodes.button.reload=cm.node("div",{class:"button button-primary"},e.lang("reload")),e.nodes.button.saving=cm.node("div",{class:"button button-primary has-icon has-icon-small"},cm.node("div",{class:"icon small loader"}),cm.node("div",{class:"label"},e.lang("saving"))))))),e.nodes.button.cancel.setAttribute("title",e.lang("cancelDescription")),e.nodes.button.saving.setAttribute("title",e.lang("cancelDescription")),cm.addEvent(e.nodes.button.save,"click",e.saveHandler),cm.addEvent(e.nodes.button.close,"click",e.closeHandler),cm.addEvent(e.nodes.button.cancel,"click",e.cancelHandler),cm.addEvent(e.nodes.button.saving,"click",e.cancelHandler),cm.addEvent(e.nodes.button.reload,"click",e.loadHandler),e},t.windowKeydown=function(e){return cm.isKeyCode(e.keyCode,"escape")&&this.close(),this},t.transitionOpen=function(){return this.isOpen=!0,this.triggerEvent("onOpen"),this.triggerEvent("onOpenEnd"),this},t.transitionClose=function(){var e=this;return e.isOpen=!1,e.destructOnClose&&e.destruct(),e.params.removeOnClose&&cm.remove(e.nodes.container),e.triggerEvent("onClose"),e.triggerEvent("onCloseEnd"),e},t.loadResponse=function(e){var n=this;return n.isLoaded=!0,n.setTitle(cm.objectSelector(n.params.responseTitleKey,e.response)),n.setPreview(cm.objectSelector(n.params.responsePreviewKey,e.response)),n.showButton(["close","save"]),n.triggerEvent("onLoad"),n},t.loadError=function(){var e=this;return e.isLoaded?e.showButton(["close","save"]):e.showButton(["close","reload"]),e.triggerEvent("onLoadError"),e.triggerEvent("onError","load"),e},t.saveResponse=function(e){var n=this;return(!e.status||e.status&&n.params.renderContentOnSuccess)&&(n.setTitle(cm.objectSelector(n.params.responseTitleKey,e.response)),n.setPreview(cm.objectSelector(n.params.responsePreviewKey,e.response)),n.showButton(["close","save"])),e.status?(n.params.closeOnSuccess&&n.close(),n.triggerEvent("onSaveSuccess",e)):n.triggerEvent("onSaveFailure",e),n.triggerEvent("onSave",e),n},t.saveError=function(){return this.showButton(["close","save"]),this.triggerEvent("onSaveError"),this.triggerEvent("onError","save"),this}}),cm.define("App.PanelContainer",{extend:"Com.AbstractContainer",events:["onOpenStart","onOpenEnd","onCloseStart","onCloseEnd"],params:{constructor:"App.Panel",container:"document.body",destructOnClose:!0,restoreHolderContent:!0,params:{destructOnClose:!1,autoOpen:!1}}},function(e){Com.AbstractContainer.apply(this,arguments)}),cm.getConstructor("App.PanelContainer",function(e,n,t){var o=t._inherit;t.construct=function(){var e=this;return e.destructProcessHander=e.destructProcess.bind(e),e.showHandler=e.show.bind(e),e.hideHandler=e.hide.bind(e),e.addEvent("onDestructProcess",e.destructProcessHander),o.prototype.construct.apply(e,arguments),e},t.destructProcess=function(){return this.components.finder&&this.components.finder.remove(),this},t.show=function(e){return e&&cm.preventDefault(e),this.components.controller&&this.components.controller.show(),this},t.hide=function(e){return e&&cm.preventDefault(e),this.components.controller&&this.components.controller.hide(),this},t.renderControllerEvents=function(){var e=this;return e.components.controller.addEvent("onOpenStart",function(){e.triggerEvent("onOpenStart",e.components.controller),e.setHolderContent(),e.afterOpenController()}),e.components.controller.addEvent("onOpenEnd",function(){e.processNestedPanels(),e.triggerEvent("onOpenEnd",e.components.controller)}),e.components.controller.addEvent("onCloseStart",function(){e.triggerEvent("onCloseStart",e.components.controller)}),e.components.controller.addEvent("onCloseEnd",function(){e.restoreHolderContent(),e.afterCloseController(),e.triggerEvent("onCloseEnd",e.components.controller)}),e},t.processNestedPanels=function(){var n=this,e=n.components.controller.getStackNode();return n.components.finder=new cm.Finder("App.PanelContainer",null,e,function(e){e.setParams({params:{type:"story",showButtons:!1,showBackButton:!0,showCloseButton:!1}}),e.addEvent("onOpenStart",n.hideHandler),e.addEvent("onCloseStart",n.showHandler)},{childs:!0,multiple:!0}),n},t.setHolderContent=function(){var e=this;return!cm.isEmpty(e.nodes.content)&&cm.isParent(e.nodes.holder,e.nodes.content)&&e.components.controller.setContent(e.nodes.content),e},t.restoreHolderContent=function(){return cm.appendChild(this.nodes.content,this.nodes.holder),this}}),cm.define("App.SearchBox",{modules:["Params","DataConfig","DataNodes"],events:["onRender"],params:{node:cm.Node("div"),"Com.Tooltip":{targetEvent:"click",hideOnReClick:!0,preventClickEvent:!0,adaptiveX:!0,adaptiveY:!1,left:"-selfWidth+targetWidth",top:"targetHeight + 8",className:"app-mod__search__tooltip"}}},function(e){var n=this,t={},o=(n.nodes={button:cm.Node("div"),target:cm.Node("div")},function(){t.tooltip=new Com.Tooltip(cm.merge(n.params["Com.Tooltip"],{target:n.nodes.button,content:n.nodes.target,events:{onShow:a}}))}),a=function(){var e=cm.getByAttr("type","text",n.nodes.target)[0];e&&e.focus()};n.setParams(e),n.getDataNodes(n.params.node),n.getDataConfig(n.params.node),o()}),cm.define("App.ShutterstockManager",{extend:"Com.AbstractFileManager",params:{name:"shutterstock-manager",lazy:!0,showStats:!0,statsConstructor:"App.ShutterstockStats",statsParams:{},toolbarConstructor:"Com.Toolbar",toolbarParams:{embedStructure:"first"},searchConstructor:"Com.Input",searchParams:{embedStructure:"append",defaultValue:null,lazy:!0,icon:"icon small search linked"},searchTypeConstructor:"Com.Select",searchTypeParams:{embedStructure:"append"},categoriesRequestConstructor:"Com.Request",categoriesRequestParams:{autoSend:!1,responseHTML:!1,ajax:{type:"json",method:"get",url:"/shutterstock-api/images/categories"}},categoriesConstructor:"Com.TabsetHelper",categoriesParams:{},paginationConstructor:"Com.GalleryScrollPagination",paginationParams:{embedStructure:"append",showButton:"once",gridClass:"pt__grid--files",perPage:25,columns:5,responseCountKey:"total_count",responseHTML:!1,ajax:{type:"json",method:"get",url:"/shutterstock-api/images/search/%page%",urlPurchased:"/shutterstock-api/images/src"}},overlayConstructor:"Com.Overlay",overlayParams:{autoOpen:!1,lazy:!0,position:"absolute"},tourConstructor:"Com.Overlay",tourParams:{autoOpen:!1,lazy:!0,showSpinner:!1,showContent:!0,position:"absolute",theme:"transparent"},optimizeConstructor:"App.ShutterstockOptimizeContainer",optimizeParams:{autoOpen:!1}},strings:{categories:{_all:"All",_purchased:"My Purchased Images"},server_error:"An unexpected error has occurred. Please try again later.",empty:"There are no items to show.",tour:{content:"<p>Images are watermarked and can be used only on a temporary basis, and for evaluation purposes. To remove the watermark and obtain the usage rights to use the image on your website (only) you must purchase a license. A list of all temporary images youve downloaded, as well as the ability to purchase a use license - can be found in Modules > Manage > Shutterstock.</p>",confirm:"Yes, I agree",check:"Don't show this message again"},item:{optimize:"Optimize"},searchTypes:[{value:"data",text:"by image data"},{value:"id",text:"by image id"},{value:"author",text:"by author"}]}},function(e){this.getFilesProcessType=null,this.isLoaded=!1,Com.AbstractFileManager.apply(this,arguments)}),cm.getConstructor("App.ShutterstockManager",function(e,n,t,o){t.onConstructStart=function(){var e=this;e.categories=[{id:"_purchased",name:e.lang("categories._purchased")},{id:"_all",name:e.lang("categories._all")}],e.currentCategory=null,e.currentQuery=null,e.currentQueryType=null,e.currentItem=null,e.optimizeItem=null,e.state="initial",e.renderCategoriesResponseHandler=e.renderCategoriesResponse.bind(e),e.renderCategoriesErrorHandler=e.renderCategoriesError.bind(e),e.renderListPageHandler=e.renderListPage.bind(e),e.renderListErrorHandler=e.renderListError.bind(e),e.renderListEmptyHandler=e.renderListEmpty.bind(e),e.setListCategoryHandler=e.setListCategory.bind(e),e.setListQueryHandler=e.setListQuery.bind(e),e.setListQueryTypeHandler=e.setListQueryType.bind(e),e.showTourHandler=e.showTour.bind(e),e.hideTourHandler=e.hideTour.bind(e)},t.onDestruct=function(){cm.forEach(this.components,function(e){e.destruct&&e.destruct()})},t.complete=function(){var e=this;return e.currentItem&&"_purchased"===e.currentCategory&&"optimized"!==e.state?e.setOptimizeItem(e.currentItem):o.prototype.complete.apply(e,arguments),e},t.renderController=function(){var n=this;n.isLoaded=!0,cm.getConstructor(n.params.categoriesRequestConstructor,function(e){n.components.categoriesRequest=new e(cm.merge(n.params.categoriesRequestParams,{overlayContainer:n.nodes.inner})),n.components.categoriesRequest.addEvent("onSuccess",n.renderCategoriesResponseHandler),n.components.categoriesRequest.addEvent("onError",n.renderCategoriesErrorHandler),n.components.categoriesRequest.send()})},t.renderCategoriesError=function(e,n){n=cm.isEmpty(n.message)?"server_error":n.message,n=cm.node("div",{class:"cm__empty is-show"},this.lang(n));cm.clearNode(this.nodes.holder.inner),cm.appendChild(n,this.nodes.holder.inner),cm.removeClass(this.nodes.holder.container,"is-hidden",!0)},t.renderCategoriesResponse=function(e,n){var t=this,n=n.filtered;t.categories=cm.extend(t.categories,n),t.renderCategoriesView(),t.renderCategoriesViewModel(),cm.removeClass(t.nodes.holder.container,"is-hidden",!0),t.showTour()},t.renderCategoriesView=function(){var n=this,e={};(n.nodes.categories=e).container=cm.node("div",{class:"stock__view"},cm.node("div",{class:"stock__tabs"},cm.node("div",{class:"inner"},cm.node("div",{class:"pt__listing-items"},e.tabsHolder=cm.node("ul")))),e.list=cm.node("div",{class:"stock__list"},e.listHolder=cm.node("div",{class:"inner"}))),cm.forEach(n.categories,function(e){n.renderCategoryTab(e)}),cm.clearNode(n.nodes.holder.inner),cm.appendChild(e.container,n.nodes.holder.inner)},t.renderCategoryTab=function(e){var n={};e.title=e.name.replace("/"," / "),(e.label=n).container=cm.node("li",n.link=cm.node("a",e.title)),cm.appendChild(n.container,this.nodes.categories.tabsHolder),"_purchased"===e.id&&(n.sep=cm.node("li",{class:"sep"}),cm.appendChild(n.sep,this.nodes.categories.tabsHolder))},t.renderCategoriesViewModel=function(){var t=this;cm.getConstructor(t.params.toolbarConstructor,function(e){t.components.toolbar=new e(cm.merge(t.params.toolbarParams,{container:t.nodes.holder.inner})),t.renderToolbar()}),cm.getConstructor(t.params.categoriesConstructor,function(e){t.components.tabset=new e(cm.merge(t.params.categoriesParams,{items:t.categories})),t.components.tabset.addEvent("onTabShowStart",t.setListCategoryHandler),t.components.tabset.set("_all")}),cm.getConstructor(t.params.overlayConstructor,function(e){t.components.overlay=new e(cm.merge(t.params.overlayParams,{container:t.nodes.categories.list}))}),cm.getConstructor(t.params.paginationConstructor,function(e){t.components.pagination=new e(cm.merge(t.params.paginationParams,{container:t.nodes.categories.listHolder,scrollNode:t.nodes.categories.listHolder})),t.components.pagination.addEvent("onStart",function(){t.removeListErrors()}),t.components.pagination.addEvent("onEnd",function(){t.components.overlay.close()}),t.components.pagination.addEvent("onPageRenderEnd",t.renderListPageHandler),t.components.pagination.addEvent("onError",t.renderListErrorHandler),t.components.pagination.addEvent("onEmpty",t.renderListEmptyHandler)}),cm.getConstructor(t.params.tourConstructor,function(e){t.components.tour=new e(cm.merge(t.params.tourParams,{container:t.nodes.container})),t.components.tour.addEvent("onOpenStart",function(){cm.addClass(t.nodes.container,"is-blur")}),t.components.tour.addEvent("onCloseStart",function(){cm.removeClass(t.nodes.container,"is-blur")})}),cm.getConstructor(t.params.optimizeConstructor,function(e){t.components.optimize=new e(t.params.optimizeParams),t.components.optimize.addEvent("onComplete",function(e,n){t.completeOptimizeItem(n)}),t.components.optimize.addEvent("onClose",function(e,n){"complete"!==t.components.optimize.state&&t.cancelOptimizeItem(n)})})},t.renderToolbar=function(){var e,n,t=this;t.components.toolbar.addGroup({name:"all",position:"justify",adaptive:!1,flex:!0}),t.components.toolbar.addField({name:"search",group:"all",size:"is-prime",constructor:t.params.searchConstructor,constructorParams:cm.merge(t.params.searchParams,{events:{onChange:t.setListQueryHandler}})}),t.components.toolbar.addField({name:"type",group:"all",size:"medium",constructor:t.params.searchTypeConstructor,constructorParams:cm.merge(t.params.searchTypeParams,{options:t.langObject("searchTypes"),events:{onChange:t.setListQueryTypeHandler}})}),e=t.components.toolbar.getField("search","all"),n=t.components.toolbar.getField("type","all"),t.components.search=e.controller,t.components.searchType=n.controller},t.renderListError=function(){var e=this;cm.isEmpty(e.components.pagination.currentPage)&&(e.nodes.categories.error||(e.nodes.categories.error=cm.node("div",{class:"cm__empty"},e.lang("server_error"))),cm.insertFirst(e.nodes.categories.error,e.nodes.categories.listHolder),cm.addClass(e.nodes.categories.error,"is-show",!0))},t.renderListEmpty=function(){var e=this;1===e.components.pagination.currentPage&&(e.components.pagination.clear(),e.nodes.categories.empty||(e.nodes.categories.empty=cm.node("div",{class:"cm__empty"},e.lang("empty"))),cm.insertFirst(e.nodes.categories.empty,e.nodes.categories.listHolder),cm.addClass(e.nodes.categories.empty,"is-show",!0))},t.removeListErrors=function(){cm.removeClass(this.nodes.categories.error,"is-show"),cm.remove(this.nodes.categories.error),cm.removeClass(this.nodes.categories.empty,"is-show"),cm.remove(this.nodes.categories.empty)},t.renderListPage=function(e,n){var t=this;cm.forEach(n.data,function(e){t.renderListItem(e,n.container)})},t.renderListItem=function(n,e){var t=this,o={};((n=cm.merge(n,t.convertFile(n))).nodes=o).container=cm.node("li",o.link=cm.node("div",{class:"pt__image is-loading is-centered is-background is-cover is-hover",title:n.description},cm.node("div",{class:"inner"},o.descr=cm.node("div",{class:"descr"})))),o.descr.style.backgroundImage=cm.URLToCSSURL(n.thumbnail),cm.onImageLoad(n.thumbnail,function(e){n.width||n.height||(n.width=e.naturalWidth,n.height=e.naturalHeight),cm.addClass(o.link,"is-loaded",!0)}),cm.addEvent(o.link,"click",function(){t.setListItem(n)}),cm.addEvent(o.link,"dblclick",function(){t.processFiles(n),t.complete()}),cm.appendChild(o.container,e)},t.setListCategory=function(e,n){this.currentCategory=n.id,this.setPagination()},t.setListQuery=function(e,n){this.currentQuery=n,this.setPagination()},t.setListQueryType=function(e,n){this.currentQueryType=n,this.setPagination()},t.setListItem=function(e){var n=this;n.currentItem&&(cm.removeClass(n.currentItem.nodes.link,"active"),n.currentItem=null),cm.addClass(e.nodes.link,"active"),n.currentItem=e,n.processFiles(e)},t.setPagination=function(){var e=this,n="_purchased"===e.currentCategory?1:0,t="_purchased"===e.currentCategory?"urlPurchased":"url",o=/^_/.test(e.currentCategory)?null:e.currentCategory,a="_purchased"===e.currentCategory?null:e.currentQuery,r="_purchased"===e.currentCategory?null:e.currentQueryType;"_purchased"===e.currentCategory?(e.components.search.disable(),e.components.searchType.disable()):(e.components.search.enable(),e.components.searchType.enable()),e.components.pagination&&(e.components.overlay.open(),e.components.pagination.setParams({pageCount:n}),e.components.pagination.setAction({url:e.params.paginationParams.ajax[t],params:{category:o,query:a,type:r}}))},t.setOptimizeItem=function(e){this.state="optimizing",this.optimizeItem=e,this.components.optimize.set({width:e.filters.width||e.width,height:e.filters.height||e.height}),this.components.optimize.open()},t.completeOptimizeItem=function(e){var n=this;n.state="optimized",n.optimizeItem.filters.width=e.width,n.optimizeItem.filters.height=e.height,n.processFiles(n.optimizeItem),n.complete()},t.cancelOptimizeItem=function(){this.state="initial",this.optimizeItem=null},t.renderTourView=function(){var n=this,t={};(n.nodes.tour=t).container=cm.node("div",{class:"stock__tour"},cm.node("div",{class:"inner"},cm.node("div",{class:"stock__tour__content",innerHTML:n.lang("tour.content")}),cm.node("div",{class:"pt__buttons"},t.buttonsInner=cm.node("div",{class:"inner"},t.buttonsLeft=cm.node("div",{class:"left column--auto"}),t.buttonsRight=cm.node("div",{class:"right"},t.confirm=cm.node("div",{class:"button button-primary"},n.lang("tour.confirm"))))))),cm.getConstructor("Com.Check",function(e){n.components.tourCheck=new e({placeholder:n.lang("tour.check"),container:t.buttonsLeft})}),cm.addEvent(t.confirm,"click",n.hideTourHandler),n.components.tour.setContent(t.container)},t.showTour=function(){"yes"!==this.storageRead("tourConfirmed")&&(this.renderTourView(),this.components.tour.open())},t.hideTour=function(){this.components.tourCheck.get()&&this.storageWrite("tourConfirmed","yes"),this.components.tour.close()},t.convertFile=function(e){return e.assets?{value:e.assets.preview.url,name:e.assets.preview.url.split("/").pop(),description:e.description,url:e.assets.preview.url,thumbnail:e.assets.huge_thumb.url,mime:e.media_type,size:null,width:e.assets.preview.width,height:e.assets.preview.height,filters:e.filters||{},id:e.id,source:"shutterstock_preview"}:{value:e.src,name:e.src.split("/").pop(),description:"",url:e.src,thumbnail:e.thumbnail||e.src,mime:null,size:null,width:e.width||0,height:e.height||0,filters:e.filters||{},id:e.id,source:"shutterstock_purchased"}}}),cm.define("App.ShutterstockOptimize",{extend:"Com.AbstractController",params:{renderStructure:!0,embedStructureOnRender:!0,controllerEvents:!0,item:{},formConstructor:"Com.Form",formParams:{embedStructure:"append",validate:!1,renderButtons:!1,renderButtonsSeparator:!1}},strings:{form:{width:"Width:",height:"Height:"}}},function(e){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("App.ShutterstockOptimize",function(e,n,t,o){t.onConstructStart=function(){var e=this;e.item=null,e.aspect=null,e.setWidthHandler=e.setWidth.bind(e),e.setHeightHandler=e.setHeight.bind(e),e.changeInputsHandler=e.changeInputs.bind(e)},t.onConstructEnd=function(){this.set(this.params.item)},t.renderView=function(){this.nodes.container=cm.node("div",{class:"app__shutterstock-optimize"})},t.renderViewModel=function(){var n=this;o.prototype.renderViewModel.apply(n,arguments),cm.getConstructor(n.params.formConstructor,function(e){n.components.form=new e(cm.merge(n.params.formParams,{container:n.nodes.container})),n.renderFormFields()})},t.renderFormFields=function(){var e=this;e.components.form.add("indent",{name:"width",label:e.lang("form.width"),maxLength:9,defaultValue:0,constructorParams:{events:{onInput:e.setWidthHandler,onChange:e.changeInputsHandler}}}).add("indent",{name:"height",label:e.lang("form.height"),maxLength:9,defaultValue:0,constructorParams:{events:{onInput:e.setHeightHandler,onChange:e.changeInputsHandler}}})},t.setWidth=function(){var e=this.components.form.getField("width"),n=this.components.form.getField("height"),e=e.fieldController.getRaw(),e=Math.round(parseFloat(e)/this.aspect);this.aspect&&n.fieldController.set(e,!1)},t.setHeight=function(){var e=this.components.form.getField("height"),n=this.components.form.getField("width"),e=e.fieldController.getRaw(),e=Math.round(parseFloat(e)*this.aspect);this.aspect&&n.fieldController.set(e,!1)},t.changeInputs=function(){var e=this.components.form.getField("width"),n=this.components.form.getField("height"),t=e.fieldController.getRaw(),o=n.fieldController.getRaw();t&&"0px"!==t||e.fieldController.set(this.item.width,!1),o&&"0px"!==o||n.fieldController.set(this.item.height,!1)},t.set=function(e){var n=this;n.item=e,n.aspect=n.item.width/n.item.height,n.components.form.set(n.item,!1)},t.get=function(){return this.components.form.get()}}),cm.define("App.ShutterstockOptimizeContainer",{extend:"Com.AbstractContainer",events:["onComplete","onCancel"],params:{item:{},constructor:"App.ShutterstockOptimize",params:{embedStructure:"append"},placeholder:!0,placeholderConstructor:"Com.DialogContainer",placeholderParams:{renderButtons:!0,renderHelp:!0,params:{width:500}}},strings:{title:"Select Image Size",close:"Cancel",save:"Select",help:'<div class="pt__listing-clear"><ul><li>Shutterstock images are too large to be uploaded to your website in their default size. Doing so will slow down the load time of your web page.</li><li>You can re-size the image width and height using the fields below, in order to optimize the image for your web page.</li><li>1600-2000px width is good for the images that are used as backgrounds, or header images.</li><li>600-1000px width will work fine for the images that are used in the content.</li><li>The width/height aspect ratio is locked, so your image will not distort after resizing.</li></ul></div>'}},function(e){Com.AbstractContainer.apply(this,arguments)}),cm.getConstructor("App.ShutterstockOptimizeContainer",function(e,n,t,o){t.construct=function(){var e=this;e.state="initial",e.completeHandler=e.complete.bind(e),o.prototype.construct.apply(e,arguments)},t.renderPlaceholderButtons=function(){var e=this;e.components.placeholder.addButton({name:"close",label:e.lang("close"),style:"button-transparent",callback:e.closeHandler}),e.components.placeholder.addButton({name:"save",label:e.lang("save"),style:"button-primary",callback:e.completeHandler})},t.set=function(e){return this.params.params.item=e,this.components.controller&&this.components.controller.set(e),this},t.get=function(){return this.components.controller&&this.components.controller.get&&this.components.controller.get()},t.complete=function(){var e=this;return e.state="complete",e.triggerEvent("onComplete",e.get()),e.close(),e}}),cm.define("App.ShutterstockStats",{extend:"Com.AbstractController",params:{adminLink:"/admin/shutterstock/"},strings:{message:'A list of all temporary images youve downloaded, as well as the ability to purchase a use license - can be found <a href="%adminLink%" target="_blank">here</a>.'}},function(e){Com.AbstractController.apply(this,arguments)}),cm.getConstructor("App.ShutterstockStats",function(e,n,t,o){t.renderView=function(){var e=this;e.triggerEvent("onRenderViewStart"),e.nodes.container=cm.node("div",{class:"com__file-stats"},e.nodes.content=cm.node("div",{class:"pt__line-info is-nowrap"},cm.node("div",{class:"icon small info"}),cm.node("div",{class:"item",innerHTML:e.lang("message",{"%adminLink%":e.params.adminLink})}))),e.triggerEvent("onRenderViewProcess"),e.triggerEvent("onRenderViewEnd")}}),cm.define("App.Sidebar",{modules:["Params","Events","DataConfig","DataNodes","Storage","Stack"],events:["onRenderStart","onRender","onCollapseStart","onCollapse","onCollapseEnd","onExpandStart","onExpand","onExpandEnd","onTabShow","onTabHide","onResize"],params:{node:cm.node("div"),name:"app-sidebar",duration:"cm._config.animDurationLong",active:"template-manager",target:"document.html",remember:!0,theme:"dark",ajax:{type:"json",method:"get",url:"",params:""},"Com.TabsetHelper":{node:cm.Node("div"),name:"",responseHTML:!0},"Com.Overlay":{theme:"dark",className:"sidebar__overlay"}}},function(e){function t(){cm.replaceClass(a.params.target,"is-sidebar--collapsed is-sidebar--expanding","is-sidebar--expanded",!0),a.triggerEvent("onExpandEnd")}function o(){cm.replaceClass(a.params.target,"is-sidebar--expanded is-sidebar--collapsing","is-sidebar--collapsed",!0),a.triggerEvent("onCollapseEnd")}var a=this,n=(a.nodes={container:cm.Node("div"),inner:cm.Node("div"),collapseButtons:[],labels:[],tabs:[]},a.components={},a.isExpanded=null,a.openInterval=null,a.currentTab=null,a.previousTab=null,function(){a.params.duration=cm.getTransitionDurationFromLESS("AppSidebar-Duration",a.params.duration),a.params.theme=cm.getLESSVariable("AppSidebar-Theme",a.params.theme).toLowerCase()}),r=function(){a.params["Com.Overlay"].theme=a.params.theme,a.params["Com.Overlay"].name=a.params.name,a.params["Com.TabsetHelper"].node=a.nodes.inner,a.params["Com.TabsetHelper"].name=[a.params.name,"tabset"].join("-"),a.params["Com.TabsetHelper"].ajax=a.params.ajax,a.params["Com.TabsetHelper"].overlayParams=a.params["Com.Overlay"]},s=function(){var e,n;i(),cm.forEach(a.nodes.collapseButtons,function(e){cm.addEvent(e.container,"click",a.toggle)}),e=cm.isClass(a.nodes.container,"is-expanded"),(e=a.params.remember?null!==(n=a.storageRead("isExpanded"))?n:e:e)?a.expand(!0,!0):a.collapse(!0,!0),cm.addEvent(window,"resize",c),cm.customEvent.add(a.nodes.container,"scrollSizeChange",c)},i=function(){cm.getConstructor("Com.TabsetHelper",function(e){a.components.tabset=new e(a.params["Com.TabsetHelper"]).addEvent("onLabelTarget",function(e,n){a.isExpanded&&e.get()!==n.id||a.toggle()}).addEvent("onTabHide",function(e,n){a.previousTab=n,a.triggerEvent("onTabHide",n)}).addEvent("onTabShow",function(e,n){a.currentTab=n,a.triggerEvent("onTabShow",n)}).processTabs(a.nodes.tabs,a.nodes.labels).set(a.params.active)}),cm.forEach(a.nodes.tabs,function(e){cm.addIsolateScrolling(e.descr)})},c=function(){animFrame(function(){cm._pageSize.winWidth<=cm._config.adaptiveFrom&&a.isExpanded&&a.collapse(!0)})};a.collapse=function(e,n){return(n||"boolean"!=typeof a.isExpanded||a.isExpanded)&&(a.isExpanded=!1,a.params.remember&&a.storageWrite("isExpanded",!1),a.triggerEvent("onCollapseStart"),e&&(cm.addClass(a.nodes.container,"is-immediately"),cm.addClass(a.params.target,"is-immediately")),cm.replaceClass(a.nodes.container,"is-expanded","is-collapsed",!0),cm.addClass(a.params.target,"is-sidebar--collapsing",!0),a.triggerEvent("onCollapse"),cm.forEach(a.nodes.collapseButtons,function(e){cm.removeClass(e.container,"active")}),a.openInterval&&clearTimeout(a.openInterval),e?(o(),a.openInterval=setTimeout(function(){cm.removeClass(a.nodes.container,"is-immediately"),cm.removeClass(a.params.target,"is-immediately")},5)):a.openInterval=setTimeout(function(){o()},a.params.duration+5)),a},a.expand=function(e,n){return!n&&"boolean"==typeof a.isExpanded&&a.isExpanded||(a.isExpanded=!0,a.params.remember&&a.storageWrite("isExpanded",!0),a.triggerEvent("onExpandStart"),e&&(cm.addClass(a.nodes.container,"is-immediately"),cm.addClass(a.params.target,"is-immediately")),cm.replaceClass(a.nodes.container,"is-collapsed","is-expanded",!0),cm.addClass(a.params.target,"is-sidebar--expanding",!0),a.triggerEvent("onExpand"),cm.forEach(a.nodes.collapseButtons,function(e){cm.addClass(e.container,"active")}),a.openInterval&&clearTimeout(a.openInterval),e?(t(),a.openInterval=setTimeout(function(){cm.removeClass(a.nodes.container,"is-immediately"),cm.removeClass(a.params.target,"is-immediately")},5)):a.openInterval=setTimeout(function(){t()},a.params.duration+5)),a},a.toggle=function(){return a.isExpanded?a.collapse():a.expand(),a},a.refresh=function(){return a.components.tabset&&a.components.tabset.refresh(),a},a.setTab=function(e){return a.components.tabset&&a.components.tabset.set(e),a},a.unsetTab=function(){return a.components.tabset&&a.components.tabset.unset(),a},a.getTab=function(){return a.components.tabset?a.components.tabset.get():null},a.refreshTab=function(e){return a.components.tabset&&a.components.tabset.refreshTab(e),a},a.getDimensions=function(e){var n=cm.getRect(a.nodes.container);return n[e]||n},a.getNodes=function(e){return a.nodes[e]||a.nodes},n(),a.setParams(e),a.convertEvents(a.params.events),a.getDataNodes(a.params.node),a.getDataConfig(a.params.node),r(),a.triggerEvent("onRenderStart"),s(),a.addToStack(a.params.node),a.triggerEvent("onRender")}),cm.define("App.Template",{modules:["Params","Events","DataConfig","DataNodes","Stack"],events:["onRenderStart","onRender","onRedraw","onResize","onEnableEditing","onDisableEditing"],params:{node:cm.node("div"),name:"app-template",scrollNode:"document.body",scrollDuration:1e3,topMenuName:"app-topmenu",sidebarName:"app-sidebar",editorName:"app-editor",template:{type:"box",width:1e3,align:"center",indent:24},header:{fixed:!1,overlapping:!1,sticky:!1,transformed:!1,mobileFixed:null,mobileOverlapping:null},content:{editableIndent:0},footer:{sticky:!0}}},function(e){var t=this,n=(t.nodes={container:cm.node("div"),inner:cm.node("div"),headerContainer:cm.node("div"),headerTransformed:cm.node("div"),header:cm.node("div"),header2:cm.node("div"),content:cm.node("div"),footer:cm.node("div"),buttonUp:cm.node("div"),buttonsUp:[]},t.isEditing=null,t.components={},t.anim={},t.offsets={},function(){t.params.content.editableIndent=cm.getLESSVariable("AppTpl-Content-EditableIndent",t.params.content.editableIndent,!0)}),o=function(){cm.isBoolean(t.params.header.mobileOverlapping)||(t.params.header.mobileOverlapping=t.params.header.overlapping),cm.isBoolean(t.params.header.mobileFixed)||(t.params.header.mobileFixed=t.params.header.fixed)},a=function(){t.nodes.headerSpace=cm.node("div",{class:"tpl__header__space"}),cm.insertAfter(t.nodes.headerSpace,t.nodes.headerContainer),cm.find("App.TopMenu",t.params.topMenuName,null,function(e){t.components.topMenu=e}),cm.find("App.Sidebar",t.params.sidebarName,null,function(e){t.components.sidebar=e}),new cm.Finder("App.Editor",t.params.editorName,null,function(e){t.components.editor=e},{event:"onProcessStart"}),t.anim.scroll=new cm.Animation(t.params.scrollNode),cm.addEvent(t.nodes.buttonUp,"click",t.scrollToTop),cm.addEvent(window,"resize",function(){animFrame(function(){t.triggerEvent("onResize"),c(!0)})}),cm.addEvent(window,"scroll",function(){animFrame(function(){d()})})},r=function(){cm.getPageSize("winWidth")<=cm._config.screenTabletPortrait?(t.params.header.mobileOverlapping&&cm.addClass(t.nodes.headerContainer,"is-overlapping"),t.params.header.mobileFixed&&cm.addClass(t.nodes.headerContainer,"is-fixed"),t.params.header.mobileFixed&&!t.params.header.mobileOverlapping&&cm.addClass(t.nodes.headerSpace,"is-show")):(t.params.header.overlapping&&cm.addClass(t.nodes.headerContainer,"is-overlapping"),t.params.header.fixed&&cm.addClass(t.nodes.headerContainer,"is-fixed"),t.params.header.fixed&&!t.params.header.overlapping&&cm.addClass(t.nodes.headerSpace,"is-show")),cm.addClass(t.nodes.headerTransformed,"is-fixed"),cm.removeClass(t.nodes.headerTransformed,"is-show")},s=function(){cm.removeClass(t.nodes.headerContainer,"is-overlapping is-fixed"),cm.removeClass(t.nodes.headerSpace,"is-show"),cm.removeClass(t.nodes.headerTransformed,"is-fixed"),t.params.header.transformed&&cm.addClass(t.nodes.headerTransformed,"is-show")},i=function(){s(),(!t.isEditing||cm.getPageSize("winWidth")<=cm._config.screenTabletPortrait)&&r()},c=function(e){i(),l(),m(),p(),e&&t.triggerEvent("onRedraw")},d=function(){l(),p()},l=function(){t.offsets.top=t.components.topMenu?t.components.topMenu.getDimensions("height"):0,t.offsets.left=t.components.sidebar?t.components.sidebar.getDimensions("width"):0,t.offsets.header=t.nodes.header.offsetHeight,t.offsets.header2=t.nodes.header2.offsetHeight,t.offsets.footer=t.nodes.footer.offsetHeight,t.offsets.height=cm.getPageSize("winHeight")-t.offsets.top,t.offsets.scrollTop=cm.getBodyScrollTop()},m=function(){t.nodes.inner.style.minHeight=t.offsets.height+"px",t.isEditing?t.params.footer.sticky&&(t.offsets.contentHeightCalc=t.offsets.height-t.offsets.header-t.offsets.footer-2*t.params.content.editableIndent,t.params.header.transformed&&(t.offsets.contentHeightCalc=t.offsets.contentHeightCalc-t.offsets.header2-t.params.content.editableIndent),t.nodes.content.style.minHeight=Math.max(t.offsets.contentHeightCalc,0)+"px"):(t.params.header.fixed&&!t.params.header.overlapping&&(t.nodes.headerSpace.style.height=t.offsets.header+"px"),t.params.footer.sticky&&(t.params.header.overlapping?t.nodes.content.style.minHeight=Math.max(t.offsets.height-t.offsets.footer,0)+"px":t.nodes.content.style.minHeight=Math.max(t.offsets.height-t.offsets.header-t.offsets.footer,0)+"px"))},p=function(){t.params.header.transformed&&(t.isEditing||t.offsets.scrollTop>=t.offsets.header?cm.addClass(t.nodes.headerTransformed,"is-show"):cm.removeClass(t.nodes.headerTransformed,"is-show"))};t.redraw=function(e){return e=!!cm.isUndefined(e)||e,c(e),t},t.enableEditing=function(){return cm.isBoolean(t.isEditing)&&t.isEditing||(t.isEditing=!0,cm.addClass(t.nodes.container,"is-editing"),t.redraw(),t.triggerEvent("onEnableEditing")),t},t.disableEditing=function(){return cm.isBoolean(t.isEditing)&&!t.isEditing||(t.isEditing=!1,cm.removeClass(t.nodes.container,"is-editing"),t.redraw(),t.triggerEvent("onDisableEditing")),t},t.scrollTo=function(e,n){return t.anim.scroll.go({style:{docScrollTop:e},duration:n,anim:"smooth"}),t},t.scrollToTop=function(){return t.scrollTo(0,t.params.scrollDuration),t},t.scrollStop=function(){return t.anim.scroll.stop(),t},t.getTopMenuDimensions=function(e){return t.components.topMenu?t.components.topMenu.getDimensions(e):null},t.getHeaderDimensions=function(e){var n=cm.getRect(t.nodes.header);return e?n[e]:n},t.getHeader2Dimensions=function(e){var n=cm.getRect(t.nodes.header2);return e?n[e]:n},t.getFixedHeaderHeight=function(){return Math.max(t.params.header.fixed?t.getHeaderDimensions("height"):0,t.params.header.transformed?t.getHeader2Dimensions("height"):0)},t.getFooterDimensions=function(e){var n=cm.getRect(t.nodes.footer);return e?n[e]:n},t.getNodes=function(e){return t.nodes[e]||t.nodes},n(),t.setParams(e),t.convertEvents(t.params.events),t.getDataNodes(t.params.node),t.getDataConfig(t.params.node),o(),t.addToStack(t.params.node),t.triggerEvent("onRenderStart"),a(),c(!0),t.triggerEvent("onRender")}),cm.define("App.TopMenu",{modules:["Params","Events","DataConfig","DataNodes","Stack"],events:["onRender","onCollapse","onExpand","onUndo","onRedo"],params:{node:cm.node("div"),name:"app-topmenu",target:"document.html"}},function(e){var n,t=this,o=(t.nodes={container:cm.node("div"),inner:cm.node("div"),button:cm.node("div"),target:cm.node("div"),items:{}},t.isExpanded=!1,function(){a(),t.isExpanded=cm.isClass(t.nodes.container,"is-expanded"),cm.addEvent(t.nodes.button,"click",t.toggle),t.nodes.items.undo&&cm.addEvent(t.nodes.items.undo.link,"click",t.undo),t.nodes.items.redo&&cm.addEvent(t.nodes.items.redo.link,"click",t.redo),cm.addEvent(window,"resize",a)}),a=function(){cm.addClass(t.nodes.container,"cm__transition-disable"),n&&clearTimeout(n),n=setTimeout(function(){cm.removeClass(t.nodes.container,"cm__transition-disable")},5)};t.undo=function(){return t.triggerEvent("onUndo"),t},t.redo=function(){return t.triggerEvent("onRedo"),t},t.expand=function(){return t.isExpanded||(t.isExpanded=!0,cm.addClass(t.nodes.button,"active"),cm.replaceClass(t.nodes.container,"is-collapsed","is-expanded"),cm.replaceClass(t.params.target,"is-topmenu--collapsed","is-topmenu--expanded",!0),t.triggerEvent("onExpand")),t},t.collapse=function(){return t.isExpanded&&(t.isExpanded=!1,cm.removeClass(t.nodes.button,"active"),cm.replaceClass(t.nodes.container,"is-expanded","is-collapsed"),cm.replaceClass(t.params.target,"is-topmenu--expanded","is-topmenu--collapsed",!0),t.triggerEvent("onCollapse")),t},t.toggle=function(){return t.isExpanded?t.collapse():t.expand(),t},t.setActiveItem=function(e){return e&&(e=t.nodes.items[e])&&cm.addClass(e.container,"active"),t},t.unsetActiveItem=function(e){return e&&(e=t.nodes.items[e])&&cm.removeClass(e.container,"active"),t},t.getItem=function(e){return e&&(e=t.nodes.items[e])?e:null},t.getDimensions=function(e){var n=cm.getRect(t.nodes.container);return n[e]||n},t.getNodes=function(e){return t.nodes[e]||t.nodes},t.setParams(e),t.convertEvents(t.params.events),t.getDataNodes(t.params.node),t.getDataConfig(t.params.node),t.addToStack(t.params.node),o(),t.triggerEvent("onRender")}),App._Zones={},cm.define("App.Zone",{modules:["Params","Events","DataConfig","Stack"],events:["onRenderStart","onRender","onRemove"],params:{node:cm.Node("div"),type:"template-manager",instanceId:!1,zone:0,layerId:0,link:!1,locked:!1,disallow:[],editorName:"app-editor"}},function(e){var t=this,o=(t.isEditing=null,t.isRemoved=!1,t.isActive=!1,t.styleObject=null,t.offsets=null,t.dimensions=null,t.components={},t.node=null,t.block=null,t.dummyBlocks=[],t.blocks=[],function(e){e&&(t.block=e,t.block.addZone(t))}),a=function(e){e&&(t.components.editor=e,t.components.editor.addZone(t))};t.register=function(e){var n=App._Blocks[t.params.blockName];return o(n),a(e),t},t.enableEditing=function(){return cm.isBoolean(t.isEditing)&&t.isEditing||(t.isEditing=!0,cm.addClass(t.node,"is-editing",!0),t.params.locked||cm.addClass(t.node,"is-editable",!0),t.getDimensions()),t},t.disableEditing=function(){return cm.isBoolean(t.isEditing)&&!t.isEditing||(t.isEditing=!1,cm.removeClass(t.node,"is-editing",!0),t.params.locked||cm.removeClass(t.node,"is-editable",!0),t.getDimensions()),t},t.addBlock=function(e,n){return e.isDummy?!cm.isUndefined(n)&&cm.isNumber(n)?t.dummyBlocks[n]=e:t.dummyBlocks.push(e):!cm.isUndefined(n)&&cm.isNumber(n)?t.blocks.splice(n,0,e):t.blocks.push(e),t},t.removeBlock=function(e){return e.isDummy?cm.arrayRemove(t.dummyBlocks,e):cm.arrayRemove(t.blocks,e),t},t.getBlockIndex=function(e){return(e.isDummy?t.dummyBlocks:t.blocks).indexOf(e)},t.getBlock=function(e){return t.blocks[e]},t.highlight=function(){return t.params.locked||cm.addClass(t.node,"is-highlight"),t},t.unhighlight=function(){return t.params.locked||cm.removeClass(t.node,"is-highlight"),t},t.active=function(){return t.params.locked||(t.isActive=!0,cm.addClass(t.node,"is-active")),t},t.unactive=function(){return t.params.locked||(t.isActive=!1,cm.removeClass(t.node,"is-active")),t},t.remove=function(){if(!t.isRemoved){for(t.isRemoved=!0,(e=t.block)&&(t.block=e,t.block.removeZone(t),t.block=null),(e=t.components.editor)&&(t.components.editor=e,t.components.editor.removeZone(t));t.blocks.length;)t.blocks[0].remove();delete App._Zones[t.params.name],t.removeFromStack(),cm.remove(t.params.node),t.triggerEvent("onRemove")}var e;return t},t.getDimensions=function(){return t.styleObject||(t.styleObject=cm.getStyleObject(t.node)),t.dimensions=cm.getNodeOffset(t.node,t.styleObject,null),t.dimensions},t.updateDimensions=function(){return t.dimensions=cm.getNodeOffset(t.node,t.styleObject,t.dimensions),t.dimensions},t.setParams(e),t.convertEvents(t.params.events),t.getDataConfig(t.params.node),t.params.link?(t.params.linkName=[t.params.link.type,t.params.link.positionId,t.params.zone].join("_"),t.params.blockName=[t.params.link.type,t.params.link.positionId].join("_")):t.params.blockName=[t.params.type,t.params.positionId].join("_"),cm.isNumber(t.params.instanceId)||cm.isString(t.params.instanceId)?t.params.name=[t.params.type,t.params.instanceId,t.params.positionId,t.params.zone].join("_"):t.params.name=[t.params.type,t.params.positionId,t.params.zone].join("_"),(App._Zones[t.params["name"]]=t).triggerEvent("onRenderStart"),t.node=t.params.node,t.getDimensions(),cm.addClass(t.node,"app__zone"),cm.addClass(t.node,["is",t.params.type].join("-")),t.params.locked?cm.addClass(t.node,"is-locked"):cm.addClass(t.node,"is-available"),cm.find("App.Editor",t.params.editorName,null,function(e){new cm.Finder("App.Block",t.params.blockName,null,o),a(e)}),t.addToStack(t.params.node),t.triggerEvent("onRender")}),cm.define("Module.Anchor",{extend:"App.AbstractModule",params:{renderStructure:!1,embedStructureOnRender:!1,duration:"cm._config.animDuration",scroll:"document.body",topMenuName:"app-topmenu",templateName:"app-template",customEvents:!0,resizeEvent:!0,scrollEvent:!0}},function(e){App.AbstractModule.apply(this,arguments)}),cm.getConstructor("Module.Anchor",function(e,n,t){var o=t._inherit;t.construct=function(){var e=this;return e.isActive=!1,e.isHashProcess=!1,e.isRenewProcess=!1,e.topMenuParams={},e.templateParams={},e.onHashChangeHandler=e.onHashChange.bind(e),e.onConstructEndHandler=e.onConstructEnd.bind(e),e.onDestructProcessHandler=e.onDestructProcess.bind(e),e.onRedrawHandler=e.onRedraw.bind(e),e.onScrollHandler=e.onScroll.bind(e),e.addEvent("onConstructEnd",e.onConstructEndHandler),e.addEvent("onDestructProcess",e.onDestructProcessHandler),e.addEvent("onRedraw",e.onRedrawHandler),e.addEvent("onScroll",e.onScrollHandler),o.prototype.construct.apply(e,arguments),e},t.onConstructEnd=function(){return this.prepareHash({immediately:!0,force:!0}),this},t.onDestructProcess=function(){return cm.removeEvent(window,"hashchange",this.onHashChangeHandler),this.clearHash(),this},t.onRedraw=function(){return this.prepareHash({immediately:!0,force:!0}),this},t.onScroll=function(){return this.isHashProcess||this.clearHash(),this},t.onHashChange=function(e){var n=this;return n.isRenewProcess?(cm.preventDefault(e),n.isRenewProcess=!1,n.isActive=!1):(n.isHashActive()&&cm.preventDefault(e),n.prepareHash({immediately:!1,force:!1})),n},t.renderViewModel=function(){var n=this;return o.prototype.renderViewModel.apply(n,arguments),new cm.Finder("App.TopMenu",n.params.topMenuName,null,function(e){n.components.topMenu=e,n.topMenuParams=n.components.topMenu.getParams()}),new cm.Finder("App.Template",n.params.templateName,null,function(e){n.components.template=e,n.templateParams=n.components.template.getParams()}),n.components.animation=new cm.Animation(n.params.scroll),cm.addEvent(window,"hashchange",n.onHashChangeHandler),n},t.prepareHash=function(e){var n=this;return e=cm.merge({immediately:!1,force:!1},e),n.isHashActive()?n.isActive&&!e.force||(n.isActive=!0,n.processHash(e)):n.isActive=!1,n},t.processHash=function(e){var n=this,t={},o=0,o=cm.getY(n.params.node);return n.components.topMenu&&(o-=n.components.topMenu.getDimensions("height")),n.components.template&&n.templateParams.header.fixed&&(o-=n.components.template.getHeaderDimensions("height")),o=Math.max(o,0),o=Math.min(o,cm._pageSize.scrollHeight),e.immediately?(n.isHashProcess=!1,cm.setScrollTop(n.params.scroll,o)):(n.isHashProcess=!0,t=n.params.scroll==document.body?{docScrollTop:o}:{scrollTop:o},n.components.animation.go({style:t,anim:"smooth",duration:n.params.duration,onStop:function(){setTimeout(function(){n.isHashProcess=!1},500)}})),n},t.clearHash=function(){var e;return cm._isDocumentLoad&&this.isHashActive()&&(this.isRenewProcess=!0,e=window.location.href.replace(/(#.*)$/,""),window.location.hash=["__hash",Date.now(),"hash__"].join("--"),window.history.replaceState(null,null,e)),this},t.isHashActive=function(){var e=decodeURIComponent(window.location.hash.replace(/^#/,""));return this.params.name===e}}),cm.define("Module.Calendar",{modules:["Params","Events","Langs","DataConfig","DataNodes","Callbacks","Stack"],events:["onRenderStart","onRender","onError","onAbort","onSuccess","onSendStart","onSendEnd","onProcessEnd"],params:{node:cm.node("div"),name:"",defaultView:"agenda",isViewPreloaded:!1,animateDuration:"cm._config.animDuration",showLoader:!0,loaderDelay:"cm._config.loadDelay",responseKey:"data",responseHTML:!0,ajax:{type:"json",method:"get",url:"",params:{view:"%view%",week:"%week%",month:"%month%",year:"%year%",query:"%query%"}},"Com.Overlay":{position:"absolute",autoOpen:!1,removeOnClose:!0,appendMode:"insertFirst"}},strings:{server_error:"An unexpected error has occurred. Please try again later."}},function(e){var o=this,n={view:null,week:null,month:null,year:null,query:null},t=(o.nodes={container:cm.node("div"),buttons:{views:{agenda:cm.node("div"),week:cm.node("div"),month:cm.node("div")}},holder:{container:cm.node("div"),inner:cm.node("div")}},o.components={},o.animations={},o.ajaxHandler=null,o.isProcess=!1,o.isRendering=!1,o.loaderDelay=null,o.viewDetails=cm.clone(n),function(){o.params.name=o.params.name.toString(),o.params.defaultView=cm.inArray(["agenda","week","month"],o.params.defaultView)?o.params.defaultView:"month",o.params["Com.Overlay"].container=o.nodes.container}),a=function(){cm.getConstructor("Com.Overlay",function(e,n){o.components.loader=new e(o.params[n])}),o.animations.response=new cm.Animation(o.nodes.holder.container),cm.forEach(o.nodes.buttons.views,function(e,n){cm.addEvent(e,"click",function(e){cm.preventDefault(e),s({view:n})})}),new cm.Finder("Module.CalendarAgenda",o.params.name,o.nodes.holder.inner,function(e){e.addEvent("onRequestView",function(e,n){s(n)})},{multiple:!0}),new cm.Finder("Module.CalendarWeek",o.params.name,o.nodes.holder.inner,function(e){e.addEvent("onRequestView",function(e,n){s(n)})},{multiple:!0}),new cm.Finder("Module.CalendarMonth",o.params.name,o.nodes.holder.inner,function(e){e.addEvent("onRequestView",function(e,n){s(n)})},{multiple:!0}),o.params.isViewPreloaded||s({view:o.params.defaultView})},r=function(e){o.viewDetails=cm.merge(n,e)},s=function(e){o.isProcess&&o.abort(),o.isProcess||o.isRendering||(r(e),cm.forEach(o.nodes.buttons.views,function(e,n){n===o.viewDetails.view?cm.replaceClass(e,"button-secondary","button-primary"):cm.replaceClass(e,"button-primary","button-secondary")}),o.ajaxHandler=o.callbacks.request(o,cm.clone(o.params.ajax)))};o.callbacks.prepare=function(e,n){return(n=e.callbacks.beforePrepare(e,n)).url=cm.strReplace(n.url,{"%baseUrl%":cm._baseUrl,"%view%":e.viewDetails.view,"%year%":e.viewDetails.year,"%month%":e.viewDetails.month,"%week%":e.viewDetails.week,"%query%":e.viewDetails.query}),n.params=cm.objectReplace(n.params,{"%baseUrl%":cm._baseUrl,"%view%":e.viewDetails.view,"%year%":e.viewDetails.year,"%month%":e.viewDetails.month,"%week%":e.viewDetails.week,"%query%":e.viewDetails.query}),n=e.callbacks.afterPrepare(e,n)},o.callbacks.beforePrepare=function(e,n){return n},o.callbacks.afterPrepare=function(e,n){return n},o.callbacks.request=function(n,t){return t=n.callbacks.prepare(n,t),cm.ajax(cm.merge(t,{onStart:function(){n.callbacks.start(n)},onSuccess:function(e){n.callbacks.response(n,t,e)},onError:function(){n.callbacks.error(n,t)},onAbort:function(){n.callbacks.abort(n,t)},onEnd:function(){n.callbacks.end(n)}}))},o.callbacks.filter=function(e,n,t){var o,e=cm.objectSelector(e.params.responseKey,t);return o=e&&!cm.isEmpty(e)?e:o},o.callbacks.start=function(e,n){e.isProcess=!0,e.params.showLoader&&(e.loaderDelay=setTimeout(function(){e.components.loader&&!e.components.loader.isOpen&&e.components.loader.open()},e.params.loaderDelay)),e.triggerEvent("onSendStart")},o.callbacks.end=function(e,n){e.isProcess=!1,e.params.showLoader&&(e.loaderDelay&&clearTimeout(e.loaderDelay),e.components.loader)&&e.components.loader.isOpen&&e.components.loader.close(),e.triggerEvent("onSendEnd"),e.triggerEvent("onProcessEnd",e.nodes.holder.inner)},o.callbacks.response=function(e,n,t){cm.isEmpty(t)||(t=e.callbacks.filter(e,n,t)),cm.isEmpty(t)?e.callbacks.error(e,n):e.callbacks.success(e,t)},o.callbacks.error=function(e,n){e.callbacks.renderError(e,n),e.triggerEvent("onError")},o.callbacks.success=function(e,n){e.callbacks.render(e,n),e.triggerEvent("onSuccess",n)},o.callbacks.abort=function(e,n){e.triggerEvent("onAbort")},o.callbacks.renderTemporary=function(e){return cm.node("div",{class:"calendar__temporary"})},o.callbacks.render=function(e,n){var t;e.params.responseHTML&&(e.isRendering=!0,t=e.callbacks.renderTemporary(e),n=cm.strToHTML(n),cm.appendNodes(n,t),e.callbacks.append(e,t))},o.callbacks.renderError=function(e,n){var t;e.params.responseHTML&&(e.isRendering=!0,(t=e.callbacks.renderTemporary(e)).appendChild(cm.node("div",{class:"cm__empty"},e.lang("server_error"))),e.callbacks.append(e,t))},o.callbacks.append=function(e,n){var t;e.nodes.holder.temporary||(e.nodes.holder.temporary=e.callbacks.renderTemporary(e),cm.appendNodes(e.nodes.holder.inner.childNodes,e.nodes.holder.temporary),cm.appendChild(e.nodes.holder.temporary,e.nodes.holder.inner)),cm.removeClass(e.nodes.holder.temporary,"is-show",!0),cm.appendChild(n,e.nodes.holder.inner),cm.addClass(n,"is-show",!0),cm.removeClass(e.nodes.holder.container,"is-loaded",!0),cm.addClass(e.nodes.holder.container,"is-show",!0),t=n.offsetHeight,e.animations.response.go({style:{height:[t,"px"].join("")},duration:e.params.animateDuration,anim:"smooth",onStop:function(){e.nodes.holder.container.style.height="",cm.remove(e.nodes.holder.temporary),cm.addClass(e.nodes.holder.container,"is-loaded",!0),e.nodes.holder.temporary=n,e.isRendering=!1}})},o.refresh=function(){return s(o.viewDetails),o},o.abort=function(){return o.ajaxHandler&&o.ajaxHandler.abort&&o.ajaxHandler.abort(),o},o.setAction=function(e,n,t){switch(n=cm.inArray(["raw","update","current"],n)?n:"current"){case"raw":o.params.ajax=cm.merge(o._raw.params.ajax,e);break;case"current":o.params.ajax=cm.merge(o.params.ajax,e);break;case"update":o.params.ajax=cm.merge(o._update.params.ajax,e)}return t&&(o._update.params.ajax=cm.clone(o.params.ajax)),o},o.setParams(e),o.convertEvents(o.params.events),o.getDataNodes(o.params.node),o.getDataConfig(o.params.node),t(),o.addToStack(o.params.node),o.triggerEvent("onRenderStart"),a(),o.addToStack(o.nodes.container),o.triggerEvent("onRender")}),cm.define("Module.CalendarEvent",{modules:["Params","Events","Langs","DataConfig","DataNodes","Stack"],events:["onRenderStart","onRender"],params:{node:cm.Node("div"),name:"",data:{title:null,date:null,description:null},"Com.Tooltip":{delay:"cm._config.hideDelayLong",className:"module__calendar-event-tooltip",minWidth:250}}},function(e){var t=this;t.nodes={template:null},t.components={},t.template=null;t.setTemplate=function(e){return t.nodes.template=cm.getNodes(e),t.nodes.template&&(e=t.nodes.template,cm.isEmpty(t.params.data.title)||(e.title.innerHTML=t.params.data.title),cm.isEmpty(t.params.data.date)||(e.date.innerHTML=t.params.data.date),cm.isEmpty(t.params.data.description)?cm.remove(e["description-container"]):e.description.innerHTML=t.params.data.description,cm.isEmpty(t.params.data.url)?cm.remove(e["button-container"]):e.button.setAttribute("href",t.params.data.url),t.components.tooltip)&&t.components.tooltip.setContent(t.nodes.template.container),t},t.setTooltipParams=function(e){return t.params["Com.Tooltip"]=cm.merge(t.params["Com.Tooltip"],e),t.components.tooltip&&t.components.tooltip.setParams(t.params["Com.Tooltip"]),t},t.setParams(e),t.convertEvents(t.params.events),t.getDataNodes(t.params.node),t.getDataConfig(t.params.node),t.addToStack(t.params.node),t.triggerEvent("onRenderStart"),cm.getConstructor("Com.Tooltip",function(e,n){t.components.tooltip=new e(cm.merge(t.params[n],{target:t.params.node}))}),t.triggerEvent("onRender")}),cm.define("Module.AbstractCalendarView",{modules:["Params","Events","Langs","DataConfig","DataNodes","Stack"],events:["onRenderStart","onRender","onRequestView"],params:{node:cm.Node("div"),name:"",viewName:"",itemShortIndent:1,itemShortHeight:24,dayIndent:4,"Com.Tooltip":{}}},function(e){var n=this;n.nodes={container:cm.node("div"),buttons:{container:cm.node("div"),prev:cm.node("div"),next:cm.node("div"),"search-button":cm.node("div"),"search-input":cm.node("input"),views:{agenda:cm.node("div"),week:cm.node("div"),month:cm.node("div")}},templates:{event:{}}},n.components={},n.days=[];n.getLESSVariables(),n.setParams(e),n.convertEvents(n.params.events),n.getDataNodes(n.params.node),n.getDataConfig(n.params.node),n.validateParams(),n.addToStack(n.params.node),n.triggerEvent("onRenderStart"),n.renderToolbar(),n.render(),n.triggerEvent("onRender")}),cm.getConstructor("Module.AbstractCalendarView",function(e,n,t){t.getLESSVariables=function(){var e=this;return e.params.itemShortIndent=cm.getLESSVariable("ComCalendarEvent-Short-Indent",e.params.itemShortIndent,!0),e.params.itemShortHeight=cm.getLESSVariable("ComCalendarEvent-Short-Height",e.params.itemShortHeight,!0),e},t.validateParams=function(){var e=this;return e.params.name=e.params.name.toString(),"auto"!==e.params["Com.Tooltip"].width&&(e.params["Com.Tooltip"].width=cm.strReplace(e.params["Com.Tooltip"].width,{"%itemShortIndent%":e.params.itemShortIndent,"%itemShortHeight%":e.params.itemShortHeight,"%dayIndent%":e.params.dayIndent})),e.params["Com.Tooltip"].top=cm.strReplace(e.params["Com.Tooltip"].top,{"%itemShortIndent%":e.params.itemShortIndent,"%itemShortHeight%":e.params.itemShortHeight,"%dayIndent%":e.params.dayIndent}),e.params["Com.Tooltip"].left=cm.strReplace(e.params["Com.Tooltip"].left,{"%itemShortIndent%":e.params.itemShortIndent,"%itemShortHeight%":e.params.itemShortHeight,"%dayIndent%":e.params.dayIndent}),e},t.render=function(){var t=this;return new cm.Finder("Module.CalendarEvent",null,t.params.node,function(e){var n=cm.clone(t.nodes.templates.event.container,!0);e.setTooltipParams(t.params["Com.Tooltip"]).setTemplate(n)},{multiple:!0}),t},t.renderToolbar=function(){var t=this;return new cm.Finder("Com.Select","week",t.nodes.buttons.container,function(e){t.components.week=e.addEvent("onChange",t.updateView.bind(t))}),new cm.Finder("Com.Select","month",t.nodes.buttons.container,function(e){t.components.month=e.addEvent("onChange",t.updateView.bind(t))}),new cm.Finder("Com.Select","year",t.nodes.buttons.container,function(e){t.components.year=e.addEvent("onChange",t.updateView.bind(t))}),cm.addEvent(t.nodes.buttons["search-input"],"keypress",function(e){13==e.keyCode&&(cm.preventDefault(e),t.updateView())}),cm.addEvent(t.nodes.buttons["search-button"],"click",function(e){cm.preventDefault(e),t.updateView()}),cm.forEach(t.nodes.buttons.views,function(e,n){n===t.params.viewName?cm.replaceClass(e,"button-secondary","button-primary"):cm.replaceClass(e,"button-primary","button-secondary"),cm.addEvent(e,"click",function(e){cm.preventDefault(e),t.requestView({view:n})})}),cm.addEvent(t.nodes.buttons.prev,"click",function(e){cm.preventDefault(e),t.prev()}),cm.addEvent(t.nodes.buttons.next,"click",function(e){cm.preventDefault(e),t.next()}),t},t.searchQuery=function(e){var n=this.getData();return n.query=e,this.requestView(n),this},t.requestView=function(e){return this.triggerEvent("onRequestView",e),this},t.getData=function(){var e=this;return{query:e.nodes.buttons["search-input"].value,view:e.params.viewName,year:e.components.year?e.components.year.get():null,month:e.components.month?e.components.month.get():null,week:e.components.week?e.components.week.get():null}},t.updateView=function(){return this.triggerEvent("onRequestView",this.getData()),this},t.prev=function(){var e=this.getData();return null!==e.week?1==e.week?(e.year--,e.week=cm.getWeeksInYear(e.year)):e.week--:null!==e.month?0==e.month?(e.year--,e.month=11):e.month--:e.year--,this.requestView(e),this},t.next=function(){var e=this.getData();return null!==e.week?e.week==cm.getWeeksInYear(e.year)?(e.year++,e.week=1):e.week++:null!==e.month?11==e.month?(e.year++,e.month=0):e.month++:e.year++,this.requestView(e),this}}),cm.define("Module.CalendarMonth",{extend:"Module.AbstractCalendarView",params:{viewName:"month","Com.Tooltip":{width:"(targetWidth + %dayIndent%) * 2 - targetHeight * 2",top:"targetHeight + %itemShortIndent%",left:"-(selfWidth - targetWidth) - targetHeight"}}},function(e){Module.AbstractCalendarView.apply(this,arguments)}),cm.getConstructor("Module.CalendarMonth",function(e,n,t){var o=t._inherit;t.processDay=function(e){var n=this,t={isShow:!1,nodes:e};cm.addEvent(t.nodes["more-button"],"click",function(){n.showMoreEvents(t)}),cm.addIsolateScrolling(t.nodes["more-holder"]),n.days.push(t)},t.showMoreEvents=function(e){e.delay&&clearTimeout(e.delay),e.isShow||(e.isShow=!0,cm.setScrollTop(e.nodes["more-holder"],0),cm.addClass(e.nodes["more-holder"],"is-show"))},t.hideMoreEvents=function(e,n){e.delay&&clearTimeout(e.delay),e.isShow&&(n?(e.isShow=!1,cm.removeClass(e.nodes["more-holder"],"is-show")):e.delay=setTimeout(function(){e.isShow=!1,cm.removeClass(e.nodes["more-holder"],"is-show")},this.params.delay))},t.getLESSVariables=function(){return o.prototype.getLESSVariables.call(this),this.params.dayIndent=cm.getLESSVariable("ComCalendarMonth-Day-Indent",this.params.dayIndent,!0),this},t.render=function(){var e=this;return o.prototype.render.call(e),cm.forEach(e.nodes.days,e.processDay.bind(e)),e}}),cm.define("Module.CalendarWeek",{extend:"Module.AbstractCalendarView",params:{viewName:"week","Com.Tooltip":{width:"(targetWidth + %dayIndent%) * 2 - targetHeight * 2",top:"targetHeight + %itemShortIndent%",left:"targetHeight"}}},function(e){Module.AbstractCalendarView.apply(this,arguments)}),cm.getConstructor("Module.CalendarWeek",function(e,n,t){var o=t._inherit;t.getLESSVariables=function(){return o.prototype.getLESSVariables.call(this),this.params.dayIndent=cm.getLESSVariable("ComCalendarWeek-Day-Indent",this.params.dayIndent,!0),this}}),cm.define("Module.CalendarAgenda",{extend:"Module.AbstractCalendarView",params:{viewName:"agenda","Com.Tooltip":{width:"targetWidth - %itemShortHeight% * 2",top:"targetHeight + %itemShortIndent%",left:"targetHeight"}}},function(e){Module.AbstractCalendarView.apply(this,arguments)}),cm.define("Mod.ElementCaptcha",{extend:"App.AbstractModuleElement",params:{memorable:!1}},function(e){App.AbstractModuleElement.apply(this,arguments)}),cm.define("Mod.ElementCheckbox",{extend:"App.AbstractModuleElement",params:{inputEvent:"change"}},function(e){App.AbstractModuleElement.apply(this,arguments)}),cm.getConstructor("Mod.ElementCheckbox",function(e,n,t,o){t.get=function(){return this.nodes.input.checked},t.set=function(e){return this.nodes.input.checked=e,this}}),cm.define("Mod.ElementDatePicker",{extend:"App.AbstractModuleElement",params:{targetController:"Com.Datepicker",pattern:/^(0000-00-00)$/}},function(e){App.AbstractModuleElement.apply(this,arguments)}),cm.define("Mod.ElementFileUploader",{extend:"App.AbstractModuleElement",params:{targetController:"App.FileInput",memorable:!1}},function(e){App.AbstractModuleElement.apply(this,arguments)}),cm.define("Mod.ElementMultiCheckbox",{extend:"App.AbstractModuleElement",params:{inputEvent:"change"}},function(e){App.AbstractModuleElement.apply(this,arguments)}),cm.getConstructor("Mod.ElementMultiCheckbox",function(e,n,t,o){t.getMultiple=function(){var n=[];return cm.forEach(this.nodes.inputs,function(e){e.input.checked&&n.push(e.input.value)}),n},t.setMultiple=function(n){cm.isArray(n)&&cm.forEach(this.nodes.inputs,function(e){e.input.checked=cm.inArray(n,e.input.value)})}}),cm.define("Mod.ElementMultiField",{extend:"App.AbstractModuleElement",params:{targetController:"Com.MultiField",memorable:!1,demo:!1}},function(e){App.AbstractModuleElement.apply(this,arguments)}),cm.getConstructor("Mod.ElementMultiField",function(e,n,t,o){t.onEnableEditing=function(){var e=this;cm.appendChild(e.nodes.content.templateInner,e.nodes.content.templateContainer),e.params.demo&&e.components.controller&&e.components.controller.clear()},t.onDisableEditing=function(){var e=this;cm.remove(e.nodes.content.templateInner),e.params.demo&&e.components.controller&&e.components.controller.clear().setTemplate(e.nodes.content.templateInner)}}),cm.define("Mod.ElementPassword",{extend:"App.AbstractModuleElement",params:{}},function(e){App.AbstractModuleElement.apply(this,arguments)}),cm.define("Mod.ElementRadioButton",{extend:"App.AbstractModuleElement",params:{inputEvent:"change"}},function(e){App.AbstractModuleElement.apply(this,arguments)}),cm.getConstructor("Mod.ElementRadioButton",function(e,n,t,o){t.getMultiple=function(){var n="";return cm.forEach(this.nodes.inputs,function(e){e.input.checked&&(n=e.input.value)}),n},t.setMultiple=function(n){cm.forEach(this.nodes.inputs,function(e){e.input.checked=e.input.value==n})}}),cm.define("Mod.ElementReCaptcha",{extend:"App.AbstractModuleElement",params:{memorable:!1,validate:!1,sitekey:null}},function(e){App.AbstractModuleElement.apply(this,arguments)}),cm.getConstructor("Mod.ElementReCaptcha",function(e,n,t,o){t.construct=function(){this.value="",o.prototype.construct.apply(this,arguments)},t.renderViewModel=function(){var e=this;o.prototype.renderViewModel.apply(e,arguments),e.nodes.input=e.nodes.field.querySelector(".g-recaptcha"),e.params.sitekey=e.nodes.input.getAttribute("data-sitekey")},t.set=function(e){return this.value=e,this},t.get=function(){var e=this.components.captcha?this.components.captcha.getResponse(this._widgetId):this.value;return e},t.setCaptchaComponent=function(e){var n=this;return void 0!==e&&(n.components.captcha=e,n.components.captcha.ready(function(){try{n._widgetId=n.components.captcha.render(n.nodes.input,{sitekey:n.params.sitekey})}catch(e){cm.errorLog({name:n._name.full,type:"attention",message:e})}})),n}}),cm.define("Mod.ElementSelect",{extend:"App.AbstractModuleElement",params:{targetController:"Com.Select"}},function(e){App.AbstractModuleElement.apply(this,arguments)}),cm.define("Mod.ElementText",{extend:"App.AbstractModuleElement",params:{}},function(e){App.AbstractModuleElement.apply(this,arguments)}),cm.define("Mod.ElementTextArea",{extend:"App.AbstractModuleElement",params:{}},function(e){App.AbstractModuleElement.apply(this,arguments)}),cm.define("Mod.ElementTimePicker",{extend:"App.AbstractModuleElement",params:{targetController:"Com.TimeSelect",pattern:/^(00-00-00)$/}},function(e){App.AbstractModuleElement.apply(this,arguments)}),cm.define("Mod.ElementWizard",{extend:"App.AbstractModule",events:["onTabShow","onTabHide","onTabChange","onValidate"],params:{scrollNode:"document.body",scrollDuration:"cm._config.animDurationLong",topMenuName:"app-topmenu",templateName:"app-template",duration:"cm._config.animDuration",delay:"cm._config.hideDelay",active:null,"Com.TabsetHelper":{targetEvent:"none"},"Com.AbstractInput":{className:"tabs__input"}}},function(e){App.AbstractModule.apply(this,arguments)}),cm.getConstructor("Mod.ElementWizard",function(e,n,t,o){t.onConstructStart=function(){var e=this;e.tabs={},e.tabsCount=0,e.options=[],e.isProcessing=!1,e.changeInterval=null,e.currentTab=null,e.prevTabHandler=e.prevTab.bind(e),e.nextTabHandler=e.nextTab.bind(e),e.doneTabHandler=e.doneTab.bind(e)},t.onConstructEnd=function(){var e=this;null===e.currentTab&&(e.params.active&&e.tabs[e.params.active]?e.setTab(e.params.active):e.setTabByIndex(0))},t.onValidateParams=function(){var e=this;e.params["Com.TabsetHelper"].node=e.nodes.inner,e.params["Com.TabsetHelper"].name=e.params.name,e.params["Com.AbstractInput"].container=e.nodes.container,e.params["Com.AbstractInput"].name=e.params.name},t.renderViewModel=function(){var n=this;n.components.scroll=new cm.Animation(n.params.scrollNode),new cm.Finder("App.TopMenu",n.params.topMenuName,null,function(e){n.components.topMenu=e,n.topMenuParams=n.components.topMenu.getParams()}),new cm.Finder("App.Template",n.params.templateName,null,function(e){n.components.template=e,n.templateParams=n.components.template.getParams()}),n.processTabset(),n.processTabs(),n.processMenu(),n.processButtons(),n.processInput()},t.processTabset=function(){var t=this;cm.getConstructor("Com.TabsetHelper",function(e,n){t.components.tabset=new e(t.params[n]).addEvent("onTabHide",function(e,n){t.triggerEvent("onTabHide",n)}).addEvent("onTabChangeStart",function(e,n){t.isProcessing||(t.nodes["content-list"].style.overflow="hidden",t.nodes["content-list"].style.height=t.nodes["content-list"].offsetHeight+"px"),t.isProcessing=!0,t.changeInterval&&clearTimeout(t.changeInterval),t.changeInterval=setTimeout(function(){t.isProcessing=!1,t.nodes["content-list"].style.height="auto",t.nodes["content-list"].style.overflow="visible"},t.params.duration)}).addEvent("onTabShow",function(e,n){t.currentTab=n,t.nodes["content-list"].style.height=n.tab.container.offsetHeight+"px",t.setMenu(),t.setButtons(),t.setInput(),t.triggerEvent("onTabShow",n),t.triggerEvent("onTabChange",n)}).processTabs(t.nodes.tabs,t.nodes.labels)})},t.processTabs=function(){var n=this;n.tabs=n.components.tabset.getTabs(),n.tabsCount=n.components.tabset.getTabsCount(),cm.forEach(n.tabs,function(e){cm.addEvent(e.label.container,"click",function(){n.validateTab()&&n.currentTab.id!==e.id&&n.setTab(e.id)})})},t.processMenu=function(){var t=this;cm.forEach(t.nodes.options,function(e){var n=cm.merge({id:"",nodes:e},t.getNodeDataConfig(e.container));cm.addEvent(e.container,"click",function(){t.validateTab()&&t.currentTab.id!==n.id&&t.setTab(n.id)}),t.options.push(n)})},t.setMenu=function(){this.nodes["menu-label"].innerHTML=this.currentTab.title},t.processButtons=function(){var e=this;cm.addEvent(e.nodes.buttonPrev,"click",e.prevTabHandler),cm.addEvent(e.nodes.buttonNext,"click",e.nextTabHandler),cm.addEvent(e.nodes.buttonDone,"click",e.doneTabHandler)},t.setButtons=function(){var e=this,n=e.currentTab.index;0===n&&(cm.addClass(e.nodes.buttonPrev,"is-hidden"),cm.removeClass(e.nodes.buttonNext,"is-hidden"),cm.addClass(e.nodes.buttonDone,"is-hidden")),0<n&&n<e.tabsCount-1&&(cm.removeClass(e.nodes.buttonPrev,"is-hidden"),cm.removeClass(e.nodes.buttonNext,"is-hidden"),cm.addClass(e.nodes.buttonDone,"is-hidden")),n===e.tabsCount-1&&(cm.removeClass(e.nodes.buttonPrev,"is-hidden"),cm.addClass(e.nodes.buttonNext,"is-hidden"),cm.removeClass(e.nodes.buttonDone,"is-hidden"))},t.processInput=function(){var t=this;cm.getConstructor("Com.AbstractInput",function(e,n){t.components.input=new e(t.params[n])})},t.setInput=function(){this.currentTab&&this.components.input&&this.components.input.set(this.currentTab.id)},t.validateTab=function(e){var e=cm.isUndefined(e)?this.currentTab:e,n=!0;return this.isEditing||cm.find("App.AbstractModuleElement",null,e.tab.inner,function(e){!cm.isFunction(e.validate)||e.validate()||(n=!1)},{childs:!0}),n},t.prevTab=function(e){var n=this;cm.preventDefault(e),n.validateTab()&&0<n.currentTab.index&&(e=n.currentTab.index-1,n.setTabByIndex(e),n.scrollToTop())},t.nextTab=function(e){var n=this;cm.preventDefault(e),n.validateTab()&&n.currentTab.index<n.tabsCount-1&&(e=n.currentTab.index+1,n.setTabByIndex(e),n.scrollToTop())},t.doneTab=function(e){this.validate()?this.hideError():(cm.preventDefault(e),this.showError())},t.setTab=function(e){this.components.tabset.set(e)},t.setTabByIndex=function(e){this.components.tabset.setByIndex(e)},t.getCurrentTab=function(){return this.currentTab},t.showError=function(){return cm.removeClass(this.nodes.notifications,"is-hidden"),this},t.hideError=function(){return cm.addClass(this.nodes.notifications,"is-hidden"),this},t.validate=function(){var n=this,t=!0;return cm.forEach(n.tabs,function(e){t&&!n.validateTab(e)&&(n.setTabByIndex(e.index),n.scrollToTop(),t=!1)}),n.triggerEvent("onValidate",{valid:t}),t},t.scrollToTop=function(){var e=this,n=cm.getOffsetRect(e.nodes.container),t=cm.getRect(window),o=n.offset.top-16;return e.components.topMenu&&(t.top+=e.components.topMenu.getDimensions("height"),o-=e.components.topMenu.getDimensions("height")),e.components.template&&e.templateParams.header.fixed&&(t.top+=e.components.template.getHeaderDimensions("height"),o-=e.components.template.getHeaderDimensions("height")),n=n.top>t.top&&n.top<t.bottom,o=Math.max(o,0),n||e.components.scroll.go({style:{docScrollTop:o},duration:e.params.scrollDuration,anim:"smooth"}),e}}),cm.define("Mod.ElementWysiwyg",{extend:"App.AbstractModuleElement",params:{}},function(e){App.AbstractModuleElement.apply(this,arguments)}),cm.define("Module.FlipCards",{extend:"App.AbstractModule",params:{effect:"none"}},function(e){App.AbstractModule.apply(this,arguments)}),cm.getConstructor("Module.FlipCards",function(e,n,t,o){t.onConstructStart=function(){var e=this;e.isFlipped=!1,e.perspective=0,e.nodes={container:cm.node("div"),inner:cm.node("div")},e.toggleHandler=e.toggle.bind(e),e.setPerspectiveHandler=e.setPerspective.bind(e),e.onPointerOverHandler=e.onPointerOver.bind(e),e.onPointerOutHandler=e.onPointerOut.bind(e),e.onBodyClickHandler=e.onBodyClick.bind(e)},t.onDestruct=function(){cm.removeEvent(document.body,"pointerover",this.onBodyClickHandler)},t.onEnableEditing=function(){var e=this;cm.removeClass(e.nodes.container,["effect",e.params.effect].join("--")),cm.hasPointerEvent?(cm.removeEvent(e.nodes.container,"pointerover",e.onPointerOverHandler),cm.removeEvent(e.nodes.container,"pointerout",e.onPointerOutHandler),cm.removeEvent(document.body,"pointerdown",e.onBodyClickHandler)):(cm.removeEvent(e.nodes.container,"mouseover",e.onPointerOverHandler),cm.removeEvent(e.nodes.container,"mouseout",e.onPointerOutHandler))},t.onDisableEditing=function(){var e=this;cm.addClass(e.nodes.container,["effect",e.params.effect].join("--")),cm.hasPointerEvent?(cm.addEvent(e.nodes.container,"pointerover",e.onPointerOverHandler),cm.addEvent(e.nodes.container,"pointerout",e.onPointerOutHandler),cm.addEvent(document.body,"pointerdown",e.onBodyClickHandler)):(cm.addEvent(e.nodes.container,"mouseover",e.onPointerOverHandler),cm.addEvent(e.nodes.container,"mouseout",e.onPointerOutHandler))},t.renderViewModel=function(){this.params.isEditing?this.enableEditing():this.disableEditing(),this.triggerEvent("onRenderViewModel")},t.onPointerOver=function(e){cm.preventDefault(e);var n=cm.getEventTarget(e);cm.isParent(this.nodes.container,n,!0)&&(cm.isUndefined(e.pointerType)||"mouse"===e.pointerType?this.show():this.toggle())},t.onPointerOut=function(e){cm.preventDefault(e),!cm.isUndefined(e.pointerType)&&"mouse"!==e.pointerType||(e=cm.getRelatedTarget(e),cm.isParent(this.nodes.container,e,!0))||this.hide()},t.onBodyClick=function(e){e=cm.getEventTarget(e);cm.isParent(this.nodes.container,e,!0)||this.hide()},t.setPerspective=function(){var e=this,n=cm.getRect(e.nodes.container),n=(n.width+n.height)/2,t=(cm._pageSize.winWidth+cm._pageSize.winHeight)/2,t=Math.round(n+n*(t/n));return t!==e.perspective&&(e.perspective=t,e.nodes.container.style.perspective=t+"px"),e},t.show=function(){var e=this;return e.isEditing||e.isFlipped||(e.isFlipped=!0,e.setPerspective(),cm.addClass(e.nodes.container,"active")),e},t.hide=function(){var e=this;return!e.isEditing&&e.isFlipped&&(e.isFlipped=!1,e.setPerspective(),cm.removeClass(e.nodes.container,"active")),e},t.toggle=function(){return this.isFlipped?this.hide():this.show(),this}}),cm.define("Mod.Form",{extend:"App.AbstractModule",events:["onSubmit","onReset","onValidate"],params:{remember:!1,validate:!0,local:!1,unload:!1,action:null,ajax:{method:"POST",async:!1,beacon:!0,local:!1}}},function(e){App.AbstractModule.apply(this,arguments)}),cm.getConstructor("Mod.Form",function(e,n,t,o){t.onConstructStart=function(){var e=this;e.isAjax=!1,e.isUnload=!1,e.items={},e.values={},e.nodes={form:cm.node("form")},e.processItemHandler=e.processItem.bind(e),e.processWizardHandler=e.processWizard.bind(e),e.unloadEventHanlder=e.unloadEvent.bind(e),e.submitEventHandler=e.submitEvent.bind(e),e.resetEventHandler=e.resetEvent.bind(e),e.keypressEventHandler=e.keypressEvent.bind(e)},t.onDestruct=function(){var e=this;e.components.finder&&e.components.finder.remove(),e.components.finderWizard&&e.components.finderWizard.remove(),e.isUnload&&cm.removeEvent(window,"unload",e.unloadEventHanlder)},t.onValidateParams=function(){var e=this;cm.isEmpty(e.params.ajax.url)||(e.isAjax=!0),e.isUnload=e.params.unload&&e.isAjax,e.params.action=e.nodes.form.getAttribute("action")||e.params.action},t.renderViewModel=function(){var e=this;return o.prototype.renderViewModel.apply(e,arguments),e.params.remember&&(e.isUnload&&cm.addEvent(window,"unload",e.unloadEventHanlder),e.params.local)&&(e.values=e.storageRead("items")||{},e.components.finder=new cm.Finder("App.AbstractModuleElement",null,e.nodes.container,e.processItemHandler,{multiple:!0,childs:!0}),e.components.finderWizard=new cm.Finder("Mod.ElementWizard",null,e.nodes.container,e.processWizardHandler,{multiple:!0})),cm.addEvent(e.nodes.form,"keypress",e.keypressEventHandler),cm.addEvent(e.nodes.form,"submit",e.submitEventHandler),cm.addEvent(e.nodes.form,"reset",e.resetEventHandler),e},t.processItem=function(e){var t,o=this;e.getParams("memorable")&&(t={controller:e,name:e.getParams("name"),value:null},o.values[t.name]&&(t.value=o.values[t.name]),cm.isEmpty(t.value)||t.controller.set(t.value),t.controller.addEvent("onChange",function(e,n){t.value=t.controller.get(),o.values[t.name]=t.value,o.processSave()}),t.controller.addEvent("onDestruct",function(e){delete o.values[t.name],delete o.items[t.name],o.processSave()}),o.values[t.name]=t.value,o.items[t.name]=t)},t.processWizard=function(e){var n=this,t={controller:e,name:e.getParams("name"),value:null};n.values[t.name]&&(t.value=n.values[t.name]),t.controller.setTab(t.value),t.controller.addEvent("onTabChange",function(){t.tab=t.controller.getCurrentTab(),t.value=t.tab.id,n.values[t.name]=t.value,n.processSave()}),t.controller.addEvent("onDestruct",function(){delete n.values[t.name],delete n.items[t.name],n.processSave()}),n.values[t.name]=t.value,n.items[t.name]=t},t.processSave=function(){this.storageWrite("items",this.values)},t.clearStoredItems=function(){this.storageClear("items")},t.unloadEvent=function(){var e=this,n=e.params.local?e.values:cm.getFDO(e.nodes.container);e.components.ajax=cm.ajax(cm.merge(e.params.ajax,{params:n}))},t.keypressEvent=function(e){cm.isFormInputFocused()&&cm.isKey(e,"enter")&&cm.preventDefault(e)},t.submitEvent=function(e){cm.preventDefault(e),this.submit()},t.resetEvent=function(e){cm.preventDefault(e),this.clear()},t.validate=function(){var e=this,n=new FormData(e.nodes.form),t=!0;return cm.find("App.AbstractModuleElement",null,e.nodes.form,function(e){!cm.isFunction(e.validate)||e.validate()||(t=!1)},{childs:!0}),e.triggerEvent("onValidate",{form:e.nodes.form,data:n,action:e.params.action,isValid:t}),t},t.submit=function(){var e=this,n=new FormData(e.nodes.form),t=!0;return(t=e.params.validate?e.validate():t)&&(e.clearStoredItems(),e.triggerEvent("onSubmit",{form:e.nodes.form,data:n,action:e.params.action})),e},t.clear=function(){var e=this,n=new FormData(e.nodes.form);return cm.find("App.AbstractModuleElement",null,e.nodes.form,function(e){cm.isFunction(e.clear)&&e.clear()},{childs:!0}),e.clearStoredItems(),e.triggerEvent("onReset",{form:e.nodes.form,data:n,action:e.params.action}),e}}),cm.define("Module.LogoCarousel",{extend:"App.AbstractModule",params:{renderStructure:!1,embedStructureOnRender:!1,duration:1e3,delay:2e3,columns:0,mobileColumns:1,stopOnHover:!0}},function(e){App.AbstractModule.apply(this,arguments)}),cm.getConstructor("Module.LogoCarousel",function(e,n,t){var o=t._inherit;t.construct=function(){var e=this;return e.items={},e.itemsLength=0,e.isInfinite=!1,e.isAnimate=!0,e.isProccess=!1,e.moveInterval=null,e.current=null,e.columns=0,e.onValidateParamsProcessHandler=e.onValidateParamsProcess.bind(e),e.onDestructProcessHandler=e.onDestructProcess.bind(e),e.onRedrawHandler=e.onRedraw.bind(e),e.startHandler=e.start.bind(e),e.stopHandler=e.stop.bind(e),e.mouseOverEventHandler=e.mouseOverEvent.bind(e),e.mouseOutEventHandler=e.mouseOutEvent.bind(e),e.moveProcessHandler=e.moveProcess.bind(e),e.addEvent("onValidateParamsProcess",e.onValidateParamsProcessHandler),e.addEvent("onDestructProcess",e.onDestructProcessHandler),e.addEvent("onRedraw",e.onRedrawHandler),o.prototype.construct.apply(e,arguments),e},t.onValidateParamsProcess=function(){var e=this;return e.isInfinite=!e.params.delay,e.delay=e.params.duration+e.params.delay,e.isAnimate=!(!e.params.duration&&!e.params.duration),e},t.onDestructProcess=function(){return this.stop(),this.moveInterval&&clearTimeout(this.moveInterval),this},t.onRedraw=function(){var e=this,n=["col",e.params.columns].join("-"),t=["col",e.params.mobileColumns].join("-");return"mobile"==cm._deviceType?(e.columns=e.params.mobileColumns,cm.replaceClass(e.nodes.grid,n,t)):(e.columns=e.params.columns,cm.replaceClass(e.nodes.grid,t,n)),e.restart(),e},t.render=function(){return o.prototype.render.apply(this,arguments),this.redraw(),this},t.renderViewModel=function(){var e=this;return o.prototype.renderViewModel.apply(e,arguments),e.items=cm.clone(e.nodes.items),e.itemsLength=e.items.length,e.isInfinite&&cm.addClass(e.nodes.container,"is-infinite"),e.components.animation=new cm.Animation(e.nodes.itemsContainer),cm.addEvent(e.nodes.container,"mouseover",e.mouseOverEventHandler),cm.addEvent(e.nodes.container,"mouseout",e.mouseOutEventHandler),e},t.restart=function(){return this.stop(),this.restore(),this.move(),this},t.start=function(){return this.isProccess||(this.isProccess=!0),this},t.stop=function(){return this.isProccess&&(this.isProccess=!1),this},t.move=function(){return this.isProccess=!0,this.moveProcess(),this.moveRepeater(),this},t.moveRepeater=function(){var e=this;return e.moveInterval&&clearTimeout(e.moveInterval),e.moveInterval=setTimeout(function(){e.moveProcess(),e.moveRepeater()},e.delay),e},t.moveProcess=function(){var e=this;return e.isAnimate&&e.isProccess&&e.itemsLength>e.columns&&(e.restore(),e.current=e.items.shift(),e.items.push(e.current),e.components.animation.go({style:{left:-e.current.container.offsetWidth+"px"},duration:e.params.duration,anim:e.isInfinite?"linear":"smooth"})),e},t.restore=function(){var e=this;return e.current&&(cm.addClass(e.nodes.container,"is-immediately",!0),e.nodes.itemsContainer.style.left="0px",cm.insertLast(e.current.container,e.nodes.itemsContainer),cm.removeClass(e.nodes.container,"is-immediately",!0)),e},t.mouseOverEvent=function(e){return this.params.stopOnHover&&this.stop(),this},t.mouseOutEvent=function(e){e=cm.getRelatedTarget(e);return cm.isParent(this.nodes.container,e,!0)||this.params.stopOnHover&&this.start(),this}}),cm.define("Module.Menu",{extend:"App.AbstractModule",params:{renderStructure:!1,embedStructureOnRender:!1,view:"horizontal",submenu:"visible",duration:"cm._config.animDuration",delay:"cm._config.hideDelay"}},function(e){App.AbstractModule.apply(this,arguments)}),cm.getConstructor("Module.Menu",function(e,n,t){var o=t._inherit;t.construct=function(){var e=this;return e.nodes={select:{select:cm.node("select")}},e.alignValues=["left","center","right","justify"],e.submeniViewValues=["visible","dropdown","specific","collapsible"],e.processSelectHandler=e.processSelect.bind(e),o.prototype.construct.apply(e,arguments),e},t.renderViewModel=function(){var e=this;return o.prototype.renderViewModel.apply(e,arguments),cm.addEvent(e.nodes.select.select,"change",e.processSelectHandler),e.processSubMenu(e.nodes.menu.items),e},t.processSubMenu=function(e){var n=this;return cm.forEach(e,function(e){e.sub&&(n.processSubMenuItem(e),n.processSubMenu(e.sub.items))}),n},t.processSubMenuItem=function(n){var t=this;return n.sub._animate=new cm.Animation(n.sub.container),n.sub._visible=cm.isClass(n.container,"active"),n.sub._visible||(cm.addEvent(n.container,"mouseover",function(e){"vertical"===t.params.view&&"collapsible"===t.params.submenu&&t.showSubMenuItemCollapsible(e,n)}),cm.addEvent(n.container,"mouseout",function(e){"vertical"===t.params.view&&"collapsible"===t.params.submenu&&t.hideSubMenuItemCollapsible(e,n)})),t},t.showSubMenuItemCollapsible=function(e,n){var t,o,a=this;return n.sub._delay&&clearTimeout(n.sub._delay),n.sub._delay=setTimeout(function(){n.sub._show||(n.sub._show=!0,t=n.sub.container.offsetHeight,n.sub.container.style.height="auto",o=n.sub.container.offsetHeight,n.sub.container.style.height=t+"px",n.sub._animate.go({style:{height:o+"px"},duration:a.params.duration,anim:"smooth",onStop:function(){n.sub.container.style.height="auto"}}))},a.params.delay),a},t.hideSubMenuItemCollapsible=function(e,n){var t=this,e=cm.getRelatedTarget(e);return cm.isParent(n.container,e,!0)||(n.sub._delay&&clearTimeout(n.sub._delay),n.sub._delay=setTimeout(function(){n.sub._show&&(n.sub._show=!1,n.sub._animate.go({style:{height:"0px"},duration:t.params.duration,anim:"smooth",onStop:function(){n.sub.container.style.height=""}}))},t.params.delay)),t},t.processSelect=function(){var e=this.nodes.select.select.value;return cm.isEmpty(e)||(window.location.href=e),this},t.setView=function(e){var n=this;switch(n.params.view=e){case"horizontal":cm.removeClass(n.nodes.container,"is-vertical mod__menu--adaptive"),cm.addClass(n.nodes.container,"is-horizontal"),n.setSubmenuView("dropdown");break;case"vertical":cm.removeClass(n.nodes.container,"is-horizontal mod__menu--adaptive"),cm.addClass(n.nodes.container,"is-vertical"),n.setSubmenuView("visible");break;case"mobile":cm.addClass(n.nodes.container,"mod__menu--adaptive")}return n},t.setAlign=function(e){var n=this;return cm.inArray(n.alignValues,e)&&(cm.forEach(n.alignValues,function(e){cm.removeClass(n.nodes.container,["pull",e].join("-"))}),cm.addClass(n.nodes.container,["pull",e].join("-"))),n},t.setSubmenuView=function(e){var n=this;return cm.inArray(n.submeniViewValues,e)&&(cm.forEach(n.submeniViewValues,function(e){cm.removeClass(n.nodes.container,["is",e].join("-"))}),n.params.submenu=e,cm.addClass(n.nodes.container,["is",e].join("-"))),n}}),cm.define("App.ModuleMenu",{extend:"App.AbstractModule",events:["onItemClick"],params:{renderStructure:!1,embedStructureOnRender:!1}},function(){App.AbstractModule.apply(this,arguments)}),cm.getConstructor("App.ModuleMenu",function(e,n,t,o){t.renderViewModel=function(){var e=this;o.prototype.renderViewModel.apply(e,arguments),e.items=[],cm.forEach(e.nodes.items,e.processItems.bind(e)),cm.addEvent(e.nodes.select,"click",e.selectClickEvent.bind(e)),cm.addEvent(e.nodes.select,"change",e.selectChangeEvent.bind(e))},t.processItems=function(e){var n=this,t={container:e.container,nodes:e};t.nodes.link&&(t.value=t.nodes.link.getAttribute("href")),cm.addEvent(t.container,"click",function(e){n.itemClickEvent(e,t)}),n.items.push(t)},t.itemClickEvent=function(e,n){this.triggerEvent("onItemClick",n)},t.selectClickEvent=function(e){var n=this.nodes.select.value,t=this.items.find(function(e){return e.value===n});t&&this.triggerEvent("onItemClick",t)},t.selectChangeEvent=function(e){var n=this.nodes.select.value;cm.isEmpty(n)||(window.location.href=n)},t.set=function(n){return cm.forEach(this.items,function(e){e.value===n?cm.addClass(e.container,"active"):cm.removeClass(e.container,"active")}),this.nodes.select.value=n,this}}),cm.define("Module.MobileMenu",{extend:"App.AbstractModule",events:["onShow","onHide"],params:{view:"horizontal",container:"document.body"}},function(e){App.AbstractModule.apply(this,arguments)}),cm.getConstructor("Module.MobileMenu",function(e,n,t,o){t.onConstructStart=function(){var e=this;e.isMenuVisible=!1,e.isProcessing=!1,e.nodes={container:cm.node("div"),toggle:cm.node("div"),close:cm.node("div"),menu:cm.node("div")},e.toggleHandler=e.toggle.bind(e),e.toggleMenuHandler=e.toggleMenu.bind(e)},t.renderViewModel=function(){var e=this;o.prototype.renderViewModel.apply(e,arguments),cm.addClass(e.nodes.container,["view",e.params.view].join("--")),cm.addClass(e.nodes.container,"is-hide"),cm.addClass(e.nodes.menu,["view",e.params.view].join("--")),cm.addClass(e.nodes.menu,"is-hide"),cm.click.add(e.nodes.toggle,e.toggleHandler),cm.click.add(e.nodes.close,e.toggleHandler),cm.addEvent(e.nodes.menu,"click",e.toggleMenuHandler)},t.toggle=function(){this.isMenuVisible?this.hide():this.show()},t.toggleMenu=function(e){cm.getEventTarget(e)===this.nodes.menu&&this.toggle()},t.show=function(){var n=this;if(!n.isMenuVisible&&!n.isProcessing){switch(n.isProcessing=!0,n.params.view){case"fullscreen":case"sidebar-right":case"sidebar-left":cm.appendChild(n.nodes.menu,n.params.container)}switch(n.nodes.menu.style.display="block",n.params.view){case"dropdown":case"dropdown-overlap":n.nodes.menu.style.height="0px",n.nodes.menu.style.overflow="hidden"}cm.addEvent(n.nodes.menu,"transitionend",function e(){switch(cm.removeEvent(n.nodes.menu,"transitionend",e),n.params.view){case"dropdown":case"dropdown-overlap":n.nodes.menu.style.height="auto",n.nodes.menu.style.overflow="visible"}n.isMenuVisible=!0,n.isProcessing=!1,n.triggerEvent("onShow")}),cm.onSchedule(function(){switch(cm.replaceClass(n.nodes.container,"is-hide","is-show"),cm.replaceClass(n.nodes.menu,"is-hide","is-show"),n.params.view){case"dropdown":case"dropdown-overlap":n.nodes.menu.style.height=n.nodes.menu.scrollHeight+"px"}})}},t.hide=function(){var n=this;if(n.isMenuVisible&&!n.isProcessing){switch(n.isProcessing=!0,n.params.view){case"dropdown":case"dropdown-overlap":n.nodes.menu.style.height=n.nodes.menu.scrollHeight+"px",n.nodes.menu.style.overflow="hidden"}Date.now();cm.addEvent(n.nodes.menu,"transitionend",function e(){switch(cm.removeEvent(n.nodes.menu,"transitionend",e),n.nodes.menu.style.display="none",n.params.view){case"fullscreen":case"sidebar-right":case"sidebar-left":cm.appendChild(n.nodes.menu,n.nodes.container)}n.isMenuVisible=!1,n.isProcessing=!1,n.triggerEvent("onHide")}),cm.onSchedule(function(){switch(cm.replaceClass(n.nodes.container,"is-show","is-hide"),cm.replaceClass(n.nodes.menu,"is-show","is-hide"),n.params.view){case"dropdown":case"dropdown-overlap":n.nodes.menu.style.height="0px"}})}}}),cm.define("App.ModuleRolloverTabs",{modules:["Params","Events","Langs","DataConfig","DataNodes","Stack"],events:["onRenderStart","onRender","onTabShow","onTabHide","onEnableEditing","onEnableEditable","onDisableEditing","onDisableEditable"],params:{node:cm.Node("div"),name:"",event:"hover",stay:!1,showEmptyTab:!1,duration:"cm._config.animDuration",delay:"cm._config.hideDelay",width:"auto",attachment:"container",expand:"bottom",active:!1,isEditing:!1,customEvents:!0,"Com.TabsetHelper":{}}},function(e){function n(){o.previousPosition=cm.clone(o.currentPosition),o.currentPosition=cm.getRect(o.nodes.container);var e=o.previousPosition&&o.previousPosition.top===o.currentPosition.top,n=o.previousPosition&&o.previousPosition.bottom===o.currentPosition.bottom;if(!(o.previousPosition&&o.previousPosition.width===o.currentPosition.width))switch(o.params.attachment){case"screen":o.nodes.content.style.minWidth=Math.min(o.params.width,o.currentPosition.width)+"px";break;case"container":o.nodes.content.style.minWidth=o.currentPosition.width+"px"}if(!e||!n){var t=cm.getPageSize();switch(o.params.expand){case"top":o.nodes.content.style.top="auto",o.nodes.content.style.bottom=t.winHeight-o.currentPosition.top+"px";break;case"bottom":o.nodes.content.style.top=o.currentPosition.bottom+"px",o.nodes.content.style.bottom="auto"}}}var o=this,t=(o.nodes={container:cm.node("div"),inner:cm.node("div"),"menu-label":cm.node("div"),labels:[],options:[],tabs:[]},o.components={},o.tabs=[],o.options=[],o.isEditing=null,o.isProcessing=!1,o.hideInterval=null,o.changeInterval=null,o.resizeInterval=null,o.currentPosition=null,o.previousPosition=null,o.isMenuShow=!1,function(){o.params.duration=cm.getTransitionDurationFromLESS("AppMod-RolloverTabs-Duration",o.params.duration)}),a=function(){o.params["Com.TabsetHelper"].node=o.nodes.inner,o.params["Com.TabsetHelper"].name=[o.params.name,"tabset"].join("-"),o.params["Com.TabsetHelper"].targetEvent=o.params.event},r=function(){cm.addClass(o.nodes.container,["attachment",o.params.attachment].join("-")),cm.addClass(o.nodes.container,["expand",o.params.expand].join("-")),cm.getConstructor("Com.TabsetHelper",function(e,n){o.components.tabset=new e(o.params[n]).addEvent("onTabHideEnd",function(e,n){o.triggerEvent("onTabHide",n)}).addEvent("onTabChangeStart",function(e,n){(o.params.showEmptyTab||o.isEditing||!o.components.tabset.isTabEmpty(n.id)?h:u)(n),o.isProcessing||(o.nodes["content-list"].style.overflow="hidden",o.nodes["content-list"].style.height=o.nodes["content-list"].offsetHeight+"px"),o.isProcessing=!0,o.changeInterval&&clearTimeout(o.changeInterval),o.changeInterval=setTimeout(function(){o.isProcessing=!1,o.nodes["content-list"].style.height="auto",o.nodes["content-list"].style.overflow="visible"},o.params.duration)}).addEvent("onTabShowEnd",function(e,n){o.nodes["content-list"].style.height=n.tab.container.offsetHeight+"px",o.nodes["menu-label"].innerHTML=n.title,o.triggerEvent("onTabShow",n)}).processTabs(o.nodes.tabs,o.nodes.labels)}),s(),i(),p(),o.params.customEvents&&(cm.customEvent.add(o.params.node,"destruct",function(){o.destruct()}),cm.customEvent.add(o.params.node,"redraw",function(){o.redraw()}),cm.customEvent.add(o.params.node,"enableEditable",function(){o.enableEditing()}),cm.customEvent.add(o.params.node,"disableEditable",function(){o.disableEditing()})),o.params.active&&o.components.tabset.set(o.params.active),o.params.isEditing&&o.enableEditing()},s=function(){o.tabs=o.components.tabset.getTabs(),cm.forEach(o.tabs,function(n){cm.click.add(n.label.link,function(e){(o.isEditing||"click"===o.params.event&&o.components.tabset.get()!==n.id)&&cm.preventDefault(e)})})},i=function(){cm.addEvent(o.nodes["menu-icon"],"click",d),cm.forEach(o.nodes.options,c)},c=function(e){var n=cm.merge({id:"",nodes:e},o.getNodeDataConfig(e.container));cm.addEvent(e.container,"click",function(e){o.components.tabset.get()!==n.id&&(cm.preventDefault(e),o.components.tabset.set(n.id),l(),h())}),o.options.push(n)},d=function(){(o.isMenuShow?l:m)()},l=function(){o.isMenuShow=!1,cm.removeClass(o.nodes["menu-inner"],"active")},m=function(){o.isMenuShow=!0,cm.addClass(o.nodes["menu-inner"],"active")},p=function(){"hover"===o.params.event&&cm.addEvent(o.nodes.container,"mouseover",g),o.params.stay||(cm.addEvent(o.nodes.container,"mouseout",f),cm.addEvent(window,"click",v))},u=function(){o.hideInterval&&clearTimeout(o.hideInterval),o.hideInterval=setTimeout(function(){o.resizeInterval&&clearInterval(o.resizeInterval),cm.removeClass(o.nodes.content,"is-show"),o.nodes["menu-label"].innerHTML="",o.components.tabset.unsetHead(),o.hideInterval=setTimeout(function(){o.components.tabset.unset()},o.params.delay)},o.params.delay)},h=function(e){(e=e||o.components.tabset.getCurrentTab())&&(o.params.showEmptyTab||o.isEditing||!o.components.tabset.isTabEmpty(e.id))&&(o.redraw(),o.hideInterval&&clearTimeout(o.hideInterval),cm.addClass(o.nodes.content,"is-show",!0))},g=function(){h()},f=function(e){e=cm.getRelatedTarget(e);cm.isParent(o.nodes.container,e,!0)?h():o.isEditing||u()},v=function(e){e=cm.getEventTarget(e);cm.isParent(o.nodes.container,e,!0)?h():(l(),o.isEditing||u())};o.enableEditing=function(){return cm.isBoolean(o.isEditing)&&o.isEditing||(o.isEditing=!0,cm.replaceClass(o.params.node,"is-not-editing","is-editing is-editable"),o.components.tabset.setByIndex(0),h(),o.triggerEvent("onEnableEditing"),o.triggerEvent("onEnableEditable")),o},o.disableEditing=function(){return cm.isBoolean(o.isEditing)&&!o.isEditing||(o.isEditing=!1,cm.replaceClass(o.params.node,"is-editing is-editable","is-not-editing"),u(),o.triggerEvent("onDisableEditing"),o.triggerEvent("onDisableEditable")),o},o.destruct=function(){return o.isDestructed||(o.isDestructed=!0,"hover"===o.params.event&&cm.removeEvent(o.nodes.container,"mouseover",g),o.params.stay||(cm.removeEvent(o.nodes.container,"mouseout",f),cm.removeEvent(window,"click",v)),o.removeFromStack(),cm.remove(o.nodes.container)),o},o.redraw=function(){return o.resizeInterval&&clearInterval(o.resizeInterval),"screen"===o.params.attachment&&(o.isEditing?(o.previousPosition=null,o.currentPosition=null,o.nodes.content.style.maxWidth="",o.nodes.content.style.minWidth="",o.nodes.content.style.top="",o.nodes.content.style.bottom=""):(o.previousPosition=null,o.currentPosition=null,o.nodes.content.style.maxWidth=o.params.width,n(),o.resizeInterval=setInterval(n,5))),o},t(),o.setParams(e),o.convertEvents(o.params.events),o.getDataNodes(o.params.node),o.getDataConfig(o.params.node),a(),o.triggerEvent("onRenderStart"),r(),o.addToStack(o.params.node),o.triggerEvent("onRender")}),cm.define("Module.WorkingArea",{modules:["Params","Events","Langs","DataConfig","DataNodes","Stack"],events:["onRenderStart","onRender","onEnableEditing","onEnableEditable","onDisableEditing","onDisableEditable"],params:{node:cm.node("div"),name:"",isEditing:!1,customEvents:!0,href:"",target:"_self"}},function(e){var t=this,n=(t.nodes={container:cm.node("div")},t.components={},t.isEditing=null,function(){cm.isNode(t.params.node)&&(t.params.href=t.params.node.getAttribute("href")||t.params.href,t.params.target=t.params.node.getAttribute("target")||t.params.target)}),o=function(){a(),t.params.customEvents&&(cm.customEvent.add(t.params.node,"enableEditable",function(){t.enableEditing()}),cm.customEvent.add(t.params.node,"disableEditable",function(){t.disableEditing()})),t.params.isEditing&&t.enableEditing()},a=function(){cm.removeClass(t.nodes.container,"is-editing is-editable"),cm.isEmpty(t.params.href)||(cm.addClass(t.nodes.container,"is-link"),cm.addEvent(t.nodes.container,"click",r))},r=function(e){var n=cm.getEventTarget(e);(n.tagName&&"a"!==n.tagName.toLowerCase()||cm.isEmpty(n.getAttribute("href")))&&(cm.preventDefault(e),"_blank"===t.params.target?window.open(t.params.href,"_blank"):window.location.href=t.params.href)};t.enableEditing=function(){return cm.isBoolean(t.isEditing)&&t.isEditing||(t.isEditing=!0,cm.addClass(t.nodes.container,"is-editing is-editable"),cm.isEmpty(t.params.href)||(cm.removeClass(t.nodes.container,"is-link"),cm.removeEvent(t.nodes.container,"click",r)),t.triggerEvent("onEnableEditing"),t.triggerEvent("onEnableEditable")),t},t.disableEditing=function(){return cm.isBoolean(t.isEditing)&&!t.isEditing||(t.isEditing=!1,a(),t.triggerEvent("onDisableEditing"),t.triggerEvent("onDisableEditable")),t},t.setParams(e),t.convertEvents(t.params.events),t.getDataNodes(t.params.node),t.getDataConfig(t.params.node),n(),t.addToStack(t.params.node),t.triggerEvent("onRenderStart"),o(),t.addToStack(t.nodes.container),t.triggerEvent("onRender")});