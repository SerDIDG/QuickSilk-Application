var App={_version:"3.26.4",_assetsUrl:[window.location.protocol,window.location.hostname].join("//"),Elements:{},Nodes:{},Test:[]},Module={};cm._variables["%AppVersion%"]="App._version",cm._variables["%AppAssetsUrl%"]="App._assetsUrl",cm.define("App.AbstractModule",{extend:"Com.AbstractController",events:["enableEditing","disableEditing","enableEditable","disableEditable","onEnableEditing","onDisableEditing"],params:{renderStructure:!1,embedStructureOnRender:!1,controllerEvents:!0,customEvents:!0}},function(a){var b=this;Com.AbstractController.apply(b,arguments)}),cm.getConstructor("App.AbstractModule",function(a,b,c,d){c.construct=function(){var a=this;a.isEditing=null,a.enableEditingHandler=a.enableEditing.bind(a),a.disableEditingHandler=a.disableEditing.bind(a),d.prototype.construct.apply(a,arguments)},c.onSetCustomEvents=function(){var a=this;cm.customEvent.add(a.params.node,"enableEditable",a.enableEditingHandler),cm.customEvent.add(a.params.node,"disableEditable",a.disableEditingHandler)},c.onUnsetCustomEvents=function(){var a=this;cm.customEvent.remove(a.params.node,"enableEditable",a.enableEditingHandler),cm.customEvent.remove(a.params.node,"disableEditable",a.disableEditingHandler)},c.enableEditing=function(){var a=this;return cm.isBoolean(a.isEditing)&&a.isEditing||(a.isEditing=!0,cm.replaceClass(a.params.node,"is-not-editing","is-editing is-editable"),a.triggerEvent("enableEditing"),a.triggerEvent("enableEditable"),a.triggerEvent("onEnableEditing")),a},c.disableEditing=function(){var a=this;return(!cm.isBoolean(a.isEditing)||a.isEditing)&&(a.isEditing=!1,cm.replaceClass(a.params.node,"is-editing is-editable","is-not-editing"),a.triggerEvent("disableEditing"),a.triggerEvent("disableEditable"),a.triggerEvent("onDisableEditing")),a}}),cm.define("App.AbstractForm",{extend:"Com.AbstractController"},function(a){var b=this;Com.AbstractController.apply(b,arguments)}),cm.define("App.AbstractModuleElement",{extend:"App.AbstractModule",events:["onChange"],params:{renderStructure:!1,embedStructureOnRender:!1,required:!1,pattern:/^\s*$/g,match:!1,targetController:!1,memorable:!0,remember:!1,inputEvent:"input"}},function(a){var b=this;App.AbstractModule.apply(b,arguments)}),cm.getConstructor("App.AbstractModuleElement",function(a,b,c,d){c.construct=function(){var a=this;a.changeEventHandler=a.changeEvent.bind(a),d.prototype.construct.apply(a,arguments)},c.onConstructEnd=function(){var a=this;a.restoreLocalValue()},c.renderViewModel=function(){var a=this;d.prototype.renderViewModel.apply(a,arguments),a.params.targetController?a.renderController():cm.isEmpty(a.nodes.inputs)?a.renderInput(a.nodes.input):a.renderInputs()},c.renderController=function(){var a=this;cm.find(a.params.targetController,a.params.name,a.nodes.field,function(b){a.components.controller=b,a.components.controller.addEvent("onChange",a.changeEventHandler)})},c.renderInputs=function(){var a=this;cm.forEach(a.nodes.inputs,function(b){a.renderInput(b.input)})},c.renderInput=function(a){var b=this;cm.addEvent(a,b.params.inputEvent,b.changeEventHandler)},c.changeEvent=function(){var a=this,b=a.get();a.saveLocalValue(),a.triggerEvent("onChange",b)},c.saveLocalValue=function(){var a=this;if(a.params.memorable&&a.params.remember){var b=a.get();a.storageWrite("value",b)}},c.restoreLocalValue=function(){var a=this;if(a.params.memorable&&a.params.remember){var b=a.storageRead("value");a.set(b)}},c.setMultiple=function(a){var b=this;cm.isArray(value)&&cm.forEach(b.nodes.inputs,function(b,c){a[c]&&(b.input.value=a[c])})},c.getMultiple=function(){var a=this,b=[];return cm.forEach(a.nodes.inputs,function(a){b.push(a.input.value)}),b},c.validateValue=function(){var a,b=this,c=b.get();return a=cm.isRegExp(b.params.pattern)?cm.isEmpty(c)?!0:b.params.pattern.test(c):b.params.pattern===c,b.params.match?a:!a},c.set=function(a){var b=this;return b.components.controller?b.components.controller.set(a):cm.isEmpty(b.nodes.inputs)?b.nodes.input.value=a:b.setMultiple(a),b},c.get=function(){var a=this;return a.components.controller?a.components.controller.get():cm.isEmpty(a.nodes.inputs)?a.nodes.input.value:a.getMultiple()},c.validate=function(){var a=this,b=!0;return a.params.required&&(b=a.validateValue(),b?(cm.removeClass(a.nodes.field,"error"),cm.addClass(a.nodes.errors,"hidden")):(cm.addClass(a.nodes.field,"error"),cm.removeClass(a.nodes.errors,"hidden"))),b}}),App.FlowScenario=[{title:"Edit Header and Footer",order:2,type:"flow",flow:"forced",data:[{position:"template:left-top",arrow:"left",overlays:{main:"transparent",sidebar:"transparent",topMenu:"dark",template:"dark"},sidebar:!1,topMenu:!1,content:"<h3>Click on Layouts</h3>"},{position:"template:left-top",arrow:"left",overlays:{main:"transparent",sidebar:"transparent",topMenu:"dark",template:"dark"},sidebar:"layouts",topMenu:!1,content:"<h3>Click on Inner Page Layout</h3>"},{position:"template:center",arrow:!1,overlays:{main:"transparent",sidebar:"dark",topMenu:"dark",template:"light"},sidebar:!1,topMenu:!1,url:"admin/template/layout/content/",content:'<h3>You\'re in the right place!</h3><p>Your header and footer can be edited in "Inner Page Layout". These changes will be applied to all pages using this layout.</p>'}]},{title:"How to change or edit templates",order:3,type:"flow",flow:"forced",data:[{position:"topMenuItem:modules:container:right",arrow:"top",overlays:{main:"transparent",sidebar:"dark",topMenu:"transparent",template:"dark"},sidebar:!1,topMenu:!1,content:"<h3>Hover over Modules > Create</h3>"},{position:"topMenuItem:modules:dropdown:right",arrow:"left",overlays:{main:"transparent",sidebar:"dark",topMenu:"transparent",template:"dark"},sidebar:!1,topMenu:"modules",content:"<h3>Click on Templates</h3>"},{position:"template:top",arrow:"bottom",overlays:{main:"transparent",sidebar:"dark",topMenu:"dark",template:"transparent"},sidebar:!1,topMenu:!1,url:"admin/template-library",content:"<h3>Here are your existing templates</h3><p>You can customize any of these</p>"},{position:"template:top",arrow:"bottom",overlays:{main:"transparent",sidebar:"dark",topMenu:"dark",template:"transparent"},sidebar:!1,topMenu:!1,content:"<h3>Click Template Library</h3><p>To browse new templates</p>"},{position:"template:center",arrow:!1,overlays:{main:"transparent",sidebar:"dark",topMenu:"dark",template:"light"},sidebar:!1,topMenu:!1,content:'<h3>Here you can download new templates</h3><p>By hovering over the template and clicking "Install"</p>'}]},{title:"How to edit styles",order:4,type:"flow",flow:"forced",data:[{position:"topMenuItem:modules:container:right",arrow:"top",overlays:{main:"transparent",sidebar:"dark",topMenu:"transparent",template:"dark"},sidebar:!1,topMenu:!1,content:"<h3>Hover over Modules > Create</h3>"},{position:"topMenuItem:modules:dropdown:right",arrow:"left",overlays:{main:"transparent",sidebar:"dark",topMenu:"transparent",template:"dark"},sidebar:!1,topMenu:"modules",content:"<h3>Click on Templates</h3>"},{position:"template:top",arrow:"bottom",overlays:{main:"transparent",sidebar:"dark",topMenu:"dark",template:"transparent"},sidebar:!1,topMenu:!1,url:"admin/template-library",content:'<h3>Hover over any of your existing templates</h3><p>And select "Customize"</p>'},{position:"template:top",arrow:"bottom",overlays:{main:"transparent",sidebar:"dark",topMenu:"dark",template:"transparent"},sidebar:!1,topMenu:!1,url:"admin/template/editor/edit/",content:"<h3>Click on Template Default Styles</h3>"},{position:"template:center",arrow:!1,overlays:{main:"transparent",sidebar:"dark",topMenu:"dark",template:"light"},sidebar:!1,topMenu:!1,content:"<h3>Select any text style</h3><p>To edit the font, colours, etc.</p>"}]},{title:"Help Tour",order:1,type:"tour",data:[{position:"window:center",arrow:!1,overlays:{main:"transparent",sidebar:"dark",topMenu:"dark",template:"dark"},sidebar:!1,topMenu:!1,content:"<h3>QuickSilk Online Tour!</h3><p>Welcome to QuickSilk! Use the buttons at the bottom of each help bubble to quickly discover how to navigate and use the QuickSilk software. This online tour automatically appears the first time you login. Anytime after this, simply click on the help tour menu item for a quick refresher.</p>"},{position:"topMenuItem:user:dropdown:left",arrow:"right",overlays:{main:"transparent",sidebar:"dark",topMenu:"transparent",template:"dark"},sidebar:!1,topMenu:"user",content:"<h3>User Menu</h3><p>Click on your name to view the admin panel (future), your profile, or to logout. The View Profile link provides the ability to manage your subscription and billing, password, forum settings, working groups and public profile.</p>"},{position:"topMenuItem:modules:dropdown:right",arrow:"left",overlays:{main:"transparent",sidebar:"dark",topMenu:"transparent",template:"dark"},sidebar:!1,topMenu:"modules",content:"<h3>Modules</h3><p>The Module manager allows you to work on your modules from the administration panel. Simply mouse over the Modules menu and then scroll down and click on the module you wish to work with. </p>"},{position:"template:left-top",arrow:"left",overlays:{main:"transparent",sidebar:"transparent",topMenu:"dark",template:"dark"},sidebar:!1,topMenu:!1,content:"<h3>Left Panel Slider</h3><p>The left slider widget provides you with quick access to the modules, pages, layouts and template features. Simply click on the icon for the tab you wish to use.</p>"},{position:"template:left-top",arrow:"left",overlays:{main:"transparent",sidebar:"transparent",topMenu:"dark",template:"dark"},sidebar:"template-manager",topMenu:!1,content:"<h3>Installed Modules</h3><p>The modules tab provides quick access to the modules that you've subscribed to. Once you've opened a page or a template, open the modules tab to drag and drop the modules you wish to include.</p>"},{position:"template:left-top",arrow:"left",overlays:{main:"transparent",sidebar:"transparent",topMenu:"dark",template:"dark"},sidebar:"pages",topMenu:!1,content:"<h3>Site Pages</h3><p>The site pages tab allows you to quickly open, modify and manage your website pages. Simply open the tab and click on the web page you wish to work on.</p>"},{position:"template:left-top",arrow:"left",overlays:{main:"transparent",sidebar:"transparent",topMenu:"dark",template:"dark"},sidebar:"layouts",topMenu:!1,content:"<h3>Page Layouts</h3><p>Use the page layout tab to open, modify and manage the layouts of your various web page templates. A page layout will consist of the common elements you have on every page.</p>"},{position:"template:left-top",arrow:"left",overlays:{main:"transparent",sidebar:"transparent",topMenu:"dark",template:"dark"},sidebar:"templates",topMenu:!1,content:"<h3>Templates</h3><p>The templates tab displays the different custom or predesigned templates that you've installed and are immediately available for use on your website. If you want to view or install other templates, you'll do so from the template gallery.</p>"},{position:"template:center",arrow:!1,overlays:{main:"transparent",sidebar:"dark",topMenu:"dark",template:"light"},sidebar:!1,topMenu:!1,content:"<h3>Drop Area</h3><p>The drop area is where you drag and drop the modules. To move a module onto a page or template place your mouse on the desired module icon, hold down the left button on your mouse, and drag the module to the highlighted area of the page you wish to drop it, then let go of the mouse button.</p>"},{position:"topMenuItem:support:container:right",arrow:"top",overlays:{main:"transparent",sidebar:"dark",topMenu:"transparent",template:"dark"},sidebar:!1,topMenu:"support",content:"<h3>Need Help?</h3><p>Are you stuck, experiencing an issue, found a bug or have a suggestion? Simply click on this link and send us a message. FYI, to assist in the troubleshooting process we automatically collect information on the operating system, browser and browser version you are using. Our goal is to respond to your message within 1 business day.</p>"}]}],App._Blocks={},cm.define("App.Block",{modules:["Params","Events","DataNodes","DataConfig","Stack"],events:["onRenderStart","onRender","onRedraw","onRemove","enableEditing","disableEditing"],params:{node:cm.node("div"),type:"template-manager",instanceId:!1,positionId:0,zone:0,parentPositionId:0,layerId:0,index:!1,locked:!1,visible:!0,removable:!0,sticky:!1,editorName:"app-editor",templateName:"app-template",templateController:"Template"}},function(a){var b=this;b.isTemplateRequired=!1,b.isDummy=!1,b.isRemoved=!1,b.isEditing=null,b.styleObject=null,b.dimensions=null,b.components={},b.nodes={container:cm.node("div"),block:{container:cm.node("div"),inner:cm.node("div"),drag:[],menu:{edit:cm.node("div"),duplicate:cm.node("div"),"delete":cm.node("div")}}},b.index=null,b.node=null,b.zone=null,b.zones=[];var c=function(){b.setParams(a),b.convertEvents(b.params.events),b.getDataNodes(b.params.node),b.getDataConfig(b.params.node),d(),b.triggerEvent("onRenderStart"),e(),b.addToStack(b.params.node),b.triggerEvent("onRender")},d=function(){var a;cm.isNumber(b.params.instanceId)||cm.isString(b.params.instanceId)?(b.params.name=[b.params.type,b.params.instanceId,b.params.positionId].join("_"),b.params.zoneName=[b.params.type,b.params.instanceId,b.params.parentPositionId,b.params.zone].join("_")):(b.params.name=[b.params.type,b.params.positionId].join("_"),b.params.zoneName=[b.params.type,b.params.parentPositionId,b.params.zone].join("_")),(a=b.params.node.getAttribute("data-index"))&&(b.params.index=parseInt(a),b.params.node.removeAttribute("data-index")),b.index=b.params.index,App._Blocks[b.params.name]=b},e=function(){b.node=b.params.node,j(),cm.find("App.Editor",b.params.editorName,null,function(a){new cm.Finder("App.Zone",b.params.zoneName,null,f),h(a)}),cm.addEvent(window,"resize",b.redraw),cm.customEvent.add(b.node,"redraw",b.redraw)},f=function(a){a&&(b.zone=a,b.zone.addBlock(b,b.index))},g=function(a){a&&(b.zone=a,b.zone.removeBlock(b),b.zone=null)},h=function(a){a&&(b.components.editor=a,b.components.editor.addBlock(b,b.index))},i=function(a){a&&(b.components.editor=a,b.components.editor.removeBlock(b))},j=function(){b.components.template||(b.components.template=cm.reducePath(b.params.templateController,window),b.components.template||cm.find("App.Template",b.params.templateName,null,function(a){b.components.template=a}))},k=function(){var a,c,d;b.params.sticky&&(cm.addClass(b.node,"is-sticky"),j(),b.components.template&&(a=cm.getPageSize("winHeight")-b.dimensions.margin.top-b.dimensions.margin.bottom-(b.components.template.getTopMenuDimensions("height")||0)-(b.components.template.getFixedHeaderHeight()||0),c=b.dimensions.margin.top+(b.components.template.getTopMenuDimensions("height")||0)+(b.components.template.getFixedHeaderHeight()||0),d=b.dimensions.margin.bottom,b.node.style.top=c+"px",b.node.style.bottomIndent=d+"px",b.nodes.block.container.style.maxHeight=a+"px"))},l=function(){b.params.sticky&&(cm.removeClass(b.node,"is-sticky"),b.node.style.top="",b.node.style.bottom="",b.nodes.block.container.style.maxHeight="")};b.redraw=function(){b.getDimensions(),b.isEditing?l():k()},b.register=function(a){var c=App._Zones[b.params.zoneName];return f(c),h(a),b},b.enableEditing=function(){return cm.isBoolean(b.isEditing)&&b.isEditing||(b.isEditing=!0,cm.addClass(b.node,"is-editing"),cm.replaceClass(b.node,"is-hidden","is-visible"),b.params.locked||(cm.addClass(b.node,"is-editable"),cm.customEvent.trigger(b.node,"enableEditable",{direction:"child",self:!1})),cm.removeClass(b.nodes.block.container,"cm__animate"),b.redraw(),cm.customEvent.trigger(b.node,"enableEditing",{direction:"child",self:!1}),b.triggerEvent("enableEditing")),b},b.disableEditing=function(){return(!cm.isBoolean(b.isEditing)||b.isEditing)&&(b.isEditing=!1,cm.removeClass(b.node,"is-editing"),b.params.visible||cm.replaceClass(b.node,"is-visible","is-hidden"),b.params.locked||(cm.removeClass(b.node,"is-editable"),cm.customEvent.trigger(b.node,"disableEditable",{direction:"child",self:!1})),cm.addClass(b.nodes.block.container,"cm__animate"),b.redraw(),cm.customEvent.trigger(b.node,"disableEditing",{direction:"child",self:!1}),b.triggerEvent("disableEditing")),b},b.remove=function(){if(!b.isRemoved){for(b.isRemoved=!0,cm.removeEvent(window,"resize",b.redraw),cm.customEvent.remove(b.node,"redraw",b.redraw),g(b.zone),i(b.components.editor);b.zones.length;)b.zones[0].remove();cm.customEvent.trigger(b.node,"destruct",{direction:"child",self:!1}),delete App._Blocks[b.params.name],b.removeFromStack(),cm.remove(b.node),b.triggerEvent("onRemove")}return b},b.addZone=function(a){return b.zones.push(a),b},b.removeZone=function(a){return cm.arrayRemove(b.zones,a),b},b.setZone=function(a,c){return b.index=c,g(b.zone),f(a),b},b.unsetZone=function(){return g(b.zone),b},b.getIndex=function(){return b.zone?(b.index=b.zone.getBlockIndex(b),b.index):null},b.getLower=function(){var a=b.getIndex();return b.zone.getBlock(a+1)||null},b.getUpper=function(){var a=b.getIndex();return b.zone.getBlock(a-1)||null},b.getDragNodes=function(){var a=[];return cm.forEach(b.nodes.block.drag,function(b){a.push(b.container)}),a},b.getMenuNodes=function(){return b.nodes.block.menu},b.getInnerNode=function(){return b.nodes.block.inner},b.getDimensions=function(){return b.styleObject||(b.styleObject=cm.getStyleObject(b.node)),b.dimensions=cm.getNodeOffset(b.node,b.styleObject,null),b.dimensions},b.updateDimensions=function(){return b.dimensions=cm.getNodeOffset(b.node,b.styleObject,b.dimensions),b.dimensions},c()}),cm.define("App.Chart",{extend:"Com.AbstractController",params:{renderStructure:!0,embedStructureOnRender:!0,embedStructure:"append",width:"auto",height:"auto",type:"doughnut",showLegend:!1,simpleData:[],simpleOptions:{},simpleBackgroundColor:"@LESS.CmColor-Primary-DarkDefault",data:{},options:{}}},function(a){var b=this;Com.AbstractController.apply(b,arguments)}),cm.getConstructor("App.Chart",function(a,b,c,d){c.renderView=function(){var a=this;a.triggerEvent("onRenderViewStart"),a.nodes.container=cm.node("div",{"class":"app__chart"},a.nodes.canvas=cm.node("canvas",{width:a.params.width,height:a.params.height}),a.nodes.legend=cm.node("div",{"class":"chart__legend"})),a.triggerEvent("onRenderViewProcess"),a.triggerEvent("onRenderViewEnd")},c.renderViewModel=function(){var a=this;cm.isEmpty(a.params.simpleData)||a.processSimpleData(),cm.loadScript({path:"Chart",src:"%AppAssetsUrl%/libs/chartjs/Chart.min.js?%AppVersion%",callback:function(b){b&&(a.components.chart=new b(a.nodes.canvas,{type:a.params.type,data:a.params.data,options:a.params.options}),a.params.showLegend&&(a.nodes.legend.innerHTML=a.components.chart.generateLegend()))}})},c.processSimpleData=function(){var a=this,b=cm.merge({data:[],backgroundColor:a.params.simpleBackgroundColor},a.params.simpleOptions);a.params.data={labels:[],datasets:[b]},cm.forEach(a.params.simpleData,function(c){a.params.data.labels.push(c.label),b.data.push(c.value)})}}),cm.define("App.ChartHubspotContacs",{extend:"App.Chart",params:{width:"100%",height:"30em",type:"horizontalBar",simpleOptions:{label:"Count of Contacts",fill:!1},options:{scales:{xAxes:[{ticks:{beginAtZero:!0}}]}}}},function(a){var b=this;App.Chart.apply(b,arguments)}),cm.define("App.Dashboard",{modules:["Params","Events"],events:["onRenderStart","onRender","onDragStart","onMove","onDrop","onRemoveStart","onRemove","onRemoveEnd","onReplaceStart","onReplace","onReplaceEnd","onAppendStart","onAppend","onAppendEnd"],params:{draggableContainer:"document.body",scrollNode:"document.body",scrollSpeed:1,scrollStep:48,useGracefulDegradation:!0,dropDuration:400,moveDuration:200,highlightPlaceholders:!0,placeholderHeight:0,"Com.Overlay":{container:"document.body",duration:0,autoOpen:!1,removeOnClose:!0,showSpinner:!1,showContent:!1,position:"fixed",theme:"transparent"}}},function(a){var b=this;b.isGracefulDegradation=!1,b.isScrollProccess=!1,b.isProccess=!1,b.pointerType=null,b.components={},b.anim={},b.zones=[],b.blocks=[],b.dummyBlocks=[],b.currentZones=null,b.currentBlocks=null,b.currentBlock=null,b.currentBlockZone=null,b.currentBlockOffset=null,b.currentBellow=null;var c=function(){d(),b.setParams(a),b.convertEvents(b.params.events),e(),b.triggerEvent("onRenderStart"),f(),b.triggerEvent("onRender")},d=function(){b.params.dropDuration=cm.getTransitionDurationFromLESS("AppDashboard-DropDuration",b.params.dropDuration),b.params.moveDuration=cm.getTransitionDurationFromLESS("AppDashboard-MoveDuration",b.params.moveDuration)},e=function(){b.params["Com.Overlay"].container=b.params.draggableContainer,cm.isMobile()&&(b.isGracefulDegradation=!0),b.isGracefulDegradation=!0},f=function(){g(),cm.getConstructor("Com.Overlay",function(a){b.components.overlays=new a(b.params["Com.Overlay"])}),b.anim.scroll=new cm.Animation(b.params.scrollNode)},g=function(){b.currentBellow&&A(),u(),b.currentZones=[],b.currentBlocks=[],b.currentBlock=null,b.currentBlockZone=null,b.currentBlockOffset={left:0,top:0},b.currentBellow={zone:null,block:null,position:null},b.isProccess=!1},h=function(a,c){if(!a.button&&!b.isProccess&&!b.currentBlock){b.isProccess=!0,b.pointerType=a.type;var d=F(a);switch(d.state="start",cm.addClass(document.body,"app__dashboard__body"),b.components.overlays.open(),b.currentZones=w(c),b.currentBlocks=x(c),b.triggerEvent("onDragStart",{item:c,node:c.node,zone:c.zone}),m(c,d),C(),v(),z(y(d)),b.pointerType){case"mousedown":cm.addEvent(window,"mousemove",i),cm.addEvent(window,"mouseup",j);break;case"touchstart":cm.addEvent(window,"touchmove",i),cm.addEvent(window,"touchend",j)}cm.addEvent(window,"scroll",k),cm.customEvent.add(window,"pageSizeChange",k),cm.preventDefault(a)}},i=function(a){var c=F(a);c.state="move",G(c.top+b.params.scrollStep>cm._pageSize.winHeight?1:c.top-b.params.scrollStep<0?-1:0),n(b.currentBlock,c,!0),z(y(c)),cm.preventDefault(a)},j=function(){switch(b.currentBellow.zone&&"remove"!==b.currentBellow.zone.params.type?p(b.currentBlock,{index:b.currentBellow.index,zone:b.currentBellow.zone,placeholder:b.placeholder,onEnd:g}):o(b.currentBlock,{onEnd:g}),D(),b.components.overlays.close(),cm.removeClass(document.body,"app__dashboard__body"),b.pointerType){case"mousedown":cm.removeEvent(window,"mousemove",i),cm.removeEvent(window,"mouseup",j);break;case"touchstart":cm.removeEvent(window,"touchmove",i),cm.removeEvent(window,"touchend",j)}cm.removeEvent(window,"scroll",k),cm.customEvent.remove(window,"pageSizeChange",k)},k=function(a){var b=F(a);v(),z(y(b))},l=function(a){cm.forEach(a.getDragNodes(),function(b){cm.addEvent(b,"touchstart",function(b){h(b,a)}),cm.addEvent(b,"mousedown",function(b){h(b,a)}),cm.addEvent(b,"contextmenu",function(a){cm.preventDefault(a)})}),s(a),b.blocks.push(a)},m=function(a,c){var d=a.getDimensions();b.currentBlockOffset.top=c.top-d.outer.top,b.currentBlockOffset.left=c.left-d.outer.left,a.isDummy?b.currentBlock=a.clone():(b.currentBlockZone=a.zone,b.currentBlock=a.unsetZone()),cm.appendChild(b.currentBlock.node,b.params.draggableContainer),cm.addClass(b.currentBlock.node,"is-immediately"),cm.addClass(b.currentBlock.node,"is-dragging"),cm.addClass(b.currentBlock.node,"is-active",!0),n(b.currentBlock,{top:d.outer.top,left:d.outer.left,width:d.offset.width}),b.currentBlock.updateDimensions(),setTimeout(function(){cm.removeClass(b.currentBlock.node,"is-immediately")},5)},n=function(a,c,d){var e=c.top,f=c.left,g=c.node||a.node;d&&(e-=b.currentBlockOffset.top,f-=b.currentBlockOffset.left),cm.isUndefined(c.width)||(g.style.width=[c.width,"px"].join("")),cm.isUndefined(c.height)||(g.style.height=[c.height,"px"].join("")),cm.isUndefined(c.opacity)||(g.style.opacity=c.opacity),cm.setCSSTranslate(g,[f,"px"].join(""),[e,"px"].join(""))},o=function(a,c){var d;b.isProccess=!0,c=cm.merge({onStart:function(){},onEnd:function(){},triggerEvent:!0},c),c.onStart(),c.triggerEvent&&b.triggerEvent("onRemoveStart",a),a.node&&cm.hasParentNode(a.node)?(a.updateDimensions(),cm.addClass(a.node,"is-dropping",!0),a===b.currentBlock?(d=a.node,n(a,{left:-a.dimensions.outer.width,top:a.dimensions.outer.top,opacity:0})):(d=cm.Node("div",{"class":"app__dashboard__helper"}),cm.insertAfter(d,a.node),cm.appendChild(a.node,d),cm.transition(d,{properties:{height:"0px",opacity:0},duration:b.params.dropDuration}))):d=a.node,setTimeout(function(){cm.remove(d),a.unsetZone().remove(),c.triggerEvent&&(b.triggerEvent("onRemove",a),b.triggerEvent("onRemoveEnd",a)),b.isProccess=!1,c.onEnd()},b.params.dropDuration)},p=function(a,c){var d,e;c=cm.merge({index:0,zone:null,placeholder:null,onStart:function(){},onEnd:function(){}},c),c.onStart(),c.zone.getDimensions(),a.isDummy&&a.showSpinner(),d=c.zone.dimensions.inner.width-a.dimensions.margin.left-a.dimensions.margin.right,a.node.style.width=[d,"px"].join(""),e=a.node.offsetHeight+a.dimensions.margin.top+a.dimensions.margin.bottom,a.node.style.width=[a.dimensions.offset.width,"px"].join(""),cm.addClass(a.node,"is-dropping",!0),c.placeholder?(c.placeholder.getDimensions(),n(a,{left:c.placeholder.dimensions.outer.left-a.dimensions.margin.left,top:c.placeholder.dimensions.outer.top-a.dimensions.margin.top,width:d}),c.placeholder.show(e,b.params.dropDuration,!0)):n(a,{left:c.zone.dimensions.inner.left-a.dimensions.margin.left,top:c.zone.dimensions.inner.top-a.dimensions.margin.top,width:d}),setTimeout(function(){s(a),c.placeholder?cm.insertAfter(a.node,c.placeholder.node):cm.appendChild(a.node,c.zone.node),a.setZone(c.zone,c.index),b.triggerEvent("onDrop",a),c.onEnd()},b.params.dropDuration)},q=function(a,c){var d,e;b.isProccess=!0,c=cm.merge({block:null,zone:null,triggerEvent:!0,index:!1,onStart:function(){},onEnd:function(){}},c),c.onStart(),c.triggerEvent&&b.triggerEvent("onAppendStart",{node:a}),cm.isNumber(c.index)&&a.setAttribute("data-index",c.index.toString()),e=cm.node("div"),e.style.height=0,c.block?cm.insertAfter(e,c.block.node):cm.appendChild(e,c.zone.node),cm.appendChild(a,e),cm.addClass(a,"is-replacing",!0),cm.addClass(e,"app__dashboard__helper",!0),d=cm.getNodeOffset(a),cm.transition(e,{properties:{height:[d.outer.height,"px"].join("")},duration:b.params.dropDuration}),cm.transition(a,{properties:{opacity:1},duration:b.params.dropDuration}),setTimeout(function(){cm.removeClass(a,"is-replacing"),cm.insertAfter(a,e),cm.remove(e),c.triggerEvent&&(b.triggerEvent("onAppend",{node:a}),b.triggerEvent("onAppendEnd",{node:a})),b.isProccess=!1,c.onEnd()},b.params.dropDuration)},r=function(a,c){var d,e,f=b.params.dropDuration/2;b.isProccess=!0,c=cm.merge({block:null,zone:null,triggerEvent:!0,index:!1,onStart:function(){},onEnd:function(){}},c),c.onStart(),c.triggerEvent&&b.triggerEvent("onReplaceStart",{node:a}),cm.isNumber(c.index)&&a.setAttribute("data-index",c.index.toString()),e=cm.node("div"),c.block?(cm.insertAfter(e,c.block.node),cm.appendChild(c.block.node,e),cm.appendChild(a,e),cm.transition(c.block.node,{properties:{opacity:0},duration:f})):(cm.appendChild(e,c.zone.node),cm.appendChild(a,e),e.style.height=0),cm.addClass(a,"is-replacing",!0),cm.addClass(e,"app__dashboard__helper",!0),d=cm.getNodeOffset(a),cm.transition(e,{properties:{height:[d.outer.height,"px"].join("")},duration:b.params.dropDuration}),cm.transition(a,{properties:{opacity:1},duration:f,delayIn:f}),setTimeout(function(){c.block&&c.block.unsetZone().remove(),cm.removeClass(a,"is-replacing"),cm.insertAfter(a,e),cm.remove(e),c.triggerEvent&&(b.triggerEvent("onReplace",{node:a}),b.triggerEvent("onReplaceEnd",{node:a})),b.isProccess=!1,c.onEnd()},b.params.dropDuration)},s=function(a){cm.removeClass(a.node,"is-immediately is-dragging is-dropping is-active",!0),a.node.style.left="",a.node.style.top="",a.node.style.width="",a.node.style.opacity="",cm.clearCSSTranslate(a.node)},t=function(a){b.placeholder||(b.placeholder=new App.DashboardPlaceholder({highlight:b.params.highlightPlaceholders,animate:!b.isGracefulDegradation,events:{onShowEnd:v}})),"start"!==a.params.state||b.currentBlock.isDummy||b.placeholder.show(b.currentBlock.dimensions.outer.height),a.block?b.placeholder.embed(a.block.node,a.position):a.zone&&b.placeholder.embed(a.zone.node,"last"),b.placeholder.show(b.params.placeholderHeight,b.params.moveDuration)},u=function(){b.placeholder&&b.placeholder.remove()},v=function(){cm.forEach(b.currentZones,function(a){a.updateDimensions()}),cm.forEach(b.currentBlocks,function(a){a.updateDimensions()})},w=function(a){return b.zones.filter(function(b){return b.params.locked||"remove"!==b.params.type&&a.params.type!==b.params.type||"remove"===b.params.type&&!a.params.removable||cm.inArray(b.params.disallow,a.params.keyword)||cm.isParent(a.params.node,b.params.node)?!1:!0})},x=function(a){return b.blocks.filter(function(b){return a.params.type!==b.params.type||cm.isParent(a.params.node,b.params.node)?!1:!0})},y=function(a){var c,d,e={zone:null,block:null,index:0,position:null,params:a};return cm.forEach(b.currentZones,function(b){a.left>=b.dimensions.offset.left&&a.left<b.dimensions.offset.right&&a.top>=b.dimensions.offset.top&&a.top<=b.dimensions.offset.bottom&&(e.zone?(b.dimensions.offset.width<e.zone.dimensions.offset.width||b.dimensions.offset.height<e.zone.dimensions.offset.height)&&(e.zone=b):e.zone=b)}),e.zone||(e.zone=b.currentBellow.zone),e.zone||(e.zone=b.currentBlockZone),e.zone&&(cm.forEach(e.zone.blocks,function(b){a.top>=b.dimensions.outer.top&&a.top<=b.dimensions.outer.bottom&&(e.block=b,a.top-b.dimensions.outer.top<b.dimensions.outer.height/2?e.position="top":e.position="bottom")}),!e.block&&e.zone.blocks.length&&(c=e.zone.blocks[0],d=e.zone.blocks[e.zone.blocks.length-1],c&&a.top<c.dimensions.outer.top?(e.block=c,e.position="top"):d&&(e.block=d,e.position="bottom"))),e.block&&(e.index="top"===e.position?e.block.getIndex():e.block.getIndex()+1),e},z=function(a){b.currentBellow.zone&&b.currentBellow.zone.isActive&&b.currentBellow.zone!==a.zone&&b.currentBellow.zone.unactive(),a.zone&&!a.zone.isActive&&a.zone.active(),a.block||a.zone?t(a):u(),b.currentBellow=a},A=function(){b.currentBellow.zone&&b.currentBellow.zone.unactive()},B=function(a){b.zones.push(a)},C=function(){cm.forEach(b.currentZones,function(a){a.highlight()})},D=function(){cm.forEach(b.currentZones,function(a){a.unhighlight()})},E=function(a){cm.forEach(a.getDragNodes(),function(b){cm.addEvent(b,"touchstart",function(b){h(b,a)}),cm.addEvent(b,"mousedown",function(b){h(b,a)})}),b.dummyBlocks.push(a)},F=function(a){return/pageSizeChange|sctoll/.test(a.type)?cm._clientPosition:cm.getEventClientPosition(a)},G=function(a){var c=0,d=0;return 0===a?(b.isScrollProccess=!1,b.anim.scroll.stop(),!0):b.isScrollProccess?!0:(b.isScrollProccess=!0,0>a?(d=0,c=cm.getBodyScrollTop()*b.params.scrollSpeed):(d=Math.max(cm.getBodyScrollHeight()-cm._pageSize.winHeight,0),c=d*b.params.scrollSpeed),void b.anim.scroll.go({style:{docScrollTop:d},duration:c,anim:"smooth"}))};b.addBlock=function(a){return a.isDummy?E(a):l(a),b},b.removeBlock=function(a,c){return o(a,c),b},b.replaceBlock=function(a,c){return r(a,c),b},b.appendBlock=function(a,c){return q(a,c),b},b.addZone=function(a){return B(a),b},c()}),cm.define("App.DashboardPlaceholder",{modules:["Params","Events","Langs"],events:["onRenderStart","onRender","onShowEnd","onHideEnd"],params:{highlight:!0,animate:!0,container:cm.node("div"),insert:"appendChild"}},function(a){var b=this;b.nodes={},b.node=null,b.container=null,b.insert=null,b.styleObject=null,b.offsets=null,b.dimensions=null,b.isAnimate=!1,b.isShow=!1,b.isEmbed=!1,b.transitionInterval=null,b.transitionDurationProperty=null,b.height=0;var c=function(){b.setParams(a),b.convertEvents(b.params.events),d(),b.triggerEvent("onRenderStart"),e(),b.triggerEvent("onRender")},d=function(){b.transitionDurationProperty=cm.getSupportedStyle("transition-duration"),b.isAnimate=b.params.animate&&b.transitionDurationProperty},e=function(){b.nodes.container=cm.node("div",{"class":"app__dashboard__placeholder is-active is-highlight"}),b.node=b.nodes.container,b.embed(b.params.container,b.params.insert)};b.embed=function(a,c){if(cm.isNode(a)){switch(c){case"top":c="insertBefore";break;case"bottom":c="insertAfter";break;case"first":c="insertFirst";break;case"last":
default:c="appendChild"}(b.container!==a||b.insert!==c)&&(b.isEmbed=!0,b.container=a,b.insert=c,cm[b.insert](b.node,b.container),b.getDimensions())}return b},b.remove=function(){return cm.remove(b.node),b.isEmbed=!1,b.container=null,b.insert=null,b.height=null,b.nodes.container.style.height="0px",b},b.show=function(a,c,d){return d=cm.isUndefined(d)?b.isAnimate:d,a!==b.height&&(b.isShow=!0,d&&(b.nodes.container.style[b.transitionDurationProperty]=[c,"ms"].join("")),b.height=a,b.nodes.container.style.height=[b.height,"px"].join(""),b.transitionInterval&&clearTimeout(b.transitionInterval),b.transitionInterval=setTimeout(function(){b.triggerEvent("onShowEnd")},c+30)),b},b.hide=function(a,c){return c=cm.isUndefined(c)?b.isAnimate:c,height!==b.height&&(b.isShow=!1,c&&(b.nodes.container.style[b.transitionDurationProperty]=[a,"ms"].join("")),b.height=0,b.nodes.container.style.height=[b.height,"px"].join(""),b.transitionInterval&&clearTimeout(b.transitionInterval),b.transitionInterval=setTimeout(function(){b.triggerEvent("onHideEnd")},a+30)),b},b.getDimensions=function(){return b.styleObject||(b.styleObject=cm.getStyleObject(b.node)),b.dimensions=cm.getNodeOffset(b.node,b.styleObject,null),b.dimensions},b.updateDimensions=function(){return b.dimensions=cm.getNodeOffset(b.node,b.styleObject,b.dimensions),b.dimensions},c()}),App._DummyBlocks=[],cm.define("App.DummyBlock",{modules:["Params","Events","DataNodes","DataConfig","Stack"],events:["onRenderStart","onRender","onRemove"],params:{node:cm.Node("div"),name:"",keyword:"",type:"template-manager",removable:!0,editorName:"app-editor"}},function(a){var b=this;b.isDummy=!0,b.isEditing=!1,b.isRemoved=!1,b.styleObject=null,b.dimensions=null,b.components={},b.nodes={container:cm.node("div"),dummy:cm.node("div")},b.index=null,b.node=null,b.zone=null;var c=function(){b.setParams(a),b.convertEvents(b.params.events),b.getDataNodes(b.params.node),b.getDataConfig(b.params.node),d(),b.triggerEvent("onRenderStart"),e(),b.addToStack(b.params.node),b.triggerEvent("onRender")},d=function(){b.params.name=[b.params.type,b.params.keyword].join("_"),App._DummyBlocks.push(b)},e=function(){b.node=b.params.node,i(),b.getDimensions(),cm.find("App.Editor",b.params.editorName,null,h)},f=function(a){a&&(b.zone=a,b.zone.addBlock(b,b.index))},g=function(a){a&&(b.zone=a,b.zone.removeBlock(b),b.zone=null)},h=function(a){a&&(b.components.editor=a,b.components.editor.addBlock(b,b.index))},i=function(){b.nodes.spinner=cm.node("div",{"class":"app__block-spinner"},cm.node("div",{"class":"pt__box-loader is-absolute"},cm.node("div",{"class":"inner"}))),b.nodes.container.appendChild(b.nodes.spinner)};b.register=function(a){return h(a),b},b.enableEditing=function(){return cm.isBoolean(b.isEditing)&&b.isEditing||(b.isEditing=!0,cm.addClass(b.params.node,"is-editing is-editable is-visible")),b},b.disableEditing=function(){return(!cm.isBoolean(b.isEditing)||b.isEditing)&&(b.isEditing=!1,cm.removeClass(b.params.node,"is-editing is-editable is-visible")),b},b.setZone=function(a,c){return b.index=c,g(b.zone),f(a),b},b.unsetZone=function(){return g(b.zone),b},b.getIndex=function(){return b.zone?(b.index=b.zone.getBlockIndex(b),b.index):null},b.getLower=function(){var a=b.getIndex();return b.zone.getBlock(a)||null},b.getUpper=function(){var a=b.getIndex();return b.zone.getBlock(a-1)||null},b.getDragNodes=function(){return[b.node]},b.showSpinner=function(){return cm.addClass(b.nodes.spinner,"is-visible",!0),b},b.hideSpinner=function(){return cm.removeClass(b.nodes.spinner,"is-visible"),b},b.clone=function(){var a={node:cm.clone(b.node,!0)};return b.cloneComponent(a)},b.remove=function(){return b.isRemoved||(b.isRemoved=!0,cm.arrayRemove(App._DummyBlocks,b),b.removeFromStack(),cm.remove(b.node),b.triggerEvent("onRemove")),b},b.getDimensions=function(){return b.styleObject||(b.styleObject=cm.getStyleObject(b.node)),b.dimensions=cm.getNodeOffset(b.node,b.styleObject,null),b.dimensions},b.updateDimensions=function(){return b.dimensions=cm.getNodeOffset(b.node,b.styleObject,b.dimensions),b.dimensions},c()}),cm.define("App.Editor",{modules:["Params","Events","DataConfig","DataNodes","Stack","Storage"],events:["onRenderStart","onRender","onProcessStart","onExpand","onCollapse","onResize","create","place","replace","move","delete","update","duplicate","copy","createRequest","replaceRequest","moveRequest","deleteRequest","updateRequest","duplicateRequest","copyRequest","onProcessEnd"],params:{node:cm.node("div"),name:"app-editor",topMenuName:"app-topmenu",sidebarName:"app-sidebar",templateName:"app-template",editorType:"template-manager","App.Dashboard":{},"Com.Overlay":{container:"document.body",autoOpen:!1,removeOnClose:!0,showSpinner:!0,showContent:!1,position:"fixed",theme:"light"}}},function(a){var b=this;b.types=["template-manager","form-manager","listing-directory-card"],b.components={},b.nodes={},b.zones=[],b.blocks=[],b.dummyBlocks=[],b.editorType=null,b.isRendered=!1,b.isProcessed=!1,b.isExpanded=null;var c=function(){b.setParams(a),b.convertEvents(b.params.events),b.getDataNodes(b.params.node),b.getDataConfig(b.params.node),b.addToStack(b.params.node),b.triggerEvent("onRenderStart"),d(),e(),b.triggerEvent("onRender")},d=function(){b.editorType=b.params.editorType},e=function(){cm.getConstructor("App.Dashboard",function(a,c){b.components.dashboard=new a(b.params[c]).addEvent("onDrop",k).addEvent("onRemove",l)}),cm.find("App.TopMenu",b.params.topMenuName,null,function(a){b.components.topmenu=a}),cm.find("App.Sidebar",b.params.sidebarName,null,function(a){b.components.sidebar=a.addEvent("onExpandEnd",g).addEvent("onCollapseStart",h).addEvent("onTabShow",function(a,b){j(b.id)})}),cm.find("App.Template",b.params.templateName,null,function(a){b.components.template=a}),f()},f=function(){b.triggerEvent("onProcessStart"),cm.forEach(App._Zones,function(a){a.register(b)}),cm.forEach(App._Blocks,function(a){a.register(b)}),cm.forEach(App._DummyBlocks,function(a){a.register(b)}),cm.addClass(cm.getDocumentHtml(),"is-editor"),b.components.sidebar&&b.components.sidebar.isExpanded?g():h(),!b.components.sidebar&&b.components.topmenu&&i(),b.isRendered=!0},g=function(){cm.isBoolean(b.isExpanded)&&b.isExpanded||(b.isExpanded=!0,cm.replaceClass(cm.getDocumentHtml(),"is-editor--collapsed","is-editor--expanded"),cm.addClass(cm.getDocumentHtml(),"is-editing"),cm.forEach(b.zones,function(a){a.enableEditing()}),cm.forEach(b.blocks,function(a){a.enableEditing()}),cm.forEach(b.dummyBlocks,function(a){a.enableEditing()}),b.components.template.enableEditing(),b.triggerEvent("onExpand"))},h=function(){(!cm.isBoolean(b.isExpanded)||b.isExpanded)&&(b.isExpanded=!1,cm.replaceClass(cm.getDocumentHtml(),"is-editor--expanded","is-editor--collapsed"),cm.removeClass(cm.getDocumentHtml(),"is-editing"),cm.forEach(b.zones,function(a){a.disableEditing()}),cm.forEach(b.blocks,function(a){a.disableEditing()}),cm.forEach(b.dummyBlocks,function(a){a.disableEditing()}),b.components.template.disableEditing(),b.triggerEvent("onCollapse"))},i=function(){cm.find("Com.GridlistHelper",null,null,function(a){a.enableEditing()})},j=function(a){cm.inArray(b.types,a)&&a!==b.editorType&&(b.editorType=a)},k=function(a,c){c.isDummy?b.createRequest(c):b.moveRequest(c)},l=function(a,c){c.isDummy||b.deleteRequest(c)};b.createRequest=function(a){return b.triggerEvent("createRequest",a),b},b.deleteRequest=function(a){return b.triggerEvent("deleteRequest",a),b},b.moveRequest=function(a){return b.triggerEvent("moveRequest",a),b},b.replaceRequest=function(a){return b.triggerEvent("replaceRequest",a),b},b.updateRequest=function(a){return b.triggerEvent("updateRequest",a),b},b.duplicateRequest=function(a){return b.triggerEvent("duplicateRequest",a),b},b.copyRequest=function(a){return b.triggerEvent("copyRequest",a),b},b.create=function(a,c){return a&&c&&(a=cm.isNode(a)?a:cm.strToHTML(a),b.components.dashboard.replaceBlock(a,{block:c,zone:c.zone,index:c.getIndex(),onEnd:function(){b.triggerEvent("create",a),b.triggerEvent("onProcessEnd",a),b.components.template.redraw()}})),b},b.place=function(a,c){return a&&c&&(a=cm.isNode(a)?a:cm.strToHTML(a),b.components.dashboard.appendBlock(a,{onEnd:function(){b.triggerEvent("place",a),b.triggerEvent("onProcessEnd",a),b.components.template.redraw()}})),b},b.replace=function(a,c){return a&&c&&(a=cm.isNode(a)?a:cm.strToHTML(a),b.components.dashboard.replaceBlock(a,{block:c,zone:c.zone,index:c.getIndex(),onEnd:function(){b.triggerEvent("replace",a),b.triggerEvent("onProcessEnd",a),b.components.template.redraw()}})),b},b["delete"]=function(a){return a&&b.components.dashboard.removeBlock(a,{triggerEvent:!1,onEnd:function(){b.triggerEvent("delete",a.node),b.triggerEvent("onProcessEnd",a.node),b.components.template.redraw()}}),b},b.duplicate=function(a,c){return a&&c&&(a=cm.isNode(a)?a:cm.strToHTML(a),b.components.dashboard.appendBlock(a,{block:c,zone:c.zone,index:c.getIndex()+1,onEnd:function(){b.triggerEvent("duplicate",a),b.triggerEvent("onProcessEnd",a),b.components.template.redraw()}})),b},b.copy=function(a,c){return a&&c&&(a=cm.isNode(a)?a:cm.strToHTML(a),b.triggerEvent("copy",a),b.triggerEvent("onProcessEnd",a),b.components.template.redraw()),b},b.update=function(a,c){return a&&c&&(a=cm.isNode(a)?a:cm.strToHTML(a),cm.clearNode(c.getInnerNode()),cm.appendChild(a,c.getInnerNode()),b.triggerEvent("update",a),b.triggerEvent("onProcessEnd",a),b.components.template.redraw()),b},b.addZone=function(a){return b.zones.push(a),b.components.dashboard.addZone(a),b.isRendered&&(b.components.sidebar&&b.components.sidebar.isExpanded?a.enableEditing():a.disableEditing()),b},b.removeZone=function(a){return cm.arrayRemove(b.zones,a),b},b.addBlock=function(a){if(a.isDummy)b.dummyBlocks.push(a);else{var c=a.getMenuNodes();cm.addEvent(c.edit,"click",function(){b.replaceRequest(a)}),cm.addEvent(c.duplicate,"click",function(){b.duplicateRequest(a)}),cm.addEvent(c["delete"],"click",function(){b.deleteRequest(a)}),cm.addEvent(c.copy,"click",function(){b.copyRequest(a)}),b.blocks.push(a)}return b.components.dashboard.addBlock(a),b.isRendered&&(b.components.sidebar&&b.components.sidebar.isExpanded?a.enableEditing():a.disableEditing()),b},b.removeBlock=function(a){return a.isDummy?cm.arrayRemove(b.dummyBlocks,a):cm.arrayRemove(b.blocks,a),b},c()}),cm.define("App.FileInput",{extend:"Com.FileInput",params:{fileManager:!0,fileManagerConstructor:"App.elFinderFileManagerContainer",fileUploader:!0,fileUploaderConstructor:"App.FileUploaderContainer"}},function(a){var b=this;Com.FileInput.apply(b,arguments)}),cm.define("App.FileUploader",{extend:"Com.AbstractController",events:["onSelect","onComplete","onGet"],params:{max:0,completeOnSelect:!0,local:!0,localConstructor:"App.FileUploaderLocal",localParams:{embedStructure:"append",showStats:!0,fileList:!1},fileManagerLazy:!0,fileManager:!0,fileManagerConstructor:"App.elFinderFileManager",fileManagerParams:{embedStructure:"append",showStats:!0,fullSize:!0},stock:!1,stockConstructor:"App.ShutterstockManager",stockParams:{embedStructure:"append",showStats:!0,fullSize:!0},showStats:!1,statsConstructor:"Com.FileStats",statsParams:{embedStructure:"append",toggleBox:!1,inline:!0},"Com.Tabset":{embedStructure:"append",toggleOnHashChange:!1,calculateMaxHeight:!0}},strings:{tab_local:"Select From PC",tab_filemanager:"File Manager",tab_stock:"Shutterstock",browse_local_single:"Choose file",browse_local_multiple:"Choose files",or:"or",browse:"Browse"}},function(a){var b=this;b.nodes={},b.components={},b.items=[],b.activeTab=null,Com.AbstractController.apply(b,arguments)}),cm.getConstructor("App.FileUploader",function(a,b,c,d){c.construct=function(){var a=this;a.completeHandler=a.complete.bind(a),d.prototype.construct.apply(a,arguments)},c.get=function(){var a,b=this;if(b.activeTab)switch(b.activeTab.id){case"local":a=b.components.local.get(),b.afterGet(a);break;case"fileManager":b.components.fileManager.get()}return b},c.complete=function(){var a,b=this;if(b.activeTab)switch(b.activeTab.id){case"local":a=b.components.local.get(),b.afterComplete(a);break;case"fileManager":b.components.fileManager.complete();break;case"stock":b.components.stock.complete()}return b},c.validateParams=function(){var a=this;a.params.localParams.max=a.params.max,a.params.fileManagerParams.max=a.params.max,a.params.fileManagerParams.lazy=a.params.fileManagerLazy,a.params.stock.max=a.params.max,a.params.stock.lazy=a.params.fileManagerLazy},c.renderView=function(){var a=this;return a.triggerEvent("onRenderViewStart"),a.nodes.container=cm.node("div",{"class":"app__file-uploader"},a.nodes.inner=cm.node("div",{"class":"inner"},a.nodes.content=cm.node("div",{"class":"app__file-uploader__content"}))),a.params.local&&(a.nodes.local=a.renderLocal()),a.params.fileManager&&(a.nodes.fileManager=a.renderFileManager()),a.params.stock&&(a.nodes.stock=a.renderStock()),a.triggerEvent("onRenderViewProcess"),a.triggerEvent("onRenderViewEnd"),a},c.renderViewModel=function(){var a=this;return a.params.local&&cm.getConstructor(a.params.localConstructor,function(b){a.components.local=new b(cm.merge(a.params.localParams,{node:a.nodes.local.holder})),a.params.completeOnSelect&&a.components.local.addEvent("onSelect",function(b,c){a.afterComplete(c)})}),a.params.fileManager&&cm.getConstructor(a.params.fileManagerConstructor,function(b){a.components.fileManager=new b(cm.merge(a.params.fileManagerParams,{node:a.nodes.fileManager.holder})),a.components.fileManager.addEvent("onGet",function(b,c){a.afterGet(c)}),a.components.fileManager.addEvent("onComplete",function(b,c){a.afterComplete(c)})}),a.params.stock&&cm.getConstructor(a.params.stockConstructor,function(b){a.components.stock=new b(cm.merge(a.params.stockParams,{node:a.nodes.stock.holder})),a.components.stock.addEvent("onGet",function(b,c){a.afterGet(c)}),a.components.stock.addEvent("onComplete",function(b,c){a.afterComplete(c)})}),a.renderTabset(),a.params.showStats&&cm.getConstructor(a.params.statsConstructor,function(b){a.components.stats=new b(cm.merge(a.params.statsParams,{container:a.nodes.content}))}),a},c.renderTabset=function(){var a=this;return cm.getConstructor("Com.Tabset",function(b,c){a.components.tabset=new b(cm.merge(a.params[c],{container:a.nodes.content})),a.components.tabset.addEvent("onTabShow",function(b,c){switch(a.activeTab=c,a.activeTab.id){case"fileManager":a.components.fileManager&&a.components.fileManager.load();break;case"stock":a.components.stock&&a.components.stock.load()}}),a.renderTabs()}),a},c.renderTabs=function(){var a,b=this;b.params.local&&(b.components.tabset.addTab({id:"local",title:b.lang("tab_local"),content:b.nodes.local.li}),cm.isEmpty(a)&&(a="local")),b.params.fileManager&&(b.components.tabset.addTab({id:"fileManager",title:b.lang("tab_filemanager"),content:b.nodes.fileManager.li}),cm.isEmpty(a)&&(a="fileManager")),b.params.stock&&(b.components.tabset.addTab({id:"stock",title:b.lang("tab_stock"),content:b.nodes.stock.li}),cm.isEmpty(a)&&(a="stock")),b.components.tabset.set(a)},c.renderLocal=function(){var a={};return a.li=cm.node("li",a.container=cm.node("div",{"class":"app__file-uploader__local-container"},a.holder=cm.node("div",{"class":"app__file-uploader__holder"}))),a},c.renderFileManager=function(){var a={};return a.li=cm.node("li",a.container=cm.node("div",{"class":"app__file-uploader__file-manager is-fullsize"},a.holder=cm.node("div",{"class":"app__file-uploader__holder"}))),a},c.renderStock=function(){var a={};return a.li=cm.node("li",a.container=cm.node("div",{"class":"app__file-uploader__stock is-fullsize"},a.holder=cm.node("div",{"class":"app__file-uploader__holder"}))),a},c.afterGet=function(a){var b=this;return b.items=a,b.triggerEvent("onGet",b.items),b},c.afterComplete=function(a){var b=this;return b.items=a,b.triggerEvent("onComplete",b.items),b}}),cm.define("App.FileUploaderContainer",{extend:"Com.AbstractContainer",events:["onComplete","onGet"],params:{constructor:"App.FileUploader",action:"",placeholder:!0,placeholderConstructor:"Com.DialogContainer",placeholderParams:{renderButtons:!0,params:{width:"1000"}}},strings:{title_single:"Please select file",title_multiple:"Please select files",close:"Cancel",save:"Select"}},function(a){var b=this;Com.AbstractContainer.apply(b,arguments)}),cm.getConstructor("App.FileUploaderContainer",function(a,b,c,d){c.construct=function(){var a=this;a.isRequest=!1,a.getHandler=a.get.bind(a),a.completeHandler=a.complete.bind(a),a.afterCompleteHandler=a.afterComplete.bind(a),d.prototype.construct.apply(a,arguments)},c.validateParams=function(){var a=this;d.prototype.validateParams.apply(a,arguments),a.isRequest=!cm.isEmpty(a.params.action)&&window.Request&&window.Request.send,a.setLangs({title:!a.params.params.max||a.params.params.max>1?a.lang("title_multiple"):a.lang("title_single")})},c.get=function(a){a&&cm.preventDefault(a);var b=this;return b.components.controller&&b.components.controller.get&&b.components.controller.get(),b},c.complete=function(a){a&&cm.preventDefault(a);var b=this;return b.components.controller&&b.components.controller.complete&&b.components.controller.complete(),b},c.renderControllerEvents=function(){var a=this;return d.prototype.renderControllerEvents.apply(a,arguments),a.components.controller.addEvent("onGet",function(b,c){a.afterGet(c)}),a.components.controller.addEvent("onComplete",function(b,c){a.afterComplete(c)}),a.isRequest&&a.components.controller.addEvent("onComplete",function(b,c){Request.send(a.params.action,c,"post",{node:a.params.node,controller:a})}),a},c.renderPlaceholderButtons=function(){var a=this;return a.components.placeholder.addButton({name:"close",label:a.lang("close"),style:"button-transparent",callback:a.closeHandler}),a.components.placeholder.addButton({name:"save",label:a.lang("save"),style:"button-primary",callback:a.completeHandler}),a},c.afterGet=function(a){var b=this;return b.triggerEvent("onGet",a),b},c.afterComplete=function(a){var b=this;return b.triggerEvent("onComplete",a),b.close(),b}}),cm.define("App.FileUploaderLocal",{extend:"Com.AbstractController",events:["onSelect"],params:{max:0,fileList:!0,fileListConstructor:"App.MultipleFileInput",fileListParams:{local:!1,dropzone:!1,fileManager:!1,fileUploader:!1,embedStructure:"append"},dropzone:!0,dropzoneConstructor:"Com.FileDropzone",dropzoneParams:{embedStructure:"append",rollover:!1,height:350},showOverlay:!0,overlayDelay:"cm._config.loadDelay","Com.Overlay":{autoOpen:!1,removeOnClose:!0,showSpinner:!0,showContent:!1,position:"absolute",theme:"light"},showStats:!0,statsConstructor:"Com.FileStats",statsParams:{embedStructure:"append",toggleBox:!1,inline:!0},"Com.FileReader":{}},strings:{browse_local_single:"Choose file",browse_local_multiple:"Choose files",or:"or",browse:"Browse"}},function(a){var b=this;Com.AbstractController.apply(b,arguments)}),cm.getConstructor("App.FileUploaderLocal",function(a,b,c,d){c.construct=function(){var a=this;a.nodes={},a.components={},a.items=[],a.isMultiple=!1,a.isProccesing=!1,a.overlayDelay=null,a.browseActionHandler=a.browseAction.bind(a),a.processFilesHandler=a.processFiles.bind(a),d.prototype.construct.apply(a,arguments)},c.get=function(){var a=this;return a.items},c.validateParams=function(){var a=this;return a.isMultiple=!a.params.max||a.params.max>1,a.setLangs({browse_local:!a.params.max||a.params.max>1?a.lang("browse_local_multiple"):a.lang("browse_local_single")}),a.params.fileListParams.max=a.params.max,a.params.dropzoneParams.max=a.params.max,a},c.renderView=function(){var a=this;a.triggerEvent("onRenderViewStart"),a.nodes.container=cm.node("div",{"class":"app__file-uploader__local"},a.nodes.holder=cm.node("div",{"class":"app__file-uploader__holder"},cm.node("div",{"class":"pt__buttons pull-center"},cm.node("div",{"class":"inner"},cm.node("div",{"class":"browse-button"},cm.node("button",{type:"button","class":"button button-primary button--xlarge"},a.lang("browse_local")),cm.node("div",{"class":"inner"},a.nodes.input=cm.node("input",{type:"file"}))))))),a.params.dropzone&&(a.nodes.dropzoneHolder=cm.node("div",{"class":"app__file-uploader__holder"},cm.node("div",{"class":"app__file-uploader__title"},a.lang("or")),a.nodes.dropzone=cm.node("div",{"class":"app__file-uploader__dropzone"})),cm.appendChild(a.nodes.dropzoneHolder,a.nodes.container)),a.params.fileList&&(a.nodes.files=cm.node("div",{"class":"app__file-uploader__files is-hidden"}),cm.appendChild(a.nodes.files,a.nodes.container)),a.isMultiple&&a.nodes.input.setAttribute("multiple","multiple"),a.triggerEvent("onRenderViewProcess"),cm.addEvent(a.nodes.input,"change",a.browseActionHandler),a.triggerEvent("onRenderViewEnd")},c.renderViewModel=function(){var a=this;cm.getConstructor("Com.Overlay",function(b,c){a.components.overlay=new b(cm.merge(a.params[c],{container:a.nodes.container}))}),a.params.showStats&&cm.getConstructor(a.params.statsConstructor,function(b){a.components.stats=new b(cm.merge(a.params.statsParams,{container:a.nodes.container}))}),cm.getConstructor("Com.FileReader",function(b,c){a.components.reader=new b(a.params[c])}),a.params.dropzone&&cm.getConstructor(a.params.dropzoneConstructor,function(b){a.components.dropzone=new b(cm.merge(a.params.dropzoneParams,{container:a.nodes.dropzone})),a.components.dropzone.addEvent("onSelect",function(b,c){a.processFiles(c)})}),a.params.fileList&&cm.getConstructor(a.params.fileListConstructor,function(b){a.components.fileList=new b(cm.merge(a.params.fileListParams,{node:a.nodes.files})),a.components.fileList.addEvent("onItemAddEnd",function(){a.components.fileList.get().length&&cm.removeClass(a.nodes.files,"is-hidden")}),a.components.fileList.addEvent("onItemRemoveEnd",function(){a.components.fileList.get().length||cm.addClass(a.nodes.files,"is-hidden")})})},c.browseAction=function(a){var b=this,c=b.params.max?Math.min(a.target.files.length,b.params.max-b.items.length):a.target.files.length,d=[];return cm.preventDefault(a),cm.forEach(c,function(b){d.push(a.target.files[b])}),b.processFiles(d),b},c.processFiles=function(a){var b=this,c=a.length;return b.params.showOverlay&&(b.overlayDelay=setTimeout(function(){b.components.overlay&&!b.components.overlay.isOpen&&b.components.overlay.open()},b.params.overlayDelay)),cm.forEach(a,function(a,d){b.components.reader.read(a,function(a){b.items[d]=a,cm.getCount(b.items)===c&&b.finalizeFiles()})}),b},c.finalizeFiles=function(){var a=this;return a.components.fileList&&a.renderFileList(),a.params.showOverlay&&(a.overlayDelay&&clearTimeout(a.overlayDelay),a.components.overlay&&a.components.overlay.isOpen&&a.components.overlay.close()),a.triggerEvent("onSelect",a.items),a},c.renderFileList=function(){var a=this;return cm.forEach(a.items,function(b){a.components.fileList.addItem({value:b},!0)}),a}}),cm.define("App.Flow",{extend:"Com.AbstractController",params:{renderStructure:!0,embedStructureOnRender:!0,controllerEvents:!0,scenario:App.FlowScenario,directorConstructor:"App.FlowDirector",directorParams:{autoStart:!1}},strings:{description:"Choose a course:"}},function(a){var b=this;Com.AbstractController.apply(b,arguments)}),cm.getConstructor("App.Flow",function(a,b,c){var d=c._inherit;c.onConstructStart=function(){var a=this;a.items=[],a.renderListItemHandler=a.renderListItem.bind(a)},c.onValidateParams=function(){var a=this;cm.isString(a.params.scenario)&&(a.params.scenario=cm.parseJSON(a.params.scenario)),a.params.scenario=cm.arraySort(a.params.scenario,"order","desc")},c.onDestructProcess=function(){var a=this;a.components.director&&!a.components.director.isRunning&&a.components.director.destruct()},c.renderView=function(){var a=this;a.nodes.container=cm.node("div",{"class":"app__flow__list"},cm.node("h4",a.lang("description")),cm.node("div",{"class":"pt__listing-items"},a.nodes.items=cm.node("ul"))),cm.forEach(a.params.scenario,a.renderListItemHandler)},c.renderListItem=function(a){var b=this,c={};a.nodes=c,c.container=cm.node("li",c.link=cm.node("a",a.title)),cm.addEvent(c.link,"click",function(d){cm.preventDefault(d),b.components.director.setScenario(a.data).setTarget(c.link).start()}),cm.appendChild(c.container,b.nodes.items),b.items.push(a)},c.renderViewModel=function(){var a=this;d.prototype.renderViewModel.apply(a,arguments),cm.getConstructor(a.params.directorConstructor,function(b){a.components.director=new b(a.params.directorParams)})}}),cm.define("App.FlowContainer",{extend:"Com.AbstractContainer",params:{constructor:"App.Flow",placeholder:!0,placeholderConstructor:"Com.DialogContainer",placeholderParams:{params:{width:500,className:"app__flow__dialog",documentScroll:!0}}},strings:{title:"QuickSilk Flow"}},function(a){var b=this;Com.AbstractContainer.apply(b,arguments)}),cm.getConstructor("App.FlowContainer",function(a,b,c){c._inherit}),cm.define("App.FlowDirector",{extend:"Com.AbstractController",params:{renderStructure:!1,embedStructureOnRender:!1,controllerEvents:!0,destructOnStop:!0,container:"document.body",name:"app-helptour",sidebarName:"app-sidebar",topMenuName:"app-topmenu",templateName:"app-template",notificationName:"app-notification",duration:500,adaptiveFrom:768,popupIndent:24,overlayConstructor:"Com.Overlay",overlayParams:{container:"document.body",autoOpen:!1,removeOnClose:!0,showSpinner:!1,showContent:!1,name:"",theme:"transparent",position:"absolute"}},strings:{next:"Next",back:"Back",close:"Close",cancel:"Cancel",finish:"Finish"}},function(a){var b=this;Com.AbstractController.apply(b,arguments)}),cm.getConstructor("App.FlowDirector",function(a,b,c){var d=c._inherit;c.onConstructStart=function(){var a=this;a.isRunning=!1,a.scenario=App.HelpTourScenario,a.dimensions={sidebarCollapsed:0,sidebarExpanded:0,topMenu:0,popupHeight:0,popupSelfHeight:0,popupContentHeight:0},a.startOptions={sidebarExpanded:!1,sidebarTab:"modules",notificationShow:!1},a.startX=0,a.startY=0,a.components={overlays:{}},a.currentStage=-1,a.currentScene=null,a.currentSceneNode=null,a.previousStage=null,a.previousScene=null,a.previousSceneNode=null,a.sceneIntervals={},a.startHandler=a.start.bind(a),a.stopHandler=a.stop.bind(a),a.nextHandler=a.next.bind(a),a.prevHandler=a.prev.bind(a),a.prepareHandler=a.prepare.bind(a),a.keyDownEventHandler=a.keyDownEvent.bind(a)},c.onValidateParamsProcess=function(){var a=this;a.params.overlayParams.container=a.params.container,a.params.overlayParams.name=[a.params.name,"overlay"].join("-")},c.onGetLESSVariablesProcess=function(){var a=this;a.params.duration=cm.getTransitionDurationFromLESS("AppHelpTour-Duration",a.params.duration),a.params.adaptiveFrom=cm.getLESSVariable("AppHelpTour-AdaptiveFrom",a.params.adaptiveFrom,!0)},c.onSetEvents=function(){var a=this;cm.addEvent(window,"keydown",a.keyDownEventHandler)},c.onUnsetEvents=function(){var a=this;cm.removeEvent(window,"keydown",a.keyDownEventHandler)},c.onRedraw=function(){var a=this;a.isRunning&&a.setPopupPosition()},c.renderViewModel=function(){var a=this;return d.prototype.renderViewModel.apply(a,arguments),cm.getConstructor(a.params.overlayConstructor,function(b){a.components.overlays.main=new b(cm.merge(a.params.overlayParams,{position:"fixed"})),a.components.overlays.sidebar=new b(a.params.overlayParams),a.components.overlays.topMenu=new b(a.params.overlayParams),a.components.overlays.template=new b(cm.merge(a.params.overlayParams,{position:"fixed"}))}),a},c.prepare=function(){var a=this;return cm.find("App.Sidebar",a.params.sidebarName,null,function(b){a.components.sidebar=b,a.components.overlays.sidebar.embed(a.components.sidebar.getNodes("inner"))}),cm.find("App.TopMenu",a.params.topMenuName,null,function(b){a.components.topMenu=b,a.components.overlays.topMenu.embed(a.components.topMenu.getNodes("inner"))}),cm.find("App.Template",a.params.templateName,null,function(b){a.components.template=b,a.components.overlays.template.embed(a.components.template.getNodes("container"))}),cm.find("App.Notification",a.params.notificationName,null,function(b){a.components.notification=b}),a.components.sidebar&&a.components.topMenu&&a.components.template?!0:(cm.errorLog({type:"error",name:a._name.full,message:["Required components does not constructed."].join(" ")}),!1)},c.start=function(){var a=this,b=a.prepare();!a.isRunning&&b&&(a.isRunning=!0,cm.find("Com.AbstractContainer",null,null,function(a){a.close()},{childs:!0}),a.renderPopup(),a.startOptions.sidebarExpanded=a.components.sidebar.isExpanded,a.components.sidebar.isExpanded&&a.components.sidebar.collapse(),a.startOptions.sidebarTab=a.components.sidebar.getTab(),a.components.sidebar.unsetTab(),a.components.notification&&(a.startOptions.notificationShow=a.components.notification.isShow,a.components.notification.isShow&&a.components.notification.hide()),a.components.topMenu.collapse(),cm.forEach(a.components.overlays,function(a){a.open()}),a.setStage(0))},c.stop=function(){var a=this;return a.isRunning&&(a.isRunning=!1,a.removePopup(),a.startOptions.sidebarExpanded&&!a.components.sidebar.isExpanded?a.components.sidebar.expand():!a.startOptions.sidebarExpanded&&a.components.sidebar.isExpanded&&a.components.sidebar.collapse(),a.components.sidebar.setTab(a.startOptions.sidebarTab),a.components.notification&&(a.startOptions.notificationShow&&!a.components.notification.isShow?a.components.notification.show():!a.startOptions.notificationShow&&a.components.notification.isShow&&a.components.notification.hide()),cm.forEach(a.components.overlays,function(a){a.close()}),a.unsetStage(),a.params.destructOnStop&&a.destruct()),a},c.next=function(){var a=this;return a.currentStage>=0&&(a.scenario[a.currentStage+1]?a.setStage(a.currentStage+1):a.stop()),a},c.prev=function(){var a=this;return a.currentStage>=0&&(a.scenario[a.currentStage-1]?a.setStage(a.currentStage-1):a.stop()),a},c.setScenario=function(a){var b=this;return b.scenario=a,b},c.setStage=function(a){var b=this;b.scenario[a]&&(b.unsetStage(),b.currentStage=a,b.currentScene=b.scenario[a],cm.forEach(b.currentScene.overlays,function(a,c){b.components.overlays[c].setTheme(a)}),b.currentScene.sidebar?b.components.sidebar.setTab(b.currentScene.sidebar).expand():b.components.sidebar.unsetTab().collapse(),b.components.topMenu.setActiveItem(b.currentScene.topMenu),b.currentScene.arrow&&cm.addClass(b.nodes.popupArrows[b.currentScene.arrow],"is-show"),0===b.currentStage?(b.nodes.back.innerHTML=b.lang("close"),b.nodes.next.innerHTML=b.lang("next")):b.currentStage===b.scenario.length-1?(b.nodes.back.innerHTML=b.lang("back"),b.nodes.next.innerHTML=b.lang("finish")):(b.nodes.back.innerHTML=b.lang("back"),b.nodes.next.innerHTML=b.lang("next")),b.previousStage||cm.addClass(b.nodes.popupContent,"is-immediately",!0),b.currentSceneNode=cm.node("div",{"class":"popup__content__item",innerHTML:b.currentScene.content}),cm.appendChild(b.currentSceneNode,b.nodes.popupContent),cm.addClass(b.currentSceneNode,"is-show",!0),b.setPopupPosition(),b.currentScene.construct&&b.currentScene.construct.call(b))},c.unsetStage=function(){var a=this;a.currentStage>=0&&(a.previousStage=a.currentStage,a.previousScene=a.currentScene,a.previousSceneNode=a.currentSceneNode,a.components.topMenu.unsetActiveItem(a.previousScene.topMenu),a.previousScene.arrow&&cm.removeClass(a.nodes.popupArrows[a.previousScene.arrow],"is-show"),cm.forEach(a.sceneIntervals,function(a){clearInterval(a)}),function(b){setTimeout(function(){cm.remove(b)},a.params.duration)}(a.previousSceneNode),setTimeout(function(){cm.removeClass(a.nodes.popupContent,"is-immediately",!0)},5),a.previousScene.destruct&&a.previousScene.destruct.call(a)),a.currentStage=-1},c.renderPopup=function(){var a=this;a.nodes.popupArrows={},a.nodes.popup=cm.node("div",{"class":"app__helptour__popup"},a.nodes.popupArrows.top=cm.node("div",{"class":"popup__arrow popup__arrow--top"}),a.nodes.popupArrows.right=cm.node("div",{"class":"popup__arrow popup__arrow--right"}),a.nodes.popupArrows.bottom=cm.node("div",{"class":"popup__arrow popup__arrow--bottom"}),a.nodes.popupArrows.left=cm.node("div",{"class":"popup__arrow popup__arrow--left"}),a.nodes.popupClose=cm.node("div",{"class":"popup__close",title:a.lang("close")}),a.nodes.popupContent=cm.node("div",{"class":"popup__content"
}),a.nodes.popupButtons=cm.node("div",{"class":"popup__buttons"},cm.node("div",{"class":"btn-wrap pull-center"},a.nodes.back=cm.node("button",a.lang("back")),a.nodes.next=cm.node("button",a.lang("next"))))),a.setPopupStartPosition(),cm.appendChild(a.nodes.popup,a.params.container),cm.addClass(a.nodes.popup,"is-show",!0),cm.addEvent(a.nodes.popupClose,"click",a.stopHandler),cm.addEvent(a.nodes.next,"click",a.nextHandler),cm.addEvent(a.nodes.back,"click",a.prevHandler)},c.removePopup=function(){var a=this;a.setPopupStartPosition(),cm.removeClass(a.nodes.popup,"is-show"),setTimeout(function(){cm.remove(a.nodes.popup)},a.params.duration)},c.setPopupStartPosition=function(){var a=this;a.startX||(a.startX=[Math.round(cm.getX(a.params.node)+a.params.node.offsetWidth/2),"px"].join("")),a.startY||(a.startY=[Math.round(cm.getY(a.params.node)+a.params.node.offsetHeight/2),"px"].join("")),cm.setCSSTranslate(a.nodes.popup,a.startX,a.startY,0,"scale(0)")},c.setPopupPosition=function(){var a,b,c,d,e,f,g=this;if(g.currentScene){if(b=cm.getPageSize(),b.winWidth>g.params.adaptiveFrom)switch(g.getDimensions(),a=g.currentScene.position.split(":"),e=g.dimensions.popupContentHeight,a[0]){case"window":switch(a[1]){case"top":d=Math.round((b.winWidth-g.nodes.popup.offsetWidth)/2),c=g.params.popupIndent;break;case"bottom":d=Math.round((b.winWidth-g.nodes.popup.offsetWidth)/2),c=b.winHeight-g.dimensions.popupHeight-g.params.popupIndent;break;case"center":default:d=Math.round((b.winWidth-g.nodes.popup.offsetWidth)/2),c=Math.round((b.winHeight-g.dimensions.popupHeight)/2)}break;case"topMenu":switch(a[1]){case"center":default:d=Math.round((b.winWidth-g.nodes.popup.offsetWidth)/2),c=g.dimensions.topMenu+g.params.popupIndent}break;case"topMenuItem":f=g.components.topMenu.getItem(a[1]),d=f?a[2]&&"dropdown"===a[2]&&f.dropdown?a[3]&&"left"===a[3]?cm.getX(f.dropdown)-g.nodes.popup.offsetWidth-g.params.popupIndent:cm.getX(f.dropdown)+f.dropdown.offsetWidth+g.params.popupIndent:f.container?a[3]&&"left"===a[3]?cm.getX(f.container)+f.container.offsetWidth-g.nodes.popup.offsetWidth:cm.getX(f.container):Math.round((b.winWidth-g.nodes.popup.offsetWidth)/2):Math.round((b.winWidth-g.nodes.popup.offsetWidth)/2),c=g.dimensions.topMenu+g.params.popupIndent;break;case"template":switch(a[1]){case"top":d=g.components.sidebar.isExpanded?g.dimensions.sidebarExpanded:g.dimensions.sidebarCollapsed,d=Math.round((b.winWidth+d-g.nodes.popup.offsetWidth)/2),c=g.dimensions.topMenu+g.params.popupIndent;break;case"bottom":d=g.components.sidebar.isExpanded?g.dimensions.sidebarExpanded:g.dimensions.sidebarCollapsed,d=Math.round((b.winWidth+d-g.nodes.popup.offsetWidth)/2),c=b.winHeight-g.dimensions.popupHeight-g.params.popupIndent;break;case"left":d=(g.components.sidebar.isExpanded?g.dimensions.sidebarExpanded:g.dimensions.sidebarCollapsed)+g.params.popupIndent,c=Math.round((b.winHeight-g.dimensions.popupHeight)/2);break;case"left-top":d=(g.components.sidebar.isExpanded?g.dimensions.sidebarExpanded:g.dimensions.sidebarCollapsed)+g.params.popupIndent,c=g.dimensions.topMenu+g.params.popupIndent;break;case"center":default:d=g.components.sidebar.isExpanded?g.dimensions.sidebarExpanded:g.dimensions.sidebarCollapsed,d=Math.round((b.winWidth+d-g.nodes.popup.offsetWidth)/2),c=Math.round((b.winHeight+g.dimensions.topMenu-g.dimensions.popupHeight)/2)}break;default:d=Math.round((b.winWidth-g.nodes.popup.offsetWidth)/2),c=Math.round((b.winHeight-g.dimensions.popupHeight)/2)}else d=0,c=0,e="auto";g.nodes.popupContent.style.height="auto"===e?e:[e,"px"].join(""),cm.setCSSTranslate(g.nodes.popup,[d,"px"].join(""),[c,"px"].join(""),0,"scale(1)")}},c.getDimensions=function(){var a=this;a.dimensions.sidebarCollapsed=cm.getLESSVariable("AppSidebar-WidthCollapsed",0,!0),a.dimensions.sidebarExpanded=cm.getLESSVariable("AppSidebar-WidthExpanded",0,!0),a.dimensions.topMenu=cm.getLESSVariable("AppTopMenu-Height",0,!0),a.dimensions.popupSelfHeight||(a.dimensions.popupSelfHeight=a.nodes.popup.offsetHeight),a.currentSceneNode&&(a.dimensions.popupContentHeight=a.currentSceneNode.offsetHeight),a.dimensions.popupHeight=a.dimensions.popupSelfHeight+a.dimensions.popupContentHeight},c.keyDownEvent=function(a){var b=this;if(b.isRunning)switch(cm.preventDefault(a),a.keyCode){case 27:b.stop();break;case 37:b.prev();break;case 39:b.next()}},c.setTarget=function(a){var b=this;return cm.isNode(a)&&(b.params.node=a),b}}),cm.define("App.FontInput",{extend:"Com.AbstractInput",params:{renderStructure:!0,embedStructureOnRender:!0,embedStructure:"replace",controllerEvents:!0,setHiddenInput:!0,setContentInput:!0,className:"app__file-input",styles:{"font-family":["Arial, Helvetica, sans-serif","Arial Black, Gadget, sans-serif","Courier New, Courier, monospace","Georgia, serif","Impact, Charcoal, sans-serif","Lucida Console, Monaco, monospace","Lucida Sans Unicode, Lucida Grande, sans-serif","Palatino Linotype, Book Antiqua, Palatino, serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],"line-height":[8,10,12,16,20,24,28,32,36,40,48,56,64,72,80,88,96,108,120],"font-size":[8,9,10,11,12,13,14,18,20,22,24,28,32,36,42,48,54,60,72,96],"font-weight":[100,200,300,400,500,600,700,800,900],"font-style":["normal","italic"],"text-decoration":["none","underline"]},styleBinds:{"font-weight":{normal:400,bold:700}},controls:{"font-family":!0,"line-height":!0,"font-size":!0,"font-weight":!0,"font-style":!0,"text-decoration":!0,color:!0,background:!0},showResetButtons:!0,overrideControls:!0,previewTag:"div","Com.Tooltip":{targetEvent:"click",hideOnReClick:!0,top:"targetHeight + 6",left:"-6",className:"app__stylizer-tooltip"},"Com.Select":{renderInBody:!1},"Com.ColorPicker":{renderInBody:!1,showLabel:!1,showClearButton:!1}},strings:{100:"Thin",200:"Extra Light",300:"Light",400:"Regular",500:"Medium",600:"Semi Bold",700:"Bold",800:"Extra Bold",900:"Black"}},function(a){var b=this;Com.AbstractInput.apply(b,arguments)}),cm.getConstructor("App.FontInput",function(a,b,c,d){c.onConstructStart=function(){var a=this;a.previousRawValue=null,a.rawValue=null},c.onValidateParamsEnd=function(){var a=this;cm.isString(a.params.value)&&(a.params.value=cm.parseJSON(a.params.value)),cm.isString(a.params.defaultValue)&&(a.params.defaultValue=cm.parseJSON(a.params.defaultValue)),a.validateItemConfig(a.params.value),a.validateItemConfig(a.params.defaultValue),a.extendGlobalConfig(a.params.value),a.extendGlobalConfig(a.params.defaultValue),a.sortGlobalConfig(),a.params.overrideControls&&cm.forEach(a.params.controls,function(b,c){a.params.controls[c]=!(!a.params.defaultValue[c]&&!a.params.value[c])})},c.validateItemConfig=function(a){var b=this;return a["line-height"]&&"normal"!==a["line-height"]&&(a["line-height"]=parseInt(a["line-height"])),a["font-size"]&&(a["font-size"]=parseInt(a["font-size"])),a["font-weight"]&&(b.params.styleBinds["font-weight"][a["font-weight"]]&&(a["font-weight"]=b.params.styleBinds["font-weight"][a["font-weight"]]),a["font-weight"]=parseInt(a["font-weight"]),a["font-weight"]=cm.inArray(b.params.styles["font-weight"],a["font-weight"])?a["font-weight"]:400),a["font-style"]&&(a["font-style"]=cm.inArray(b.params.styles["font-style"],a["font-style"])?a["font-style"]:"normal"),a["text-decoration"]&&(a["text-decoration"]=cm.inArray(b.params.styles["text-decoration"],a["text-decoration"])?a["text-decoration"]:"none"),a},c.extendGlobalConfig=function(a){var b=this;return a["font-size"]&&!cm.inArray(b.params.styles["font-size"],a["font-size"])&&b.params.styles["font-size"].push(a["font-size"]),a["line-height"]&&!cm.inArray(b.params.styles["line-height"],a["line-height"])&&b.params.styles["line-height"].push(a["line-height"]),a["font-family"]&&!cm.inArray(b.params.styles["font-family"],a["font-family"])&&b.params.styles["font-family"].push(a["font-family"]),a},c.sortGlobalConfig=function(){var a=this;return a.params.styles["font-size"].sort(function(a,b){return a-b}),a.params.styles["line-height"].sort(function(a,b){return"normal"===a?-1:"normal"===b?1:a-b}),a.params.styles["font-family"].sort(function(a,b){var c=a.toLowerCase().replace(/["']/g,""),d=b.toLowerCase().replace(/["']/g,"");return d>c?-1:c>d?1:0}),a},c.renderContent=function(){var a=this,b={};return a.nodes.content=b,b.container=cm.node("div",{"class":"app__stylizer__item"},b.preview=cm.node(a.params.previewTag,{"class":"item-preview",innerHTML:a.params.placeholder})),cm.addClass(b.preview,a.params.previewClassName),a.renderTooltipView(),b.container},c.renderViewModel=function(){var a=this;return d.prototype.renderViewModel.apply(a,arguments),a.renderTooltipControls(),cm.getConstructor("Com.Tooltip",function(b,c){a.components.tooltip=new b(cm.merge(a.params[c],{content:a.nodes.tooltip.container,target:a.nodes.content.container,events:{onShowStart:function(){cm.addClass(a.nodes.content.container,"active")},onHideStart:function(){cm.removeClass(a.nodes.content.container,"active")}}}))}),a},c.renderTooltipView=function(){var a=this,b={};return b.container=cm.node("div",{"class":"pt__toolbar"},b.inner=cm.node("div",{"class":"inner"},b.group1=cm.node("ul",{"class":"group"}),b.group2=cm.node("ul",{"class":"group"}),b.group3=cm.node("ul",{"class":"group"}),b.group4=cm.node("ul",{"class":"group"}))),a.nodes.tooltip=b,b.container},c.renderTooltipControls=function(){var a=this;a.params.controls["font-family"]&&a.renderFontFamilyControl(),a.params.controls["font-weight"]&&a.renderFontWeightControl(),a.params.controls["font-style"]&&a.renderFontStyleControl(),a.params.controls["text-decoration"]&&a.renderTextDecorationControl(),a.params.controls["font-size"]&&a.renderFontSizeControl(),a.params.controls["line-height"]&&a.renderLineHeightControl(),a.params.controls.color&&a.renderColorControl(),a.params.controls.background&&a.renderBackgroundControl(),a.params.showResetButtons?a.renderResetControl():cm.remove(a.nodes.tooltip.group4)},c.renderFontFamilyControl=function(){var a=this;return a.nodes.tooltip.group2.appendChild(cm.node("li",{"class":"is-select medium"},a.nodes.tooltip["font-family"]=cm.node("select",{title:a.lang("Font")}))),cm.forEach(a.params.styles["font-family"],function(b){a.nodes.tooltip["font-family"].appendChild(cm.node("option",{value:b,style:{"font-family":b}},b.replace(/["']/g,"").split(",")[0]))}),cm.getConstructor("Com.Select",function(b,c){a.components["font-family"]=new b(cm.merge(a.params[c],{node:a.nodes.tooltip["font-family"],events:{onChange:function(b,c){a.set(cm.merge(a.value,{"font-family":c}),!0)}}}))}),a},c.renderFontWeightControl=function(){var a=this;return a.nodes.tooltip.group1.appendChild(a.nodes.tooltip["font-weight-button"]=cm.node("li",{"class":"button button-secondary is-icon"},cm.node("span",{"class":"icon toolbar bold"}))),cm.addEvent(a.nodes.tooltip["font-weight-button"],"click",function(){a.set(cm.merge(a.value,{"font-weight":a.value["font-weight"]>400?400:700}),!0)}),a.nodes.tooltip.group2.appendChild(cm.node("li",{"class":"is-select medium"},a.nodes.tooltip["font-weight"]=cm.node("select",{title:a.lang("Weight")}))),cm.forEach(a.params.styles["font-weight"],function(b){a.nodes.tooltip["font-weight"].appendChild(cm.node("option",{value:b},a.lang(b)))}),cm.getConstructor("Com.Select",function(b,c){a.components["font-weight"]=new b(cm.merge(a.params[c],{node:a.nodes.tooltip["font-weight"],events:{onChange:function(b,c){a.set(cm.merge(a.value,{"font-weight":c}),!0)}}}))}),a},c.renderFontStyleControl=function(){var a=this;return a.nodes.tooltip.group1.appendChild(a.nodes.tooltip["font-style-button"]=cm.node("li",{"class":"button button-secondary is-icon"},cm.node("span",{"class":"icon toolbar italic"}))),cm.addEvent(a.nodes.tooltip["font-style-button"],"click",function(){a.set(cm.merge(a.value,{"font-style":"italic"===a.value["font-style"]?"normal":"italic"}),!0)}),a},c.renderTextDecorationControl=function(){var a=this;a.nodes.tooltip.group1.appendChild(a.nodes.tooltip["text-decoration-button"]=cm.node("li",{"class":"button button-secondary is-icon"},cm.node("span",{"class":"icon toolbar underline"}))),cm.addEvent(a.nodes.tooltip["text-decoration-button"],"click",function(){a.set(cm.merge(a.value,{"text-decoration":"underline"===a.value["text-decoration"]?"none":"underline"}),!0)})},c.renderFontSizeControl=function(){var a=this;a.nodes.tooltip.group2.appendChild(cm.node("li",{"class":"is-select x-small"},a.nodes.tooltip["font-size"]=cm.node("select",{title:a.lang("Size")}))),cm.forEach(a.params.styles["font-size"],function(b){a.nodes.tooltip["font-size"].appendChild(cm.node("option",{value:b},b))}),cm.getConstructor("Com.Select",function(b,c){a.components["font-size"]=new b(cm.merge(a.params[c],{node:a.nodes.tooltip["font-size"],events:{onChange:function(b,c){a.set(cm.merge(a.value,{"font-size":c}),!0)}}}))})},c.renderLineHeightControl=function(){var a=this;a.nodes.tooltip.group2.appendChild(cm.node("li",{"class":"is-select x-small"},a.nodes.tooltip["line-height"]=cm.node("select",{title:a.lang("Leading")}))),cm.forEach(a.params.styles["line-height"],function(b){a.nodes.tooltip["line-height"].appendChild(cm.node("option",{value:b},"normal"===b?a.lang("auto"):b))}),cm.getConstructor("Com.Select",function(b,c){a.components["line-height"]=new b(cm.merge(a.params[c],{node:a.nodes.tooltip["line-height"],events:{onChange:function(b,c){a.set(cm.merge(a.value,{"line-height":c}),!0)}}}))})},c.renderColorControl=function(){var a=this;a.nodes.tooltip.group3.appendChild(cm.node("li",{"class":"is-select size-field"},a.nodes.tooltip.color=cm.node("input",{type:"text",title:a.lang("Color")}))),cm.getConstructor("Com.ColorPicker",function(b,c){a.components.color=new b(cm.merge(a.params[c],{node:a.nodes.tooltip.color,defaultValue:a.params.defaultValue.color,events:{onChange:function(b,c){a.set(cm.merge(a.value,{color:c}),!0)}}}))})},c.renderBackgroundControl=function(){var a=this;a.nodes.tooltip.group3.appendChild(cm.node("li",{"class":"is-select size-field"},a.nodes.tooltip.background=cm.node("input",{type:"text",title:a.lang("Background")}))),cm.getConstructor("Com.ColorPicker",function(b,c){a.components.background=new b(cm.merge(a.params[c],{node:a.nodes.tooltip.background,defaultValue:a.params.defaultValue.background,events:{onChange:function(b,c){a.set(cm.merge(a.value,{background:c}),!0)}}}))})},c.renderResetControl=function(){var a=this;a.nodes.tooltip.group4.appendChild(cm.node("li",a.nodes.tooltip["reset-button"]=cm.node("div",{"class":"button button-primary"},a.lang("Reset")))),cm.addEvent(a.nodes.tooltip["reset-button"],"click",function(){a.clear(!0)})},c.validateValue=function(a){var b=this;return a=cm.isObject(a)?b.validateItemConfig(a):b.params.defaultValue,a._type="font",a},c.saveValue=function(a){var b=this;return b.previousRawValue=cm.clone(b.rawValue),b.rawValue=cm.clone(a),b.previousValue=cm.clone(b.value),b.value=cm.clone(a),cm.forEach(b.value,function(a,c){switch(c){case"font-size":b.value[c]=cm.isNumber(a)||/^\d+$/.test(a)?a+"px":a;break;case"line-height":b.value[c]=cm.isNumber(a)||/^\d+$/.test(a)?a+"px":a}}),b.params.setHiddenInput&&b.saveHiddenValue(b.value),b.params.setContentInput&&b.setData(b.valueText),b},c.setData=function(){var a=this;cm.forEach(a.rawValue,function(b,c){switch(a.components[c]&&a.components[c].set(b,!1),c){case"font-weight":b>400?cm.addClass(a.nodes.tooltip["font-weight-button"],"active"):cm.removeClass(a.nodes.tooltip["font-weight-button"],"active");break;case"text-decoration":"underline"===b?cm.addClass(a.nodes.tooltip["text-decoration-button"],"active"):cm.removeClass(a.nodes.tooltip["text-decoration-button"],"active");break;case"font-style":"italic"===b?cm.addClass(a.nodes.tooltip["font-style-button"],"active"):cm.removeClass(a.nodes.tooltip["font-style-button"],"active")}a.nodes.content.preview.style[cm.styleStrToKey(c)]=a.value[c]})}}),cm.define("App.FormStyles",{extend:"Com.AbstractController",params:{renderStructure:!1,embedStructureOnRender:!1,controllerEvents:!0}},function(a){var b=this;Com.AbstractController.apply(b,arguments)}),cm.getConstructor("App.FormStyles",function(a,b,c){c._inherit}),cm.define("App.HelpTour",{modules:["Params","Events","Langs","DataConfig","DataNodes","Stack"],events:["onRender"],params:{node:cm.Node("div"),container:"document.body",name:"app-helptour",sidebarName:"app-sidebar",topMenuName:"app-topmenu",templateName:"app-template",notificationName:"app-notification",duration:500,adaptiveFrom:768,autoStart:!1,popupIndent:24,"Com.Overlay":{container:"document.body",autoOpen:!1,removeOnClose:!0,showSpinner:!1,showContent:!1,name:"",theme:"transparent",position:"absolute"}},strings:{next:"Next",back:"Back",close:"Close",cancel:"Cancel",finish:"Finish"}},function(a){var b=this,c={sidebarCollapsed:0,sidebarExpanded:0,topMenu:0,popupHeight:0,popupSelfHeight:0,popupContentHeight:0},d={sidebarExpanded:!1,sidebarTab:"modules",notificationShow:!1};b.nodes={},b.components={overlays:{}},b.currentStage=-1,b.currentScene=null,b.currentSceneNode=null,b.previousStage=null,b.previousScene=null,b.previousSceneNode=null,b.sceneIntervals={};var e=function(){f(),b.setParams(a),b.convertEvents(b.params.events),b.getDataNodes(b.params.node),b.getDataConfig(b.params.node),b.addToStack(b.params.node),g(),h(),b.triggerEvent("onRender"),b.params.autoStart&&j()},f=function(){b.params.duration=cm.getTransitionDurationFromLESS("AppHelpTour-Duration",b.params.duration),b.params.adaptiveFrom=cm.getLESSVariable("AppHelpTour-AdaptiveFrom",b.params.adaptiveFrom,!0)},g=function(){b.params["Com.Overlay"].container=b.params.container,b.params["Com.Overlay"].name=[b.params.name,"overlay"].join("-")},h=function(){cm.getConstructor("Com.Overlay",function(a){b.components.overlays.main=new a(cm.merge(b.params["Com.Overlay"],{position:"fixed"})),b.components.overlays.sidebar=new a(b.params["Com.Overlay"]),b.components.overlays.topMenu=new a(b.params["Com.Overlay"]),b.components.overlays.template=new a(cm.merge(b.params["Com.Overlay"],{position:"fixed"})),cm.addEvent(b.params.node,"click",j)})},i=function(){c.sidebarCollapsed=cm.getLESSVariable("AppSidebar-WidthCollapsed",0,!0),c.sidebarExpanded=cm.getLESSVariable("AppSidebar-WidthExpanded",0,!0),c.topMenu=cm.getLESSVariable("AppTopMenu-Height",0,!0),c.popupSelfHeight||(c.popupSelfHeight=b.nodes.popup.offsetHeight),b.currentSceneNode&&(c.popupContentHeight=b.currentSceneNode.offsetHeight),c.popupHeight=c.popupSelfHeight+c.popupContentHeight},j=function(){cm.find("App.Sidebar",b.params.sidebarName,null,function(a){b.components.sidebar=a,b.components.overlays.sidebar.embed(b.components.sidebar.getNodes("inner"))}),cm.find("App.TopMenu",b.params.topMenuName,null,function(a){b.components.topMenu=a,b.components.overlays.topMenu.embed(b.components.topMenu.getNodes("inner"))}),cm.find("App.Template",b.params.templateName,null,function(a){b.components.template=a,b.components.overlays.template.embed(b.components.template.getNodes("container"))}),cm.find("App.Notification",b.params.notificationName,null,function(a){b.components.notification=a}),b.components.sidebar&&b.components.topMenu&&b.components.template?k():cm.errorLog({type:"error",name:b._name.full,message:["Required components does not constructed."].join(" ")})},k=function(){cm.find("Com.AbstractContainer",null,null,function(a){a.close()},{childs:!0}),o(),d.sidebarExpanded=b.components.sidebar.isExpanded,b.components.sidebar.isExpanded&&b.components.sidebar.collapse(),d.sidebarTab=b.components.sidebar.getTab(),b.components.sidebar.unsetTab(),b.components.notification&&(d.notificationShow=b.components.notification.isShow,b.components.notification.isShow&&b.components.notification.hide()),b.components.topMenu.collapse(),cm.forEach(b.components.overlays,function(a){a.open()}),m(0)},l=function(){p(),d.sidebarExpanded&&!b.components.sidebar.isExpanded?b.components.sidebar.expand():!d.sidebarExpanded&&b.components.sidebar.isExpanded&&b.components.sidebar.collapse(),b.components.sidebar.setTab(d.sidebarTab),b.components.notification&&(d.notificationShow&&!b.components.notification.isShow?b.components.notification.show():!d.notificationShow&&b.components.notification.isShow&&b.components.notification.hide()),cm.forEach(b.components.overlays,function(a){a.close()}),n()},m=function(a){App.HelpTourScenario[a]&&(n(),b.currentStage=a,b.currentScene=App.HelpTourScenario[a],cm.forEach(b.currentScene.overlays,function(a,c){b.components.overlays[c].setTheme(a)}),b.currentScene.sidebar?b.components.sidebar.setTab(b.currentScene.sidebar).expand():b.components.sidebar.unsetTab().collapse(),b.components.topMenu.setActiveItem(b.currentScene.topMenu),b.currentScene.arrow&&cm.addClass(b.nodes.popupArrows[b.currentScene.arrow],"is-show"),0===b.currentStage?(b.nodes.back.innerHTML=b.lang("close"),b.nodes.next.innerHTML=b.lang("next")):b.currentStage===App.HelpTourScenario.length-1?(b.nodes.back.innerHTML=b.lang("back"),b.nodes.next.innerHTML=b.lang("finish")):(b.nodes.back.innerHTML=b.lang("back"),b.nodes.next.innerHTML=b.lang("next")),b.currentSceneNode=cm.Node("div",{"class":"popup__content__item",innerHTML:b.currentScene.content}),b.nodes.popupContent.appendChild(b.currentSceneNode),cm.addClass(b.currentSceneNode,"is-show",!0),s(),b.currentScene.construct&&b.currentScene.construct.call(b))},n=function(){b.currentStage>=0&&(b.previousStage=b.currentStage,b.previousScene=b.currentScene,b.previousSceneNode=b.currentSceneNode,b.components.topMenu.unsetActiveItem(b.previousScene.topMenu),b.previousScene.arrow&&cm.removeClass(b.nodes.popupArrows[b.previousScene.arrow],"is-show"),cm.forEach(b.sceneIntervals,function(a){clearInterval(a)}),function(a){setTimeout(function(){cm.remove(a)},b.params.duration)}(b.previousSceneNode),b.previousScene.destruct&&b.previousScene.destruct.call(b)),b.currentStage=-1},o=function(){b.nodes.popupArrows={},b.nodes.popup=cm.Node("div",{"class":"app__helptour__popup"},b.nodes.popupArrows.top=cm.Node("div",{"class":"popup__arrow popup__arrow--top"}),b.nodes.popupArrows.right=cm.Node("div",{"class":"popup__arrow popup__arrow--right"}),b.nodes.popupArrows.bottom=cm.Node("div",{"class":"popup__arrow popup__arrow--bottom"}),b.nodes.popupArrows.left=cm.Node("div",{"class":"popup__arrow popup__arrow--left"}),b.nodes.popupClose=cm.Node("div",{"class":"popup__close",title:b.lang("close")}),b.nodes.popupContent=cm.Node("div",{"class":"popup__content"}),b.nodes.popupButtons=cm.Node("div",{"class":"popup__buttons"},cm.Node("div",{"class":"btn-wrap pull-center"},b.nodes.back=cm.Node("button",b.lang("back")),b.nodes.next=cm.Node("button",b.lang("next"))))),q(),b.params.container.appendChild(b.nodes.popup),cm.addClass(b.nodes.popup,"is-show",!0),cm.addEvent(b.nodes.popupClose,"click",l),cm.addEvent(b.nodes.next,"click",b.next),cm.addEvent(b.nodes.back,"click",b.prev),cm.addEvent(window,"resize",s),cm.addEvent(window,"keydown",r)},p=function(){cm.removeEvent(window,"resize",s),cm.removeEvent(window,"keydown",r),q(),cm.removeClass(b.nodes.popup,"is-show"),setTimeout(function(){cm.remove(b.nodes.popup)},b.params.duration)},q=function(){var a=[Math.round(cm.getX(b.params.node)+b.params.node.offsetWidth/2),"px"].join(""),c=[Math.round(cm.getY(b.params.node)+b.params.node.offsetHeight/2),"px"].join("");cm.setCSSTranslate(b.nodes.popup,a,c,0,"scale(0)")},r=function(a){switch(cm.preventDefault(a),a.keyCode){case 27:l();break;case 37:b.prev();break;case 39:b.next()}},s=function(){var a,d,e,f,g,h;if(b.currentScene){if(d=cm.getPageSize(),d.winWidth>b.params.adaptiveFrom)switch(i(),a=b.currentScene.position.split(":"),g=c.popupContentHeight,a[0]){case"window":switch(a[1]){case"top":f=Math.round((d.winWidth-b.nodes.popup.offsetWidth)/2),e=b.params.popupIndent;break;case"bottom":f=Math.round((d.winWidth-b.nodes.popup.offsetWidth)/2),e=d.winHeight-c.popupHeight-b.params.popupIndent;break;case"center":default:f=Math.round((d.winWidth-b.nodes.popup.offsetWidth)/2),e=Math.round((d.winHeight-c.popupHeight)/2)}break;case"topMenu":switch(a[1]){case"center":default:f=Math.round((d.winWidth-b.nodes.popup.offsetWidth)/2),e=c.topMenu+b.params.popupIndent}break;case"topMenuItem":h=b.components.topMenu.getItem(a[1]),f=h?a[2]&&"dropdown"===a[2]&&h.dropdown?a[3]&&"left"===a[3]?cm.getX(h.dropdown)-b.nodes.popup.offsetWidth-b.params.popupIndent:cm.getX(h.dropdown)+h.dropdown.offsetWidth+b.params.popupIndent:h.container?a[3]&&"left"===a[3]?cm.getX(h.container)+h.container.offsetWidth-b.nodes.popup.offsetWidth:cm.getX(h.container):Math.round((d.winWidth-b.nodes.popup.offsetWidth)/2):Math.round((d.winWidth-b.nodes.popup.offsetWidth)/2),e=c.topMenu+b.params.popupIndent;break;case"template":switch(a[1]){case"top":f=b.components.sidebar.isExpanded?c.sidebarExpanded:c.sidebarCollapsed,f=Math.round((d.winWidth+f-b.nodes.popup.offsetWidth)/2),e=c.topMenu+b.params.popupIndent;break;case"bottom":f=b.components.sidebar.isExpanded?c.sidebarExpanded:c.sidebarCollapsed,f=Math.round((d.winWidth+f-b.nodes.popup.offsetWidth)/2),e=d.winHeight-c.popupHeight-b.params.popupIndent;break;case"left":f=(b.components.sidebar.isExpanded?c.sidebarExpanded:c.sidebarCollapsed)+b.params.popupIndent,e=Math.round((d.winHeight-c.popupHeight)/2);break;case"left-top":f=(b.components.sidebar.isExpanded?c.sidebarExpanded:c.sidebarCollapsed)+b.params.popupIndent,e=c.topMenu+b.params.popupIndent;break;case"center":default:f=b.components.sidebar.isExpanded?c.sidebarExpanded:c.sidebarCollapsed,f=Math.round((d.winWidth+f-b.nodes.popup.offsetWidth)/2),e=Math.round((d.winHeight+c.topMenu-c.popupHeight)/2)}break;default:f=Math.round((d.winWidth-b.nodes.popup.offsetWidth)/2),e=Math.round((d.winHeight-c.popupHeight)/2)}else f=0,e=0,g="auto";b.nodes.popupContent.style.height="auto"===g?g:[g,"px"].join(""),cm.setCSSTranslate(b.nodes.popup,[f,"px"].join(""),[e,"px"].join(""),0,"scale(1)")}};b.start=function(){return j(),b},b.stop=function(){return l(),b},b.next=function(){return b.currentStage>=0&&(App.HelpTourScenario[b.currentStage+1]?m(b.currentStage+1):l()),b},b.prev=function(){return b.currentStage>=0&&(App.HelpTourScenario[b.currentStage-1]?m(b.currentStage-1):l()),b},e()}),App.HelpTourScenario=[{position:"window:center",arrow:!1,overlays:{main:"transparent",sidebar:"dark",topMenu:"dark",template:"dark"},sidebar:!1,topMenu:!1,content:"<h3>QuickSilk Online Tour!</h3><p>Welcome to QuickSilk! Use the buttons at the bottom of each help bubble to quickly discover how to navigate and use the QuickSilk software. This online tour automatically appears the first time you login. Anytime after this, simply click on the help tour menu item for a quick refresher.</p>"},{position:"topMenuItem:user:dropdown:left",arrow:"right",overlays:{main:"transparent",sidebar:"dark",topMenu:"transparent",template:"dark"},sidebar:!1,topMenu:"user",content:"<h3>User Menu</h3><p>Click on your name to view the admin panel (future), your profile, or to logout. The View Profile link provides the ability to manage your subscription and billing, password, forum settings, working groups and public profile.</p>"},{position:"topMenuItem:modules:dropdown:right",arrow:"left",overlays:{main:"transparent",sidebar:"dark",topMenu:"transparent",template:"dark"},sidebar:!1,topMenu:"modules",content:"<h3>Modules</h3><p>The Module manager allows you to work on your modules from the administration panel. Simply mouse over the Modules menu and then scroll down and click on the module you wish to work with. </p>"},{position:"template:left-top",arrow:"left",overlays:{main:"transparent",sidebar:"transparent",topMenu:"dark",template:"dark"},sidebar:!1,topMenu:!1,content:"<h3>Left Panel Slider</h3><p>The left slider widget provides you with quick access to the modules, pages, layouts and template features. Simply click on the icon for the tab you wish to use.</p>"},{position:"template:left-top",arrow:"left",overlays:{main:"transparent",sidebar:"transparent",topMenu:"dark",template:"dark"},sidebar:"template-manager",topMenu:!1,content:"<h3>Installed Modules</h3><p>The modules tab provides quick access to the modules that you've subscribed to. Once you've opened a page or a template, open the modules tab to drag and drop the modules you wish to include.</p>"},{position:"template:left-top",arrow:"left",overlays:{main:"transparent",sidebar:"transparent",topMenu:"dark",template:"dark"},sidebar:"pages",topMenu:!1,content:"<h3>Site Pages</h3><p>The site pages tab allows you to quickly open, modify and manage your website pages. Simply open the tab and click on the web page you wish to work on.</p>"},{position:"template:left-top",arrow:"left",overlays:{main:"transparent",sidebar:"transparent",topMenu:"dark",template:"dark"},sidebar:"layouts",topMenu:!1,content:"<h3>Page Layouts</h3><p>Use the page layout tab to open, modify and manage the layouts of your various web page templates. A page layout will consist of the common elements you have on every page.</p>"},{position:"template:left-top",arrow:"left",overlays:{main:"transparent",sidebar:"transparent",topMenu:"dark",template:"dark"},sidebar:"templates",topMenu:!1,content:"<h3>Templates</h3><p>The templates tab displays the different custom or predesigned templates that you've installed and are immediately available for use on your website. If you want to view or install other templates, you'll do so from the template gallery.</p>"},{position:"template:center",arrow:!1,overlays:{main:"transparent",sidebar:"dark",topMenu:"dark",template:"light"},sidebar:!1,topMenu:!1,content:"<h3>Drop Area</h3><p>The drop area is where you drag and drop the modules. To move a module onto a page or template place your mouse on the desired module icon, hold down the left button on your mouse, and drag the module to the highlighted area of the page you wish to drop it, then let go of the mouse button.</p>"},{position:"topMenuItem:support:container:right",arrow:"top",overlays:{main:"transparent",sidebar:"dark",topMenu:"transparent",template:"dark"},sidebar:!1,topMenu:"support",content:"<h3>Need Help?</h3><p>Are you stuck, experiencing an issue, found a bug or have a suggestion? Simply click on this link and send us a message. FYI, to assist in the troubleshooting process we automatically collect information on the operating system, browser and browser version you are using. Our goal is to respond to your message within 1 business day.</p>"}],cm.define("App.ImageInput",{extend:"Com.ImageInput",params:{fileManager:!0,fileManagerConstructor:"App.elFinderFileManagerContainer",fileUploader:!0,fileUploaderConstructor:"App.FileUploaderContainer"}},function(a){var b=this;Com.ImageInput.apply(b,arguments)}),cm.define("App.LivePreviewContent",{extend:"Com.AbstractController",params:{name:"app-livepreview",renderStructure:!0,embedStructureOnRender:!1,"Com.Overlay":{removeOnClose:!0,showSpinner:!0,showContent:!1,position:"absolute",theme:"light"}}},function(a){var b=this;b.isPower=!0,b.isPowerProcess=!1,b.powerCount=0,Com.AbstractController.apply(b,arguments)}),cm.getConstructor("App.LivePreviewContent",function(a,b,c){var d=c._inherit;c.construct=function(){var a=this;return a.devicePowerToggleHandler=a.devicePowerToggle.bind(a),d.prototype.construct.apply(a,arguments),a},c.renderView=function(){var a=this;return a.renderLoaderView(),a},c.renderViewModel=function(){var a=this;return d.prototype.renderViewModel.apply(a,arguments),cm.getConstructor("Com.Overlay",function(b,c){a.components.overlay=new b(cm.merge(a.params[c],{container:a.nodes.deviceScreen}))}),cm.addEvent(a.nodes.iframe,"load",function(){a.components.overlay&&a.components.overlay.close()}),cm.addEvent(a.nodes.devicePower,"mousedown",a.devicePowerToggleHandler),a},c.setView=function(a){var b=this;return cm.removeClass(b.nodes.container,"is-desktop is-tablet is-mobile"),cm.addClass(b.nodes.container,["is",a].join("-")),b},c.setTemplate=function(a){var b=this;return b.components.overlay&&b.components.overlay.open(),b.nodes.iframe.src=a,b},c.renderLoaderView=function(){var a=this;return a.nodes.loader={},a.nodes.loader.container=cm.node("div",{"class":"device__loader is-hidden"},cm.node("div",{"class":"inner"
},cm.node("div",{"class":"icon app-i__quicksilk"}))),a.nodes.blues={},a.nodes.blues.container=cm.node("div",{"class":"device__blues is-hidden"},cm.node("div",{"class":"inner"},cm.node("p","A problem has been detected and QuickSilk has been shut down to prevent damage to your device."),cm.node("p","The problem seems to be caused by the following file: FAKEPOWERBUTTON.SYS"),cm.node("p","POWER_FAULT_IN_NONPOWERED_BUTTON"),cm.node("p","If this is the first time you've seen this Stop error screen, restart your device. If this screen appears again, check to make sure you are not pressing power button."),cm.node("p","Technical Information:"),cm.node("p","*** START"),cm.node("p","010101000110100001100101011100100110010100100000011000010111001001100101001000000110111001101111001000000100010101100001011100110111010001100101011100100010000001000101011001110110011101110011001000000111010101110000001000000110100001100101011100100110010100101100001000000110011101101111001000000110000101110111011000010111100100100001"),cm.node("p","*** END"))),cm.appendChild(a.nodes.blues.container,a.nodes.deviceScreen),cm.appendChild(a.nodes.loader.container,a.nodes.deviceScreen),a},c.devicePowerToggle=function(){var a=this;return a.isPowerProcess||(a.isPower?a.devicePowerOff():a.devicePowerOn()),a},c.devicePowerOff=function(){var a=this;return a.isPower=!1,a.isPowerProcess=!0,cm.addClass(a.nodes.deviceContent,"is-hidden"),cm.addClass(a.nodes.blues.container,"is-hidden"),setTimeout(function(){a.isPowerProcess=!1},500),a},c.devicePowerOn=function(){var a=this;return a.powerCount++,a.isPower=!0,a.isPowerProcess=!0,1==a.powerCount?a.devicePowerOnFailed():a.devicePowerOnNormal(),a},c.devicePowerOnNormal=function(){var a=this;return cm.replaceClass(a.nodes.deviceContent,"is-hidden","is-loading"),cm.removeClass(a.nodes.loader.container,"is-hidden"),setTimeout(function(){cm.removeClass(a.nodes.deviceContent,"is-loading"),cm.addClass(a.nodes.loader.container,"is-loaded"),setTimeout(function(){cm.replaceClass(a.nodes.loader.container,"is-loaded","is-hidden"),setTimeout(function(){a.isPowerProcess=!1},500)},500)},1500),a},c.devicePowerOnFailed=function(){var a=this;return cm.replaceClass(a.nodes.blues.container,"is-hidden","is-loading"),cm.removeClass(a.nodes.loader.container,"is-hidden"),setTimeout(function(){cm.removeClass(a.nodes.blues.container,"is-loading"),cm.addClass(a.nodes.loader.container,"is-loaded"),setTimeout(function(){cm.replaceClass(a.nodes.loader.container,"is-loaded","is-hidden"),setTimeout(function(){a.isPowerProcess=!1},500)},500)},1500),a}}),cm.define("App.LivePreviewMenu",{extend:"Com.AbstractController",params:{name:"app-livepreview",topMenuName:"app-topmenu",contentName:"app-livepreview",renderStructure:!1,embedStructureOnRender:!1}},function(a){var b=this;b.template=null,Com.AbstractController.apply(b,arguments)}),cm.getConstructor("App.LivePreviewMenu",function(a,b,c){var d=c._inherit;c.renderViewModel=function(){var a=this;return d.prototype.renderViewModel.apply(a,arguments),cm.find("Com.Select","templates",a.nodes.container,function(b){a.components.select=b,a.components.select.addEvent("onChange",function(b,c){a.setTemplate(c)}),a.setTemplate(a.components.select.get())}),new cm.Finder("App.TopMenu",a.params.topMenuName,null,function(b){a.components.topMenu=b}),new cm.Finder("App.LivePreviewContent",a.params.contentName,null,function(b){a.components.content=b}),cm.addEvent(a.nodes.desktop,"click",function(){a.reset(),a.setView("desktop")}),cm.addEvent(a.nodes.tablet,"click",function(){a.reset(),a.setView("tablet")}),cm.addEvent(a.nodes.mobile,"click",function(){a.reset(),a.setView("mobile")}),cm.addEvent(a.nodes.select,"click",function(){a.storageWrite("template",a.template);try{window.close()}catch(b){}}),a},c.reset=function(){var a=this;return cm.removeClass(a.nodes.desktop,"active"),cm.removeClass(a.nodes.tablet,"active"),cm.removeClass(a.nodes.mobile,"active"),a},c.setView=function(a){var b=this;return cm.addClass(b.nodes[a],"active"),b.components.content&&b.components.content.setView(a),b.components.topMenu&&b.components.topMenu.collapse(),b},c.setTemplate=function(a){var b=this;return b.template=a,b.components.content&&b.components.content.setTemplate(a),b.components.topMenu&&b.components.topMenu.collapse(),b}}),cm.define("App.LoginBox",{modules:["Params","DataConfig","DataNodes"],events:["onRender"],params:{node:cm.Node("div"),"Com.Tooltip":{targetEvent:"click",hideOnReClick:!0,preventClickEvent:!0,adaptiveX:!0,adaptiveY:!0,scroll:!1,left:"(targetWidth - selfWidth) / 2",top:"targetHeight + 8",className:"app-pt__box-login__tooltip"}}},function(a){var b=this,c={};b.nodes={button:cm.Node("div"),target:cm.Node("div")};var d=function(){b.setParams(a),b.getDataNodes(b.params.node),b.getDataConfig(b.params.node),e()},e=function(){c.tooltip=new Com.Tooltip(cm.merge(b.params["Com.Tooltip"],{target:b.nodes.button,content:b.nodes.target,events:{onShow:f}}))},f=function(){var a=cm.getByAttr("type","text",b.nodes.target)[0];a&&a.focus()};d()}),cm.define("App.MenuConstructor",{extend:"App.AbstractForm",params:{node:cm.node("div"),embedStructure:"none",renderStructure:!1,collectorPriority:100,namePrefix:"params"}},function(a){var b=this;b.items={},App.AbstractForm.apply(b,arguments)}),cm.getConstructor("App.MenuConstructor",function(a,b,c){var d=c._inherit;c.construct=function(){var a=this;return a.destructProcessHander=a.destructProcess.bind(a),a.addEvent("onDestructProcess",a.destructProcessHander),d.prototype.construct.apply(a,arguments),a},c.destructProcess=function(){var a=this;return a.components.finder&&a.components.finder.remove(),a},c.renderViewModel=function(){var a=this;return d.prototype.renderViewModel.apply(a,arguments),cm.forEach(App.MenuConstructorNames,function(b,c){var d={variable:c,name:a.getName(b),selfName:a.getSelfName(b)};cm.find("*",d.name,a.nodes.container,function(b){d.controller=b,d.controller.addEvent("onChange",function(b,c){d.value=c,a.processPreview()}),d.value=d.controller.get()}),a.items[d.variable]=d}),a.components.finder=new cm.Finder("App.MenuConstructorPreview",null,null,function(b){a.components.preview=b,a.processPreview()},{multiple:!0}),a},c.getName=function(a){var b=this;return b.params.namePrefix+a.split(".").map(function(a){return"["+a+"]"}).join("")},c.getSelfName=function(a){return a.split(".").pop()},c.processPreview=function(){var a,b=this,c={};cm.forEach(b.items,function(b){if(void 0!==b.value)switch(b.value._type){case"file":c[b.variable]=cm.URLToCSSURL(b.value.url);break;case"font":cm.forEach(b.value,function(a,d){c[b.variable+App.MenuConstructorNamesFont[d]]=a});break;default:/BorderSize|Padding/.test(b.variable)&&(a=b.value.split(/\s+/),cm.forEach(App.MenuConstructorNamesBox,function(d,e){c[[b.variable,d].join("-")]=a[e]})),c[b.variable]=b.value}}),b.components.preview&&b.components.preview.set(c)}}),App.MenuConstructorNamesBox=["Top","Right","Bottom","Left"],App.MenuConstructorNamesFont={"line-height":"LineHeight","font-weight":"Weight","font-style":"Style","text-decoration":"Decoration","font-family":"Family","font-size":"Size",color:"Color"},App.MenuConstructorNames={"Primary-Item-Padding":"primary_items.inner-padding","Primary-Item-Indent":"primary_items.inner-between","Primary-Default-BackgroundColor":"primary_items.default.background-color","Primary-Default-BackgroundImage":"primary_items.default.background-image","Primary-Default-BackgroundRepeat":"primary_items.default.background-repeat","Primary-Default-BackgroundPosition":"primary_items.default.background-position","Primary-Default-BackgroundScaling":"primary_items.default.background-scaling","Primary-Default-BackgroundAttachment":"primary_items.default.background-attachment","Primary-Default-BorderSize":"primary_items.default.border-size","Primary-Default-BorderStyle":"primary_items.default.border-style","Primary-Default-BorderColor":"primary_items.default.border-color","Primary-Default-BorderRadius":"primary_items.default.border-radius","Primary-Default-FontLineHeight":"primary_items.default.font.line-height","Primary-Default-FontWeight":"primary_items.default.font.font-weight","Primary-Default-FontStyle":"primary_items.default.font.font-style","Primary-Default-FontDecoration":"primary_items.default.font.text-decoration","Primary-Default-FontFamily":"primary_items.default.font.font-family","Primary-Default-FontSize":"primary_items.default.font.font-size","Primary-Default-FontColor":"primary_items.default.font.color","Primary-Default-Font":"primary_items.default.font","Primary-Hover-BackgroundColor":"primary_items.hover.background-color","Primary-Hover-BackgroundImage":"primary_items.hover.background-image","Primary-Hover-BackgroundRepeat":"primary_items.hover.background-repeat","Primary-Hover-BackgroundPosition":"primary_items.hover.background-position","Primary-Hover-BackgroundScaling":"primary_items.hover.background-scaling","Primary-Hover-BackgroundAttachment":"primary_items.hover.background-attachment","Primary-Hover-BorderSize":"primary_items.hover.border-size","Primary-Hover-BorderStyle":"primary_items.hover.border-style","Primary-Hover-BorderColor":"primary_items.hover.border-color","Primary-Hover-BorderRadius":"primary_items.hover.border-radius","Primary-Hover-FontLineHeight":"primary_items.hover.font.line-height","Primary-Hover-FontWeight":"primary_items.hover.font.font-weight","Primary-Hover-FontStyle":"primary_items.hover.font.font-style","Primary-Hover-FontDecoration":"primary_items.hover.font.text-decoration","Primary-Hover-FontFamily":"primary_items.hover.font.font-family","Primary-Hover-FontSize":"primary_items.hover.font.font-size","Primary-Hover-FontColor":"primary_items.hover.font.color","Primary-Hover-Font":"primary_items.hover.font","Primary-Active-BackgroundColor":"primary_items.active.background-color","Primary-Active-BackgroundImage":"primary_items.active.background-image","Primary-Active-BackgroundRepeat":"primary_items.active.background-repeat","Primary-Active-BackgroundPosition":"primary_items.active.background-position","Primary-Active-BackgroundScaling":"primary_items.active.background-scaling","Primary-Active-BackgroundAttachment":"primary_items.active.background-attachment","Primary-Active-BorderSize":"primary_items.active.border-size","Primary-Active-BorderStyle":"primary_items.active.border-style","Primary-Active-BorderColor":"primary_items.active.border-color","Primary-Active-BorderRadius":"primary_items.active.border-radius","Primary-Active-FontLineHeight":"primary_items.active.font.line-height","Primary-Active-FontWeight":"primary_items.active.font.font-weight","Primary-Active-FontStyle":"primary_items.active.font.font-style","Primary-Active-FontDecoration":"primary_items.active.font.text-decoration","Primary-Active-FontFamily":"primary_items.active.font.font-family","Primary-Active-FontSize":"primary_items.active.font.font-size","Primary-Active-FontColor":"primary_items.active.font.color","Primary-Active-Font":"primary_items.active.font","Primary-Container-Padding":"primary_container.inner-padding","Primary-Container-BackgroundColor":"primary_container.background-color","Primary-Container-BackgroundImage":"primary_container.background-image","Primary-Container-BackgroundRepeat":"primary_container.background-repeat","Primary-Container-BackgroundPosition":"primary_container.background-position","Primary-Container-BackgroundScaling":"primary_container.background-scaling","Primary-Container-BackgroundAttachment":"primary_container.background-attachment","Primary-Container-BorderSize":"primary_container.border-size","Primary-Container-BorderStyle":"primary_container.border-style","Primary-Container-BorderColor":"primary_container.border-color","Primary-Container-BorderRadius":"primary_container.border-radius","Secondary-Item-Padding":"secondary_items.inner-padding","Secondary-Item-Indent":"secondary_items.inner-between","Secondary-Default-BackgroundColor":"secondary_items.default.background-color","Secondary-Default-BackgroundImage":"secondary_items.default.background-image","Secondary-Default-BackgroundRepeat":"secondary_items.default.background-repeat","Secondary-Default-BackgroundPosition":"secondary_items.default.background-position","Secondary-Default-BackgroundScaling":"secondary_items.default.background-scaling","Secondary-Default-BackgroundAttachment":"secondary_items.default.background-attachment","Secondary-Default-BorderSize":"secondary_items.default.border-size","Secondary-Default-BorderStyle":"secondary_items.default.border-style","Secondary-Default-BorderColor":"secondary_items.default.border-color","Secondary-Default-BorderRadius":"secondary_items.default.border-radius","Secondary-Default-FontLineHeight":"secondary_items.default.font.line-height","Secondary-Default-FontWeight":"secondary_items.default.font.font-weight","Secondary-Default-FontStyle":"secondary_items.default.font.font-style","Secondary-Default-FontDecoration":"secondary_items.default.font.text-decoration","Secondary-Default-FontFamily":"secondary_items.default.font.font-family","Secondary-Default-FontSize":"secondary_items.default.font.font-size","Secondary-Default-FontColor":"secondary_items.default.font.color","Secondary-Default-Font":"secondary_items.default.font","Secondary-Hover-BackgroundColor":"secondary_items.hover.background-color","Secondary-Hover-BackgroundImage":"secondary_items.hover.background-image","Secondary-Hover-BackgroundRepeat":"secondary_items.hover.background-repeat","Secondary-Hover-BackgroundPosition":"secondary_items.hover.background-position","Secondary-Hover-BackgroundScaling":"secondary_items.hover.background-scaling","Secondary-Hover-BackgroundAttachment":"secondary_items.hover.background-attachment","Secondary-Hover-BorderSize":"secondary_items.hover.border-size","Secondary-Hover-BorderStyle":"secondary_items.hover.border-style","Secondary-Hover-BorderColor":"secondary_items.hover.border-color","Secondary-Hover-BorderRadius":"secondary_items.hover.border-radius","Secondary-Hover-FontLineHeight":"secondary_items.hover.font.line-height","Secondary-Hover-FontWeight":"secondary_items.hover.font.font-weight","Secondary-Hover-FontStyle":"secondary_items.hover.font.font-style","Secondary-Hover-FontDecoration":"secondary_items.hover.font.text-decoration","Secondary-Hover-FontFamily":"secondary_items.hover.font.font-family","Secondary-Hover-FontSize":"secondary_items.hover.font.font-size","Secondary-Hover-FontColor":"secondary_items.hover.font.color","Secondary-Hover-Font":"secondary_items.hover.font","Secondary-Active-BackgroundColor":"secondary_items.active.background-color","Secondary-Active-BackgroundImage":"secondary_items.active.background-image","Secondary-Active-BackgroundRepeat":"secondary_items.active.background-repeat","Secondary-Active-BackgroundPosition":"secondary_items.active.background-position","Secondary-Active-BackgroundScaling":"secondary_items.active.background-scaling","Secondary-Active-BackgroundAttachment":"secondary_items.active.background-attachment","Secondary-Active-BorderSize":"secondary_items.active.border-size","Secondary-Active-BorderStyle":"secondary_items.active.border-style","Secondary-Active-BorderColor":"secondary_items.active.border-color","Secondary-Active-BorderRadius":"secondary_items.active.border-radius","Secondary-Active-FontLineHeight":"secondary_items.active.font.line-height","Secondary-Active-FontWeight":"secondary_items.active.font.font-weight","Secondary-Active-FontStyle":"secondary_items.active.font.font-style","Secondary-Active-FontDecoration":"secondary_items.active.font.text-decoration","Secondary-Active-FontFamily":"secondary_items.active.font.font-family","Secondary-Active-FontSize":"secondary_items.active.font.font-size","Secondary-Active-FontColor":"secondary_items.active.font.color","Secondary-Active-Font":"secondary_items.active.font","Secondary-Container-Padding":"secondary_container.inner-padding","Secondary-Container-BackgroundColor":"secondary_container.background-color","Secondary-Container-BackgroundImage":"secondary_container.background-image","Secondary-Container-BackgroundRepeat":"secondary_container.background-repeat","Secondary-Container-BackgroundScaling":"secondary_container.background-scaling","Secondary-Container-BackgroundPosition":"secondary_container.background-position","Secondary-Container-BackgroundAttachment":"secondary_container.background-attachment","Secondary-Container-BorderSize":"secondary_container.border-size","Secondary-Container-BorderStyle":"secondary_container.border-style","Secondary-Container-BorderColor":"secondary_container.border-color","Secondary-Container-BorderRadius":"secondary_container.border-radius","Mobile-Padding":"mobile.inner-padding","Mobile-BackgroundColor":"mobile.background-color","Mobile-BackgroundImage":"mobile.menu-icon","Mobile-BorderSize":"mobile.border-size","Mobile-BorderStyle":"mobile.border-style","Mobile-BorderColor":"mobile.border-color","Mobile-BorderRadius":"mobile.border-radius","Mobile-FontLineHeight":"mobile.font.line-height","Mobile-FontWeight":"mobile.font.font-weight","Mobile-FontStyle":"mobile.font.font-style","Mobile-FontDecoration":"mobile.font.font-style","Mobile-FontFamily":"mobile.font.font-family","Mobile-FontSize":"mobile.font.font-size","Mobile-FontColor":"mobile.font.font-color","Mobile-Font":"mobile.font"},cm.define("App.MenuConstructorPreview",{extend:"Com.AbstractController",params:{node:cm.node("div"),embedStructure:"none",renderStructure:!1,collectorPriority:100}},function(a){var b=this;b.lessDefault=null,b.lessVariables={},Com.AbstractController.apply(b,arguments)}),cm.getConstructor("App.MenuConstructorPreview",function(a,b,c){var d=c._inherit;c.set=function(a){var b=this;return b.lessVariables=a||{},b.parseLess(),b},c.renderViewModel=function(){var a=this;return d.prototype.renderViewModel.apply(a,arguments),a.lessDefault=a.nodes.less.innerHTML,cm.loadScript({path:"less",src:"%assetsUrl%/libs/less/less.min.js?%version%",callback:function(b){b&&(a.components.less=b,a.parseLess())}}),cm.find("Module.Menu",null,a.nodes.contentInner,function(b){a.components.menu=b}),cm.find("Com.ColorPicker","background",a.nodes.title.container,function(b){a.components.background=b,a.components.background.addEvent("onChange",function(b,c){a.nodes.contentInner.style.backgroundColor=c})}),cm.find("Com.Select","view",a.nodes.title.container,function(b){a.components.view=b,a.components.view.addEvent("onChange",function(b,c){switch(a.components.menu&&a.components.menu.setView(c),c){case"horizontal":a.components.submenu&&a.components.submenu.set("dropdown"),cm.addClass(a.nodes.title.toolbar.submenu,"is-hidden");break;case"vertical":a.components.submenu&&a.components.submenu.set("visible"),cm.removeClass(a.nodes.title.toolbar.submenu,"is-hidden");break;case"mobile":cm.addClass(a.nodes.title.toolbar.submenu,"is-hidden")}})}),cm.find("Com.Select","submenu",a.nodes.title.container,function(b){a.components.submenu=b,a.components.submenu.addEvent("onChange",function(b,c){a.components.menu&&a.components.menu.setSubmenuView(c)})}),cm.find("Com.Select","align",a.nodes.title.container,function(b){a.components.align=b,a.components.align.addEvent("onChange",function(b,c){a.components.menu&&a.components.menu.setAlign(c)})}),a},c.parseLess=function(){var a=this;return a.components.less&&a.components.less.render(a.lessDefault,{modifyVars:a.lessVariables},function(b,c){c&&!cm.isEmpty(c.css)&&(a.nodes.css.innerHTML=c.css)}),a}}),cm.define("App.MultipleFileInput",{extend:"Com.MultipleFileInput",params:{inputConstructor:"App.FileInput",local:!0,fileManager:!0,fileManagerConstructor:"App.elFinderFileManagerContainer",fileUploader:!0,fileUploaderConstructor:"App.FileUploaderContainer"}},function(a){var b=this;Com.MultipleFileInput.apply(b,arguments)}),cm.define("App.Notification",{extend:"Com.AbstractController",params:{renderStructure:!1,embedStructureOnRender:!1,controllerEvents:!0,show:"inherit",remember:!0,rememberTime:!1}},function(a){var b=this;Com.AbstractController.apply(b,arguments)}),cm.getConstructor("App.Notification",function(a,b,c){c._inherit;c.onConstructStart=function(){var a=this;a.isShow=null,a.showHandler=a.show.bind(a),a.hideHandler=a.hide.bind(a)},c.onConstructEnd=function(){var a,b,c,d=this;d.isShow="inherit"===d.params.show?cm.isClass(d.nodes.container,"is-show"):d.params.show,d.params.remember&&(a=d.storageRead("isShow"),b=d.storageRead("date"),cm.isUndefined(a)||cm.isUndefined(b)||(c=d.params.rememberTime?Date.now()-parseInt(d.params.rememberTime)>parseInt(b):!1,d.isShow=c?d.isShow:a)),d.isShow?d.show(!0,!0):d.hide(!0,!0)},c.renderViewModel=function(){var a=this;cm.addEvent(a.nodes.close,"click",function(){a.hide()})},c.show=function(a,b){var c=this;return!b&&cm.isBoolean(c.isShow)&&c.isShow||(c.params.remember&&(c.storageWrite("isShow",!0),c.storageWrite("date",Date.now())),a&&cm.addClass(c.nodes.container,"is-immediately",!0),c.isShow=!0,cm.replaceClass(c.nodes.container,"is-hide","is-show"),a&&setTimeout(function(){cm.removeClass(c.nodes.container,"is-immediately")},5)),c},c.hide=function(a,b){var c=this;return(b||!cm.isBoolean(c.isShow)||c.isShow)&&(c.params.remember&&(c.storageWrite("isShow",!1),c.storageWrite("date",Date.now())),a&&cm.addClass(c.nodes.container,"is-immediately"),c.isShow=!1,cm.replaceClass(c.nodes.container,"is-show","is-hide"),a&&setTimeout(function(){cm.removeClass(c.nodes.container,"is-immediately")},5)),c},c.toggle=function(){var a=this;return a.isShow?a.hide():a.show(),a}}),cm.define("App.Panel",{extend:"Com.AbstractController",events:["onOpenStart","onOpen","onOpenEnd","onCloseStart","onClose","onCloseEnd","onError","onSaveStart","onSave","onSaveEnd","onSaveError","onSaveSuccess","onSaveFailure","onLoadStart","onLoad","onLoadEnd","onLoadError","onCancelStart","onCancel"],params:{node:cm.node("div"),container:"document.body",name:"",embedStructure:"append",embedStructureOnRender:!1,customEvents:!0,constructCollector:!0,removeOnDestruct:!0,type:"full",duration:"cm._config.animDurationLong",autoOpen:!0,destructOnClose:!0,removeOnClose:!0,showCloseButton:!0,showBackButton:!1,showButtons:!0,showOverlay:!0,overlayDelay:0,overlayPosition:"content",title:null,content:null,responseKey:"data",responseContentKey:"data.content",responseTitleKey:"data.title",responseStatusKey:"data.success",responsePreviewKey:"data.preview",renderContentOnSuccess:!1,closeOnSuccess:!0,get:{type:"json",method:"GET",url:"",params:""},post:{type:"json",method:"POST",url:"",params:""},"Com.Request":{wrapContent:!0,swapContentOnError:!1,renderContentOnSuccess:!1,autoSend:!1,responseKey:"data",responseHTML:!0},"Com.Overlay":{autoOpen:!1,removeOnClose:!0,showSpinner:!0,showContent:!1,position:"absolute",theme:"light"}},strings:{close:"Close",back:"Back",cancel:"Cancel",save:"Save",saving:"Saving...",reload:"Reload",cancelDescription:"Cancel"}},function(a){var b=this;Com.AbstractController.apply(b,arguments)}),cm.getConstructor("App.Panel",function(a,b,c){var d=c._inherit;c.construct=function(a){var b=this;return b.nodes={},b.components={},b.isOpen=!1,b.isHide=!1,b.isLoaded=!1,b.isDestructed=!1,b.isProccesing=!1,b.destructOnClose=!1,b.hasGetRequest=!1,b.hasPostRequest=!1,b.isGetRequest=!1,b.isPostRequest=!1,b.transitionInterval=null,b.openHandler=b.open.bind(b),b.closeHandler=b.close.bind(b),b.saveHandler=b.save.bind(b),b.cancelHandler=b.cancel.bind(b),b.loadHandler=b.load.bind(b),b.transitionOpenHandler=b.transitionOpen.bind(b),b.transitionCloseHandler=b.transitionClose.bind(b),b.windowKeydownHandler=b.windowKeydown.bind(b),b.constructEndHandler=b.constructEnd.bind(b),b.setEventsProcessHandler=b.setEventsProcess.bind(b),b.unsetEventsProcessHandler=b.unsetEventsProcess.bind(b),b.onGetLESSVariablesProcessHandler=b.onGetLESSVariablesProcess.bind(b),b.addEvent("onConstructEnd",b.constructEndHandler),b.addEvent("onGetLESSVariablesProcess",b.onGetLESSVariablesProcessHandler),b.addEvent("onSetEventsProcess",b.setEventsProcessHandler),b.addEvent("onUnsetEventsProcess",b.unsetEventsProcessHandler),d.prototype.construct.apply(b,arguments),b},c.destruct=function(){var a=this;return a.isOpen?(a.destructOnClose=!0,a.close()):a.isDestructed||(a.destructOnClose=a.params.destructOnClose,d.prototype.destruct.apply(a,arguments)),a},c.constructEnd=function(){var a=this;return a.params.autoOpen&&a.open(),a},c.validateParams=function(){var a=this;return a.triggerEvent("onValidateParamsStart"),a.triggerEvent("onValidateParamsProcess"),a.params["Com.Request"].overlayParams=a.params["Com.Overlay"],a.params["Com.Request"].showOverlay=a.params.showOverlay,a.params["Com.Request"].overlayDelay=a.params.overlayDelay,a.params["Com.Request"].responseKey=a.params.responseKey,a.params["Com.Request"].responseHTMLKey=a.params.responseContentKey,a.params["Com.Request"].responseStatusKey=a.params.responseStatusKey,a.params["Com.Request"].renderContentOnSuccess=a.params.renderContentOnSuccess,a.destructOnClose=a.params.destructOnClose,a.hasGetRequest=!cm.isEmpty(a.params.get.url),a.hasPostRequest=!cm.isEmpty(a.params.post.url),a.triggerEvent("onValidateParamsEnd"),a},c.onGetLESSVariablesProcess=function(){var a=this;return a.params.duration=cm.getTransitionDurationFromLESS("AppPanel-Duration",a.params.duration),a},c.setEventsProcess=function(){var a=this;return cm.addEvent(window,"keydown",a.windowKeydownHandler),a},c.unsetEventsProcess=function(){var a=this;return cm.removeEvent(window,"keydown",a.windowKeydownHandler),a},c.open=function(){var a=this;return a.isDestructed&&(a.setEvents(),a.isDestructed=!1),a.isOpen||(a.embedStructure(a.nodes.container),a.addToStack(a.nodes.container),a.triggerEvent("onOpenStart"),a.hasGetRequest?a.load():(a.isLoaded=!0,a.showButton(["close","save"]),a.params.showButtons&&a.showButtons(!0),cm.customEvent.trigger(a.nodes.contentHolder,"redraw",{direction:"child",self:!1})),a.nodes.contentHolder.scrollTop=0,cm.addClass(a.nodes.container,"is-open",!0),a.transitionInterval=setTimeout(a.transitionOpenHandler,a.params.duration)),a},c.close=function(){var a=this;return a.isProccesing&&a.cancel(),a.isOpen&&(a.triggerEvent("onCloseStart"),cm.removeClass(a.nodes.container,"is-open",!0),a.transitionInterval=setTimeout(a.transitionCloseHandler,a.params.duration)),a},c.hide=function(){var a=this;return a.isHide||(a.isHide=!0,cm.replaceClass(a.nodes.container,"is-show","is-hide")),a},c.show=function(){var a=this;return a.isHide&&(a.isHide=!1,cm.replaceClass(a.nodes.container,"is-hide","is-show")),a},c.save=function(){var a,b=this;return b.isProccesing&&b.cancel(),b.isPostRequest=!0,b.triggerEvent("onSaveStart"),b.hasPostRequest?(a=cm.clone(b.params.post),a.formData?a.params=new FormData(b.nodes.contentHolder):a.params=cm.merge(a.params,cm.getFDO(b.nodes.contentHolder)),b.showButton(["cancel","saving"]),b.components.request.setAction(a,"update").send()):(b.showButton(["close","save"]),b.triggerEvent("onSave"),b.triggerEvent("onSaveEnd")),b},c.load=function(){var a=this;return a.isProccesing&&a.cancel(),a.isGetRequest=!0,a.triggerEvent("onLoadStart"),a.hasGetRequest?(a.showButton("cancel"),a.components.request.setAction(a.params.get,"update").send()):(a.showButton(["close","save"]),a.triggerEvent("onLoad"),a.triggerEvent("onLoadEnd")),a},c.cancel=function(){var a=this;return a.triggerEvent("onCancelStart"),a.components.request.abort(),a.isLoaded?a.showButton(["close","save"]):a.showButton(["close","reload"]),a.triggerEvent("onCancel"),a},c.setTitle=function(a){var b=this;return cm.customEvent.trigger(b.nodes.label,"destruct",{direction:"child",self:!1}),cm.clearNode(b.nodes.label),a=cm.strToHTML(a),cm.isEmpty(a)||(cm.appendNodes(a,b.nodes.label),b.constructCollector(b.nodes.label)),b},c.setContent=function(a){var b=this;return cm.customEvent.trigger(b.nodes.contentHolder,"destruct",{direction:"child",self:!1}),cm.clearNode(b.nodes.contentHolder),a=cm.strToHTML(a),cm.isEmpty(a)||(cm.appendNodes(a,b.nodes.contentHolder),b.constructCollector(b.nodes.contentHolder)),b},c.setPreview=function(a){var b=this;return cm.customEvent.trigger(b.nodes.previewHolder,"destruct",{direction:"child",self:!1}),cm.clearNode(b.nodes.previewHolder),a=cm.strToHTML(a),cm.isEmpty(a)||(cm.addClass(b.nodes.previewHolder,"is-show"),cm.appendNodes(a,b.nodes.previewHolder),b.constructCollector(b.nodes.previewHolder)),b},c.renderView=function(){var a=this;return a.nodes.container=cm.node("div",{"class":"app__panel"},a.nodes.dialogHolder=cm.node("div",{"class":"app__panel__dialog-holder"},a.nodes.dialog=cm.node("div",{"class":"app__panel__dialog"},a.nodes.inner=cm.node("div",{"class":"inner"},a.nodes.title=cm.node("div",{"class":"title"},a.nodes.label=cm.node("div",{"class":"label"})),a.nodes.content=cm.node("div",{"class":"content"},a.nodes.contentHolder=cm.node("div",{"class":"inner"}))))),a.nodes.previewHolder=cm.node("div",{"class":"app__panel__preview-holder"},a.nodes.preview=cm.node("div",{"class":"app__panel__preview"},cm.node("div",{"class":"inner"},cm.node("div",{"class":"title"}),cm.node("div",{"class":"content"}))))),a.params.showCloseButton&&(a.nodes.close=cm.node("div",{"class":"icon cm-i cm-i__circle-close",title:a.lang("close")}),cm.addEvent(a.nodes.close,"click",a.closeHandler),cm.insertLast(a.nodes.close,a.nodes.title)),a.params.showBackButton&&(a.nodes.back=cm.node("div",{"class":"icon cm-i cm-i__circle-arrow-left",title:a.lang("back")}),cm.addEvent(a.nodes.back,"click",a.closeHandler),cm.insertFirst(a.nodes.back,a.nodes.title)),a.renderButtonsView(),a.params.showButtons&&cm.appendChild(a.nodes.buttons,a.nodes.inner),a},c.renderViewModel=function(){var a=this;switch(d.prototype.renderViewModel.apply(a,arguments),a.params.overlayPosition){case"content":a.params["Com.Overlay"].container=a.nodes.content,a.params["Com.Request"].overlayContainer=a.nodes.content;break;case"dialog":default:a.params["Com.Overlay"].container=a.nodes.dialog,a.params["Com.Request"].overlayContainer=a.nodes.dialog}return(a.hasGetRequest||a.hasPostRequest)&&(a.params["Com.Request"].container=a.nodes.contentHolder,cm.getConstructor("Com.Request",function(b,c){a.components.request=new b(a.params[c]),a.components.request.addEvent("onStart",function(){a.isProccesing=!0}).addEvent("onEnd",function(){a.isProccesing=!1,a.params.showButtons&&a.showButtons(),a.isGetRequest?a.triggerEvent("onLoadEnd"):a.isPostRequest&&a.triggerEvent("onSaveEnd"),a.isGetRequest=!1,a.isPostRequest=!1}).addEvent("onSuccess",function(b,c){a.isGetRequest?a.loadResponse(c):a.isPostRequest&&a.saveResponse(c)}).addEvent("onError",function(){a.isGetRequest?a.loadError():a.isPostRequest&&a.saveError()}).addEvent("onContentRender",function(){a.constructCollector(a.nodes.contentHolder)}).addEvent("onContentRenderEnd",function(){cm.customEvent.trigger(a.nodes.contentHolder,"redraw",{direction:"child",self:!1})})})),!cm.isEmpty(a.params.title)&&a.setTitle(a.params.title),!cm.isEmpty(a.params.content)&&a.setContent(a.params.content),a},c.setAttributes=function(){var a=this;return d.prototype.setAttributes.apply(a,arguments),cm.addClass(a.nodes.container,["app__panel",a.params.type].join("--")),a},c.showButton=function(a){var b=this;cm.forEach(b.nodes.button,function(a){cm.addClass(a,"display-none")}),cm.isArray(a)?cm.forEach(a,function(a){b.nodes.button[a]&&cm.removeClass(b.nodes.button[a],"display-none")}):b.nodes.button[a]&&cm.removeClass(b.nodes.button[a],"display-none")},c.showButtons=function(a){var b=this;return cm.appendChild(b.nodes.buttons,b.nodes.inner),a&&cm.addClass(b.nodes.buttons,"is-immediately",!0),cm.addClass(b.nodes.buttons,"is-show",!0),b},c.renderButtonsView=function(){var a=this;return a.nodes.button={},a.nodes.buttons=cm.node("div",{"class":"buttons"},cm.node("div",{"class":"inner"},cm.node("div",{"class":"pt__buttons pull-justify"},cm.node("div",{"class":"inner"},a.nodes.button.close=cm.node("div",{"class":"button button-danger"},a.lang("close")),a.nodes.button.cancel=cm.node("div",{"class":"button button-danger"},a.lang("cancel")),a.nodes.button.save=cm.node("div",{"class":"button button-primary"},a.lang("save")),a.nodes.button.reload=cm.node("div",{
"class":"button button-primary"},a.lang("reload")),a.nodes.button.saving=cm.node("div",{"class":"button button-primary has-icon has-icon-small"},cm.node("div",{"class":"icon small loader"}),cm.node("div",{"class":"label"},a.lang("saving"))))))),a.nodes.button.cancel.setAttribute("title",a.lang("cancelDescription")),a.nodes.button.saving.setAttribute("title",a.lang("cancelDescription")),cm.addEvent(a.nodes.button.save,"click",a.saveHandler),cm.addEvent(a.nodes.button.close,"click",a.closeHandler),cm.addEvent(a.nodes.button.cancel,"click",a.cancelHandler),cm.addEvent(a.nodes.button.saving,"click",a.cancelHandler),cm.addEvent(a.nodes.button.reload,"click",a.loadHandler),a},c.windowKeydown=function(a){var b=this;return cm.isKeyCode(a.keyCode,"escape")&&b.close(),b},c.transitionOpen=function(){var a=this;return a.isOpen=!0,a.triggerEvent("onOpen"),a.triggerEvent("onOpenEnd"),a},c.transitionClose=function(){var a=this;return a.isOpen=!1,a.destructOnClose&&a.destruct(),a.params.removeOnClose&&cm.remove(a.nodes.container),a.triggerEvent("onClose"),a.triggerEvent("onCloseEnd"),a},c.loadResponse=function(a){var b=this;return b.isLoaded=!0,b.setTitle(cm.objectSelector(b.params.responseTitleKey,a.response)),b.setPreview(cm.objectSelector(b.params.responsePreviewKey,a.response)),b.showButton(["close","save"]),b.triggerEvent("onLoad"),b},c.loadError=function(){var a=this;return a.isLoaded?a.showButton(["close","save"]):a.showButton(["close","reload"]),a.triggerEvent("onLoadError"),a.triggerEvent("onError","load"),a},c.saveResponse=function(a){var b=this;return(!a.status||a.status&&b.params.renderContentOnSuccess)&&(b.setTitle(cm.objectSelector(b.params.responseTitleKey,a.response)),b.setPreview(cm.objectSelector(b.params.responsePreviewKey,a.response)),b.showButton(["close","save"])),a.status?(b.params.closeOnSuccess&&b.close(),b.triggerEvent("onSaveSuccess",a)):b.triggerEvent("onSaveFailure",a),b.triggerEvent("onSave",a),b},c.saveError=function(){var a=this;return a.showButton(["close","save"]),a.triggerEvent("onSaveError"),a.triggerEvent("onError","save"),a}}),cm.define("App.PanelContainer",{extend:"Com.AbstractContainer",events:["onOpenStart","onOpenEnd","onCloseStart","onCloseEnd"],params:{constructor:"App.Panel",container:"document.body",destructOnClose:!0,restoreHolderContent:!0,params:{destructOnClose:!1,autoOpen:!1}}},function(a){var b=this;Com.AbstractContainer.apply(b,arguments)}),cm.getConstructor("App.PanelContainer",function(a,b,c){var d=c._inherit;c.construct=function(){var a=this;return a.destructProcessHander=a.destructProcess.bind(a),a.showHandler=a.show.bind(a),a.hideHandler=a.hide.bind(a),a.addEvent("onDestructProcess",a.destructProcessHander),d.prototype.construct.apply(a,arguments),a},c.destructProcess=function(){var a=this;return a.components.finder&&a.components.finder.remove(),a},c.show=function(a){var b=this;return a&&cm.preventDefault(a),b.components.controller&&b.components.controller.show(),b},c.hide=function(a){var b=this;return a&&cm.preventDefault(a),b.components.controller&&b.components.controller.hide(),b},c.renderControllerEvents=function(){var a=this;return a.components.controller.addEvent("onOpenStart",function(){a.triggerEvent("onOpenStart",a.components.controller),a.setHolderContent(),a.afterOpenController()}),a.components.controller.addEvent("onOpenEnd",function(){a.processNestedPanels(),a.triggerEvent("onOpenEnd",a.components.controller)}),a.components.controller.addEvent("onCloseStart",function(){a.triggerEvent("onCloseStart",a.components.controller)}),a.components.controller.addEvent("onCloseEnd",function(){a.restoreHolderContent(),a.afterCloseController(),a.triggerEvent("onCloseEnd",a.components.controller)}),a},c.processNestedPanels=function(){var a=this,b=a.components.controller.getStackNode(),c={childs:!0,multiple:!0};return a.components.finder=new cm.Finder("App.PanelContainer",null,b,function(b){b.setParams({params:{type:"story",showButtons:!1,showBackButton:!0,showCloseButton:!1}}),b.addEvent("onOpenStart",a.hideHandler),b.addEvent("onCloseStart",a.showHandler)},c),a},c.setHolderContent=function(){var a=this;return!cm.isEmpty(a.nodes.content)&&cm.isParent(a.nodes.holder,a.nodes.content)&&a.components.controller.setContent(a.nodes.content),a},c.restoreHolderContent=function(){var a=this;return cm.appendChild(a.nodes.content,a.nodes.holder),a}}),cm.define("App.SearchBox",{modules:["Params","DataConfig","DataNodes"],events:["onRender"],params:{node:cm.Node("div"),"Com.Tooltip":{targetEvent:"click",hideOnReClick:!0,preventClickEvent:!0,adaptiveX:!0,adaptiveY:!1,left:"-selfWidth+targetWidth",top:"targetHeight + 8",className:"app-mod__search__tooltip"}}},function(a){var b=this,c={};b.nodes={button:cm.Node("div"),target:cm.Node("div")};var d=function(){b.setParams(a),b.getDataNodes(b.params.node),b.getDataConfig(b.params.node),e()},e=function(){c.tooltip=new Com.Tooltip(cm.merge(b.params["Com.Tooltip"],{target:b.nodes.button,content:b.nodes.target,events:{onShow:f}}))},f=function(){var a=cm.getByAttr("type","text",b.nodes.target)[0];a&&a.focus()};d()}),cm.define("App.ShutterstockManager",{extend:"Com.AbstractFileManager",params:{name:"shutterstock-manager",lazy:!0,showStats:!0,statsConstructor:"App.ShutterstockStats",statsParams:{},toolbarConstructor:"Com.Toolbar",toolbarParams:{embedStructure:"first"},searchConstructor:"Com.Input",searchParams:{embedStructure:"append",defaultValue:null,lazy:!0,icon:"icon small search linked"},categoriesRequestConstructor:"Com.Request",categoriesRequestParams:{autoSend:!1,responseHTML:!1,ajax:{type:"json",method:"get",url:"/shutterstock-api/images/categories"}},categoriesConstructor:"Com.TabsetHelper",categoriesParams:{},paginationConstructor:"Com.GalleryScrollPagination",paginationParams:{embedStructure:"append",showButton:"once",gridClass:"pt__grid--files",perPage:25,columns:5,responseCountKey:"total_count",responseHTML:!1,ajax:{type:"json",method:"get",url:"/shutterstock-api/images/search/%page%",urlPurchased:"/shutterstock-api/images/src"}},overlayConstructor:"Com.Overlay",overlayParams:{autoOpen:!1,lazy:!0,position:"absolute"},tourConstructor:"Com.Overlay",tourParams:{autoOpen:!1,lazy:!0,showSpinner:!1,showContent:!0,position:"absolute",theme:"transparent"},optimizeConstructor:"App.ShutterstockOptimizeContainer",optimizeParams:{autoOpen:!1}},strings:{categories:{_all:"All",_purchased:"My Purchased Images"},server_error:"An unexpected error has occurred. Please try again later.",empty:"There are no items to show.",tour:{content:"<p>Images are watermarked and can be used only on a temporary basis, and for evaluation purposes. To remove the watermark and obtain the usage rights to use the image on your website (only) you must purchase a license. A list of all temporary images youve downloaded, as well as the ability to purchase a use license - can be found in Modules > Manage > Shutterstock.</p>",confirm:"Yes, I agree",check:"Don't show this message again"},item:{optimize:"Optimize"}}},function(a){var b=this;b.getFilesProcessType=null,b.isLoaded=!1,Com.AbstractFileManager.apply(b,arguments)}),cm.getConstructor("App.ShutterstockManager",function(a,b,c,d){c.onConstructStart=function(){var a=this;a.categories=[{id:"_purchased",name:a.lang("categories._purchased")},{id:"_all",name:a.lang("categories._all")}],a.currentCategory=null,a.currentQuery=null,a.currentItem=null,a.optimizeItem=null,a.state="initial",a.renderCategoriesResponseHandler=a.renderCategoriesResponse.bind(a),a.renderCategoriesErrorHandler=a.renderCategoriesError.bind(a),a.renderListPageHandler=a.renderListPage.bind(a),a.renderListErrorHandler=a.renderListError.bind(a),a.renderListEmptyHandler=a.renderListEmpty.bind(a),a.setListCategoryHandler=a.setListCategory.bind(a),a.setListQueryHandler=a.setListQuery.bind(a),a.showTourHandler=a.showTour.bind(a),a.hideTourHandler=a.hideTour.bind(a)},c.onDestruct=function(){var a=this;cm.forEach(a.components,function(a){a.destruct&&a.destruct()})},c.complete=function(){var a=this;return a.currentItem&&"_purchased"===a.currentCategory&&"optimized"!==a.state?a.setOptimizeItem(a.currentItem):d.prototype.complete.apply(a,arguments),a},c.renderController=function(){var a=this;a.isLoaded=!0,cm.getConstructor(a.params.categoriesRequestConstructor,function(b){a.components.categoriesRequest=new b(cm.merge(a.params.categoriesRequestParams,{overlayContainer:a.nodes.inner})),a.components.categoriesRequest.addEvent("onSuccess",a.renderCategoriesResponseHandler),a.components.categoriesRequest.addEvent("onError",a.renderCategoriesErrorHandler),a.components.categoriesRequest.send()})},c.renderCategoriesError=function(a,b){var c=this,d=cm.isEmpty(b.message)?"server_error":b.message,e=cm.node("div",{"class":"cm__empty is-show"},c.lang(d));cm.clearNode(c.nodes.holder.inner),cm.appendChild(e,c.nodes.holder.inner),cm.removeClass(c.nodes.holder.container,"is-hidden",!0)},c.renderCategoriesResponse=function(a,b){var c=this,d=b.filtered;c.categories=cm.extend(c.categories,d),c.renderCategoriesView(),c.renderCategoriesViewModel(),cm.removeClass(c.nodes.holder.container,"is-hidden",!0),c.showTour()},c.renderCategoriesView=function(){var a=this,b={};a.nodes.categories=b,b.container=cm.node("div",{"class":"stock__view"},cm.node("div",{"class":"stock__tabs"},cm.node("div",{"class":"inner"},cm.node("div",{"class":"pt__listing-items"},b.tabsHolder=cm.node("ul")))),b.list=cm.node("div",{"class":"stock__list"},b.listHolder=cm.node("div",{"class":"inner"}))),cm.forEach(a.categories,function(b){a.renderCategoryTab(b)}),cm.clearNode(a.nodes.holder.inner),cm.appendChild(b.container,a.nodes.holder.inner)},c.renderCategoryTab=function(a){var b=this,c={};a.title=a.name.replace("/"," / "),a.label=c,c.container=cm.node("li",c.link=cm.node("a",a.title)),cm.appendChild(c.container,b.nodes.categories.tabsHolder),"_purchased"===a.id&&(c.sep=cm.node("li",{"class":"sep"}),cm.appendChild(c.sep,b.nodes.categories.tabsHolder))},c.renderCategoriesViewModel=function(){var a=this;cm.getConstructor(a.params.toolbarConstructor,function(b){a.components.toolbar=new b(cm.merge(a.params.toolbarParams,{container:a.nodes.holder.inner})),a.renderToolbar()}),cm.getConstructor(a.params.categoriesConstructor,function(b){a.components.tabset=new b(cm.merge(a.params.categoriesParams,{items:a.categories})),a.components.tabset.addEvent("onTabShowStart",a.setListCategoryHandler),a.components.tabset.set("_all")}),cm.getConstructor(a.params.overlayConstructor,function(b){a.components.overlay=new b(cm.merge(a.params.overlayParams,{container:a.nodes.categories.list}))}),cm.getConstructor(a.params.paginationConstructor,function(b){a.components.pagination=new b(cm.merge(a.params.paginationParams,{container:a.nodes.categories.listHolder,scrollNode:a.nodes.categories.listHolder})),a.components.pagination.addEvent("onStart",function(){a.removeListErrors()}),a.components.pagination.addEvent("onEnd",function(){a.components.overlay.close()}),a.components.pagination.addEvent("onPageRenderEnd",a.renderListPageHandler),a.components.pagination.addEvent("onError",a.renderListErrorHandler),a.components.pagination.addEvent("onEmpty",a.renderListEmptyHandler)}),cm.getConstructor(a.params.tourConstructor,function(b){a.components.tour=new b(cm.merge(a.params.tourParams,{container:a.nodes.container})),a.components.tour.addEvent("onOpenStart",function(){cm.addClass(a.nodes.container,"is-blur")}),a.components.tour.addEvent("onCloseStart",function(){cm.removeClass(a.nodes.container,"is-blur")})}),cm.getConstructor(a.params.optimizeConstructor,function(b){a.components.optimize=new b(a.params.optimizeParams),a.components.optimize.addEvent("onComplete",function(b,c){a.completeOptimizeItem(c)}),a.components.optimize.addEvent("onClose",function(b,c){"complete"!==a.components.optimize.state&&a.cancelOptimizeItem(c)})})},c.renderToolbar=function(){var a,b=this;b.components.toolbar.addGroup({name:"all",position:"justify",adaptive:!1,flex:!0}),b.components.toolbar.addField({name:"search",group:"all",constructor:b.params.searchConstructor,constructorParams:cm.merge(b.params.searchParams,{events:{onChange:b.setListQueryHandler}})}),a=b.components.toolbar.getField("search","all"),b.components.search=a.controller},c.renderListError=function(){var a=this;cm.isEmpty(a.components.pagination.currentPage)&&(a.nodes.categories.error||(a.nodes.categories.error=cm.node("div",{"class":"cm__empty"},a.lang("server_error"))),cm.insertFirst(a.nodes.categories.error,a.nodes.categories.listHolder),cm.addClass(a.nodes.categories.error,"is-show",!0))},c.renderListEmpty=function(){var a=this;1===a.components.pagination.currentPage&&(a.components.pagination.clear(),a.nodes.categories.empty||(a.nodes.categories.empty=cm.node("div",{"class":"cm__empty"},a.lang("empty"))),cm.insertFirst(a.nodes.categories.empty,a.nodes.categories.listHolder),cm.addClass(a.nodes.categories.empty,"is-show",!0))},c.removeListErrors=function(){var a=this;cm.removeClass(a.nodes.categories.error,"is-show"),cm.remove(a.nodes.categories.error),cm.removeClass(a.nodes.categories.empty,"is-show"),cm.remove(a.nodes.categories.empty)},c.renderListPage=function(a,b){var c=this;cm.forEach(b.data,function(a){c.renderListItem(a,b.container)})},c.renderListItem=function(a,b){var c=this,d={};a=cm.merge(a,c.convertFile(a)),a.nodes=d,d.container=cm.node("li",d.link=cm.node("div",{"class":"pt__image is-loading is-centered is-background is-cover is-hover",title:a.description},cm.node("div",{"class":"inner"},d.descr=cm.node("div",{"class":"descr"})))),d.descr.style.backgroundImage=cm.URLToCSSURL(a.thumbnail),cm.onImageLoad(a.thumbnail,function(b){a.width||a.height||(a.width=b.naturalWidth,a.height=b.naturalHeight),cm.addClass(d.link,"is-loaded",!0)}),cm.addEvent(d.link,"click",function(){c.setListItem(a)}),cm.addEvent(d.link,"dblclick",function(){c.processFiles(a),c.complete()}),cm.appendChild(d.container,b)},c.setListCategory=function(a,b){var c=this;c.currentCategory=b.id,c.setPagination()},c.setListQuery=function(a,b){var c=this;c.currentQuery=b,c.setPagination()},c.setListItem=function(a){var b=this;b.currentItem&&(cm.removeClass(b.currentItem.nodes.link,"active"),b.currentItem=null),cm.addClass(a.nodes.link,"active"),b.currentItem=a,b.processFiles(a)},c.setPagination=function(){var a=this,b="_purchased"===a.currentCategory?1:0,c="_purchased"===a.currentCategory?"urlPurchased":"url",d=/^_/.test(a.currentCategory)?null:a.currentCategory,e="_purchased"===a.currentCategory?null:a.currentQuery;"_purchased"===a.currentCategory?a.components.search.disable():a.components.search.enable(),a.components.pagination&&(a.components.overlay.open(),a.components.pagination.setParams({pageCount:b}),a.components.pagination.setAction({url:a.params.paginationParams.ajax[c],params:{category:d,query:e}}))},c.setOptimizeItem=function(a){var b=this;b.state="optimizing",b.optimizeItem=a,b.components.optimize.set({width:a.filters.width||a.width,height:a.filters.height||a.height}),b.components.optimize.open()},c.completeOptimizeItem=function(a){var b=this;b.state="optimized",b.optimizeItem.filters.width=a.width,b.optimizeItem.filters.height=a.height,b.processFiles(b.optimizeItem),b.complete()},c.cancelOptimizeItem=function(){var a=this;a.state="initial",a.optimizeItem=null},c.renderTourView=function(){var a=this,b={};a.nodes.tour=b,b.container=cm.node("div",{"class":"stock__tour"},cm.node("div",{"class":"inner"},cm.node("div",{"class":"stock__tour__content",innerHTML:a.lang("tour.content")}),cm.node("div",{"class":"pt__buttons"},b.buttonsInner=cm.node("div",{"class":"inner"},b.buttonsLeft=cm.node("div",{"class":"left"}),b.buttonsRight=cm.node("div",{"class":"right"},b.confirm=cm.node("div",{"class":"button button-primary"},a.lang("tour.confirm"))))))),cm.getConstructor("Com.Check",function(c){a.components.tourCheck=new c({placeholder:a.lang("tour.check"),container:b.buttonsLeft})}),cm.addEvent(b.confirm,"click",a.hideTourHandler),a.components.tour.setContent(b.container)},c.showTour=function(){var a=this,b="yes"===a.storageRead("tourConfirmed");b||(a.renderTourView(),a.components.tour.open())},c.hideTour=function(){var a=this,b=a.components.tourCheck.get();b&&a.storageWrite("tourConfirmed","yes"),a.components.tour.close()},c.convertFile=function(a){return a.assets?{value:a.assets.preview.url,name:a.assets.preview.url.split("/").pop(),description:a.description,url:a.assets.preview.url,thumbnail:a.assets.huge_thumb.url,mime:a.media_type,size:null,width:a.assets.preview.width,height:a.assets.preview.height,filters:a.filters||{},id:a.id,source:"shutterstock_preview"}:{value:a.src,name:a.src.split("/").pop(),description:"",url:a.src,thumbnail:a.thumbnail||a.src,mime:null,size:null,width:a.width||0,height:a.height||0,filters:a.filters||{},id:a.id,source:"shutterstock_purchased"}}}),cm.define("App.ShutterstockOptimize",{extend:"Com.AbstractController",params:{renderStructure:!0,embedStructureOnRender:!0,controllerEvents:!0,item:{},formConstructor:"Com.Form",formParams:{embedStructure:"append",validate:!1,renderButtons:!1,renderButtonsSeparator:!1}},strings:{form:{width:"Width:",height:"Height:"}}},function(a){var b=this;Com.AbstractController.apply(b,arguments)}),cm.getConstructor("App.ShutterstockOptimize",function(a,b,c,d){c.onConstructStart=function(){var a=this;a.item=null,a.aspect=null,a.setWidthHandler=a.setWidth.bind(a),a.setHeightHandler=a.setHeight.bind(a),a.changeInputsHandler=a.changeInputs.bind(a)},c.onConstructEnd=function(){var a=this;a.set(a.params.item)},c.renderView=function(){var a=this;a.nodes.container=cm.node("div",{"class":"app__shutterstock-optimize"})},c.renderViewModel=function(){var a=this;d.prototype.renderViewModel.apply(a,arguments),cm.getConstructor(a.params.formConstructor,function(b){a.components.form=new b(cm.merge(a.params.formParams,{container:a.nodes.container})),a.renderFormFields()})},c.renderFormFields=function(){var a=this;a.components.form.add("indent",{name:"width",label:a.lang("form.width"),maxLength:9,defaultValue:0,constructorParams:{events:{onInput:a.setWidthHandler,onChange:a.changeInputsHandler}}}).add("indent",{name:"height",label:a.lang("form.height"),maxLength:9,defaultValue:0,constructorParams:{events:{onInput:a.setHeightHandler,onChange:a.changeInputsHandler}}})},c.setWidth=function(){var a=this,b=a.components.form.getField("width"),c=a.components.form.getField("height"),d=b.fieldController.getRaw(),e=Math.round(parseFloat(d)/a.aspect);a.aspect&&c.fieldController.set(e,!1)},c.setHeight=function(){var a=this,b=a.components.form.getField("height"),c=a.components.form.getField("width"),d=b.fieldController.getRaw(),e=Math.round(parseFloat(d)*a.aspect);a.aspect&&c.fieldController.set(e,!1)},c.changeInputs=function(){var a=this,b=a.components.form.getField("width"),c=a.components.form.getField("height"),d=b.fieldController.getRaw(),e=c.fieldController.getRaw();d&&"0px"!==d||b.fieldController.set(a.item.width,!1),e&&"0px"!==e||c.fieldController.set(a.item.height,!1)},c.set=function(a){var b=this;b.item=a,b.aspect=b.item.width/b.item.height,b.components.form.set(b.item,!1)},c.get=function(){var a=this;return a.components.form.get()}}),cm.define("App.ShutterstockOptimizeContainer",{extend:"Com.AbstractContainer",events:["onComplete","onCancel"],params:{item:{},constructor:"App.ShutterstockOptimize",params:{embedStructure:"append"},placeholder:!0,placeholderConstructor:"Com.DialogContainer",placeholderParams:{renderButtons:!0,renderHelp:!0,params:{width:500}}},strings:{title:"Select Image Size",close:"Cancel",save:"Select",help:'<div class="pt__listing-clear"><ul><li>Shutterstock images are too large to be uploaded to your website in their default size. Doing so will slow down the load time of your web page.</li><li>You can re-size the image width and height using the fields below, in order to optimize the image for your web page.</li><li>1600-2000px width is good for the images that are used as backgrounds, or header images.</li><li>600-1000px width will work fine for the images that are used in the content.</li><li>The width/height aspect ratio is locked, so your image will not distort after resizing.</li></ul></div>'}},function(a){var b=this;Com.AbstractContainer.apply(b,arguments)}),cm.getConstructor("App.ShutterstockOptimizeContainer",function(a,b,c,d){c.construct=function(){var a=this;a.state="initial",a.completeHandler=a.complete.bind(a),d.prototype.construct.apply(a,arguments)},c.renderPlaceholderButtons=function(){var a=this;a.components.placeholder.addButton({name:"close",label:a.lang("close"),style:"button-transparent",callback:a.closeHandler}),a.components.placeholder.addButton({name:"save",label:a.lang("save"),style:"button-primary",callback:a.completeHandler})},c.set=function(a){var b=this;return b.params.params.item=a,b.components.controller&&b.components.controller.set(a),b},c.get=function(){var a=this;return a.components.controller&&a.components.controller.get&&a.components.controller.get()},c.complete=function(){var a=this;return a.state="complete",a.triggerEvent("onComplete",a.get()),a.close(),a}}),cm.define("App.ShutterstockStats",{extend:"Com.AbstractController",params:{adminLink:"/admin/shutterstock/"},strings:{message:'A list of all temporary images youve downloaded, as well as the ability to purchase a use license - can be found <a href="%adminLink%" target="_blank">here</a>.'}},function(a){var b=this;Com.AbstractController.apply(b,arguments)}),cm.getConstructor("App.ShutterstockStats",function(a,b,c,d){c.renderView=function(){var a=this;a.triggerEvent("onRenderViewStart"),a.nodes.container=cm.node("div",{"class":"com__file-stats"},a.nodes.content=cm.node("div",{"class":"pt__line-info"},cm.node("div",{"class":"icon small info"}),cm.node("div",{"class":"item",innerHTML:a.lang("message",{"%adminLink%":a.params.adminLink})}))),a.triggerEvent("onRenderViewProcess"),a.triggerEvent("onRenderViewEnd")}}),cm.define("App.Sidebar",{modules:["Params","Events","DataConfig","DataNodes","Storage","Stack"],events:["onRenderStart","onRender","onCollapseStart","onCollapse","onCollapseEnd","onExpandStart","onExpand","onExpandEnd","onTabShow","onTabHide","onResize"],params:{node:cm.node("div"),name:"app-sidebar",duration:"cm._config.animDurationLong",active:"template-manager",target:"document.html",remember:!0,theme:"dark",ajax:{type:"json",method:"get",url:"",params:""},"Com.TabsetHelper":{node:cm.Node("div"),name:"",responseHTML:!0},"Com.Overlay":{theme:"dark",className:"sidebar__overlay"}}},function(a){var b=this;b.nodes={container:cm.Node("div"),inner:cm.Node("div"),collapseButtons:[],labels:[],tabs:[]},b.components={},b.isExpanded=null,b.openInterval=null,b.currentTab=null,b.previousTab=null;var c=function(){d(),b.setParams(a),b.convertEvents(b.params.events),b.getDataNodes(b.params.node),b.getDataConfig(b.params.node),e(),b.triggerEvent("onRenderStart"),f(),b.addToStack(b.params.node),b.triggerEvent("onRender")},d=function(){b.params.duration=cm.getTransitionDurationFromLESS("AppSidebar-Duration",b.params.duration),b.params.theme=cm.getLESSVariable("AppSidebar-Theme",b.params.theme).toLowerCase()},e=function(){b.params["Com.Overlay"].theme=b.params.theme,b.params["Com.Overlay"].name=b.params.name,b.params["Com.TabsetHelper"].node=b.nodes.inner,b.params["Com.TabsetHelper"].name=[b.params.name,"tabset"].join("-"),b.params["Com.TabsetHelper"].ajax=b.params.ajax,b.params["Com.TabsetHelper"].overlayParams=b.params["Com.Overlay"]},f=function(){var a,c;g(),cm.forEach(b.nodes.collapseButtons,function(a){cm.addEvent(a.container,"click",b.toggle)}),a=cm.isClass(b.nodes.container,"is-expanded"),b.params.remember&&(c=b.storageRead("isExpanded"),a=null!==c?c:a),a?b.expand(!0,!0):b.collapse(!0,!0),cm.addEvent(window,"resize",h),cm.customEvent.add(b.nodes.container,"scrollSizeChange",h)},g=function(){cm.getConstructor("Com.TabsetHelper",function(a){b.components.tabset=new a(b.params["Com.TabsetHelper"]).addEvent("onLabelTarget",function(a,c){b.isExpanded&&a.get()!==c.id||b.toggle()}).addEvent("onTabHide",function(a,c){b.previousTab=c,b.triggerEvent("onTabHide",c)}).addEvent("onTabShow",function(a,c){b.currentTab=c,b.triggerEvent("onTabShow",c)}).processTabs(b.nodes.tabs,b.nodes.labels).set(b.params.active)}),cm.forEach(b.nodes.tabs,function(a){cm.addIsolateScrolling(a.descr)})},h=function(){animFrame(function(){cm._pageSize.winWidth<=cm._config.adaptiveFrom&&b.isExpanded&&b.collapse(!0)})},i=function(){cm.replaceClass(b.params.target,"is-sidebar--collapsed is-sidebar--expanding","is-sidebar--expanded",!0),b.triggerEvent("onExpandEnd")},j=function(){cm.replaceClass(b.params.target,"is-sidebar--expanded is-sidebar--collapsing","is-sidebar--collapsed",!0),b.triggerEvent("onCollapseEnd")};b.collapse=function(a,c){return(c||"boolean"!=typeof b.isExpanded||b.isExpanded)&&(b.isExpanded=!1,b.params.remember&&b.storageWrite("isExpanded",!1),b.triggerEvent("onCollapseStart"),a&&(cm.addClass(b.nodes.container,"is-immediately"),cm.addClass(b.params.target,"is-immediately")),cm.replaceClass(b.nodes.container,"is-expanded","is-collapsed",!0),cm.addClass(b.params.target,"is-sidebar--collapsing",!0),b.triggerEvent("onCollapse"),cm.forEach(b.nodes.collapseButtons,function(a){cm.removeClass(a.container,"active")}),b.openInterval&&clearTimeout(b.openInterval),a?(j(),b.openInterval=setTimeout(function(){cm.removeClass(b.nodes.container,"is-immediately"),cm.removeClass(b.params.target,"is-immediately")},5)):b.openInterval=setTimeout(function(){j()},b.params.duration+5)),b},b.expand=function(a,c){return(c||"boolean"!=typeof b.isExpanded||!b.isExpanded)&&(b.isExpanded=!0,b.params.remember&&b.storageWrite("isExpanded",!0),b.triggerEvent("onExpandStart"),a&&(cm.addClass(b.nodes.container,"is-immediately"),cm.addClass(b.params.target,"is-immediately")),cm.replaceClass(b.nodes.container,"is-collapsed","is-expanded",!0),cm.addClass(b.params.target,"is-sidebar--expanding",!0),b.triggerEvent("onExpand"),cm.forEach(b.nodes.collapseButtons,function(a){cm.addClass(a.container,"active")}),b.openInterval&&clearTimeout(b.openInterval),a?(i(),b.openInterval=setTimeout(function(){cm.removeClass(b.nodes.container,"is-immediately"),cm.removeClass(b.params.target,"is-immediately")},5)):b.openInterval=setTimeout(function(){i()},b.params.duration+5)),b},b.toggle=function(){return b.isExpanded?b.collapse():b.expand(),b},b.refresh=function(){return b.components.tabset&&b.components.tabset.refresh(),b},b.setTab=function(a){return b.components.tabset&&b.components.tabset.set(a),b},b.unsetTab=function(){return b.components.tabset&&b.components.tabset.unset(),b},b.getTab=function(){return b.components.tabset?b.components.tabset.get():null},b.refreshTab=function(a){return b.components.tabset&&b.components.tabset.refreshTab(a),b},b.getDimensions=function(a){var c=cm.getRect(b.nodes.container);return c[a]||c},b.getNodes=function(a){return b.nodes[a]||b.nodes},c()}),cm.define("App.Template",{modules:["Params","Events","DataConfig","DataNodes","Stack"],events:["onRenderStart","onRender","onRedraw","onResize","enableEditing","disableEditing"],params:{node:cm.node("div"),name:"app-template",scrollNode:"document.body",scrollDuration:1e3,topMenuName:"app-topmenu",sidebarName:"app-sidebar",editorName:"app-editor",template:{type:"box",width:1e3,align:"center",indent:24},header:{fixed:!1,overlapping:!1,sticky:!1,transformed:!1,mobileFixed:null,mobileOverlapping:null},content:{editableIndent:0},footer:{sticky:!0}}},function(a){var b=this;b.nodes={container:cm.node("div"),inner:cm.node("div"),headerContainer:cm.node("div"),headerTransformed:cm.node("div"),header:cm.node("div"),header2:cm.node("div"),content:cm.node("div"),footer:cm.node("div"),buttonUp:cm.node("div"),buttonsUp:[]},b.isEditing=null,b.components={},b.anim={},b.offsets={};var c=function(){d(),b.setParams(a),b.convertEvents(b.params.events),b.getDataNodes(b.params.node),b.getDataConfig(b.params.node),e(),b.addToStack(b.params.node),b.triggerEvent("onRenderStart"),f(),j(!0),b.triggerEvent("onRender")},d=function(){b.params.content.editableIndent=cm.getLESSVariable("AppTpl-Content-EditableIndent",b.params.content.editableIndent,!0)},e=function(){cm.isBoolean(b.params.header.mobileOverlapping)||(b.params.header.mobileOverlapping=b.params.header.overlapping),cm.isBoolean(b.params.header.mobileFixed)||(b.params.header.mobileFixed=b.params.header.fixed)},f=function(){b.nodes.headerSpace=cm.node("div",{"class":"tpl__header__space"}),cm.insertAfter(b.nodes.headerSpace,b.nodes.headerContainer),cm.find("App.TopMenu",b.params.topMenuName,null,function(a){b.components.topMenu=a}),cm.find("App.Sidebar",b.params.sidebarName,null,function(a){b.components.sidebar=a}),new cm.Finder("App.Editor",b.params.editorName,null,function(a){b.components.editor=a},{event:"onProcessStart"}),b.anim.scroll=new cm.Animation(b.params.scrollNode),cm.addEvent(b.nodes.buttonUp,"click",b.scrollToTop),cm.addEvent(window,"resize",function(){animFrame(function(){b.triggerEvent("onResize"),j(!0)})}),cm.addEvent(window,"scroll",function(){animFrame(function(){k()})})},g=function(){cm.getPageSize("winWidth")<=cm._config.screenTabletPortrait?(b.params.header.mobileOverlapping&&cm.addClass(b.nodes.headerContainer,"is-overlapping"),b.params.header.mobileFixed&&cm.addClass(b.nodes.headerContainer,"is-fixed"),b.params.header.mobileFixed&&!b.params.header.mobileOverlapping&&cm.addClass(b.nodes.headerSpace,"is-show")):(b.params.header.overlapping&&cm.addClass(b.nodes.headerContainer,"is-overlapping"),b.params.header.fixed&&cm.addClass(b.nodes.headerContainer,"is-fixed"),b.params.header.fixed&&!b.params.header.overlapping&&cm.addClass(b.nodes.headerSpace,"is-show")),cm.addClass(b.nodes.headerTransformed,"is-fixed"),cm.removeClass(b.nodes.headerTransformed,"is-show")},h=function(){cm.removeClass(b.nodes.headerContainer,"is-overlapping is-fixed"),cm.removeClass(b.nodes.headerSpace,"is-show"),cm.removeClass(b.nodes.headerTransformed,"is-fixed"),b.params.header.transformed&&cm.addClass(b.nodes.headerTransformed,"is-show")},i=function(){h(),(!b.isEditing||cm.getPageSize("winWidth")<=cm._config.screenTabletPortrait)&&g()},j=function(a){i(),l(),m(),n(),a&&b.triggerEvent("onRedraw")},k=function(){l(),n()},l=function(){b.offsets.top=b.components.topMenu?b.components.topMenu.getDimensions("height"):0,b.offsets.left=b.components.sidebar?b.components.sidebar.getDimensions("width"):0,b.offsets.header=b.nodes.header.offsetHeight,b.offsets.header2=b.nodes.header2.offsetHeight,b.offsets.footer=b.nodes.footer.offsetHeight,b.offsets.height=cm.getPageSize("winHeight")-b.offsets.top,b.offsets.scrollTop=cm.getBodyScrollTop()},m=function(){b.nodes.inner.style.minHeight=b.offsets.height+"px",b.isEditing?b.params.footer.sticky&&(b.offsets.contentHeightCalc=b.offsets.height-b.offsets.header-b.offsets.footer-2*b.params.content.editableIndent,b.params.header.transformed&&(b.offsets.contentHeightCalc=b.offsets.contentHeightCalc-b.offsets.header2-b.params.content.editableIndent),b.nodes.content.style.minHeight=Math.max(b.offsets.contentHeightCalc,0)+"px"):(b.params.header.fixed&&!b.params.header.overlapping&&(b.nodes.headerSpace.style.height=b.offsets.header+"px"),b.params.footer.sticky&&(b.params.header.overlapping?b.nodes.content.style.minHeight=Math.max(b.offsets.height-b.offsets.footer,0)+"px":b.nodes.content.style.minHeight=Math.max(b.offsets.height-b.offsets.header-b.offsets.footer,0)+"px"))},n=function(){b.params.header.transformed&&(b.isEditing?cm.addClass(b.nodes.headerTransformed,"is-show"):b.offsets.scrollTop>=b.offsets.header?cm.addClass(b.nodes.headerTransformed,"is-show"):cm.removeClass(b.nodes.headerTransformed,"is-show"))};b.redraw=function(a){return a=cm.isUndefined(a)?!0:a,j(a),b},b.enableEditing=function(){return cm.isBoolean(b.isEditing)&&b.isEditing||(b.isEditing=!0,cm.addClass(b.nodes.container,"is-editing"),b.redraw(),b.triggerEvent("enableEditing")),b},b.disableEditing=function(){return(!cm.isBoolean(b.isEditing)||b.isEditing)&&(b.isEditing=!1,cm.removeClass(b.nodes.container,"is-editing"),b.redraw(),b.triggerEvent("disableEditing")),
b},b.scrollTo=function(a,c){return b.anim.scroll.go({style:{docScrollTop:a},duration:c,anim:"smooth"}),b},b.scrollToTop=function(){return b.scrollTo(0,b.params.scrollDuration),b},b.scrollStop=function(){return b.anim.scroll.stop(),b},b.getTopMenuDimensions=function(a){return b.components.topMenu?b.components.topMenu.getDimensions(a):null},b.getHeaderDimensions=function(a){var c=cm.getRect(b.nodes.header);return a?c[a]:c},b.getHeader2Dimensions=function(a){var c=cm.getRect(b.nodes.header2);return a?c[a]:c},b.getFixedHeaderHeight=function(){return Math.max(b.params.header.fixed?b.getHeaderDimensions("height"):0,b.params.header.transformed?b.getHeader2Dimensions("height"):0)},b.getFooterDimensions=function(a){var c=cm.getRect(b.nodes.footer);return a?c[a]:c},b.getNodes=function(a){return b.nodes[a]||b.nodes},c()}),cm.define("App.TopMenu",{modules:["Params","Events","DataConfig","DataNodes","Stack"],events:["onRender","onCollapse","onExpand","onUndo","onRedo"],params:{node:cm.node("div"),name:"app-topmenu",target:"document.html"}},function(a){var b,c=this;c.nodes={container:cm.node("div"),inner:cm.node("div"),button:cm.node("div"),target:cm.node("div"),items:{}},c.isExpanded=!1;var d=function(){c.setParams(a),c.convertEvents(c.params.events),c.getDataNodes(c.params.node),c.getDataConfig(c.params.node),c.addToStack(c.params.node),e(),c.triggerEvent("onRender")},e=function(){f(),c.isExpanded=cm.isClass(c.nodes.container,"is-expanded"),cm.addEvent(c.nodes.button,"click",c.toggle),c.nodes.items.undo&&cm.addEvent(c.nodes.items.undo.link,"click",c.undo),c.nodes.items.redo&&cm.addEvent(c.nodes.items.redo.link,"click",c.redo),cm.addEvent(window,"resize",f)},f=function(){cm.addClass(c.nodes.container,"cm__transition-disable"),b&&clearTimeout(b),b=setTimeout(function(){cm.removeClass(c.nodes.container,"cm__transition-disable")},5)};c.undo=function(){return c.triggerEvent("onUndo"),c},c.redo=function(){return c.triggerEvent("onRedo"),c},c.expand=function(){return c.isExpanded||(c.isExpanded=!0,cm.addClass(c.nodes.button,"active"),cm.replaceClass(c.nodes.container,"is-collapsed","is-expanded"),cm.replaceClass(c.params.target,"is-topmenu--collapsed","is-topmenu--expanded",!0),c.triggerEvent("onExpand")),c},c.collapse=function(){return c.isExpanded&&(c.isExpanded=!1,cm.removeClass(c.nodes.button,"active"),cm.replaceClass(c.nodes.container,"is-expanded","is-collapsed"),cm.replaceClass(c.params.target,"is-topmenu--expanded","is-topmenu--collapsed",!0),c.triggerEvent("onCollapse")),c},c.toggle=function(){return c.isExpanded?c.collapse():c.expand(),c},c.setActiveItem=function(a){var b;return a&&(b=c.nodes.items[a])&&cm.addClass(b.container,"active"),c},c.unsetActiveItem=function(a){var b;return a&&(b=c.nodes.items[a])&&cm.removeClass(b.container,"active"),c},c.getItem=function(a){var b;return a&&(b=c.nodes.items[a])?b:null},c.getDimensions=function(a){var b=cm.getRect(c.nodes.container);return b[a]||b},c.getNodes=function(a){return c.nodes[a]||c.nodes},d()}),App._Zones={},cm.define("App.Zone",{modules:["Params","Events","DataConfig","Stack"],events:["onRenderStart","onRender","onRemove"],params:{node:cm.Node("div"),type:"template-manager",instanceId:!1,zone:0,layerId:0,link:!1,locked:!1,disallow:[],editorName:"app-editor"}},function(a){var b=this;b.isEditing=null,b.isRemoved=!1,b.isActive=!1,b.styleObject=null,b.offsets=null,b.dimensions=null,b.components={},b.node=null,b.block=null,b.dummyBlocks=[],b.blocks=[];var c=function(){b.setParams(a),b.convertEvents(b.params.events),b.getDataConfig(b.params.node),d(),b.triggerEvent("onRenderStart"),e(),b.addToStack(b.params.node),b.triggerEvent("onRender")},d=function(){b.params.link?(b.params.linkName=[b.params.link.type,b.params.link.positionId,b.params.zone].join("_"),b.params.blockName=[b.params.link.type,b.params.link.positionId].join("_")):b.params.blockName=[b.params.type,b.params.positionId].join("_"),cm.isNumber(b.params.instanceId)||cm.isString(b.params.instanceId)?b.params.name=[b.params.type,b.params.instanceId,b.params.positionId,b.params.zone].join("_"):b.params.name=[b.params.type,b.params.positionId,b.params.zone].join("_"),App._Zones[b.params.name]=b},e=function(){b.node=b.params.node,b.getDimensions(),cm.addClass(b.node,"app__zone"),cm.addClass(b.node,["is",b.params.type].join("-")),b.params.locked?cm.addClass(b.node,"is-locked"):cm.addClass(b.node,"is-available"),cm.find("App.Editor",b.params.editorName,null,function(a){new cm.Finder("App.Block",b.params.blockName,null,f),h(a)})},f=function(a){a&&(b.block=a,b.block.addZone(b))},g=function(a){a&&(b.block=a,b.block.removeZone(b),b.block=null)},h=function(a){a&&(b.components.editor=a,b.components.editor.addZone(b))},i=function(a){a&&(b.components.editor=a,b.components.editor.removeZone(b))};b.register=function(a){var c=App._Blocks[b.params.blockName];return f(c),h(a),b},b.enableEditing=function(){return cm.isBoolean(b.isEditing)&&b.isEditing||(b.isEditing=!0,cm.addClass(b.node,"is-editing",!0),b.params.locked||cm.addClass(b.node,"is-editable",!0),b.getDimensions()),b},b.disableEditing=function(){return(!cm.isBoolean(b.isEditing)||b.isEditing)&&(b.isEditing=!1,cm.removeClass(b.node,"is-editing",!0),b.params.locked||cm.removeClass(b.node,"is-editable",!0),b.getDimensions()),b},b.addBlock=function(a,c){return a.isDummy?!cm.isUndefined(c)&&cm.isNumber(c)?b.dummyBlocks[c]=a:b.dummyBlocks.push(a):!cm.isUndefined(c)&&cm.isNumber(c)?b.blocks.splice(c,0,a):b.blocks.push(a),b},b.removeBlock=function(a){return a.isDummy?cm.arrayRemove(b.dummyBlocks,a):cm.arrayRemove(b.blocks,a),b},b.getBlockIndex=function(a){return a.isDummy?b.dummyBlocks.indexOf(a):b.blocks.indexOf(a)},b.getBlock=function(a){return b.blocks[a]},b.highlight=function(){return b.params.locked||cm.addClass(b.node,"is-highlight"),b},b.unhighlight=function(){return b.params.locked||cm.removeClass(b.node,"is-highlight"),b},b.active=function(){return b.params.locked||(b.isActive=!0,cm.addClass(b.node,"is-active")),b},b.unactive=function(){return b.params.locked||(b.isActive=!1,cm.removeClass(b.node,"is-active")),b},b.remove=function(){if(!b.isRemoved){for(b.isRemoved=!0,g(b.block),i(b.components.editor);b.blocks.length;)b.blocks[0].remove();delete App._Zones[b.params.name],b.removeFromStack(),cm.remove(b.params.node),b.triggerEvent("onRemove")}return b},b.getDimensions=function(){return b.styleObject||(b.styleObject=cm.getStyleObject(b.node)),b.dimensions=cm.getNodeOffset(b.node,b.styleObject,null),b.dimensions},b.updateDimensions=function(){return b.dimensions=cm.getNodeOffset(b.node,b.styleObject,b.dimensions),b.dimensions},c()}),cm.define("App.elFinderFileManager",{extend:"Com.AbstractFileManager",params:{lazy:!1,config:{url:"",lang:{},dotFiles:!1,useBrowserHistory:!1,resizable:!1,width:"auto",height:"auto",commandsOptions:{getfile:{folders:!1,multiple:!1}}}}},function(a){var b=this;b.getFilesProcessType=null,b.isLoaded=!1,Com.AbstractFileManager.apply(b,arguments)}),cm.getConstructor("App.elFinderFileManager",function(a,b,c,d){c.construct=function(){var a=this;a.getFilesEventHandler=a.getFilesEvent.bind(a),d.prototype.construct.apply(a,arguments)},c.get=function(){var a=this;return a.getFilesProcessType="get",a.components.controller?a.components.controller.exec("getfile"):d.prototype.get.apply(a,arguments),a},c.complete=function(){var a=this;return a.getFilesProcessType="complete",a.components.controller?a.components.controller.exec("getfile"):d.prototype.complete.apply(a,arguments),a},c.redraw=function(){var a=this;return a.components.controller&&a.components.controller.resize("auto","auto"),a.triggerEvent("onRedraw"),a},c.renderController=function(){var a=this;return a.components.controller||("undefined"!=typeof elFinder?(a.isLoaded=!0,a.components.controller=new elFinder(a.nodes.holder.inner,cm.merge(a.params.config,{commandsOptions:{getfile:{multiple:a.isMultiple}},getFileCallback:a.getFilesEventHandler})),cm.removeClass(a.nodes.holder.container,"is-hidden",!0),a.components.controller.show(),a.components.controller.resize("auto","auto")):cm.errorLog({name:a._name.full,message:["elFinder does not exists."].join(" ")})),a},c.getFilesEvent=function(a){var b=this;switch(b.processFiles(a),b.getFilesProcessType){case"get":d.prototype.get.call(b);break;case"complete":d.prototype.complete.call(b);break;default:d.prototype.complete.call(b)}return b.getFilesProcessType=null,b},c.convertFile=function(a){return a&&"directory"!==a.mime?{value:a.url,name:a.name,mime:a.mime,size:a.size,url:a.url,source:"elFinder"}:!1}}),cm.define("App.elFinderFileManagerContainer",{extend:"Com.AbstractFileManagerContainer",params:{constructor:"App.elFinderFileManager"}},function(a){var b=this;Com.AbstractFileManagerContainer.apply(b,arguments)}),cm.define("Module.Anchor",{extend:"App.AbstractModule",params:{renderStructure:!1,embedStructureOnRender:!1,duration:"cm._config.animDuration",scroll:"document.body",topMenuName:"app-topmenu",templateName:"app-template",customEvents:!0,resizeEvent:!0,scrollEvent:!0}},function(a){var b=this;App.AbstractModule.apply(b,arguments)}),cm.getConstructor("Module.Anchor",function(a,b,c){var d=c._inherit;c.construct=function(){var a=this;return a.isActive=!1,a.isHashProcess=!1,a.isRenewProcess=!1,a.topMenuParams={},a.templateParams={},a.onHashChangeHandler=a.onHashChange.bind(a),a.onConstructEndHandler=a.onConstructEnd.bind(a),a.onDestructProcessHandler=a.onDestructProcess.bind(a),a.onRedrawHandler=a.onRedraw.bind(a),a.onScrollHandler=a.onScroll.bind(a),a.addEvent("onConstructEnd",a.onConstructEndHandler),a.addEvent("onDestructProcess",a.onDestructProcessHandler),a.addEvent("onRedraw",a.onRedrawHandler),a.addEvent("onScroll",a.onScrollHandler),d.prototype.construct.apply(a,arguments),a},c.onConstructEnd=function(){var a=this;return a.prepareHash({immediately:!0,force:!0}),a},c.onDestructProcess=function(){var a=this;return cm.removeEvent(window,"hashchange",a.onHashChangeHandler),a.clearHash(),a},c.onRedraw=function(){var a=this;return a.prepareHash({immediately:!0,force:!0}),a},c.onScroll=function(){var a=this;return a.isHashProcess||a.clearHash(),a},c.onHashChange=function(a){var b=this;return b.isRenewProcess?(cm.preventDefault(a),b.isRenewProcess=!1,b.isActive=!1):(b.isHashActive()&&cm.preventDefault(a),b.prepareHash({immediately:!1,force:!1})),b},c.renderViewModel=function(){var a=this;return d.prototype.renderViewModel.apply(a,arguments),new cm.Finder("App.TopMenu",a.params.topMenuName,null,function(b){a.components.topMenu=b,a.topMenuParams=a.components.topMenu.getParams()}),new cm.Finder("App.Template",a.params.templateName,null,function(b){a.components.template=b,a.templateParams=a.components.template.getParams()}),a.components.animation=new cm.Animation(a.params.scroll),cm.addEvent(window,"hashchange",a.onHashChangeHandler),a},c.prepareHash=function(a){var b=this;return a=cm.merge({immediately:!1,force:!1},a),b.isHashActive()?(!b.isActive||a.force)&&(b.isActive=!0,b.processHash(a)):b.isActive=!1,b},c.processHash=function(a){var b=this,c={},d=0;return d=cm.getY(b.params.node),b.components.topMenu&&(d-=b.components.topMenu.getDimensions("height")),b.components.template&&b.templateParams.header.fixed&&(d-=b.components.template.getHeaderDimensions("height")),d=Math.max(d,0),d=Math.min(d,cm._pageSize.scrollHeight),a.immediately?(b.isHashProcess=!1,cm.setScrollTop(b.params.scroll,d)):(b.isHashProcess=!0,c=b.params.scroll==document.body?{docScrollTop:d}:{scrollTop:d},b.components.animation.go({style:c,anim:"smooth",duration:b.params.duration,onStop:function(){setTimeout(function(){b.isHashProcess=!1},500)}})),b},c.clearHash=function(){var a,b=this;return cm._isDocumentLoad&&b.isHashActive()&&(b.isRenewProcess=!0,a=window.location.href.replace(/(#.*)$/,""),window.location.hash=["__hash",Date.now(),"hash__"].join("--"),window.history.replaceState(null,null,a)),b},c.isHashActive=function(){var a=this,b=decodeURIComponent(window.location.hash.replace(/^#/,""));return a.params.name===b}}),cm.define("Module.Calendar",{modules:["Params","Events","Langs","DataConfig","DataNodes","Callbacks","Stack"],events:["onRenderStart","onRender","onError","onAbort","onSuccess","onSendStart","onSendEnd","onProcessEnd"],params:{node:cm.node("div"),name:"",defaultView:"agenda",isViewPreloaded:!1,animateDuration:"cm._config.animDuration",showLoader:!0,loaderDelay:"cm._config.loadDelay",responseKey:"data",responseHTML:!0,ajax:{type:"json",method:"get",url:"",params:{view:"%view%",week:"%week%",month:"%month%",year:"%year%",query:"%query%"}},"Com.Overlay":{position:"absolute",autoOpen:!1,removeOnClose:!0,appendMode:"insertFirst"}},strings:{server_error:"An unexpected error has occurred. Please try again later."}},function(a){var b=this,c={view:null,week:null,month:null,year:null,query:null};b.nodes={container:cm.node("div"),buttons:{views:{agenda:cm.node("div"),week:cm.node("div"),month:cm.node("div")}},holder:{container:cm.node("div"),inner:cm.node("div")}},b.components={},b.animations={},b.ajaxHandler=null,b.isProcess=!1,b.isRendering=!1,b.loaderDelay=null,b.viewDetails=cm.clone(c);var d=function(){b.setParams(a),b.convertEvents(b.params.events),b.getDataNodes(b.params.node),b.getDataConfig(b.params.node),e(),b.addToStack(b.params.node),b.triggerEvent("onRenderStart"),f(),b.addToStack(b.nodes.container),b.triggerEvent("onRender")},e=function(){b.params.name=b.params.name.toString(),b.params.defaultView=cm.inArray(["agenda","week","month"],b.params.defaultView)?b.params.defaultView:"month",b.params["Com.Overlay"].container=b.nodes.container},f=function(){cm.getConstructor("Com.Overlay",function(a,c){b.components.loader=new a(b.params[c])}),b.animations.response=new cm.Animation(b.nodes.holder.container),cm.forEach(b.nodes.buttons.views,function(a,b){cm.addEvent(a,"click",function(a){cm.preventDefault(a),h({view:b})})}),new cm.Finder("Module.CalendarAgenda",b.params.name,b.nodes.holder.inner,function(a){a.addEvent("onRequestView",function(a,b){h(b)})},{multiple:!0}),new cm.Finder("Module.CalendarWeek",b.params.name,b.nodes.holder.inner,function(a){a.addEvent("onRequestView",function(a,b){h(b)})},{multiple:!0}),new cm.Finder("Module.CalendarMonth",b.params.name,b.nodes.holder.inner,function(a){a.addEvent("onRequestView",function(a,b){h(b)})},{multiple:!0}),!b.params.isViewPreloaded&&h({view:b.params.defaultView})},g=function(a){b.viewDetails=cm.merge(c,a)},h=function(a){b.isProcess&&b.abort(),b.isProcess||b.isRendering||(g(a),cm.forEach(b.nodes.buttons.views,function(a,c){c===b.viewDetails.view?cm.replaceClass(a,"button-secondary","button-primary"):cm.replaceClass(a,"button-primary","button-secondary")}),b.ajaxHandler=b.callbacks.request(b,cm.clone(b.params.ajax)))};b.callbacks.prepare=function(a,b){return b=a.callbacks.beforePrepare(a,b),b.url=cm.strReplace(b.url,{"%baseUrl%":cm._baseUrl,"%view%":a.viewDetails.view,"%year%":a.viewDetails.year,"%month%":a.viewDetails.month,"%week%":a.viewDetails.week,"%query%":a.viewDetails.query}),b.params=cm.objectReplace(b.params,{"%baseUrl%":cm._baseUrl,"%view%":a.viewDetails.view,"%year%":a.viewDetails.year,"%month%":a.viewDetails.month,"%week%":a.viewDetails.week,"%query%":a.viewDetails.query}),b=a.callbacks.afterPrepare(a,b)},b.callbacks.beforePrepare=function(a,b){return b},b.callbacks.afterPrepare=function(a,b){return b},b.callbacks.request=function(a,b){return b=a.callbacks.prepare(a,b),cm.ajax(cm.merge(b,{onStart:function(){a.callbacks.start(a)},onSuccess:function(c){a.callbacks.response(a,b,c)},onError:function(){a.callbacks.error(a,b)},onAbort:function(){a.callbacks.abort(a,b)},onEnd:function(){a.callbacks.end(a)}}))},b.callbacks.filter=function(a,b,c){var d,e=cm.objectSelector(a.params.responseKey,c);return e&&!cm.isEmpty(e)&&(d=e),d},b.callbacks.start=function(a,b){a.isProcess=!0,a.params.showLoader&&(a.loaderDelay=setTimeout(function(){a.components.loader&&!a.components.loader.isOpen&&a.components.loader.open()},a.params.loaderDelay)),a.triggerEvent("onSendStart")},b.callbacks.end=function(a,b){a.isProcess=!1,a.params.showLoader&&(a.loaderDelay&&clearTimeout(a.loaderDelay),a.components.loader&&a.components.loader.isOpen&&a.components.loader.close()),a.triggerEvent("onSendEnd"),a.triggerEvent("onProcessEnd",a.nodes.holder.inner)},b.callbacks.response=function(a,b,c){cm.isEmpty(c)||(c=a.callbacks.filter(a,b,c)),cm.isEmpty(c)?a.callbacks.error(a,b):a.callbacks.success(a,c)},b.callbacks.error=function(a,b){a.callbacks.renderError(a,b),a.triggerEvent("onError")},b.callbacks.success=function(a,b){a.callbacks.render(a,b),a.triggerEvent("onSuccess",b)},b.callbacks.abort=function(a,b){a.triggerEvent("onAbort")},b.callbacks.renderTemporary=function(a){return cm.node("div",{"class":"calendar__temporary"})},b.callbacks.render=function(a,b){var c,d;a.params.responseHTML&&(a.isRendering=!0,d=a.callbacks.renderTemporary(a),c=cm.strToHTML(b),cm.appendNodes(c,d),a.callbacks.append(a,d))},b.callbacks.renderError=function(a,b){if(a.params.responseHTML){a.isRendering=!0;var c=a.callbacks.renderTemporary(a);c.appendChild(cm.node("div",{"class":"cm__empty"},a.lang("server_error"))),a.callbacks.append(a,c)}},b.callbacks.append=function(a,b){var c;a.nodes.holder.temporary||(a.nodes.holder.temporary=a.callbacks.renderTemporary(a),cm.appendNodes(a.nodes.holder.inner.childNodes,a.nodes.holder.temporary),cm.appendChild(a.nodes.holder.temporary,a.nodes.holder.inner)),cm.removeClass(a.nodes.holder.temporary,"is-show",!0),cm.appendChild(b,a.nodes.holder.inner),cm.addClass(b,"is-show",!0),cm.removeClass(a.nodes.holder.container,"is-loaded",!0),cm.addClass(a.nodes.holder.container,"is-show",!0),c=b.offsetHeight,a.animations.response.go({style:{height:[c,"px"].join("")},duration:a.params.animateDuration,anim:"smooth",onStop:function(){a.nodes.holder.container.style.height="",cm.remove(a.nodes.holder.temporary),cm.addClass(a.nodes.holder.container,"is-loaded",!0),a.nodes.holder.temporary=b,a.isRendering=!1}})},b.refresh=function(){return h(b.viewDetails),b},b.abort=function(){return b.ajaxHandler&&b.ajaxHandler.abort&&b.ajaxHandler.abort(),b},b.setAction=function(a,c,d){switch(c=cm.inArray(["raw","update","current"],c)?c:"current"){case"raw":b.params.ajax=cm.merge(b._raw.params.ajax,a);break;case"current":b.params.ajax=cm.merge(b.params.ajax,a);break;case"update":b.params.ajax=cm.merge(b._update.params.ajax,a)}return d&&(b._update.params.ajax=cm.clone(b.params.ajax)),b},d()}),cm.define("Module.CalendarEvent",{modules:["Params","Events","Langs","DataConfig","DataNodes","Stack"],events:["onRenderStart","onRender"],params:{node:cm.Node("div"),name:"",data:{title:null,date:null,description:null},"Com.Tooltip":{delay:"cm._config.hideDelayLong",className:"module__calendar-event-tooltip",minWidth:250}}},function(a){var b=this;b.nodes={template:null},b.components={},b.template=null;var c=function(){b.setParams(a),b.convertEvents(b.params.events),b.getDataNodes(b.params.node),b.getDataConfig(b.params.node),b.addToStack(b.params.node),b.triggerEvent("onRenderStart"),d(),b.triggerEvent("onRender")},d=function(){cm.getConstructor("Com.Tooltip",function(a,c){b.components.tooltip=new a(cm.merge(b.params[c],{target:b.params.node}))})},e=function(a){cm.isEmpty(b.params.data.title)||(a.title.innerHTML=b.params.data.title),cm.isEmpty(b.params.data.date)||(a.date.innerHTML=b.params.data.date),cm.isEmpty(b.params.data.description)?cm.remove(a["description-container"]):a.description.innerHTML=b.params.data.description,cm.isEmpty(b.params.data.url)?cm.remove(a["button-container"]):a.button.setAttribute("href",b.params.data.url)};b.setTemplate=function(a){return b.nodes.template=cm.getNodes(a),b.nodes.template&&(e(b.nodes.template),b.components.tooltip&&b.components.tooltip.setContent(b.nodes.template.container)),b},b.setTooltipParams=function(a){return b.params["Com.Tooltip"]=cm.merge(b.params["Com.Tooltip"],a),b.components.tooltip&&b.components.tooltip.setParams(b.params["Com.Tooltip"]),b},c()}),cm.define("Module.AbstractCalendarView",{modules:["Params","Events","Langs","DataConfig","DataNodes","Stack"],events:["onRenderStart","onRender","onRequestView"],params:{node:cm.Node("div"),name:"",viewName:"",itemShortIndent:1,itemShortHeight:24,dayIndent:4,"Com.Tooltip":{}}},function(a){var b=this;b.nodes={container:cm.node("div"),buttons:{container:cm.node("div"),prev:cm.node("div"),next:cm.node("div"),"search-button":cm.node("div"),"search-input":cm.node("input"),views:{agenda:cm.node("div"),week:cm.node("div"),month:cm.node("div")}},templates:{event:{}}},b.components={},b.days=[];var c=function(){b.getLESSVariables(),b.setParams(a),b.convertEvents(b.params.events),b.getDataNodes(b.params.node),b.getDataConfig(b.params.node),b.validateParams(),b.addToStack(b.params.node),b.triggerEvent("onRenderStart"),b.renderToolbar(),b.render(),b.triggerEvent("onRender")};c()}),cm.getConstructor("Module.AbstractCalendarView",function(a,b,c){c.getLESSVariables=function(){var a=this;return a.params.itemShortIndent=cm.getLESSVariable("ComCalendarEvent-Short-Indent",a.params.itemShortIndent,!0),a.params.itemShortHeight=cm.getLESSVariable("ComCalendarEvent-Short-Height",a.params.itemShortHeight,!0),a},c.validateParams=function(){var a=this;return a.params.name=a.params.name.toString(),"auto"!==a.params["Com.Tooltip"].width&&(a.params["Com.Tooltip"].width=cm.strReplace(a.params["Com.Tooltip"].width,{"%itemShortIndent%":a.params.itemShortIndent,"%itemShortHeight%":a.params.itemShortHeight,"%dayIndent%":a.params.dayIndent})),a.params["Com.Tooltip"].top=cm.strReplace(a.params["Com.Tooltip"].top,{"%itemShortIndent%":a.params.itemShortIndent,"%itemShortHeight%":a.params.itemShortHeight,"%dayIndent%":a.params.dayIndent}),a.params["Com.Tooltip"].left=cm.strReplace(a.params["Com.Tooltip"].left,{"%itemShortIndent%":a.params.itemShortIndent,"%itemShortHeight%":a.params.itemShortHeight,"%dayIndent%":a.params.dayIndent}),a},c.render=function(){var a=this;return new cm.Finder("Module.CalendarEvent",null,a.params.node,function(b){var c=cm.clone(a.nodes.templates.event.container,!0);b.setTooltipParams(a.params["Com.Tooltip"]).setTemplate(c)},{multiple:!0}),a},c.renderToolbar=function(){var a=this;return new cm.Finder("Com.Select","week",a.nodes.buttons.container,function(b){a.components.week=b.addEvent("onChange",a.updateView.bind(a))}),new cm.Finder("Com.Select","month",a.nodes.buttons.container,function(b){a.components.month=b.addEvent("onChange",a.updateView.bind(a))}),new cm.Finder("Com.Select","year",a.nodes.buttons.container,function(b){a.components.year=b.addEvent("onChange",a.updateView.bind(a))}),cm.addEvent(a.nodes.buttons["search-input"],"keypress",function(b){13==b.keyCode&&(cm.preventDefault(b),a.updateView())}),cm.addEvent(a.nodes.buttons["search-button"],"click",function(b){cm.preventDefault(b),a.updateView()}),cm.forEach(a.nodes.buttons.views,function(b,c){c===a.params.viewName?cm.replaceClass(b,"button-secondary","button-primary"):cm.replaceClass(b,"button-primary","button-secondary"),cm.addEvent(b,"click",function(b){cm.preventDefault(b),a.requestView({view:c})})}),cm.addEvent(a.nodes.buttons.prev,"click",function(b){cm.preventDefault(b),a.prev()}),cm.addEvent(a.nodes.buttons.next,"click",function(b){cm.preventDefault(b),a.next()}),a},c.searchQuery=function(a){var b=this,c=b.getData();return c.query=a,b.requestView(c),b},c.requestView=function(a){var b=this;return b.triggerEvent("onRequestView",a),b},c.getData=function(){var a=this;return{query:a.nodes.buttons["search-input"].value,view:a.params.viewName,year:a.components.year?a.components.year.get():null,month:a.components.month?a.components.month.get():null,week:a.components.week?a.components.week.get():null}},c.updateView=function(){var a=this;return a.triggerEvent("onRequestView",a.getData()),a},c.prev=function(){var a=this,b=a.getData();return null!==b.week?1==b.week?(b.year--,b.week=cm.getWeeksInYear(b.year)):b.week--:null!==b.month?0==b.month?(b.year--,b.month=11):b.month--:b.year--,a.requestView(b),a},c.next=function(){var a=this,b=a.getData();return null!==b.week?b.week==cm.getWeeksInYear(b.year)?(b.year++,b.week=1):b.week++:null!==b.month?11==b.month?(b.year++,b.month=0):b.month++:b.year++,a.requestView(b),a}}),cm.define("Module.CalendarMonth",{extend:"Module.AbstractCalendarView",params:{viewName:"month","Com.Tooltip":{width:"(targetWidth + %dayIndent%) * 2 - targetHeight * 2",top:"targetHeight + %itemShortIndent%",left:"-(selfWidth - targetWidth) - targetHeight"}}},function(a){var b=this;Module.AbstractCalendarView.apply(b,arguments)}),cm.getConstructor("Module.CalendarMonth",function(a,b,c){var d=c._inherit;c.processDay=function(a){var b=this,c={isShow:!1,nodes:a};cm.addEvent(c.nodes["more-button"],"click",function(){b.showMoreEvents(c)}),cm.addIsolateScrolling(c.nodes["more-holder"]),b.days.push(c)},c.showMoreEvents=function(a){a.delay&&clearTimeout(a.delay),a.isShow||(a.isShow=!0,cm.setScrollTop(a.nodes["more-holder"],0),cm.addClass(a.nodes["more-holder"],"is-show"))},c.hideMoreEvents=function(a,b){var c=this;a.delay&&clearTimeout(a.delay),a.isShow&&(b?(a.isShow=!1,cm.removeClass(a.nodes["more-holder"],"is-show")):a.delay=setTimeout(function(){a.isShow=!1,cm.removeClass(a.nodes["more-holder"],"is-show")},c.params.delay))},c.getLESSVariables=function(){var a=this;return d.prototype.getLESSVariables.call(a),a.params.dayIndent=cm.getLESSVariable("ComCalendarMonth-Day-Indent",a.params.dayIndent,!0),a},c.render=function(){var a=this;return d.prototype.render.call(a),cm.forEach(a.nodes.days,a.processDay.bind(a)),a}}),cm.define("Module.CalendarWeek",{extend:"Module.AbstractCalendarView",params:{viewName:"week","Com.Tooltip":{width:"(targetWidth + %dayIndent%) * 2 - targetHeight * 2",top:"targetHeight + %itemShortIndent%",left:"targetHeight"}}},function(a){var b=this;Module.AbstractCalendarView.apply(b,arguments)}),cm.getConstructor("Module.CalendarWeek",function(a,b,c){var d=c._inherit;c.getLESSVariables=function(){var a=this;return d.prototype.getLESSVariables.call(a),a.params.dayIndent=cm.getLESSVariable("ComCalendarWeek-Day-Indent",a.params.dayIndent,!0),a}}),cm.define("Module.CalendarAgenda",{extend:"Module.AbstractCalendarView",params:{viewName:"agenda","Com.Tooltip":{width:"targetWidth - %itemShortHeight% * 2",top:"targetHeight + %itemShortIndent%",left:"targetHeight"}}},function(a){var b=this;Module.AbstractCalendarView.apply(b,arguments)}),cm.define("Mod.ElementCaptcha",{extend:"App.AbstractModuleElement",params:{memorable:!1}},function(a){var b=this;App.AbstractModuleElement.apply(b,arguments)}),cm.define("Mod.ElementCheckbox",{extend:"App.AbstractModuleElement",params:{inputEvent:"change"}},function(a){var b=this;App.AbstractModuleElement.apply(b,arguments)}),cm.getConstructor("Mod.ElementCheckbox",function(a,b,c){c._inherit;c.validateValue=function(){var a=this;return a.get()},c.get=function(){var a=this;return a.nodes.input.checked},c.set=function(a){var b=this;return b.nodes.input.checked=a,b}}),cm.define("Mod.ElementDatePicker",{extend:"App.AbstractModuleElement",params:{targetController:"Com.Datepicker",pattern:/^(0000-00-00)$/}},function(a){var b=this;App.AbstractModuleElement.apply(b,arguments)}),cm.define("Mod.ElementFileUploader",{extend:"App.AbstractModuleElement",params:{targetController:"App.FileInput",memorable:!1}},function(a){var b=this;App.AbstractModuleElement.apply(b,arguments)}),cm.define("Mod.ElementMultiCheckbox",{extend:"App.AbstractModuleElement",params:{inputEvent:"change"}},function(a){var b=this;App.AbstractModuleElement.apply(b,arguments)}),cm.getConstructor("Mod.ElementMultiCheckbox",function(a,b,c){c._inherit;c.getMultiple=function(){var a=this,b=[];return cm.forEach(a.nodes.inputs,function(a){a.input.checked&&b.push(a.input.value)}),b},c.setMultiple=function(a){var b=this;cm.isArray(a)&&cm.forEach(b.nodes.inputs,function(b){b.input.checked=cm.inArray(a,b.input.value)})}}),cm.define("Mod.ElementMultiField",{extend:"App.AbstractModuleElement",params:{targetController:"Com.MultiField",memorable:!1,demo:!1}},function(a){var b=this;App.AbstractModuleElement.apply(b,arguments)}),cm.getConstructor("Mod.ElementMultiField",function(a,b,c,d){c.onEnableEditing=function(){var a=this;cm.appendChild(a.nodes.content.templateInner,a.nodes.content.templateContainer),a.params.demo&&a.components.controller&&a.components.controller.clear()},c.onDisableEditing=function(){var a=this;cm.remove(a.nodes.content.templateInner),a.params.demo&&a.components.controller&&a.components.controller.clear().setTemplate(a.nodes.content.templateInner)}}),cm.define("Mod.ElementPassword",{extend:"App.AbstractModuleElement",params:{}},function(a){var b=this;App.AbstractModuleElement.apply(b,arguments)}),cm.define("Mod.ElementRadioButton",{extend:"App.AbstractModuleElement",params:{inputEvent:"change"}},function(a){var b=this;App.AbstractModuleElement.apply(b,arguments)}),cm.getConstructor("Mod.ElementRadioButton",function(a,b,c){c._inherit;c.getMultiple=function(){var a=this,b="";return cm.forEach(a.nodes.inputs,function(a){a.input.checked&&(b=a.input.value)}),b},c.setMultiple=function(a){var b=this;cm.forEach(b.nodes.inputs,function(b){b.input.checked=b.input.value==a})}}),cm.define("Mod.ElementSelect",{extend:"App.AbstractModuleElement",params:{targetController:"Com.Select"}},function(a){var b=this;App.AbstractModuleElement.apply(b,arguments)}),cm.define("Mod.ElementText",{extend:"App.AbstractModuleElement",params:{}},function(a){var b=this;App.AbstractModuleElement.apply(b,arguments)}),cm.define("Mod.ElementTextArea",{extend:"App.AbstractModuleElement",params:{}},function(a){var b=this;App.AbstractModuleElement.apply(b,arguments)}),cm.define("Mod.ElementTimePicker",{extend:"App.AbstractModuleElement",params:{targetController:"Com.TimeSelect",pattern:/^(00-00-00)$/}},function(a){var b=this;App.AbstractModuleElement.apply(b,arguments)}),cm.define("Mod.ElementWizard",{extend:"App.AbstractModule",events:["onTabShow","onTabHide","onTabChange"],params:{duration:"cm._config.animDuration",delay:"cm._config.hideDelay",active:null,"Com.TabsetHelper":{targetEvent:"none"},"Com.AbstractInput":{className:"tabs__input"}}},function(a){var b=this;App.AbstractModule.apply(b,arguments)}),cm.getConstructor("Mod.ElementWizard",function(a,b,c){c._inherit;c.onConstructStart=function(){var a=this;a.tabs={},a.tabsCount=0,a.options=[],a.isProcessing=!1,a.changeInterval=null,a.currentTab=null,a.prevTabHandler=a.prevTab.bind(a),a.nextTabHandler=a.nextTab.bind(a),a.doneTabHandler=a.doneTab.bind(a)},c.onConstructEnd=function(){var a=this;null===a.currentTab&&(a.params.active&&a.tabs[a.params.active]?a.setTab(a.params.active):a.setTabByIndex(0))},c.onValidateParams=function(){var a=this;a.params["Com.TabsetHelper"].node=a.nodes.inner,a.params["Com.TabsetHelper"].name=a.params.name,a.params["Com.AbstractInput"].container=a.nodes.container,a.params["Com.AbstractInput"].name=a.params.name},c.renderViewModel=function(){var a=this;a.processTabset(),a.processTabs(),a.processMenu(),a.processButtons(),a.processInput()},c.processTabset=function(){var a=this;cm.getConstructor("Com.TabsetHelper",function(b,c){a.components.tabset=new b(a.params[c]).addEvent("onTabHide",function(b,c){a.triggerEvent("onTabHide",c)}).addEvent("onTabShowStart",function(b,c){a.isProcessing||(a.nodes["content-list"].style.overflow="hidden",a.nodes["content-list"].style.height=a.nodes["content-list"].offsetHeight+"px"),a.isProcessing=!0,a.changeInterval&&clearTimeout(a.changeInterval),a.changeInterval=setTimeout(function(){a.isProcessing=!1,a.nodes["content-list"].style.height="auto",a.nodes["content-list"].style.overflow="visible"},a.params.duration)}).addEvent("onTabShow",function(b,c){a.currentTab=c,a.nodes["content-list"].style.height=c.tab.container.offsetHeight+"px",a.setMenu(),a.setButtons(),a.setInput(),a.triggerEvent("onTabShow",c),a.triggerEvent("onTabChange",c)}).processTabs(a.nodes.tabs,a.nodes.labels)})},c.processTabs=function(){var a=this;a.tabs=a.components.tabset.getTabs(),a.tabsCount=a.components.tabset.getTabsCount(),cm.forEach(a.tabs,function(b){cm.addEvent(b.label.container,"click",function(){
a.validateTab()&&a.currentTab.id!==b.id&&a.setTab(b.id)})})},c.processMenu=function(){var a=this;cm.forEach(a.nodes.options,function(b){var c=cm.merge({id:"",nodes:b},a.getNodeDataConfig(b.container));cm.addEvent(b.container,"click",function(){a.validateTab()&&a.currentTab.id!==c.id&&a.setTab(c.id)}),a.options.push(c)})},c.setMenu=function(){var a=this;a.nodes["menu-label"].innerHTML=a.currentTab.title},c.processButtons=function(){var a=this;cm.addEvent(a.nodes.buttonPrev,"click",a.prevTabHandler),cm.addEvent(a.nodes.buttonNext,"click",a.nextTabHandler),cm.addEvent(a.nodes.buttonDone,"click",a.doneTabHandler)},c.setButtons=function(){var a=this,b=a.currentTab.index;0===b&&(cm.addClass(a.nodes.buttonPrev,"is-hidden"),cm.removeClass(a.nodes.buttonNext,"is-hidden"),cm.addClass(a.nodes.buttonDone,"is-hidden")),b>0&&b<a.tabsCount-1&&(cm.removeClass(a.nodes.buttonPrev,"is-hidden"),cm.removeClass(a.nodes.buttonNext,"is-hidden"),cm.addClass(a.nodes.buttonDone,"is-hidden")),b===a.tabsCount-1&&(cm.removeClass(a.nodes.buttonPrev,"is-hidden"),cm.addClass(a.nodes.buttonNext,"is-hidden"),cm.removeClass(a.nodes.buttonDone,"is-hidden"))},c.processInput=function(){var a=this;cm.getConstructor("Com.AbstractInput",function(b,c){a.components.input=new b(a.params[c])})},c.setInput=function(){var a=this;a.currentTab&&a.components.input&&a.components.input.set(a.currentTab.id)},c.validateTab=function(){var a=this,b=!0;return a.isEditing||cm.find("App.AbstractModuleElement",null,a.currentTab.tab.inner,function(a){cm.isFunction(a.validate)&&(a.validate()||(b=!1))},{childs:!0}),b},c.prevTab=function(a){var b=this;if(cm.preventDefault(a),b.validateTab()&&b.currentTab.index>0){var c=b.currentTab.index-1;b.setTabByIndex(c)}},c.nextTab=function(a){var b=this;if(cm.preventDefault(a),b.validateTab()&&b.currentTab.index<b.tabsCount-1){var c=b.currentTab.index+1;b.setTabByIndex(c)}},c.doneTab=function(a){var b=this;b.validateTab()||cm.preventDefault(a)},c.setTab=function(a){var b=this;b.components.tabset.set(a)},c.setTabByIndex=function(a){var b=this;b.components.tabset.setByIndex(a)},c.getCurrentTab=function(){var a=this;return a.currentTab}}),cm.define("Mod.ElementWysiwyg",{extend:"App.AbstractModuleElement",params:{}},function(a){var b=this;App.AbstractModuleElement.apply(b,arguments)}),cm.define("Mod.Form",{extend:"App.AbstractModule",events:["onSubmit","onReset"],params:{remember:!1,local:!1,unload:!1,action:null,ajax:{method:"POST",async:!1,beacon:!0,local:!1}}},function(a){var b=this;App.AbstractModule.apply(b,arguments)}),cm.getConstructor("Mod.Form",function(a,b,c){var d=c._inherit;c.onConstructStart=function(){var a=this;a.isAjax=!1,a.isUnload=!1,a.items={},a.values={},a.nodes={form:cm.node("form")},a.processItemHandler=a.processItem.bind(a),a.processWizardHandler=a.processWizard.bind(a),a.unloadEventHanlder=a.unloadEvent.bind(a),a.submitEventHandler=a.submitEvent.bind(a),a.resetEventHandler=a.resetEvent.bind(a),a.keypressEventHandler=a.keypressEvent.bind(a)},c.onDestruct=function(){var a=this;a.components.finder&&a.components.finder.remove(),a.components.finderWizard&&a.components.finderWizard.remove(),a.isUnload&&cm.removeEvent(window,"unload",a.unloadEventHanlder)},c.onValidateParams=function(){var a=this;cm.isEmpty(a.params.ajax.url)||(a.isAjax=!0),a.isUnload=a.params.unload&&a.isAjax,a.params.action=a.nodes.form.getAttribute("action")||a.params.action},c.renderViewModel=function(){var a=this;return d.prototype.renderViewModel.apply(a,arguments),a.params.remember&&(a.isUnload&&cm.addEvent(window,"unload",a.unloadEventHanlder),a.params.local&&(a.values=a.storageRead("items")||{},a.components.finder=new cm.Finder("App.AbstractModuleElement",null,a.nodes.container,a.processItemHandler,{multiple:!0,childs:!0}),a.components.finderWizard=new cm.Finder("Mod.ElementWizard",null,a.nodes.container,a.processWizardHandler,{multiple:!0}))),cm.addEvent(a.nodes.form,"keypress",a.keypressEventHandler),cm.addEvent(a.nodes.form,"submit",a.submitEventHandler),cm.addEvent(a.nodes.form,"reset",a.resetEventHandler),a},c.processItem=function(a){var b=this;if(a.getParams("memorable")){var c={controller:a,name:a.getParams("name"),value:null};b.values[c.name]&&(c.value=b.values[c.name]),c.controller.set(c.value),c.controller.addEvent("onChange",function(a,d){c.value=c.controller.get(),b.values[c.name]=c.value,b.processSave()}),c.controller.addEvent("onDestruct",function(a){delete b.values[c.name],delete b.items[c.name],b.processSave()}),b.values[c.name]=c.value,b.items[c.name]=c}},c.processWizard=function(a){var b=this,c={controller:a,name:a.getParams("name"),value:null};b.values[c.name]&&(c.value=b.values[c.name]),c.controller.setTab(c.value),c.controller.addEvent("onTabChange",function(){c.tab=c.controller.getCurrentTab(),c.value=c.tab.id,b.values[c.name]=c.value,b.processSave()}),c.controller.addEvent("onDestruct",function(){delete b.values[c.name],delete b.items[c.name],b.processSave()}),b.values[c.name]=c.value,b.items[c.name]=c},c.processSave=function(){var a=this;a.storageWrite("items",a.values)},c.unloadEvent=function(){var a,b=this;a=b.params.local?b.values:cm.getFDO(b.nodes.container),b.components.ajax=cm.ajax(cm.merge(b.params.ajax,{params:a}))},c.keypressEvent=function(a){cm.isFormInputFocused()&&cm.isKey(a,"enter")&&cm.preventDefault(a)},c.submitEvent=function(a){var b,c=this;cm.preventDefault(a),b=new FormData(c.nodes.form),c.triggerEvent("onSubmit",{form:c.nodes.form,data:b,action:c.params.action}),c.clear()},c.resetEvent=function(a){var b=this,c=new FormData(b.nodes.form);cm.preventDefault(a),b.triggerEvent("onReset",{form:b.nodes.form,data:c,action:b.params.action}),b.clear()},c.clear=function(){var a=this;return a.storageClear("items"),a}}),cm.define("Module.LogoCarousel",{extend:"App.AbstractModule",params:{renderStructure:!1,embedStructureOnRender:!1,duration:1e3,delay:2e3,columns:0,mobileColumns:1,stopOnHover:!0}},function(a){var b=this;App.AbstractModule.apply(b,arguments)}),cm.getConstructor("Module.LogoCarousel",function(a,b,c){var d=c._inherit;c.construct=function(){var a=this;return a.items={},a.itemsLength=0,a.isInfinite=!1,a.isAnimate=!0,a.isProccess=!1,a.moveInterval=null,a.current=null,a.columns=0,a.onValidateParamsProcessHandler=a.onValidateParamsProcess.bind(a),a.onDestructProcessHandler=a.onDestructProcess.bind(a),a.onRedrawHandler=a.onRedraw.bind(a),a.startHandler=a.start.bind(a),a.stopHandler=a.stop.bind(a),a.mouseOverEventHandler=a.mouseOverEvent.bind(a),a.mouseOutEventHandler=a.mouseOutEvent.bind(a),a.moveProcessHandler=a.moveProcess.bind(a),a.addEvent("onValidateParamsProcess",a.onValidateParamsProcessHandler),a.addEvent("onDestructProcess",a.onDestructProcessHandler),a.addEvent("onRedraw",a.onRedrawHandler),d.prototype.construct.apply(a,arguments),a},c.onValidateParamsProcess=function(){var a=this;return a.isInfinite=!a.params.delay,a.delay=a.params.duration+a.params.delay,a.isAnimate=!(!a.params.duration&&!a.params.duration),a},c.onDestructProcess=function(){var a=this;return a.stop(),a.moveInterval&&clearTimeout(a.moveInterval),a},c.onRedraw=function(){var a=this,b=["col",a.params.columns].join("-"),c=["col",a.params.mobileColumns].join("-");return"mobile"==cm._deviceType?(a.columns=a.params.mobileColumns,cm.replaceClass(a.nodes.grid,b,c)):(a.columns=a.params.columns,cm.replaceClass(a.nodes.grid,c,b)),a.restart(),a},c.render=function(){var a=this;return d.prototype.render.apply(a,arguments),a.redraw(),a},c.renderViewModel=function(){var a=this;return d.prototype.renderViewModel.apply(a,arguments),a.items=cm.clone(a.nodes.items),a.itemsLength=a.items.length,a.isInfinite&&cm.addClass(a.nodes.container,"is-infinite"),a.components.animation=new cm.Animation(a.nodes.itemsContainer),cm.addEvent(a.nodes.container,"mouseover",a.mouseOverEventHandler),cm.addEvent(a.nodes.container,"mouseout",a.mouseOutEventHandler),a},c.restart=function(){var a=this;return a.stop(),a.restore(),a.move(),a},c.start=function(){var a=this;return a.isProccess||(a.isProccess=!0),a},c.stop=function(){var a=this;return a.isProccess&&(a.isProccess=!1),a},c.move=function(){var a=this;return a.isProccess=!0,a.moveProcess(),a.moveRepeater(),a},c.moveRepeater=function(){var a=this;return a.moveInterval&&clearTimeout(a.moveInterval),a.moveInterval=setTimeout(function(){a.moveProcess(),a.moveRepeater()},a.delay),a},c.moveProcess=function(){var a=this;return a.isAnimate&&a.isProccess&&a.itemsLength>a.columns&&(a.restore(),a.current=a.items.shift(),a.items.push(a.current),a.components.animation.go({style:{left:-a.current.container.offsetWidth+"px"},duration:a.params.duration,anim:a.isInfinite?"linear":"smooth"})),a},c.restore=function(){var a=this;return a.current&&(cm.addClass(a.nodes.container,"is-immediately",!0),a.nodes.itemsContainer.style.left="0px",cm.insertLast(a.current.container,a.nodes.itemsContainer),cm.removeClass(a.nodes.container,"is-immediately",!0)),a},c.mouseOverEvent=function(a){var b=this;return b.params.stopOnHover&&b.stop(),b},c.mouseOutEvent=function(a){var b=this,c=cm.getRelatedTarget(a);return cm.isParent(b.nodes.container,c,!0)||b.params.stopOnHover&&b.start(),b}}),cm.define("Module.Menu",{extend:"App.AbstractModule",params:{renderStructure:!1,embedStructureOnRender:!1,view:"horizontal",submenu:"visible",duration:"cm._config.animDuration",delay:"cm._config.hideDelay"}},function(a){var b=this;App.AbstractModule.apply(b,arguments)}),cm.getConstructor("Module.Menu",function(a,b,c){var d=c._inherit;c.construct=function(){var a=this;return a.nodes={select:{select:cm.node("select")}},a.alignValues=["left","center","right","justify"],a.submeniViewValues=["visible","dropdown","specific","collapsible"],a.processSelectHandler=a.processSelect.bind(a),d.prototype.construct.apply(a,arguments),a},c.renderViewModel=function(){var a=this;return d.prototype.renderViewModel.apply(a,arguments),cm.addEvent(a.nodes.select.select,"change",a.processSelectHandler),a.processSubMenu(a.nodes.menu.items),a},c.processSubMenu=function(a){var b=this;return cm.forEach(a,function(a){a.sub&&(b.processSubMenuItem(a),b.processSubMenu(a.sub.items))}),b},c.processSubMenuItem=function(a){var b=this;return a.sub._animate=new cm.Animation(a.sub.container),a.sub._visible=cm.isClass(a.container,"active"),a.sub._visible||(cm.addEvent(a.container,"mouseover",function(c){"vertical"===b.params.view&&"collapsible"===b.params.submenu&&b.showSubMenuItemCollapsible(c,a)}),cm.addEvent(a.container,"mouseout",function(c){"vertical"===b.params.view&&"collapsible"===b.params.submenu&&b.hideSubMenuItemCollapsible(c,a)})),b},c.showSubMenuItemCollapsible=function(a,b){var c,d,e=this;return b.sub._delay&&clearTimeout(b.sub._delay),b.sub._delay=setTimeout(function(){b.sub._show||(b.sub._show=!0,c=b.sub.container.offsetHeight,b.sub.container.style.height="auto",d=b.sub.container.offsetHeight,b.sub.container.style.height=c+"px",b.sub._animate.go({style:{height:d+"px"},duration:e.params.duration,anim:"smooth",onStop:function(){b.sub.container.style.height="auto"}}))},e.params.delay),e},c.hideSubMenuItemCollapsible=function(a,b){var c=this,d=cm.getRelatedTarget(a);return cm.isParent(b.container,d,!0)||(b.sub._delay&&clearTimeout(b.sub._delay),b.sub._delay=setTimeout(function(){b.sub._show&&(b.sub._show=!1,b.sub._animate.go({style:{height:"0px"},duration:c.params.duration,anim:"smooth",onStop:function(){b.sub.container.style.height=""}}))},c.params.delay)),c},c.processSelect=function(){var a=this,b=a.nodes.select.select.value;return cm.isEmpty(b)||(window.location.href=b),a},c.setView=function(a){var b=this;switch(b.params.view=a,a){case"horizontal":cm.removeClass(b.nodes.container,"is-vertical mod__menu--adaptive"),cm.addClass(b.nodes.container,"is-horizontal"),b.setSubmenuView("dropdown");break;case"vertical":cm.removeClass(b.nodes.container,"is-horizontal mod__menu--adaptive"),cm.addClass(b.nodes.container,"is-vertical"),b.setSubmenuView("visible");break;case"mobile":cm.addClass(b.nodes.container,"mod__menu--adaptive")}return b},c.setAlign=function(a){var b=this;return cm.inArray(b.alignValues,a)&&(cm.forEach(b.alignValues,function(a){cm.removeClass(b.nodes.container,["pull",a].join("-"))}),cm.addClass(b.nodes.container,["pull",a].join("-"))),b},c.setSubmenuView=function(a){var b=this;return cm.inArray(b.submeniViewValues,a)&&(cm.forEach(b.submeniViewValues,function(a){cm.removeClass(b.nodes.container,["is",a].join("-"))}),b.params.submenu=a,cm.addClass(b.nodes.container,["is",a].join("-"))),b}}),cm.define("App.ModuleMenu",{modules:["Params","DataNodes"],params:{node:cm.node("div")}},function(a){var b=this;b.nodes={select:cm.node("select")};var c=function(){b.setParams(a),b.getDataNodes(b.params.node),d()},d=function(){cm.addEvent(b.nodes.select,"change",e)},e=function(){var a=b.nodes.select.value;cm.isEmpty(a)||(window.location.href=a)};c()}),cm.define("App.ModuleRolloverTabs",{modules:["Params","Events","Langs","DataConfig","DataNodes","Stack"],events:["onRenderStart","onRender","onTabShow","onTabHide","enableEditing","disableEditing","enableEditable","disableEditable"],params:{node:cm.Node("div"),name:"",event:"hover",stay:!1,showEmptyTab:!1,duration:"cm._config.animDuration",delay:"cm._config.hideDelay",width:"auto",attachment:"container",expand:"bottom",active:!1,isEditing:!1,customEvents:!0,"Com.TabsetHelper":{}}},function(a){var b=this;b.nodes={container:cm.node("div"),inner:cm.node("div"),"menu-label":cm.node("div"),labels:[],options:[],tabs:[]},b.components={},b.tabs=[],b.options=[],b.isEditing=null,b.isProcessing=!1,b.hideInterval=null,b.changeInterval=null,b.resizeInterval=null,b.currentPosition=null,b.previousPosition=null,b.isMenuShow=!1;var c=function(){d(),b.setParams(a),b.convertEvents(b.params.events),b.getDataNodes(b.params.node),b.getDataConfig(b.params.node),e(),b.triggerEvent("onRenderStart"),f(),b.addToStack(b.params.node),b.triggerEvent("onRender")},d=function(){b.params.duration=cm.getTransitionDurationFromLESS("AppMod-RolloverTabs-Duration",b.params.duration)},e=function(){b.params["Com.TabsetHelper"].node=b.nodes.inner,b.params["Com.TabsetHelper"].name=[b.params.name,"tabset"].join("-"),b.params["Com.TabsetHelper"].targetEvent=b.params.event},f=function(){cm.addClass(b.nodes.container,["attachment",b.params.attachment].join("-")),cm.addClass(b.nodes.container,["expand",b.params.expand].join("-")),cm.getConstructor("Com.TabsetHelper",function(a,c){b.components.tabset=new a(b.params[c]).addEvent("onTabHide",function(a,c){b.triggerEvent("onTabHide",c)}).addEvent("onTabShowStart",function(a,c){b.params.showEmptyTab||b.isEditing||!b.components.tabset.isTabEmpty(c.id)?p(c):o(c),b.isProcessing||(b.nodes["content-list"].style.overflow="hidden",b.nodes["content-list"].style.height=b.nodes["content-list"].offsetHeight+"px"),b.isProcessing=!0,b.changeInterval&&clearTimeout(b.changeInterval),b.changeInterval=setTimeout(function(){b.isProcessing=!1,b.nodes["content-list"].style.height="auto",b.nodes["content-list"].style.overflow="visible"},b.params.duration)}).addEvent("onTabShow",function(a,c){b.nodes["content-list"].style.height=c.tab.container.offsetHeight+"px",b.nodes["menu-label"].innerHTML=c.title,b.triggerEvent("onTabShow",c)}).processTabs(b.nodes.tabs,b.nodes.labels)}),g(),h(),m(),b.params.customEvents&&(cm.customEvent.add(b.params.node,"destruct",function(){b.destruct()}),cm.customEvent.add(b.params.node,"redraw",function(){b.redraw()}),cm.customEvent.add(b.params.node,"enableEditable",function(){b.enableEditing()}),cm.customEvent.add(b.params.node,"disableEditable",function(){b.disableEditing()})),b.params.active&&b.components.tabset.set(b.params.active),b.params.isEditing&&b.enableEditing()},g=function(){b.tabs=b.components.tabset.getTabs(),cm.forEach(b.tabs,function(a){cm.addEvent(a.label.link,"click",function(c){(b.isEditing||"click"===b.params.event&&b.components.tabset.get()!==a.id)&&cm.preventDefault(c)})})},h=function(){cm.addEvent(b.nodes["menu-icon"],"click",j),cm.forEach(b.nodes.options,i)},i=function(a){var c=cm.merge({id:"",nodes:a},b.getNodeDataConfig(a.container));cm.addEvent(a.container,"click",function(a){b.components.tabset.get()!==c.id&&(cm.preventDefault(a),b.components.tabset.set(c.id),k(),p())}),b.options.push(c)},j=function(){b.isMenuShow?k():l()},k=function(){b.isMenuShow=!1,cm.removeClass(b.nodes["menu-inner"],"active")},l=function(){b.isMenuShow=!0,cm.addClass(b.nodes["menu-inner"],"active")},m=function(){"hover"===b.params.event&&cm.addEvent(b.nodes.container,"mouseover",q),b.params.stay||(cm.addEvent(b.nodes.container,"mouseout",r),cm.addEvent(window,"click",s))},n=function(){"hover"===b.params.event&&cm.removeEvent(b.nodes.container,"mouseover",q),b.params.stay||(cm.removeEvent(b.nodes.container,"mouseout",r),cm.removeEvent(window,"click",s))},o=function(){b.hideInterval&&clearTimeout(b.hideInterval),b.hideInterval=setTimeout(function(){b.resizeInterval&&clearInterval(b.resizeInterval),cm.removeClass(b.nodes.content,"is-show"),b.nodes["menu-label"].innerHTML="",b.components.tabset.unsetHead(),b.hideInterval=setTimeout(function(){b.components.tabset.unset()},b.params.delay)},b.params.delay)},p=function(a){a=b.components.tabset.getCurrentTab()||a,a&&(b.params.showEmptyTab||b.isEditing||!b.components.tabset.isTabEmpty(a.id))&&(b.redraw(),b.hideInterval&&clearTimeout(b.hideInterval),cm.addClass(b.nodes.content,"is-show",!0))},q=function(){p()},r=function(a){var c=cm.getRelatedTarget(a);cm.isParent(b.nodes.container,c,!0)?p():!b.isEditing&&o()},s=function(a){var c=cm.getEventTarget(a);cm.isParent(b.nodes.container,c,!0)?p():(k(),!b.isEditing&&o())},t=function(){b.previousPosition=cm.clone(b.currentPosition),b.currentPosition=cm.getRect(b.nodes.container);var a=b.previousPosition&&b.previousPosition.top===b.currentPosition.top,c=b.previousPosition&&b.previousPosition.bottom===b.currentPosition.bottom,d=b.previousPosition&&b.previousPosition.width===b.currentPosition.width;if(!d)switch(b.params.attachment){case"screen":b.nodes.content.style.minWidth=Math.min(b.params.width,b.currentPosition.width)+"px";break;case"container":b.nodes.content.style.minWidth=b.currentPosition.width+"px"}if(!a||!c){var e=cm.getPageSize();switch(b.params.expand){case"top":b.nodes.content.style.top="auto",b.nodes.content.style.bottom=e.winHeight-b.currentPosition.top+"px";break;case"bottom":b.nodes.content.style.top=b.currentPosition.bottom+"px",b.nodes.content.style.bottom="auto"}}};b.enableEditing=function(){return cm.isBoolean(b.isEditing)&&b.isEditing||(b.isEditing=!0,cm.replaceClass(b.params.node,"is-not-editing","is-editing is-editable"),b.components.tabset.setByIndex(0),p(),b.triggerEvent("enableEditing"),b.triggerEvent("enableEditable")),b},b.disableEditing=function(){return(!cm.isBoolean(b.isEditing)||b.isEditing)&&(b.isEditing=!1,cm.replaceClass(b.params.node,"is-editing is-editable","is-not-editing"),o(),b.triggerEvent("disableEditing"),b.triggerEvent("disableEditable")),b},b.destruct=function(){return b.isDestructed||(b.isDestructed=!0,n(),b.removeFromStack(),cm.remove(b.nodes.container)),b},b.redraw=function(){switch(b.resizeInterval&&clearInterval(b.resizeInterval),b.params.attachment){case"screen":b.isEditing?(b.previousPosition=null,b.currentPosition=null,b.nodes.content.style.maxWidth="",b.nodes.content.style.minWidth="",b.nodes.content.style.top="",b.nodes.content.style.bottom=""):(b.previousPosition=null,b.currentPosition=null,b.nodes.content.style.maxWidth=b.params.width,t(),b.resizeInterval=setInterval(t,5))}return b},c()}),cm.define("Module.WorkingArea",{modules:["Params","Events","Langs","DataConfig","DataNodes","Stack"],events:["onRenderStart","onRender","enableEditing","disableEditing","enableEditable","disableEditable"],params:{node:cm.node("div"),name:"",isEditing:!1,customEvents:!0,href:"",target:"_self"}},function(a){var b=this;b.nodes={container:cm.node("div")},b.components={},b.isEditing=null;var c=function(){b.setParams(a),b.convertEvents(b.params.events),b.getDataNodes(b.params.node),b.getDataConfig(b.params.node),d(),b.addToStack(b.params.node),b.triggerEvent("onRenderStart"),e(),b.addToStack(b.nodes.container),b.triggerEvent("onRender")},d=function(){cm.isNode(b.params.node)&&(b.params.href=b.params.node.getAttribute("href")||b.params.href,b.params.target=b.params.node.getAttribute("target")||b.params.target)},e=function(){g(),b.params.customEvents&&(cm.customEvent.add(b.params.node,"enableEditable",function(){b.enableEditing()}),cm.customEvent.add(b.params.node,"disableEditable",function(){b.disableEditing()})),b.params.isEditing&&b.enableEditing()},f=function(){cm.addClass(b.nodes.container,"is-editing is-editable"),cm.isEmpty(b.params.href)||(cm.removeClass(b.nodes.container,"is-link"),cm.removeEvent(b.nodes.container,"click",h))},g=function(){cm.removeClass(b.nodes.container,"is-editing is-editable"),cm.isEmpty(b.params.href)||(cm.addClass(b.nodes.container,"is-link"),cm.addEvent(b.nodes.container,"click",h))},h=function(a){var c=cm.getEventTarget(a);if(c.tagName&&"a"!==c.tagName.toLowerCase()||cm.isEmpty(c.getAttribute("href")))switch(cm.preventDefault(a),b.params.target){case"_blank":window.open(b.params.href,"_blank");break;default:window.location.href=b.params.href}};b.enableEditing=function(){return cm.isBoolean(b.isEditing)&&b.isEditing||(b.isEditing=!0,f(),b.triggerEvent("enableEditing"),b.triggerEvent("enableEditable")),b},b.disableEditing=function(){return(!cm.isBoolean(b.isEditing)||b.isEditing)&&(b.isEditing=!1,g(),b.triggerEvent("disableEditing"),b.triggerEvent("disableEditable")),b},c()});