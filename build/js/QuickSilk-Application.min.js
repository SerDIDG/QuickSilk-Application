var App={Elements:{},Nodes:{},Test:[]},Module={};cm.define("App.Block",{modules:["Params","Events","DataNodes","DataConfig","Stack"],events:["onRenderStart","onRender","onRemove","enableEditing","disableEditing"],params:{node:cm.Node("div"),type:"template-manager",instanceId:!1,positionId:0,zone:0,parentId:0,layerId:0,index:!1,locked:!1,visible:!0,editorName:"app-editor"}},function(a){var b=this;b.isDummy=!1,b.isRemoved=!1,b.isEditing=null,b.styleObject=null,b.dimensions=null,b.components={},b.nodes={container:cm.node("div"),block:{container:cm.node("div"),inner:cm.node("div"),drag:[],menu:{edit:cm.node("div"),duplicate:cm.node("div"),"delete":cm.node("div")}}},b.node=null,b.zone=null,b.zones=[];var c=function(){b.setParams(a),b.convertEvents(b.params.events),b.getDataNodes(b.params.node),b.getDataConfig(b.params.node),d(),b.triggerEvent("onRenderStart"),e(),b.addToStack(b.params.node),b.triggerEvent("onRender")},d=function(){var a;cm.isNumber(b.params.instanceId)||cm.isString(b.params.instanceId)?(cm.log(b.params.instanceId),b.params.name=[b.params.type,b.params.instanceId,b.params.positionId].join("_"),b.params.zoneName=[b.params.type,b.params.instanceId,b.params.parentId,b.params.zone].join("_")):(b.params.name=[b.params.type,b.params.positionId].join("_"),b.params.zoneName=[b.params.type,b.params.parentId,b.params.zone].join("_")),(a=b.params.node.getAttribute("data-index"))&&(b.params.index=parseInt(a),b.params.node.removeAttribute("data-index"))},e=function(){b.node=b.params.node,b.getDimensions(),new cm.Finder("App.Zone",b.params.zoneName,null,function(a){f(a,b.params.index)}),new cm.Finder("App.Editor",b.params.editorName,null,function(a){h(a)},{event:"onProcessStart"})},f=function(a,c){a&&(b.zone=a.addBlock(b,c))},g=function(a){a&&(b.zone=a.removeBlock(b),b.zone=null)},h=function(a){a&&(b.components.editor=a.addBlock(b))},i=function(a){a&&(b.components.editor=a.removeBlock(b))};b.enableEditing=function(){return"boolean"==typeof b.isEditing&&b.isEditing||(b.isEditing=!0,cm.addClass(b.node,"is-editing"),cm.addClass(b.node,"is-visible"),b.params.locked||(cm.addClass(b.node,"is-editable"),cm.customEvent.trigger(b.node,"enableEditable",{type:"child",self:!1})),cm.removeClass(b.nodes.block.container,"cm__animate"),cm.customEvent.trigger(b.node,"enableEditing",{type:"child",self:!1}),b.triggerEvent("enableEditing")),b},b.disableEditing=function(){return("boolean"!=typeof b.isEditing||b.isEditing)&&(b.isEditing=!1,cm.removeClass(b.node,"is-editing"),b.params.visible||cm.removeClass(b.node,"is-visible"),b.params.locked||(cm.removeClass(b.node,"is-editable"),cm.customEvent.trigger(b.node,"disableEditable",{type:"child",self:!1})),cm.addClass(b.nodes.block.container,"cm__animate"),cm.customEvent.trigger(b.node,"disableEditing",{type:"child",self:!1}),b.triggerEvent("disableEditing")),b},b.addZone=function(a){return b.zones.push(a),b},b.removeZone=function(a){return cm.arrayRemove(b.zones,a),b},b.setZone=function(a,c){return g(b.zone),f(a,c),b},b.unsetZone=function(){return g(b.zone),b},b.getIndex=function(){return b.zone?b.zone.getBlockIndex(b):null},b.getLower=function(){var a=b.getIndex();return b.zone.getBlock(a+1)||null},b.getUpper=function(){var a=b.getIndex();return b.zone.getBlock(a-1)||null},b.getDragNodes=function(){var a=[];return cm.forEach(b.nodes.block.drag,function(b){a.push(b.container)}),a},b.getMenuNodes=function(){return b.nodes.block.menu},b.getInnerNode=function(){return b.nodes.block.inner},b.remove=function(){if(!b.isRemoved){for(b.isRemoved=!0,g(b.zone),i(b.components.editor);b.zones.length;)b.zones[0].remove();b.removeFromStack(),cm.remove(b.node),b.triggerEvent("onRemove")}return b},b.getDimensions=function(){return b.styleObject||(b.styleObject=cm.getStyleObject(b.node)),b.dimensions=cm.getNodeOffset(b.node,b.styleObject,null),b.dimensions},b.updateDimensions=function(){return b.dimensions=cm.getNodeOffset(b.node,b.styleObject,b.dimensions),b.dimensions},c()}),cm.define("App.Dashboard",{modules:["Params","Events"],events:["onRenderStart","onRender","onDragStart","onMove","onDrop","onRemoveStart","onRemove","onRemoveEnd","onReplaceStart","onReplace","onReplaceEnd","onAppendStart","onAppend","onAppendEnd"],params:{draggableContainer:"document.body",scrollNode:"document.body",scrollSpeed:1,scrollStep:48,useGracefulDegradation:!0,dropDuration:400,moveDuration:200,highlightZones:!0,highlightPlaceholders:!0,placeholderHeight:64,"Com.Overlay":{container:"document.body",duration:0,autoOpen:!1,removeOnClose:!0,showSpinner:!1,showContent:!1,position:"fixed",theme:"transparent"}}},function(a){var b=this;b.isGracefulDegradation=!1,b.isScrollProccess=!1,b.isProccess=!1,b.components={},b.anim={},b.zones=[],b.blocks=[],b.dummyBlocks=[],b.currentZones=null,b.currentBlocks=null,b.currentBlock=null,b.currentBlockOffset=null,b.currentBellow=null;var c=function(){d(),b.setParams(a),b.convertEvents(b.params.events),e(),b.triggerEvent("onRenderStart"),f(),b.triggerEvent("onRender")},d=function(){b.params.dropDuration=cm.getTransitionDurationFromRule(".app__dashboard__drop-duration"),b.params.moveDuration=cm.getTransitionDurationFromRule(".app__dashboard__move-duration")},e=function(){b.params["Com.Overlay"].container=b.params.draggableContainer,b.params.useGracefulDegradation&&(cm.is("IE")&&cm.isVersion()<9||cm.isMobile())&&(b.isGracefulDegradation=!0),b.isGracefulDegradation=!0},f=function(){g(),cm.getConstructor("Com.Overlay",function(a){b.components.overlays=new a(b.params["Com.Overlay"])}),b.anim.scroll=new cm.Animation(b.params.scrollNode)},g=function(){b.currentBellow&&B(),u(),b.currentZones=[],b.currentBlocks=[],b.currentBlock=null,b.currentBlockOffset={left:0,top:0},b.currentBellow={zone:null,block:null,position:null,placeholder:null},b.isProccess=!1},h=function(a,c){if(cm.preventDefault(a),!b.isProccess&&!b.currentBlock&&(cm.isTouch||!a.button)){b.isProccess=!0;var d=G(a);cm.addClass(document.body,"app__dashboard__body"),b.components.overlays.open(),b.currentZones=x(c),b.currentBlocks=y(c),b.triggerEvent("onDragStart",{item:c,node:c.node,zone:c.zone}),m(c,d),b.params.highlightZones&&D(),v(),t(),A(z(d)),cm.addEvent(window,"mousemove",i),cm.addEvent(window,"mouseup",j),cm.addEvent(window,"scroll",k)}},i=function(a){cm.preventDefault(a);var c=G(a);H(c.top+b.params.scrollStep>cm._pageSize.winHeight?1:c.top-b.params.scrollStep<0?-1:0),n(b.currentBlock,c,!0),A(z(c))},j=function(){b.currentBellow.zone&&"remove"!=b.currentBellow.zone.params.type?p(b.currentBlock,{index:b.currentBellow.placeholder.params.index,zone:b.currentBellow.zone,placeholder:b.currentBellow.placeholder,onEnd:g}):o(b.currentBlock,{onEnd:g}),b.params.highlightZones&&E(),b.components.overlays.close(),cm.removeClass(document.body,"app__dashboard__body"),cm.removeEvent(window,"mousemove",i),cm.removeEvent(window,"mouseup",j),cm.removeEvent(window,"scroll",k)},k=function(a){var b=G(a);w(),A(z(b))},l=function(a){a.placeholders={top:null,bottom:null},cm.forEach(a.getDragNodes(),function(b){cm.addEvent(b,"mousedown",function(b){h(b,a)})}),s(a),b.blocks.push(a)},m=function(a,c){var d=a.getDimensions();b.currentBlockOffset.top=c.top-d.outer.top,b.currentBlockOffset.left=c.left-d.outer.left,a.isDummy?b.currentBlock=a.clone():b.currentBlock=a.unsetZone(),cm.appendChild(b.currentBlock.node,b.params.draggableContainer),cm.addClass(b.currentBlock.node,"is-immediately"),cm.addClass(b.currentBlock.node,"is-dragging"),cm.addClass(b.currentBlock.node,"is-active",!0),n(b.currentBlock,{top:d.outer.top,left:d.outer.left,width:d.offset.width}),b.currentBlock.updateDimensions(),setTimeout(function(){cm.removeClass(b.currentBlock.node,"is-immediately")},5)},n=function(a,c,d){var e=c.top,f=c.left,g=c.node||a.node;d&&(e-=b.currentBlockOffset.top,f-=b.currentBlockOffset.left),"undefined"!=typeof c.width&&(g.style.width=[c.width,"px"].join("")),"undefined"!=typeof c.height&&(g.style.height=[c.height,"px"].join("")),"undefined"!=typeof c.opacity&&(g.style.opacity=c.opacity),cm.setCSSTranslate(g,[f,"px"].join(""),[e,"px"].join(""))},o=function(a,c){var d;b.isProccess=!0,c=cm.merge({onStart:function(){},onEnd:function(){},triggerEvent:!0},c),c.onStart(),c.triggerEvent&&b.triggerEvent("onRemoveStart",a),cm.hasParentNode(a.node)?(a.updateDimensions(),cm.addClass(a.node,"is-dropping",!0),a===b.currentBlock?(d=a.node,n(a,{left:-a.dimensions.outer.width,top:a.dimensions.outer.top,opacity:0})):(d=cm.Node("div",{"class":"app__dashboard__helper"}),cm.insertAfter(d,a.node),cm.appendChild(a.node,d),cm.transition(d,{properties:{height:"0px",opacity:0},duration:b.params.dropDuration}))):d=a.node,setTimeout(function(){cm.remove(d),a.unsetZone().remove(),c.triggerEvent&&(b.triggerEvent("onRemove",a),b.triggerEvent("onRemoveEnd",a)),b.isProccess=!1,c.onEnd()},b.params.dropDuration)},p=function(a,c){var d,e;c=cm.merge({index:0,zone:null,placeholder:null,onStart:function(){},onEnd:function(){}},c),c.onStart(),c.zone.getDimensions(),a.isDummy&&a.showSpinner(),d=c.zone.dimensions.inner.width-a.dimensions.margin.left-a.dimensions.margin.right,a.node.style.width=[d,"px"].join(""),e=a.node.offsetHeight+a.dimensions.margin.top+a.dimensions.margin.bottom,a.node.style.width=[a.dimensions.offset.width,"px"].join(""),cm.addClass(a.node,"is-dropping",!0),c.placeholder?(c.placeholder.getDimensions(),n(a,{left:c.placeholder.dimensions.outer.left-a.dimensions.margin.left,top:c.placeholder.dimensions.outer.top-a.dimensions.margin.top,width:d}),c.placeholder.show(e,b.params.dropDuration,!0)):n(a,{left:c.zone.dimensions.inner.left-a.dimensions.margin.left,top:c.zone.dimensions.inner.top-a.dimensions.margin.top,width:d}),setTimeout(function(){s(a),c.placeholder?cm.insertAfter(a.node,c.placeholder.node):cm.appendChild(a.node,c.zone.node),a.setZone(c.zone,c.index),b.triggerEvent("onDrop",a),c.onEnd()},b.params.dropDuration)},q=function(a,c){var d,e;b.isProccess=!0,c=cm.merge({block:null,zone:null,triggerEvent:!0,index:!1,onStart:function(){},onEnd:function(){}},c),c.onStart(),c.triggerEvent&&b.triggerEvent("onAppendStart",{node:a}),cm.isNumber(c.index)&&a.setAttribute("data-index",c.index.toString()),e=cm.node("div"),e.style.height=0,c.block?cm.insertAfter(e,c.block.node):cm.appendChild(e,c.zone.node),cm.appendChild(a,e),cm.addClass(a,"is-replacing",!0),cm.addClass(e,"app__dashboard__helper",!0),d=cm.getNodeOffset(a),cm.transition(e,{properties:{height:[d.outer.height,"px"].join("")},duration:b.params.dropDuration}),cm.transition(a,{properties:{opacity:1},duration:b.params.dropDuration}),setTimeout(function(){cm.removeClass(a,"is-replacing"),cm.insertAfter(a,e),cm.remove(e),c.triggerEvent&&(b.triggerEvent("onAppend",{node:a}),b.triggerEvent("onAppendEnd",{node:a})),b.isProccess=!1,c.onEnd()},b.params.dropDuration)},r=function(a,c){var d,e,f=b.params.dropDuration/2;b.isProccess=!0,c=cm.merge({block:null,zone:null,triggerEvent:!0,index:!1,onStart:function(){},onEnd:function(){}},c),c.onStart(),c.triggerEvent&&b.triggerEvent("onReplaceStart",{node:a}),cm.isNumber(c.index)&&a.setAttribute("data-index",c.index.toString()),e=cm.node("div"),c.block?(cm.insertAfter(e,c.block.node),cm.appendChild(c.block.node,e),cm.appendChild(a,e),cm.transition(c.block.node,{properties:{opacity:0},duration:f})):(cm.appendChild(e,c.zone.node),cm.appendChild(a,e),e.style.height=0),cm.addClass(a,"is-replacing",!0),cm.addClass(e,"app__dashboard__helper",!0),d=cm.getNodeOffset(a),cm.transition(e,{properties:{height:[d.outer.height,"px"].join("")},duration:b.params.dropDuration}),cm.transition(a,{properties:{opacity:1},duration:f,delayIn:f}),setTimeout(function(){c.block&&c.block.unsetZone().remove(),cm.removeClass(a,"is-replacing"),cm.insertAfter(a,e),cm.remove(e),c.triggerEvent&&(b.triggerEvent("onReplace",{node:a}),b.triggerEvent("onReplaceEnd",{node:a})),b.isProccess=!1,c.onEnd()},b.params.dropDuration)},s=function(a){cm.removeClass(a.node,"is-immediately is-dragging is-dropping is-active",!0),a.node.style.left="",a.node.style.top="",a.node.style.width="",a.node.style.opacity="",cm.setCSSTranslate(a.node,"auto","auto")},t=function(){var a;cm.forEach(b.currentZones,function(c){c.placeholders=[],c.blocks.length?cm.forEach(c.blocks,function(d,e){d.placeholders={},e||(a=new App.DashboardPlaceholder({highlight:b.params.highlightPlaceholders,animate:!b.isGracefulDegradation,index:e,container:d.node,insert:"insertBefore"}),c.placeholders.push(a)),a=new App.DashboardPlaceholder({highlight:b.params.highlightPlaceholders,animate:!b.isGracefulDegradation,index:e+1,container:d.node,insert:"insertAfter"}),c.placeholders.push(a),d.placeholders.top=c.placeholders[e],d.placeholders.bottom=c.placeholders[e+1]}):(a=new App.DashboardPlaceholder({highlight:b.params.highlightPlaceholders,animate:!b.isGracefulDegradation,index:0,container:c.node,insert:"appendChild"}),c.placeholders.push(a))})},u=function(){cm.forEach(b.currentZones,function(a){cm.forEach(a.placeholders,function(a){a.remove()}),a.placeholders=[]})},v=function(){var a;b.currentBellow.placeholder&&(a=b.currentBellow.placeholder.isShow)&&b.currentBellow.placeholder.hide(0),cm.forEach(b.currentZones,function(a){a.getDimensions()}),cm.forEach(b.currentBlocks,function(a){a.getDimensions()}),b.currentBellow.placeholder&&a&&b.currentBellow.placeholder.restore(0)},w=function(){var a;b.currentBellow.placeholder&&(a=b.currentBellow.placeholder.isShow)&&b.currentBellow.placeholder.hide(0),cm.forEach(b.currentZones,function(a){a.updateDimensions()}),cm.forEach(b.currentBlocks,function(a){a.updateDimensions()}),b.currentBellow.placeholder&&a&&b.currentBellow.placeholder.restore(0)},x=function(a){return b.zones.filter(function(b){return cm.isParent(a.params.node,b.params.node)||b.params.locked||"remove"!=b.params.type&&a.params.type!=b.params.type?!1:!0})},y=function(a){return b.blocks.filter(function(b){return cm.isParent(a.params.node,b.params.node)||a.params.type!=b.params.type?!1:!0})},z=function(a){var c={zone:null,block:null,position:null,placeholder:null};return cm.forEach(b.currentZones,function(b){a.left>=b.dimensions.offset.left&&a.left<b.dimensions.offset.right&&a.top>=b.dimensions.offset.top&&a.top<=b.dimensions.offset.bottom&&(c.zone?(b.dimensions.offset.width<c.zone.dimensions.offset.width||b.dimensions.offset.height<c.zone.dimensions.offset.height)&&(c.zone=b):c.zone=b)}),c.zone||(c.zone=b.currentBellow.zone),c.zone&&(cm.forEach(c.zone.blocks,function(b){a.top>=b.dimensions.outer.top&&a.top<=b.dimensions.outer.bottom&&(c.block=b,a.top-b.dimensions.outer.top<b.dimensions.outer.height/2?c.position="top":c.position="bottom")}),!c.block&&c.zone.blocks.length&&(a.top<c.zone.dimensions.inner.top?(c.block=c.zone.blocks[0],c.position="top"):(c.block=c.zone.blocks[c.zone.blocks.length-1],c.position="bottom"))),c.block?c.placeholder=c.block.placeholders[c.position]:c.zone&&(c.placeholder=c.zone.placeholders[0]),c},A=function(a){b.currentBellow.zone&&b.currentBellow.zone.isActive&&b.currentBellow.zone!=a.zone&&b.currentBellow.zone.unactive(),a.zone&&!a.zone.isActive&&a.zone!=b.currentBellow.placeholder&&a.zone.active(),b.currentBellow.placeholder&&b.currentBellow.placeholder.isActive&&b.currentBellow.placeholder!=a.placeholder&&(b.currentBellow.placeholder.unactive(),b.currentBellow.placeholder.hide(b.params.moveDuration)),a.placeholder&&!a.placeholder.isActive&&a.placeholder!=b.currentBellow.placeholder&&(a.placeholder.active(),a.placeholder.show(b.params.placeholderHeight,b.params.moveDuration)),b.currentBellow.zone!=a.zone||b.currentBellow.placeholder!=a.placeholder,b.currentBellow=a},B=function(){b.currentBellow.zone&&b.currentBellow.zone.unactive(),b.currentBellow.placeholder&&b.currentBellow.placeholder.unactive().hide().remove()},C=function(a){a.placeholders=[],b.zones.push(a)},D=function(){cm.forEach(b.currentZones,function(a){a.highlight()})},E=function(){cm.forEach(b.currentZones,function(a){a.unhighlight()})},F=function(a){cm.forEach(a.getDragNodes(),function(b){cm.addEvent(b,"mousedown",function(b){h(b,a)})}),b.dummyBlocks.push(a)},G=function(a){return"scroll"==a.type?cm._clientPosition:cm.getEventClientPosition(a)},H=function(a){var c=0,d=0;return 0==a?(b.isScrollProccess=!1,b.anim.scroll.stop(),!0):b.isScrollProccess?!0:(b.isScrollProccess=!0,0>a?(d=0,c=cm.getBodyScrollTop()*b.params.scrollSpeed):(d=Math.max(cm.getBodyScrollHeight()-cm._pageSize.winHeight,0),c=d*b.params.scrollSpeed),void b.anim.scroll.go({style:{docScrollTop:d},duration:c,anim:"smooth"}))};b.addBlock=function(a){return a.isDummy?F(a):l(a),b},b.removeBlock=function(a,c){return o(a,c),b},b.replaceBlock=function(a,c){return r(a,c),b},b.appendBlock=function(a,c){return q(a,c),b},b.addZone=function(a){return C(a),b},c()}),cm.define("App.DashboardPlaceholder",{modules:["Params","Events","Langs"],events:["onRenderStart","onRender"],params:{highlight:!0,animate:!0,index:0,container:cm.node("div"),insert:"appendChild"}},function(a){var b=this;b.nodes={},b.node=null,b.styleObject=null,b.offsets=null,b.dimensions=null,b.isAnimate=!1,b.isActive=!1,b.isShow=!1,b.transitionDurationProperty=null,b.height=0;var c=function(){b.setParams(a),b.convertEvents(b.params.events),d(),b.triggerEvent("onRenderStart"),e(),b.triggerEvent("onRender")},d=function(){b.transitionDurationProperty=cm.getSupportedStyle("transition-duration"),b.isAnimate=b.params.animate&&b.transitionDurationProperty},e=function(){b.nodes.container=cm.node("div",{"class":"app__dashboard__placeholder"}),cm[b.params.insert](b.nodes.container,b.params.container),b.node=b.nodes.container,b.getDimensions()};b.active=function(){return b.isActive=!0,cm.addClass(b.nodes.container,"is-active"),b.params.highlight&&cm.addClass(b.nodes.container,"is-highlight"),b},b.unactive=function(){return b.isActive=!1,cm.removeClass(b.nodes.container,"is-active is-highlight"),b},b.show=function(a,c,d){return d="undefined"==typeof d?b.isAnimate:d,b.isShow=!0,d&&(b.nodes.container.style[b.transitionDurationProperty]=[c,"ms"].join("")),b.height=a,b.nodes.container.style.height=[a,"px"].join(""),b},b.hide=function(a,c){return c="undefined"==typeof c?b.isAnimate:c,b.isShow=!1,c&&(b.nodes.container.style[b.transitionDurationProperty]=[a,"ms"].join("")),b.nodes.container.style.height="0px",b},b.restore=function(a){return b.show(b.height,a),b},b.remove=function(){return cm.remove(b.node),b},b.getDimensions=function(){return b.styleObject||(b.styleObject=cm.getStyleObject(b.node)),b.dimensions=cm.getNodeOffset(b.node,b.styleObject,null),b.dimensions},b.updateDimensions=function(){return b.dimensions=cm.getNodeOffset(b.node,b.styleObject,b.dimensions),b.dimensions},c()}),cm.define("App.DummyBlock",{modules:["Params","Events","DataNodes","DataConfig","Stack"],events:["onRenderStart","onRender","onRemove"],params:{node:cm.Node("div"),name:"",keyword:"",type:"template-manager",editorName:"app-editor"}},function(a){var b=this;b.isDummy=!0,b.isEditing=!1,b.isRemoved=!1,b.styleObject=null,b.dimensions=null,b.components={},b.nodes={container:cm.node("div"),dummy:cm.node("div")},b.node=null,b.zone=null;var c=function(){b.setParams(a),b.convertEvents(b.params.events),b.getDataNodes(b.params.node),b.getDataConfig(b.params.node),d(),b.triggerEvent("onRenderStart"),e(),b.addToStack(b.params.node),b.triggerEvent("onRender")},d=function(){b.params.name=[b.params.type,b.params.keyword].join("_")},e=function(){b.node=b.params.node,i(),b.getDimensions(),new cm.Finder("App.Editor",b.params.editorName,null,h,{event:"onProcessStart"})},f=function(a,c){a&&(b.zone=a.addBlock(b,c))},g=function(a){a&&(b.zone=a.removeBlock(b),b.zone=null)},h=function(a){a&&(b.components.editor=a.addBlock(b))},i=function(){b.nodes.spinner=cm.node("div",{"class":"app__block-spinner"},cm.node("div",{"class":"pt__box-loader is-absolute"},cm.node("div",{"class":"inner"}))),b.nodes.container.appendChild(b.nodes.spinner)};b.enableEditing=function(){return"boolean"==typeof b.isEditing&&b.isEditing||(b.isEditing=!0,cm.addClass(b.params.node,"is-editing is-editable is-visible")),b},b.disableEditing=function(){return("boolean"!=typeof b.isEditing||b.isEditing)&&(b.isEditing=!1,cm.removeClass(b.params.node,"is-editing is-editable is-visible")),b},b.setZone=function(a,c){return g(b.zone),f(a,c),b},b.unsetZone=function(){return g(b.zone),b},b.getIndex=function(){return b.zone?b.zone.getBlockIndex(b):null},b.getLower=function(){var a=b.getIndex();return b.zone.getBlock(a)||null},b.getUpper=function(){var a=b.getIndex();return b.zone.getBlock(a-1)||null},b.getDragNodes=function(){return[b.node]},b.showSpinner=function(){return cm.addClass(b.nodes.spinner,"is-visible",!0),b},b.hideSpinner=function(){return cm.removeClass(b.nodes.spinner,"is-visible"),b},b.clone=function(){var a={node:cm.clone(b.node,!0)};return b.cloneComponent(a)},b.remove=function(){return b.isRemoved||(b.isRemoved=!0,b.removeFromStack(),cm.remove(b.node),b.triggerEvent("onRemove")),b},b.getDimensions=function(){return b.styleObject||(b.styleObject=cm.getStyleObject(b.node)),b.dimensions=cm.getNodeOffset(b.node,b.styleObject,null),b.dimensions},b.updateDimensions=function(){return b.dimensions=cm.getNodeOffset(b.node,b.styleObject,b.dimensions),b.dimensions},c()}),cm.define("App.Editor",{modules:["Params","Events","DataConfig","DataNodes","Stack","Storage"],events:["onRenderStart","onRender","onProcessStart","onExpand","onCollapse","onResize","create","replace","move","delete","update","duplicate","createRequest","replaceRequest","moveRequest","deleteRequest","updateRequest","duplicateRequest","onProcessEnd"],params:{node:cm.Node("div"),name:"app-editor",topMenuName:"app-topmenu",sidebarName:"app-sidebar",templateName:"app-template",editorType:"template-manager","App.Dashboard":{},"Com.Overlay":{container:"document.body",autoOpen:!1,removeOnClose:!0,showSpinner:!0,showContent:!1,position:"fixed",theme:"light"}}},function(a){var b=this;b.types=["template-manager","form-manager"],b.components={},b.nodes={},b.zones=[],b.blocks=[],b.dummyBlocks=[],b.editorType=null,b.isRendered=!1,b.isProcessed=!1,b.isExpanded=null;var c=function(){b.setParams(a),b.convertEvents(b.params.events),b.getDataNodes(b.params.node),b.getDataConfig(b.params.node),b.addToStack(b.params.node),b.triggerEvent("onRenderStart"),d(),e(),b.triggerEvent("onRender")},d=function(){b.editorType=b.params.editorType},e=function(){cm.getConstructor("App.Dashboard",function(a,c){b.components.dashboard=new a(b.params[c]).addEvent("onDrop",l).addEvent("onRemove",m)}),cm.find("App.TopMenu",b.params.topMenuName,null,function(a){b.components.topmenu=a}),cm.find("App.Sidebar",b.params.sidebarName,null,function(a){b.components.sidebar=a.addEvent("onResize",g).addEvent("onExpandEnd",h).addEvent("onCollapseEnd",i).addEvent("onTabShow",function(a,b){k(b.item.id)})}),cm.find("App.Template",b.params.templateName,null,function(a){b.components.template=a}),f()},f=function(){b.triggerEvent("onProcessStart"),cm.addClass(cm.getDocumentHtml(),"is-editor"),b.components.sidebar?(b.components.sidebar.resize(),b.components.sidebar.isExpanded?h():i()):i(),!b.components.sidebar&&b.components.topmenu&&j(),b.isRendered=!0},g=function(a,c){cm.addClass(cm.getDocumentHtml(),"is-immediately"),b.triggerEvent("onResize",{sidebar:c}),setTimeout(function(){cm.removeClass(cm.getDocumentHtml(),"is-immediately")},5)},h=function(){"boolean"==typeof b.isExpanded&&b.isExpanded||(b.isExpanded=!0,cm.addClass(cm.getDocumentHtml(),"is-editing"),cm.forEach(b.zones,function(a){a.enableEditing()}),cm.forEach(b.blocks,function(a){a.enableEditing()}),cm.forEach(b.dummyBlocks,function(a){a.enableEditing()}),b.components.template.enableEditing(),b.triggerEvent("onExpand"))},i=function(){("boolean"!=typeof b.isExpanded||b.isExpanded)&&(b.isExpanded=!1,cm.removeClass(cm.getDocumentHtml(),"is-editing"),cm.forEach(b.zones,function(a){a.disableEditing()}),cm.forEach(b.blocks,function(a){a.disableEditing()}),cm.forEach(b.dummyBlocks,function(a){a.disableEditing()}),b.components.template.disableEditing(),b.triggerEvent("onCollapse"))},j=function(){cm.find("Com.GridlistHelper",null,null,function(a){a.enableEditing()})},k=function(a){cm.inArray(b.types,a)&&a!=b.editorType&&(b.editorType=a)},l=function(a,c){c.isDummy?b.createRequest(c):b.moveRequest(c)},m=function(a,c){c.isDummy||b.deleteRequest(c)};b.createRequest=function(a){return b.triggerEvent("createRequest",a),b},b.deleteRequest=function(a){return b.triggerEvent("deleteRequest",a),b},b.moveRequest=function(a){return b.triggerEvent("moveRequest",a),b},b.replaceRequest=function(a){return b.triggerEvent("replaceRequest",a),b},b.updateRequest=function(a){return b.triggerEvent("updateRequest",a),b},b.duplicateRequest=function(a){return b.triggerEvent("duplicateRequest",a),b},b.create=function(a,c){return a&&c&&(a=cm.isNode(a)?a:cm.strToHTML(a),b.components.dashboard.replaceBlock(a,{block:c,zone:c.zone,index:c.getIndex(),onEnd:function(){b.triggerEvent("create",a),b.triggerEvent("onProcessEnd",a)}})),b},b.replace=function(a,c){return a&&c&&(a=cm.isNode(a)?a:cm.strToHTML(a),b.components.dashboard.replaceBlock(a,{block:c,zone:c.zone,index:c.getIndex(),onEnd:function(){b.triggerEvent("replace",a),b.triggerEvent("onProcessEnd",a)}})),b},b["delete"]=function(a){return a&&b.components.dashboard.removeBlock(a,{triggerEvent:!1,onEnd:function(){b.triggerEvent("delete",a.node),b.triggerEvent("onProcessEnd",a.node)}}),b},b.duplicate=function(a,c){return a&&c&&(a=cm.isNode(a)?a:cm.strToHTML(a),b.components.dashboard.appendBlock(a,{block:c,zone:c.zone,index:c.getIndex()+1,onEnd:function(){b.triggerEvent("duplicate",a),b.triggerEvent("onProcessEnd",a)}})),b},b.update=function(a,c){return a&&c&&(a=cm.isNode(a)?a:cm.strToHTML(a),cm.clearNode(c.getInnerNode()),cm.appendChild(a,c.getInnerNode()),b.triggerEvent("update",a),b.triggerEvent("onProcessEnd",a)),b},b.addZone=function(a){return b.zones.push(a),b.components.dashboard.addZone(a),b.isRendered&&(b.components.sidebar&&b.components.sidebar.isExpanded?a.enableEditing():a.disableEditing()),b},b.removeZone=function(a){return cm.arrayRemove(b.zones,a),b},b.addBlock=function(a){if(a.isDummy)b.dummyBlocks.push(a);else{var c=a.getMenuNodes();cm.addEvent(c.edit,"click",function(){b.replaceRequest(a)}),cm.addEvent(c.duplicate,"click",function(){b.duplicateRequest(a)}),cm.addEvent(c["delete"],"click",function(){b.deleteRequest(a)}),b.blocks.push(a)}return b.components.dashboard.addBlock(a),b.isRendered&&(b.components.sidebar&&b.components.sidebar.isExpanded?a.enableEditing():a.disableEditing()),b},b.removeBlock=function(a){return a.isDummy?cm.arrayRemove(b.dummyBlocks,a):cm.arrayRemove(b.blocks,a),b},c()}),cm.define("App.HelpTour",{modules:["Params","Events","Langs","DataConfig","DataNodes","Stack"],events:["onRender"],params:{node:cm.Node("div"),container:"document.body",name:"app-helptour",sidebarName:"app-sidebar",topMenuName:"app-topmenu",templateName:"app-template",duration:500,adaptiveFrom:768,autoStart:!1,popupIndent:24,"Com.Overlay":{container:"document.body",autoOpen:!1,removeOnClose:!0,showSpinner:!1,showContent:!1,name:"",theme:"transparent",position:"absolute"},langs:{next:"Next",back:"Back",close:"Close",cancel:"Cancel",finish:"Finish"}}},function(a){var b=this,c={sidebarCollapsed:0,sidebarExpanded:0,topMenu:0,popupHeight:0,popupSelfHeight:0,popupContentHeight:0},d={sidebarExpanded:!1,sidebarTab:"modules"};b.nodes={},b.components={overlays:{}},b.currentStage=-1,b.currentScene=null,b.currentSceneNode=null,b.previousStage=null,b.previousScene=null,b.previousSceneNode=null,b.sceneIntervals={};var e=function(){f(),b.setParams(a),b.convertEvents(b.params.events),b.getDataNodes(b.params.node),b.getDataConfig(b.params.node),b.addToStack(b.params.node),g(),h(),b.triggerEvent("onRender"),b.params.autoStart&&j()},f=function(){var a;b.params.duration=cm.getTransitionDurationFromRule(".app__helptour-helper__duration"),(a=cm.getCSSRule(".app__helptour-helper__adaptive-from")[0])&&(b.params.adaptiveFrom=cm.styleToNumber(a.style.width))},g=function(){b.params["Com.Overlay"].container=b.params.container,b.params["Com.Overlay"].name=[b.params.name,"overlay"].join("-")},h=function(){cm.getConstructor("Com.Overlay",function(a){b.components.overlays.main=new a(cm.merge(b.params["Com.Overlay"],{position:"fixed"})),b.components.overlays.sidebar=new a(b.params["Com.Overlay"]),b.components.overlays.topMenu=new a(b.params["Com.Overlay"]),b.components.overlays.template=new a(b.params["Com.Overlay"]),cm.addEvent(b.params.node,"click",j)})},i=function(){var a;(a=cm.getCSSRule(".app__sidebar-helper__width-collapsed")[0])&&(c.sidebarCollapsed=cm.styleToNumber(a.style.width)),(a=cm.getCSSRule(".app__sidebar-helper__width-expanded")[0])&&(c.sidebarExpanded=cm.styleToNumber(a.style.width)),(a=cm.getCSSRule(".app__topmenu-helper__height")[0])&&(c.topMenu=cm.styleToNumber(a.style.height)),c.popupSelfHeight||(c.popupSelfHeight=b.nodes.popup.offsetHeight),b.currentSceneNode&&(c.popupContentHeight=b.currentSceneNode.offsetHeight),c.popupHeight=c.popupSelfHeight+c.popupContentHeight},j=function(){cm.find("App.Sidebar",b.params.sidebarName,null,function(a){b.components.sidebar=a,b.components.overlays.sidebar.embed(b.components.sidebar.getNodes("inner"))}),cm.find("App.TopMenu",b.params.topMenuName,null,function(a){b.components.topMenu=a,b.components.overlays.topMenu.embed(b.components.topMenu.getNodes("inner"))}),cm.find("App.Template",b.params.templateName,null,function(a){b.components.template=a,b.components.overlays.template.embed(b.components.template.getNodes("container"))}),b.components.sidebar&&b.components.topMenu&&b.components.template?k():cm.errorLog({type:"error",name:b._name.full,message:["Required components does not constructed."].join(" ")})},k=function(){o(),d.sidebarExpanded=b.components.sidebar.isExpanded,b.components.sidebar.isExpanded&&b.components.sidebar.collapse(),d.sidebarTab=b.components.sidebar.getTab(),b.components.sidebar.unsetTab(),b.components.topMenu.collapse(),cm.forEach(b.components.overlays,function(a){a.open()}),m(0)},l=function(){p(),d.sidebarExpanded&&!b.components.sidebar.isExpanded?b.components.sidebar.expand():!d.sidebarExpanded&&b.components.sidebar.isExpanded&&b.components.sidebar.collapse(),b.components.sidebar.setTab(d.sidebarTab),cm.forEach(b.components.overlays,function(a){a.close()}),n()},m=function(a){App.HelpTourScenario[a]&&(n(),b.currentStage=a,b.currentScene=App.HelpTourScenario[a],cm.forEach(b.currentScene.overlays,function(a,c){b.components.overlays[c].setTheme(a)}),b.currentScene.sidebar?b.components.sidebar.setTab(b.currentScene.sidebar).expand():b.components.sidebar.unsetTab().collapse(),b.components.topMenu.setActiveItem(b.currentScene.topMenu),b.currentScene.arrow&&cm.addClass(b.nodes.popupArrows[b.currentScene.arrow],"is-show"),0==b.currentStage?(b.nodes.back.innerHTML=b.lang("close"),b.nodes.next.innerHTML=b.lang("next")):b.currentStage==App.HelpTourScenario.length-1?(b.nodes.back.innerHTML=b.lang("back"),b.nodes.next.innerHTML=b.lang("finish")):(b.nodes.back.innerHTML=b.lang("back"),b.nodes.next.innerHTML=b.lang("next")),b.currentSceneNode=cm.Node("div",{"class":"popup__content__item",innerHTML:b.currentScene.content}),b.nodes.popupContent.appendChild(b.currentSceneNode),cm.addClass(b.currentSceneNode,"is-show",!0),s(),b.currentScene.construct&&b.currentScene.construct.call(b))},n=function(){b.currentStage>=0&&(b.previousStage=b.currentStage,b.previousScene=b.currentScene,b.previousSceneNode=b.currentSceneNode,b.components.topMenu.unsetActiveItem(b.previousScene.topMenu),b.previousScene.arrow&&cm.removeClass(b.nodes.popupArrows[b.previousScene.arrow],"is-show"),cm.forEach(b.sceneIntervals,function(a){clearInterval(a)}),function(a){setTimeout(function(){cm.remove(a)},b.params.duration)}(b.previousSceneNode),b.previousScene.destruct&&b.previousScene.destruct.call(b)),b.currentStage=-1},o=function(){b.nodes.popupArrows={},b.nodes.popup=cm.Node("div",{"class":"app__helptour__popup"},b.nodes.popupArrows.top=cm.Node("div",{"class":"popup__arrow popup__arrow--top"}),b.nodes.popupArrows.right=cm.Node("div",{"class":"popup__arrow popup__arrow--right"}),b.nodes.popupArrows.bottom=cm.Node("div",{
"class":"popup__arrow popup__arrow--bottom"}),b.nodes.popupArrows.left=cm.Node("div",{"class":"popup__arrow popup__arrow--left"}),b.nodes.popupClose=cm.Node("div",{"class":"popup__close",title:b.lang("close")}),b.nodes.popupContent=cm.Node("div",{"class":"popup__content"}),b.nodes.popupButtons=cm.Node("div",{"class":"popup__buttons"},cm.Node("div",{"class":"btn-wrap pull-center"},b.nodes.back=cm.Node("button",b.lang("back")),b.nodes.next=cm.Node("button",b.lang("next"))))),q(),b.params.container.appendChild(b.nodes.popup),cm.addClass(b.nodes.popup,"is-show",!0),cm.addEvent(b.nodes.popupClose,"click",l),cm.addEvent(b.nodes.next,"click",b.next),cm.addEvent(b.nodes.back,"click",b.prev),cm.addEvent(window,"resize",s),cm.addEvent(window,"keydown",r)},p=function(){cm.removeEvent(window,"resize",s),cm.removeEvent(window,"keydown",r),q(),cm.removeClass(b.nodes.popup,"is-show"),setTimeout(function(){cm.remove(b.nodes.popup)},b.params.duration)},q=function(){var a=[Math.round(cm.getX(b.params.node)+b.params.node.offsetWidth/2),"px"].join(""),c=[Math.round(cm.getY(b.params.node)+b.params.node.offsetHeight/2),"px"].join("");cm.setCSSTranslate(b.nodes.popup,a,c,0,"scale(0)")},r=function(a){switch(a=cm.getEvent(a),a.keyCode){case 27:l();break;case 37:b.prev();break;case 39:b.next()}},s=function(){var a,d,e,f,g,h;if(b.currentScene){if(d=cm.getPageSize(),d.winWidth>b.params.adaptiveFrom)switch(i(),a=b.currentScene.position.split(":"),g=c.popupContentHeight,a[0]){case"window":switch(a[1]){case"top":f=Math.round((d.winWidth-b.nodes.popup.offsetWidth)/2),e=b.params.popupIndent;break;case"bottom":f=Math.round((d.winWidth-b.nodes.popup.offsetWidth)/2),e=d.winHeight-c.popupHeight-b.params.popupIndent;break;case"center":default:f=Math.round((d.winWidth-b.nodes.popup.offsetWidth)/2),e=Math.round((d.winHeight-c.popupHeight)/2)}break;case"topMenu":switch(a[1]){case"center":default:f=Math.round((d.winWidth-b.nodes.popup.offsetWidth)/2),e=c.topMenu+b.params.popupIndent}break;case"topMenuItem":h=b.components.topMenu.getItem(a[1]),f=h?a[2]&&"dropdown"==a[2]&&h.dropdown?a[3]&&"left"==a[3]?cm.getX(h.dropdown)-b.nodes.popup.offsetWidth-b.params.popupIndent:cm.getX(h.dropdown)+h.dropdown.offsetWidth+b.params.popupIndent:h.container?a[3]&&"left"==a[3]?cm.getX(h.container)+h.container.offsetWidth-b.nodes.popup.offsetWidth:cm.getX(h.container):Math.round((d.winWidth-b.nodes.popup.offsetWidth)/2):Math.round((d.winWidth-b.nodes.popup.offsetWidth)/2),e=c.topMenu+b.params.popupIndent;break;case"template":switch(a[1]){case"top":f=b.components.sidebar.isExpanded?c.sidebarExpanded:c.sidebarCollapsed,f=Math.round((d.winWidth+f-b.nodes.popup.offsetWidth)/2),e=c.topMenu+b.params.popupIndent;break;case"bottom":f=b.components.sidebar.isExpanded?c.sidebarExpanded:c.sidebarCollapsed,f=Math.round((d.winWidth+f-b.nodes.popup.offsetWidth)/2),e=d.winHeight-c.popupHeight-b.params.popupIndent;break;case"left":f=(b.components.sidebar.isExpanded?c.sidebarExpanded:c.sidebarCollapsed)+b.params.popupIndent,e=Math.round((d.winHeight-c.popupHeight)/2);break;case"left-top":f=(b.components.sidebar.isExpanded?c.sidebarExpanded:c.sidebarCollapsed)+b.params.popupIndent,e=c.topMenu+b.params.popupIndent;break;case"center":default:f=b.components.sidebar.isExpanded?c.sidebarExpanded:c.sidebarCollapsed,f=Math.round((d.winWidth+f-b.nodes.popup.offsetWidth)/2),e=Math.round((d.winHeight+c.topMenu-c.popupHeight)/2)}break;default:f=Math.round((d.winWidth-b.nodes.popup.offsetWidth)/2),e=Math.round((d.winHeight-c.popupHeight)/2)}else f=0,e=0,g="auto";b.nodes.popupContent.style.height="auto"==g?g:[g,"px"].join(""),cm.setCSSTranslate(b.nodes.popup,[f,"px"].join(""),[e,"px"].join(""),0,"scale(1)")}};b.start=function(){return j(),b},b.stop=function(){return l(),b},b.next=function(){return b.currentStage>=0&&(App.HelpTourScenario[b.currentStage+1]?m(b.currentStage+1):l()),b},b.prev=function(){return b.currentStage>=0&&(App.HelpTourScenario[b.currentStage-1]?m(b.currentStage-1):l()),b},e()}),App.HelpTourScenario=[{position:"window:center",arrow:!1,overlays:{main:"transparent",sidebar:"dark",topMenu:"dark",template:"dark"},sidebar:!1,topMenu:!1,content:"<h3>QuickSilk Online Tour!</h3><p>Welcome to QuickSilk! Use the buttons at the bottom of each help bubble to quickly discover how to navigate and use the QuickSilk software. This online tour automatically appears the first time you login. Anytime after this, simply click on the help tour menu item for a quick refresher.</p>"},{position:"topMenuItem:user:dropdown:left",arrow:"right",overlays:{main:"transparent",sidebar:"dark",topMenu:"transparent",template:"dark"},sidebar:!1,topMenu:"user",content:"<h3>User Menu</h3><p>Click on your name to view the admin panel (future), your profile, or to logout. The View Profile link provides the ability to manage your subscription and billing, password, forum settings, working groups and public profile.</p>"},{position:"topMenuItem:modules:dropdown:right",arrow:"left",overlays:{main:"transparent",sidebar:"dark",topMenu:"transparent",template:"dark"},sidebar:!1,topMenu:"modules",content:"<h3>Modules</h3><p>The Module manager allows you to work on your modules from the administration panel. Simply mouse over the Modules menu and then scroll down and click on the module you wish to work with. </p>"},{position:"template:left-top",arrow:"left",overlays:{main:"transparent",sidebar:"transparent",topMenu:"dark",template:"dark"},sidebar:!1,topMenu:!1,content:"<h3>Left Panel Slider</h3><p>The left slider widget provides you with quick access to the modules, pages, layouts and template features. Simply click on the icon for the tab you wish to use.</p>"},{position:"template:left-top",arrow:"left",overlays:{main:"transparent",sidebar:"transparent",topMenu:"dark",template:"dark"},sidebar:"template-manager",topMenu:!1,content:"<h3>Installed Modules</h3><p>The modules tab provides quick access to the modules that you've subscribed to. Once you've opened a page or a template, open the modules tab to drag and drop the modules you wish to include.</p>"},{position:"template:left-top",arrow:"left",overlays:{main:"transparent",sidebar:"transparent",topMenu:"dark",template:"dark"},sidebar:"pages",topMenu:!1,content:"<h3>Site Pages</h3><p>The site pages tab allows you to quickly open, modify and manage your website pages. Simply open the tab and click on the web page you wish to work on.</p>"},{position:"template:left-top",arrow:"left",overlays:{main:"transparent",sidebar:"transparent",topMenu:"dark",template:"dark"},sidebar:"layouts",topMenu:!1,content:"<h3>Page Layouts</h3><p>Use the page layout tab to open, modify and manage the layouts of your various web page templates. A page layout will consist of the common elements you have on every page.</p>"},{position:"template:left-top",arrow:"left",overlays:{main:"transparent",sidebar:"transparent",topMenu:"dark",template:"dark"},sidebar:"templates",topMenu:!1,content:"<h3>Templates</h3><p>The templates tab displays the different custom or predesigned templates that you've installed and are immediately available for use on your website. If you want to view or install other templates, you'll do so from the template gallery.</p>"},{position:"template:center",arrow:!1,overlays:{main:"transparent",sidebar:"dark",topMenu:"dark",template:"light"},sidebar:!1,topMenu:!1,content:"<h3>Drop Area</h3><p>The drop area is where you drag and drop the modules. To move a module onto a page or template place your mouse on the desired module icon, hold down the left button on your mouse, and drag the module to the highlighted area of the page you wish to drop it, then let go of the mouse button.</p>"},{position:"topMenuItem:support:container:right",arrow:"top",overlays:{main:"transparent",sidebar:"dark",topMenu:"transparent",template:"dark"},sidebar:!1,topMenu:"support",content:"<h3>Need Help?</h3><p>Are you stuck, experiencing an issue, found a bug or have a suggestion? Simply click on this link and send us a message. FYI, to assist in the troubleshooting process we automatically collect information on the operating system, browser and browser version you are using. Our goal is to respond to your message within 1 business day.</p>"}],cm.define("App.LoginBox",{modules:["Params","DataConfig","DataNodes"],events:["onRender"],params:{node:cm.Node("div"),"Com.Tooltip":{targetEvent:"click",hideOnReClick:!0,preventClickEvent:!0,adaptiveX:!0,adaptiveY:!0,left:"(targetWidth - selfWidth) / 2",top:"targetHeight + 8",className:"app-pt__box-login__tooltip"}}},function(a){var b=this,c={};b.nodes={button:cm.Node("div"),target:cm.Node("div")};var d=function(){b.setParams(a),b.getDataNodes(b.params.node),b.getDataConfig(b.params.node),e()},e=function(){c.tooltip=new Com.Tooltip(cm.merge(b.params["Com.Tooltip"],{target:b.nodes.button,content:b.nodes.target,events:{onShow:f}}))},f=function(){var a=cm.getByAttr("type","text",b.nodes.target)[0];a&&a.focus()};d()}),cm.define("App.SearchBox",{modules:["Params","DataConfig","DataNodes"],events:["onRender"],params:{node:cm.Node("div"),"Com.Tooltip":{targetEvent:"click",hideOnReClick:!0,preventClickEvent:!0,adaptiveX:!0,adaptiveY:!1,left:"-selfWidth+targetWidth",top:"targetHeight + 8",className:"app-mod__search__tooltip"}}},function(a){var b=this,c={};b.nodes={button:cm.Node("div"),target:cm.Node("div")};var d=function(){b.setParams(a),b.getDataNodes(b.params.node),b.getDataConfig(b.params.node),e()},e=function(){c.tooltip=new Com.Tooltip(cm.merge(b.params["Com.Tooltip"],{target:b.nodes.button,content:b.nodes.target,events:{onShow:f}}))},f=function(){var a=cm.getByAttr("type","text",b.nodes.target)[0];a&&a.focus()};d()}),cm.define("App.Sidebar",{modules:["Params","Events","DataConfig","DataNodes","Storage","Stack"],events:["onRenderStart","onRender","onCollapseStart","onCollapse","onCollapseEnd","onExpandStart","onExpand","onExpandEnd","onTabShow","onTabHide","onResize"],params:{node:cm.Node("div"),name:"app-sidebar",duration:300,active:"template-manager",target:"document.html",remember:!0,ajax:{type:"json",method:"get",url:"",params:""},"Com.TabsetHelper":{node:cm.Node("div"),name:"",responseHTML:!0}}},function(a){var b,c=this,d=0,e=0;c.nodes={container:cm.Node("div"),inner:cm.Node("div"),collapseButtons:[],labels:[],tabs:[]},c.components={},c.isExpanded=null,c.openInterval=null;var f=function(){g(),c.setParams(a),c.convertEvents(c.params.events),c.getDataNodes(c.params.node),c.getDataConfig(c.params.node),h(),c.triggerEvent("onRenderStart"),i(),c.addToStack(c.params.node),c.triggerEvent("onRender")},g=function(){c.params.duration=cm.getTransitionDurationFromRule(".app__sidebar-helper__duration")},h=function(){c.params["Com.TabsetHelper"].node=c.nodes.inner,c.params["Com.TabsetHelper"].name=[c.params.name,"tabset"].join("-"),c.params["Com.TabsetHelper"].ajax=c.params.ajax},i=function(){var a,f,g;j(),d=cm._scrollSize,(f=cm.getCSSRule(".app__sidebar-helper__menu-width")[0])&&(e=cm.styleToNumber(f.style.width)),(g=cm.getCSSRule(".app__sidebar-helper__content-width")[0])&&(b=cm.styleToNumber(g.style.width)),cm.forEach(c.nodes.collapseButtons,function(a){cm.addEvent(a.container,"click",c.toggle)}),k(),a=cm.isClass(c.nodes.container,"is-expanded"),c.params.remember&&(a=c.storageRead("isExpanded")),a?c.expand(!0,!0):c.collapse(!0,!0),cm.addEvent(window,"resize",l),cm.customEvent.add(c.nodes.container,"scrollSizeChange",l)},j=function(){cm.getConstructor("Com.TabsetHelper",function(a){c.components.tabset=new a(c.params["Com.TabsetHelper"]).addEvent("onLabelTarget",function(a,b){c.isExpanded&&a.get()!=b.item.id||c.toggle()}).addEvent("onTabHide",function(a,b){c.triggerEvent("onTabHide",b)}).addEvent("onTabShow",function(a,b){c.triggerEvent("onTabShow",b)}).processTabs(c.nodes.tabs,c.nodes.labels).set(c.params.active)}),cm.forEach(c.nodes.tabs,function(a){cm.addIsolateScrolling(a.descr)})},k=function(){var a,f={innerWidth:b+d,width:e+b+d,contentWidth:b,menuWidth:e,scrollBarSize:d};cm.addClass(c.nodes.container,"is-immediately"),(a=cm.getCSSRule(".app__sidebar .sidebar__content")[0])&&(a.style.width=[f.innerWidth,"px"].join("")),(a=cm.getCSSRule(".app__sidebar .sidebar__remove-zone")[0])&&(a.style.width=[f.innerWidth,"px"].join("")),((a=cm.getCSSRule(".app__sidebar.is-expanded")[0])||(a=cm.getCSSRule(".is-expanded.app__sidebar")[0]))&&(a.style.width=[f.width,"px"].join("")),(a=cm.getCSSRule(".app__sidebar-helper__width-expanded")[0])&&(a.style.width=[f.width,"px"].join("")),c.triggerEvent("onResize",f),setTimeout(function(){cm.removeClass(c.nodes.container,"is-immediately")},5)},l=function(){animFrame(function(){cm._scrollSize!=d&&(d=cm._scrollSize,k()),cm._pageSize.winWidth<=cm._config.adaptiveFrom&&c.isExpanded&&c.collapse(!0)})};c.collapse=function(a,b){return(b||"boolean"!=typeof c.isExpanded||c.isExpanded)&&(c.isExpanded=!1,c.params.remember&&c.storageWrite("isExpanded",!1),c.triggerEvent("onCollapseStart"),a&&(cm.addClass(c.nodes.container,"is-immediately"),cm.addClass(c.params.target,"is-immediately")),cm.replaceClass(c.nodes.container,"is-expanded","is-collapsed",!0),cm.replaceClass(c.params.target,"is-sidebar--expanded","is-sidebar--collapsed",!0),cm.forEach(c.nodes.collapseButtons,function(a){cm.removeClass(a.container,"active")}),c.openInterval&&clearTimeout(c.openInterval),a?(c.triggerEvent("onCollapse"),c.triggerEvent("onCollapseEnd"),c.openInterval=setTimeout(function(){cm.removeClass(c.nodes.container,"is-immediately"),cm.removeClass(c.params.target,"is-immediately")},5)):c.openInterval=setTimeout(function(){c.triggerEvent("onCollapse"),c.triggerEvent("onCollapseEnd")},c.params.duration+5)),c},c.expand=function(a,b){return(b||"boolean"!=typeof c.isExpanded||!c.isExpanded)&&(c.isExpanded=!0,c.params.remember&&c.storageWrite("isExpanded",!0),c.triggerEvent("onExpandStart"),a&&(cm.addClass(c.nodes.container,"is-immediately"),cm.addClass(c.params.target,"is-immediately")),cm.replaceClass(c.nodes.container,"is-collapsed","is-expanded",!0),cm.replaceClass(c.params.target,"is-sidebar--collapsed","is-sidebar--expanded",!0),cm.forEach(c.nodes.collapseButtons,function(a){cm.addClass(a.container,"active")}),c.openInterval&&clearTimeout(c.openInterval),a?(c.triggerEvent("onExpand"),c.triggerEvent("onExpandEnd"),c.openInterval=setTimeout(function(){cm.removeClass(c.nodes.container,"is-immediately"),cm.removeClass(c.params.target,"is-immediately")},5)):c.openInterval=setTimeout(function(){c.triggerEvent("onExpand"),c.triggerEvent("onExpandEnd")},c.params.duration+5)),c},c.toggle=function(){return c.isExpanded?c.collapse():c.expand(),c},c.setTab=function(a){return c.components.tabset&&c.components.tabset.set(a),c},c.unsetTab=function(){return c.components.tabset&&c.components.tabset.unset(),c},c.getTab=function(){return c.components.tabset?c.components.tabset.get():null},c.resize=function(){return k(),c},c.getDimensions=function(a){var b=cm.getRect(c.nodes.container);return b[a]||b},c.getNodes=function(a){return c.nodes[a]||c.nodes},f()}),cm.define("App.Stylizer",{modules:["Params","Events","Langs","DataConfig","DataNodes","Stack"],events:["onRender","onSelect","onChange"],params:{node:cm.Node("div"),name:"",active:{},"default":{},styles:{"font-family":["Arial, Helvetica, sans-serif","Arial Black, Gadget, sans-serif","Courier New, Courier, monospace","Georgia, serif","Impact, Charcoal, sans-serif","Lucida Console, Monaco, monospace","Lucida Sans Unicode, Lucida Grande, sans-serif","Palatino Linotype, Book Antiqua, Palatino, serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],"line-height":[8,10,12,16,20,24,28,32,36,40,48,56,64,72,80,88,96,108,120],"font-size":[8,9,10,11,12,13,14,18,20,22,24,28,32,36,42,48,54,60,72,96],"font-weight":[100,300,400,600,700,800],"font-style":["normal","italic"],"text-decoration":["none","underline"]},styleBinds:{"font-weight":{normal:400,bold:700}},controls:{"font-family":!0,"line-height":!0,"font-size":!0,"font-weight":!0,"font-style":!0,"text-decoration":!0,color:!0},showResetButtons:!0,overrideControls:!0,"Com.Tooltip":{targetEvent:"click",hideOnReClick:!0,top:"targetHeight + 6",left:"-6",className:"app__stylizer-tooltip"},"Com.Select":{renderInBody:!1},"Com.ColorPicker":{renderInBody:!1},langs:{100:"Thin",300:"Light",400:"Regular",600:"Semi-Bold",700:"Bold",800:"Extra-Bold"}}},function(a){var b=this;b.nodes={container:cm.Node("div"),input:cm.Node("input",{type:"hidden"}),preview:cm.Node("div"),tooltip:{}},b.components={},b.value=null,b.previousValue=null;var c=function(){b.setParams(a),b.convertEvents(b.params.events),b.getDataNodes(b.params.node),b.getDataConfig(b.params.node),d(),h(),b.addToStack(b.nodes.container),i(cm.merge(b.params["default"],b.params.active),!1),b.triggerEvent("onRender",b.value)},d=function(){cm.isNode(b.nodes.input)&&(b.params.name=b.nodes.input.getAttribute("name")||b.params.name),b.params["default"]=cm.merge(b.params["default"],b.getNodeDataConfig(b.nodes.input,"data-default")),b.params.active=cm.merge(cm.merge(b.params["default"],b.params.active),b.getNodeDataConfig(b.nodes.input,"value")),e(b.params.active),e(b.params["default"]),f(b.params.active),f(b.params["default"]),g(),b.params.overrideControls&&cm.forEach(b.params.controls,function(a,c){b.params.controls[c]=!!b.params["default"][c]})},e=function(a){return a["line-height"]&&"normal"!=a["line-height"]&&(a["line-height"]=parseInt(a["line-height"])),a["font-size"]&&(a["font-size"]=parseInt(a["font-size"])),a["font-weight"]&&(b.params.styleBinds["font-weight"][a["font-weight"]]&&(a["font-weight"]=b.params.styleBinds["font-weight"][a["font-weight"]]),a["font-weight"]=parseInt(a["font-weight"]),a["font-weight"]=cm.inArray(b.params.styles["font-weight"],a["font-weight"])?a["font-weight"]:400),a["font-style"]&&(a["font-style"]=cm.inArray(b.params.styles["font-style"],a["font-style"])?a["font-style"]:"normal"),a["text-decoration"]&&(a["text-decoration"]=cm.inArray(b.params.styles["text-decoration"],a["text-decoration"])?a["text-decoration"]:"none"),a},f=function(a){a["font-size"]&&!cm.inArray(b.params.styles["font-size"],a["font-size"])&&b.params.styles["font-size"].push(a["font-size"]),a["line-height"]&&!cm.inArray(b.params.styles["line-height"],a["line-height"])&&b.params.styles["line-height"].push(a["line-height"]),a["font-family"]&&!cm.inArray(b.params.styles["font-family"],a["font-family"])&&b.params.styles["font-family"].push(a["font-family"])},g=function(){b.params.styles["font-size"].sort(function(a,b){return a-b}),b.params.styles["line-height"].sort(function(a,b){return"normal"==a?-1:"normal"==b?1:a-b}),b.params.styles["font-family"].sort(function(a,b){var c=a.toLowerCase().replace(/["']/g,""),d=b.toLowerCase().replace(/["']/g,"");return d>c?-1:c>d?1:0})},h=function(){b.nodes.tooltip.container=cm.Node("div",{"class":"pt__toolbar"},cm.Node("div",{"class":"inner"},b.nodes.tooltip.group1=cm.Node("ul",{"class":"group"}),b.nodes.tooltip.group2=cm.Node("ul",{"class":"group"}),b.nodes.tooltip.group3=cm.Node("ul",{"class":"group"}),b.nodes.tooltip.group4=cm.Node("ul",{"class":"group"}))),b.params.controls["font-family"]&&(b.nodes.tooltip.group2.appendChild(cm.Node("li",{"class":"is-select medium"},b.nodes.tooltip["font-family"]=cm.Node("select",{title:b.lang("Font")}))),cm.forEach(b.params.styles["font-family"],function(a){b.nodes.tooltip["font-family"].appendChild(cm.Node("option",{value:a,style:{"font-family":a}},a.replace(/["']/g,"").split(",")[0]))}),b.components["font-family"]=new Com.Select(cm.merge(b.params["Com.Select"],{select:b.nodes.tooltip["font-family"],events:{onChange:function(a,c){i(cm.merge(b.value,{"font-family":c}),!0)}}}))),b.params.controls["font-weight"]&&(b.nodes.tooltip.group1.appendChild(b.nodes.tooltip["font-weight-button"]=cm.Node("li",{"class":"button button-secondary is-icon"},cm.Node("span",{"class":"icon toolbar bold"}))),cm.addEvent(b.nodes.tooltip["font-weight-button"],"click",function(){i(cm.merge(b.value,{"font-weight":b.value["font-weight"]>400?400:700}),!0)}),b.nodes.tooltip.group2.appendChild(cm.Node("li",{"class":"is-select medium"},b.nodes.tooltip["font-weight"]=cm.Node("select",{title:b.lang("Weight")}))),cm.forEach(b.params.styles["font-weight"],function(a){b.nodes.tooltip["font-weight"].appendChild(cm.Node("option",{value:a},b.lang(a)))}),b.components["font-weight"]=new Com.Select(cm.merge(b.params["Com.Select"],{select:b.nodes.tooltip["font-weight"],events:{onChange:function(a,c){i(cm.merge(b.value,{"font-weight":c}),!0)}}}))),b.params.controls["font-style"]&&(b.nodes.tooltip.group1.appendChild(b.nodes.tooltip["font-style-button"]=cm.Node("li",{"class":"button button-secondary is-icon"},cm.Node("span",{"class":"icon toolbar italic"}))),cm.addEvent(b.nodes.tooltip["font-style-button"],"click",function(){i(cm.merge(b.value,{"font-style":"italic"==b.value["font-style"]?"normal":"italic"}),!0)})),b.params.controls["text-decoration"]&&(b.nodes.tooltip.group1.appendChild(b.nodes.tooltip["text-decoration-button"]=cm.Node("li",{"class":"button button-secondary is-icon"},cm.Node("span",{"class":"icon toolbar underline"}))),cm.addEvent(b.nodes.tooltip["text-decoration-button"],"click",function(){i(cm.merge(b.value,{"text-decoration":"underline"==b.value["text-decoration"]?"none":"underline"}),!0)})),b.params.controls["font-size"]&&(b.nodes.tooltip.group2.appendChild(cm.Node("li",{"class":"is-select x-small"},b.nodes.tooltip["font-size"]=cm.Node("select",{title:b.lang("Size")}))),cm.forEach(b.params.styles["font-size"],function(a){b.nodes.tooltip["font-size"].appendChild(cm.Node("option",{value:a},a))}),b.components["font-size"]=new Com.Select(cm.merge(b.params["Com.Select"],{select:b.nodes.tooltip["font-size"],events:{onChange:function(a,c){i(cm.merge(b.value,{"font-size":c}),!0)}}}))),b.params.controls["line-height"]&&(b.nodes.tooltip.group2.appendChild(cm.Node("li",{"class":"is-select x-small"},b.nodes.tooltip["line-height"]=cm.Node("select",{title:b.lang("Leading")}))),cm.forEach(b.params.styles["line-height"],function(a){b.nodes.tooltip["line-height"].appendChild(cm.Node("option",{value:a},"normal"==a?b.lang("auto"):a))}),b.components["line-height"]=new Com.Select(cm.merge(b.params["Com.Select"],{select:b.nodes.tooltip["line-height"],events:{onChange:function(a,c){i(cm.merge(b.value,{"line-height":c}),!0)}}}))),b.params.controls.color&&(b.nodes.tooltip.group3.appendChild(cm.Node("li",{"class":"is-select medium"},b.nodes.tooltip.color=cm.Node("input",{type:"text",title:b.lang("Color")}))),b.components.color=new Com.ColorPicker(cm.merge(b.params["Com.ColorPicker"],{input:b.nodes.tooltip.color,defaultValue:b.params["default"].color,events:{onChange:function(a,c){i(cm.merge(b.value,{color:c}),!0)}}}))),b.params.showResetButtons&&(b.nodes.tooltip.group4.appendChild(cm.Node("li",b.nodes.tooltip["reset-default-button"]=cm.Node("div",{"class":"button button-primary"},b.lang("Reset to default")))),b.nodes.tooltip.group4.appendChild(cm.Node("li",b.nodes.tooltip["reset-current-button"]=cm.Node("div",{"class":"button button-primary"},b.lang("Reset to current")))),cm.addEvent(b.nodes.tooltip["reset-default-button"],"click",function(){i(cm.clone(b.params["default"]),!0)}),cm.addEvent(b.nodes.tooltip["reset-current-button"],"click",function(){i(cm.clone(b.params.active),!0)})),b.components.tooltip=new Com.Tooltip(cm.merge(b.params["Com.Tooltip"],{content:b.nodes.tooltip.container,target:b.nodes.container,events:{onShowStart:function(){cm.addClass(b.nodes.container,"active")},onHideStart:function(){cm.removeClass(b.nodes.container,"active")}}}))},i=function(a,c){var d=cm.clone(a);b.previousValue=cm.clone(b.value),b.value=a,cm.forEach(a,function(a,c){switch(b.components[c]&&b.components[c].set(a,!1),c){case"font-weight":a>400?cm.addClass(b.nodes.tooltip["font-weight-button"],"active"):cm.removeClass(b.nodes.tooltip["font-weight-button"],"active");break;case"text-decoration":"underline"==a?cm.addClass(b.nodes.tooltip["text-decoration-button"],"active"):cm.removeClass(b.nodes.tooltip["text-decoration-button"],"active");break;case"font-style":"italic"==a?cm.addClass(b.nodes.tooltip["font-style-button"],"active"):cm.removeClass(b.nodes.tooltip["font-style-button"],"active");break;case"font-size":d[c]=[a,"px"].join("");break;case"line-height":d[c]="normal"==a?a:[a,"px"].join("")}b.nodes.preview.style[cm.styleStrToKey(c)]=d[c]}),b.nodes.input.value=JSON.stringify(d),c&&(b.triggerEvent("onSelect",b.value),j())},j=function(){JSON.stringify(b.value)!=JSON.stringify(b.previousValue)&&b.triggerEvent("onChange",b.value)};b.set=function(a,c){return c="undefined"!=typeof c?c:!0,a=cm.isObject(a)?e(a):b.params["default"],i(a,c),b},b.get=function(){return b.value},c()}),cm.define("App.Template",{modules:["Params","Events","DataConfig","DataNodes","Stack"],events:["onRenderStart","onRender","onRedraw","onResize","enableEditing","disableEditing"],params:{node:cm.Node("div"),name:"app-template",stickyFooter:!1,scrollNode:"document.body",scrollDuration:1e3,topMenuName:"app-topmenu",sidebarName:"app-sidebar",editorName:"app-editor",template:{type:"box",width:1e3,align:"center",indent:24},header:{type:"box",width:1e3,align:"center",fixed:!1,overlapping:!1},footer:{type:"box",width:1e3,align:"center"}}},function(a){var b=this;b.nodes={container:cm.Node("div"),inner:cm.Node("div"),headerContainer:cm.Node("div"),header:cm.Node("div"),content:cm.Node("div"),footer:cm.Node("div"),buttonUp:cm.Node("div")},b.isEditing=null,b.compoennts={},b.anim={},b.offsets={};var c=function(){b.setParams(a),b.convertEvents(b.params.events),b.getDataNodes(b.params.node),b.getDataConfig(b.params.node),b.triggerEvent("onRenderStart"),d(),b.addToStack(b.params.node),b.triggerEvent("onRender"),f(!0)},d=function(){cm.find("App.TopMenu",b.params.topMenuName,null,function(a){b.compoennts.topMenu=a}),cm.find("App.Sidebar",b.params.sidebarName,null,function(a){b.compoennts.sidebar=a}),new cm.Finder("App.Editor",b.params.editorName,null,function(a){b.compoennts.editor=a.addEvent("onResize",e)},{event:"onProcessStart"}),b.anim.scroll=new cm.Animation(b.params.scrollNode),cm.addEvent(b.nodes.buttonUp,"click",b.scrollToTop),cm.addEvent(window,"resize",function(){animFrame(function(){b.triggerEvent("onResize"),f(!0)})})},e=function(a,b){var c;(c=cm.getCSSRule("html.is-sidebar--expanded .tpl__container")[0])&&(c.style.marginLeft=[b.sidebar.width,"px"].join("")),(c=cm.getCSSRule("html.is-sidebar--expanded .tpl__header__container.is-fixed")[0])&&(c.style.left=[b.sidebar.width,"px"].join(""))},f=function(a){b.offsets.top=b.compoennts.topMenu?b.compoennts.topMenu.getDimensions("height"):0,b.offsets.left=b.compoennts.sidebar?b.compoennts.sidebar.getDimensions("width"):0,b.offsets.header=b.nodes.header.offsetHeight,b.offsets.footer=b.nodes.footer.offsetHeight,b.offsets.height=cm.getPageSize("winHeight")-b.offsets.top,b.nodes.inner.style.minHeight=b.offsets.height+"px",b.isEditing?(b.nodes.content.style.top=0,b.params.stickyFooter&&(b.nodes.content.style.minHeight=Math.max(b.offsets.height-b.offsets.header-b.offsets.footer,0)+"px")):(b.params.header.fixed&&!b.params.header.overlapping&&(b.nodes.content.style.top=b.offsets.header+"px"),b.params.stickyFooter&&(b.params.header.overlapping?b.nodes.content.style.minHeight=Math.max(b.offsets.height-b.offsets.footer,0)+"px":b.nodes.content.style.minHeight=Math.max(b.offsets.height-b.offsets.header-b.offsets.footer,0)+"px")),a&&b.triggerEvent("onRedraw")};b.redraw=function(a){return a="undefined"==typeof a?!0:a,f(a),b},b.enableEditing=function(){return"boolean"==typeof b.isEditing&&b.isEditing||(b.isEditing=!0,cm.removeClass(b.nodes.headerContainer,"is-overlapping is-fixed"),b.redraw(),b.triggerEvent("enableEditing")),b},b.disableEditing=function(){return("boolean"!=typeof b.isEditing||b.isEditing)&&(b.isEditing=!1,b.params.header.overlapping&&cm.addClass(b.nodes.headerContainer,"is-overlapping"),b.params.header.fixed&&cm.addClass(b.nodes.headerContainer,"is-fixed"),b.redraw(),b.triggerEvent("disableEditing")),b},b.scrollTo=function(a,c){return b.anim.scroll.go({style:{docScrollTop:a},duration:c,anim:"smooth"}),b},b.scrollToTop=function(){return b.scrollTo(0,b.params.scrollDuration),b},b.scrollStop=function(){return b.anim.scroll.stop(),b},b.getNodes=function(a){return b.nodes[a]||b.nodes},c()}),cm.define("App.TopMenu",{modules:["Params","Events","DataConfig","DataNodes","Stack"],events:["onRender","onCollapse","onExpand"],params:{node:cm.Node("div"),name:"app-topmenu",target:"document.html"}},function(a){var b,c=this;c.nodes={container:cm.Node("div"),inner:cm.Node("div"),button:cm.Node("div"),target:cm.Node("div"),items:{}},c.isExpanded=!1;var d=function(){c.setParams(a),c.convertEvents(c.params.events),c.getDataNodes(c.params.node),c.getDataConfig(c.params.node),c.addToStack(c.params.node),e(),c.triggerEvent("onRender")},e=function(){f(),cm.addEvent(c.nodes.button,"click",c.toggle),c.isExpanded=cm.isClass(c.nodes.container,"is-expanded"),cm.addEvent(window,"resize",f)},f=function(){cm.addClass(c.nodes.container,"cm__transition-disable"),b&&clearTimeout(b),b=setTimeout(function(){cm.removeClass(c.nodes.container,"cm__transition-disable")},5)};c.expand=function(){return c.isExpanded||(c.isExpanded=!0,cm.replaceClass(c.nodes.container,"is-collapsed","is-expanded"),cm.replaceClass(c.params.target,"is-topmenu--collapsed","is-topmenu--expanded",!0),c.triggerEvent("onExpand")),c},c.collapse=function(){return c.isExpanded&&(c.isExpanded=!1,cm.replaceClass(c.nodes.container,"is-expanded","is-collapsed"),cm.replaceClass(c.params.target,"is-topmenu--expanded","is-topmenu--collapsed",!0),c.triggerEvent("onCollapse")),c},c.toggle=function(){return c.isExpanded?c.collapse():c.expand(),c},c.setActiveItem=function(a){var b;return a&&(b=c.nodes.items[a])&&cm.addClass(b.container,"active"),c},c.unsetActiveItem=function(a){var b;return a&&(b=c.nodes.items[a])&&cm.removeClass(b.container,"active"),c},c.getItem=function(a){var b;return a&&(b=c.nodes.items[a])?b:null},c.getDimensions=function(a){var b=cm.getRect(c.nodes.container);return b[a]||b},c.getNodes=function(a){return c.nodes[a]||c.nodes},d()}),cm.define("App.Zone",{modules:["Params","Events","DataConfig","Stack"],events:["onRenderStart","onRender","onRemove"],params:{node:cm.Node("div"),type:"template-manager",instanceId:!1,zone:0,parentId:0,layerId:0,link:!1,locked:!1,editorName:"app-editor"}},function(a){var b=this;b.isEditing=null,b.isRemoved=!1,b.isActive=!1,b.styleObject=null,b.offsets=null,b.dimensions=null,b.components={},b.node=null,b.block=null,b.dummyBlocks=[],b.blocks=[];var c=function(){b.setParams(a),b.convertEvents(b.params.events),b.getDataConfig(b.params.node),d(),b.triggerEvent("onRenderStart"),e(),b.addToStack(b.params.node),b.triggerEvent("onRender")},d=function(){b.params.link?(b.params.linkName=[b.params.link.type,b.params.link.parentId,b.params.zone].join("_"),b.params.blockName=[b.params.link.type,b.params.link.parentId].join("_")):b.params.blockName=[b.params.type,b.params.parentId].join("_"),cm.isNumber(b.params.instanceId)||cm.isString(b.params.instanceId)?b.params.name=[b.params.type,b.params.instanceId,b.params.parentId,b.params.zone].join("_"):b.params.name=[b.params.type,b.params.parentId,b.params.zone].join("_")},e=function(){b.node=b.params.node,b.getDimensions(),cm.addClass(b.node,"app__zone"),cm.addClass(b.node,["is",b.params.type].join("-")),b.params.locked?cm.addClass(b.node,"is-locked"):cm.addClass(b.node,"is-available"),new cm.Finder("App.Block",b.params.blockName,null,f),new cm.Finder("App.Editor",b.params.editorName,null,h,{event:"onProcessStart"})},f=function(a){a&&(b.block=a.addZone(b))},g=function(a){a&&(b.block=a.removeZone(b),b.block=null)},h=function(a){a&&(b.components.editor=a.addZone(b))},i=function(a){a&&(b.components.editor=a.removeZone(b))};b.enableEditing=function(){return"boolean"==typeof b.isEditing&&b.isEditing||(b.isEditing=!0,cm.addClass(b.node,"is-editing",!0),b.params.locked||cm.addClass(b.node,"is-editable",!0)),b},b.disableEditing=function(){return("boolean"!=typeof b.isEditing||b.isEditing)&&(b.isEditing=!1,
cm.removeClass(b.node,"is-editing",!0),b.params.locked||cm.removeClass(b.node,"is-editable",!0)),b},b.addBlock=function(a,c){return a.isDummy?"undefined"!=typeof c&&cm.isNumber(c)?b.dummyBlocks[c]=a:b.dummyBlocks.push(a):"undefined"!=typeof c&&cm.isNumber(c)?b.blocks.splice(c,0,a):b.blocks.push(a),b},b.removeBlock=function(a){return a.isDummy?cm.arrayRemove(b.dummyBlocks,a):cm.arrayRemove(b.blocks,a),b},b.getBlockIndex=function(a){return a.isDummy?b.dummyBlocks.indexOf(a):b.blocks.indexOf(a)},b.getBlock=function(a){return b.blocks[a]},b.highlight=function(){return b.params.locked||cm.addClass(b.node,"is-highlight"),b},b.unhighlight=function(){return b.params.locked||cm.removeClass(b.node,"is-highlight"),b},b.active=function(){return b.params.locked||(b.isActive=!0,cm.addClass(b.node,"is-active")),b},b.unactive=function(){return b.params.locked||(b.isActive=!1,cm.removeClass(b.node,"is-active")),b},b.remove=function(){if(!b.isRemoved){for(b.isRemoved=!0,g(b.block),i(b.components.editor);b.blocks.length;)b.blocks[0].remove();b.removeFromStack(),cm.remove(b.params.node),b.triggerEvent("onRemove")}return b},b.getDimensions=function(){return b.styleObject||(b.styleObject=cm.getStyleObject(b.node)),b.dimensions=cm.getNodeOffset(b.node,b.styleObject,null),b.dimensions},b.updateDimensions=function(){return b.dimensions=cm.getNodeOffset(b.node,b.styleObject,b.dimensions),b.dimensions},c()}),cm.define("App.ModuleHiddenTabs",{modules:["Params","Events","Langs","DataConfig","DataNodes","Stack"],events:["onRenderStart","onRender","onTabShow","onTabHide","enableEditing","disableEditing","enableEditable","disableEditable"],params:{node:cm.Node("div"),name:"",event:"hover",duration:"cm._config.animDuration",delay:"cm._config.hideDelay",isEditing:!1,customEvents:!0,"Com.TabsetHelper":{}}},function(a){var b=this;b.nodes={container:cm.node("div"),inner:cm.node("div"),"menu-label":cm.node("div"),labels:[],options:[],tabs:[]},b.components={},b.tabs=[],b.options=[],b.isEditing=null,b.isProcessing=!1,b.hideInterval=null,b.changeInterval=null;var c=function(){d(),b.setParams(a),b.convertEvents(b.params.events),b.getDataNodes(b.params.node),b.getDataConfig(b.params.node),e(),b.triggerEvent("onRenderStart"),f(),b.addToStack(b.params.node),b.triggerEvent("onRender")},d=function(){b.params.duration=cm.getTransitionDurationFromRule(".app-mod__hidden-tabs-helper__duration")||b.params.duration},e=function(){b.params["Com.TabsetHelper"].node=b.nodes.inner,b.params["Com.TabsetHelper"].name=[b.params.name,"tabset"].join("-"),b.params["Com.TabsetHelper"].targetEvent=b.params.event},f=function(){cm.getConstructor("Com.TabsetHelper",function(a,c){b.components.tabset=new a(b.params[c]).addEvent("onTabHide",function(a,c){b.triggerEvent("onTabHide",c)}).addEvent("onTabShowStart",function(a,c){b.isProcessing||(b.nodes["content-list"].style.overflow="hidden",b.nodes["content-list"].style.height=b.nodes["content-list"].offsetHeight+"px"),b.isProcessing=!0,b.changeInterval&&clearTimeout(b.changeInterval),b.changeInterval=setTimeout(function(){b.isProcessing=!1,b.nodes["content-list"].style.height="auto",b.nodes["content-list"].style.overflow="visible"},b.params.duration)}).addEvent("onTabShow",function(a,c){b.nodes["content-list"].style.height=c.item.tab.container.offsetHeight+"px",b.nodes["menu-label"].innerHTML=c.item.title,b.triggerEvent("onTabShow",c)}).addEvent("onLabelTarget",function(a,b){k()}).processTabs(b.nodes.tabs,b.nodes.labels)}),g(),cm.forEach(b.nodes.options,h),i(),b.params.customEvents&&(cm.customEvent.add(b.params.node,"redraw",function(){b.redraw()}),cm.customEvent.add(b.params.node,"enableEditable",function(){b.enableEditing()}),cm.customEvent.add(b.params.node,"disableEditable",function(){b.disableEditing()})),b.params.isEditing&&b.enableEditing()},g=function(){b.tabs=b.components.tabset.getTabs(),cm.forEach(b.tabs,function(a){cm.addEvent(a.label.link,"click",function(c){"click"==b.params.event&&b.components.tabset.get()!=a.id&&cm.preventDefault(c)})})},h=function(a){var c=cm.merge({id:"",nodes:a},b.getNodeDataConfig(a.container));cm.addEvent(a.container,"click",function(a){b.components.tabset.get()!=c.id&&(cm.preventDefault(a),b.components.tabset.set(c.id),k())}),b.options.push(c)},i=function(){"hover"==b.params.event&&(cm.addEvent(b.nodes.container,"mouseover",function(a){k()}),cm.addEvent(b.nodes.container,"mouseout",function(a){var c=cm.getRelatedTarget(a);cm.isParent(b.nodes.container,c,!0)||!b.isEditing&&j()})),cm.addEvent(window,"click",function(a){var c=cm.getEventTarget(a);cm.isParent(b.nodes.container,c,!0)?k():!b.isEditing&&j()})},j=function(){b.hideInterval&&clearTimeout(b.hideInterval),b.hideInterval=setTimeout(function(){cm.removeClass(b.nodes.content,"is-show"),b.nodes["menu-label"].innerHTML="",b.hideInterval=setTimeout(function(){b.components.tabset.unset()},b.params.delay)},b.params.delay)},k=function(){b.components.tabset.current&&(b.hideInterval&&clearTimeout(b.hideInterval),cm.addClass(b.nodes.content,"is-show",!0))};b.enableEditing=function(){return cm.isBoolean(b.isEditing)&&b.isEditing||(b.isEditing=!0,cm.addClass(b.params.node,"is-editing is-editable"),b.components.tabset.setByIndex(0),k(),b.triggerEvent("enableEditing"),b.triggerEvent("enableEditable")),b},b.disableEditing=function(){return(!cm.isBoolean(b.isEditing)||b.isEditing)&&(b.isEditing=!1,cm.removeClass(b.params.node,"is-editing is-editable"),j(),b.triggerEvent("disableEditing"),b.triggerEvent("disableEditable")),b},b.redraw=function(){return b},c()}),cm.define("App.ModuleMenu",{modules:["Params","DataNodes"],params:{node:cm.Node("div")}},function(a){var b=this;b.nodes={select:cm.Node("select")};var c=function(){b.setParams(a),b.getDataNodes(b.params.node),d()},d=function(){cm.addEvent(b.nodes.select,"change",e)},e=function(){var a=b.nodes.select.value;cm.isEmpty(a)||(window.location.href=a)};c()});