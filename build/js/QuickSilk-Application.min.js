var App={Elements:{},Nodes:{}};App.Anchor=function(a){var b=this,c=cm.merge({link:cm.Node("a"),href:null,target:cm.Node("div"),scroll:document.body,indentY:0,duration:800,setURL:!0},a),d={},e=function(){var a,b;d.scroll=new cm.Animation(c.scroll),cm.addEvent(c.link,"click",function(e){e=cm.getEvent(e),cm.preventDefault(e),c.setURL&&cm.isHistoryAPI&&c.href&&window.history.pushState(!1,!1,c.href),a=c.target.offsetTop+c.indent,b=c.scroll==document.body?{docScrollTop:a}:{scrollTop:a},d.scroll.go({style:b,anim:"smooth",duration:c.duration})},!0,!0)};b.setIndent=function(a){return isNaN(a)||(c.indent=a),b},e()},cm.define("App.Block",{modules:["Params","Events","DataNodes","DataConfig","Stack"],events:["onRender"],params:{node:cm.Node("div"),type:"content",positionId:0,zone:0,parentId:0,locked:!1,visible:!0,editorName:"app-editor",thisContainer:"document.body",topContainer:"top.document.body"}},function(a){var b=this;b.isDummy=!1,b.isEditing=!1,b.styleObject=null,b.dimensions=null,b.components={},b.nodes={container:cm.node("div"),content:cm.node("div")},b.node=null,b.zone=null,b.zones={};var c=function(){b.setParams(a),b.convertEvents(b.params.events),b.getDataNodes(b.params.node),b.getDataConfig(b.params.node),d(),e(),b.addToStack(b.params.node),b.triggerEvent("onRender")},d=function(){b.params.name=b.params.positionId,b.params.zoneName=[b.params.parentId,b.params.zone].join("_"),b.node=b.params.node},e=function(){b.styleObject=cm.getStyleObject(b.params.node),b.dimensions=cm.getNodeOffset(b.params.node,b.styleObject),new cm.top("Finder")("App.Zone",b.params.zoneName,b.params.thisContainer,f),new cm.top("Finder")("App.Editor",b.params.editorName,b.params.topContainer,h)},f=function(a){a&&(b.zone=a.addBlock(b.params.name,b))},g=function(a){a&&(b.zone=a.removeBlock(b.params.name),b.zone=null)},h=function(a){a&&(b.components.editor=a.addBlock(b.params.name,b))},i=function(a){a&&(b.components.editor=a.removeBlock(b.params.name))};b.enableEditing=function(){return b.isEditing||(b.isEditing=!0,b.params.locked||cm.addClass(b.params.node,"is-editable"),b.params.visible||cm.addClass(b.params.node,"is-visible"),cm.customEvent.trigger(b.params.node,"enableEditing",{type:"child",self:!1})),b},b.disableEditing=function(){return b.isEditing&&(b.isEditing=!1,cm.removeClass(b.params.node,"is-editable is-visible"),cm.customEvent.trigger(b.params.node,"disableEditing",{type:"child",self:!1})),b},b.addZone=function(a,c){return b.zones[a]=c,b},b.removeZone=function(a){return delete b.zones[a],b},b.setZone=function(a){return g(b.zone),f(a),b},b.unsetZone=function(){return g(b.zone),b},b.remove=function(){return i(b.components.editor),b},b.updateDimensions=function(){return b.dimensions=cm.getNodeOffset(b.params.node,b.styleObject,b.dimensions),b.dimensions},c()}),cm.define("App.Dashboard",{modules:["Params","Events"],events:["onRender","onInit","onDragStart","onDrop","onRemove","onReplace"],params:{draggableContainer:"document.body",scroll:!0,scrollNode:window,scrollSpeed:1,useGracefulDegradation:!0,dropDuration:400,moveDuration:200,highlightZones:!0,highlightPlaceholders:!0,animateRemove:!0,removeNode:!0}},function(a){var b,c,d,e,f,g,h=this,i={},j=[],k=[],l=[],m=[],n=!1;h.isGracefulDegradation=!1,h.isZonesHighlight=!1,h.pageSize={},h.offset={left:0,top:0},h.blocks=[],h.dummyBlocks=[],h.zones=[],h.currentZones=[],h.currentZone=null,h.currentBlock=null;var o=function(){p(),h.setParams(a),h.convertEvents(h.params.events),q(),r(),h.triggerEvent("onRender")},p=function(){h.params.dropDuration=cm.getTransitionDurationFromRule(".app__dashboard__drop-duration"),h.params.moveDuration=cm.getTransitionDurationFromRule(".app__dashboard__move-duration")},q=function(){h.params.useGracefulDegradation&&(cm.is("IE")&&cm.isVersion()<9||cm.isMobile())&&(h.isGracefulDegradation=!0)},r=function(){i.scroll=new cm.Animation(h.params.scrollNode)},s=function(a,e){if(cm.preventDefault(a),!h.currentBlock&&(cm.isTouch||!a.button)){cm.hideSpecialTags(),cm.addClass(document.body,"app__dashboard__body"),h.pageSize=cm.getPageSize();var g,i,j={left:cm._clientPosition.x,top:cm._clientPosition.y};h.currentZones=S(e),h.triggerEvent("onDragStart",{item:e,node:e.node,from:e.zone}),w(e,j),h.params.highlightZones&&R(),K(),E(),cm.forEach(h.currentBlock.zone.blocks,function(a){x>=a.dimensions.absoluteX1&&x<a.dimensions.absoluteX2&&y>=a.dimensions.absoluteY1&&y<=a.dimensions.absoluteY2&&(g=a,i=y-g.dimensions.absoluteY1<g.dimensions.absoluteHeight/2?"top":"bottom")}),!g&&b.zone.items.length&&(y<b.zone.dimensions.y1?(g=b.zone.items[0],i="top"):(g=b.zone.items[b.zone.items.length-1],i="bottom")),f=g?g.placeholder[i]:b.zone.placeholder[0],f&&(cm.addClass(f.node,"is-active"),h.params.highlightPlaceholders&&cm.addClass(f.node,"is-highlight"),f.node.style.height=[b.dimensions.absoluteHeight,"px"].join("")),h.currentZone=b.zone,c=g,d=i,h.currentZone.active(),cm.addEvent(window,"mousemove",t),cm.addEvent(window,"mouseup",u)}},t=function(a){cm.preventDefault(a);var i,j,k,l,n,o=cm._clientPosition.x,p=cm._clientPosition.y,q=p-b.dimensions.offsetY,r=o-b.dimensions.offsetX;i=[r,"px"].join(""),j=[q,"px"].join(""),cm.setCSSTranslate(b.node,i,j),h.params.scroll&&U(p+48>h.pageSize.winHeight?1:0>p-48?-1:0),O(),cm.forEach(m,function(a){o>=a.dimensions.x1&&o<a.dimensions.x2&&p>=a.dimensions.y1&&p<=a.dimensions.y2&&(k?(a.dimensions.width<k.dimensions.width||a.dimensions.height<k.dimensions.height)&&(k=a):k=a)}),k?cm.forEach(k.items,function(a){o>=a.dimensions.absoluteX1&&o<a.dimensions.absoluteX2&&p>=a.dimensions.absoluteY1&&p<=a.dimensions.absoluteY2&&(l=a,n=p-l.dimensions.absoluteY1<l.dimensions.absoluteHeight/2?"top":"bottom")}):k=e,!l&&k.items.length&&(p<k.dimensions.innerY1?(l=k.items[0],n="top"):(l=k.items[k.items.length-1],n="bottom")),f&&cm.removeClass(f.node,"is-active is-highlight"),c&&l&&c.placeholder[d]!=l.placeholder[n]?(H(c.placeholder[d],0,h.params.moveDuration),f=l.placeholder[n]):!c&&l?(H(e.placeholder[0],0,h.params.moveDuration),f=l.placeholder[n]):c&&!l?(H(c.placeholder[d],0,h.params.moveDuration),f=k.placeholder[0]):c||l||e==k||(H(e.placeholder[0],0,h.params.moveDuration),f=k.placeholder[0]),f&&(cm.addClass(f.node,"is-active"),h.params.highlightPlaceholders&&cm.addClass(f.node,"is-highlight"),H(f,b.dimensions.absoluteHeight,h.params.moveDuration)),e&&e!=k&&(cm.removeClass(e.node,"is-active"),g=e),e=k,c=l,d=n,g&&g.isTemporary&&e.isRemoveZone||cm.addClass(e.node,"is-active")},u=function(a){var g;cm.removeClass(document.body,"pt__dnd-body"),cm.removeEvent(window,"mousemove",t),cm.removeEvent(window,"mouseup",u),I(b),b.node.style.width=[e.dimensions.innerWidth-b.dimensions.margin.left-b.dimensions.margin.right,"px"].join(""),g=b.node.offsetHeight+b.dimensions.margin.top+b.dimensions.margin.bottom,b.node.style.width=[b.dimensions.width,"px"].join(""),c?(g!=c.placeholder[d].node.offsetHeight&&H(c.placeholder[d],g,h.params.dropDuration),A(b,e,{target:c.node,append:"top"==d?"before":"after",index:e.items.indexOf(c)+("top"==d?0:1),top:["top"==d?c.dimensions.absoluteY1:c.dimensions.absoluteY2,"px"].join(""),onStop:D})):e.isRemoveZone||e.isTemporary?B(b,{onStop:D}):(H(e.placeholder[0],g,h.params.dropDuration),A(b,e,{onStop:D})),f&&cm.removeClass(f.node,"is-active is-highlight"),e&&cm.removeClass(e.node,"is-active"),h.params.highlightZones&&R(),cm.showSpecialTags()},v=function(a,b,c){var d=cm.merge({node:a,styleObject:cm.getStyleObject(a),type:"item",placeholder:{top:null,bottom:null},dimensions:{offsetX:0,offsetY:0}},c);return d.zone=b,d.anim=new cm.Animation(d.node),initBlockDrag(d),l.push(d),d},w=function(a,b){a.updateDimensions(),h.offset.left=a.dimensions.outer.left-b.left,h.offset.top=a.dimensions.outer.top-b.top,a.isDummy?h.currentBlock=a.clone():h.currentBlock=a.unsetZone(),h.currentBlock.node.style.top=0,h.currentBlock.node.style.left=0,z(h.currentBlock,{left:h.currentBlock.dimensions.outer.left,top:h.currentBlock.dimensions.outer.top,width:h.currentBlock.dimensions.offset.width}),h.params.draggableContainer.appendChild(h.currentBlock.node),cm.addClass(h.currentBlock.node,"app__dashboard__helper"),cm.addClass(h.currentBlock.node,"is-active",!0)},z=function(a,b,c){var d=b.left,e=b.top,f=b.node||a.node;c&&(d+=a.dimensions.offsetLeft,e+=a.dimensions.offsetTop),"undefined"!=typeof b.width&&(f.style.width=[b.width,"px"].join("")),"undefined"!=typeof b.height&&(f.style.height=[b.height,"px"].join("")),"undefined"!=typeof b.opacity&&(f.style.opacity=b.opacity),cm.setCSSTranslate(f,[d,"px"].join(""),[e,"px"].join(""))},A=function(a,c,d){d=cm.merge({target:c.node,append:"child",index:0,width:[c.dimensions.innerWidth,"px"].join(""),top:[c.dimensions.innerY1-a.dimensions.margin.top,"px"].join(""),left:[c.dimensions.innerX1-a.dimensions.margin.left,"px"].join(""),onStart:function(){},onStop:function(){}},d),d.onStart(),cm.addClass(a.node,"is-drop",!0),a.node.style.width=d.width,cm.setCSSTranslate(a.node,d.left,d.top),setTimeout(function(){switch(d.append){case"child":cm.appendChild(a.node,d.target);break;case"before":cm.insertBefore(a.node,d.target);break;case"after":cm.insertAfter(a.node,d.target);break;case"first":cm.insertFirst(a.node,d.target)}cm.removeClass(a.node,"pt__dnd-helper is-drop is-active",!0),a.node.style.left="auto",a.node.style.top="auto",a.node.style.width="auto",cm.setCSSTranslate(b.node,"auto","auto"),c.items.splice(d.index,0,a),h.triggerEvent("onDrop",{item:a,node:a.node,to:c,from:a.zone,index:d.index}),a.zone=c,d.onStop()},h.params.dropDuration)},B=function(a,c){var d,e,f,g=function(){h.params.removeNode&&cm.remove(f),l=l.filter(function(b){return b!=a}),C(a),c.noEvent||h.triggerEvent("onRemove",{item:a,node:a.node,from:a.zone}),c.onStop()};c=cm.merge({isCurrent:a===b,isInDOM:cm.inDOM(a.node),onStart:function(){},onStop:function(){}},c),c.onStart(),c.isInDOM&&h.params.animateRemove?(c.isCurrent?(f=a.node,e=a.anim,d={left:[-(a.dimensions.absoluteWidth+50),"px"].join(""),opacity:0}):(f=cm.wrap(cm.Node("div",{"class":"pt__dnd-removable"}),a.node),e=new cm.Animation(f),d={height:"0px",opacity:0}),e.go({duration:h.params.dropDuration,anim:"smooth",style:d,onStop:g})):(f=a.node,g())},C=function(a){a.zone.items=a.zone.items.filter(function(b){return b!=a})},D=function(){G(),b=!1,c=!1,e=!1,g=!1},E=function(){var a;cm.forEach(j,function(b){b.isLocked||(b.items.length||(a=F(),cm.appendChild(a.node,b.node),b.placeholder.push(a)),cm.forEach(b.items,function(c,d){0===d&&(a=F(),cm.insertBefore(a.node,c.node),b.placeholder.push(a)),a=F(),cm.insertAfter(a.node,c.node),b.placeholder.push(a),c.placeholder.top=b.placeholder[d],c.placeholder.bottom=b.placeholder[d+1]}))})},F=function(){var a=cm.Node("div",{"class":"pt__dnd-placeholder"});return{node:a,anim:new cm.Animation(a),isShow:!1}},G=function(){cm.forEach(j,function(a){cm.forEach(a.placeholder,function(a){cm.remove(a.node)}),a.placeholder=[]})},H=function(a,b,c){var d;b=[b,"px"].join(""),!h.isGracefulDegradation&&(d=cm.getSupportedStyle("transition-duration"))&&(a.node.style[d]=[c,"ms"].join("")),a.node.style.height=b},I=function(a){a.dimensions=cm.extend(a.dimensions,cm.getFullRect(a.node,a.styleObject))},J=function(a){cm.forEach(a,I)},K=function(){J(j),cm.forEach(j,function(a){J(a.items)})},L=function(a){a.dimensions.y1=cm.getRealY(a.node),a.dimensions.y2=a.dimensions.y1+a.dimensions.height,a.dimensions.innerY1=a.dimensions.y1+a.dimensions.padding.top,a.dimensions.innerY2=a.dimensions.innerY1+a.dimensions.innerHeight,a.dimensions.absoluteY1=a.dimensions.y1-a.dimensions.margin.top,a.dimensions.absoluteY2=a.dimensions.y2+a.dimensions.margin.bottom},M=function(a){cm.forEach(a,L)},N=function(){var a=0;f&&(cm.addClass(f.node,"is-immediately"),a=f.node.offsetHeight,f.node.style.height=0),M(j),cm.forEach(j,function(a){M(a.items)}),f&&a&&(f.node.style.height=[a,"px"].join(""),function(a){setTimeout(function(){cm.removeClass(a.node,"is-immediately")},5)}(f))},O=function(){var a=Q();a[0].dimensions.y1!=cm.getRealY(a[0].node)&&N()},P=function(a){h.zones.push(a)},Q=function(){return j.filter(function(a){return a.isTemporary||a.isSystem?!1:!0})},R=function(){h.currentZones&&(h.isZonesHighlight?(h.isZonesHighlight=!1,cm.forEach(h.currentZones,function(a){a.unhighlight()})):(h.isZonesHighlight=!0,cm.forEach(h.currentZones,function(a){a.highlight()})))},S=function(a){return h.zones.filter(function(b){return cm.isParent(a.params.node,b.params.node)||b.params.locked||a.params.type!=b.params.type?!1:!0})},T=function(a){cm.forEach(a.getDragNodes(),function(b){cm.addEvent(b,"mousedown",function(b){s(b,a)})}),h.dummyBlocks.push(a)},U=function(a){var b,c,d={};0==a?(n=!1,i.scroll.stop()):0>a&&!n?(n=!0,c=cm.getScrollTop(h.params.scrollNode)*h.params.scrollSpeed,cm.isWindow(h.params.scrollNode)?d.docScrollTop=0:d.scrollTop=0,i.scroll.go({style:d,duration:c,onStop:function(){n=!1}})):a>0&&!n&&(n=!0,b=cm.getScrollHeight(h.params.scrollNode)-h.pageSize.winHeight,cm.isWindow(h.params.scrollNode)?d.docScrollTop=b:d.scrollTop=b,c=b*h.params.scrollSpeed,i.scroll.go({style:d,duration:c,onStop:function(){n=!1}}))};h.addBlock=function(a){return v(a),h},h.addDummyBlock=function(a){return T(a),h},h.addZone=function(a){return P(a),h},h.getZone=function(a){var b;return cm.forEach(j,function(c){c.node===a&&(b=c)}),b},h.registerZone=function(a,b){return cm.isNode(a)&&a.tagName&&P(a,b||{}),h},h.removeZone=function(a,b){return cm.isNode(a)&&cm.inArray(k,a)&&(k=k.filter(function(b){return b!=a}),j=j.filter(function(b){return b.node!=a})),h},h.getBlock=function(a){var b;return cm.forEach(l,function(c){c.node===a&&(b=c)}),b},h.getBlockList=function(){return l},h.registerBlock=function(a,b,c){var d,e,f,g,i,j=[];return d=h.getBlock(a),d?initBlockDrag(d):cm.inArray(k,b)&&(a.setAttribute("data-com-draganddrop","block"),e=h.getzone(b),e.blockInChildNodes?(i=e.node.childNodes,cm.forEach(i,function(a){a.tagName&&"block"==a.getAttribute("data-com-draganddrop")&&j.push(a)})):j=cm.getByAttr("data-com-draganddrop","block",e.node),g=j.indexOf(a),f=v(a,e,c||{}),e.items.splice(g,0,f)),h},h.replaceBlock=function(a,b,c){var d,e;if(cm.forEach(l,function(b){b.node===a&&(d=b)}),d){var f=d.zone,g=f.items.indexOf(d),i=cm.wrap(cm.Node("div",{"class":"pt__dnd-removable",style:"height: 0px;"}),b),j=new cm.Animation(i);cm.insertAfter(i,a),B(d,c),j.go({style:{height:[cm.getRealHeight(i,"offset",0),"px"].join(""),opacity:1},duration:300,anim:"simple",onStop:function(){cm.insertAfter(b,i),cm.remove(i),e=v(b,f),f.items.splice(g,0,e),h.triggerEvent("onReplace",{item:e,node:e.node,to:e.to})}})}return h},h.removeBlock=function(a,b){var c;return cm.forEach(l,function(b){b.node===a&&(c=b)}),c&&B(c,b||{}),h},h.getOrderingNodes=function(){var a,b=[],c=Q();return cm.forEach(c,function(c){a={zone:c.node,items:[]},cm.forEach(c.items,function(b){a.items.push(b.node)}),b.push(a)}),1==c.length?a.items:b},h.getOrderingIDs=function(){var a,b={},c=Q();return cm.forEach(c,function(c){a={},cm.forEach(c.items,function(b,c){if(!b.id)throw new Error('Attribute "data-id" not specified on item node.');a[b.id]=c}),b[c.id]=a}),1==c.length?a:b},o()}),cm.define("App.DummyBlock",{modules:["Params","Events","DataNodes","DataConfig","Stack"],events:["onRender"],params:{node:cm.Node("div"),name:"",type:"content",sidebarName:"app-sidebar",editorName:"app-editor",thisContainer:"document.body",topContainer:"top.document.body"}},function(a){var b=this;b.isDummy=!0,b.isEditing=!1,b.styleObject=null,b.dimensions=null,b.components={},b.nodes={dummy:cm.node("div")},b.node=null,b.zone=null;var c=function(){b.setParams(a),b.convertEvents(b.params.events),b.getDataNodes(b.params.node),b.getDataConfig(b.params.node),d(),e(),b.addToStack(b.params.node),b.triggerEvent("onRender")},d=function(){b.params.name=[b.params.type,b.params.keyword].join("_"),b.node=b.params.node},e=function(){b.styleObject=cm.getStyleObject(b.node),b.dimensions=cm.getNodeOffset(b.node,b.styleObject),new cm.top("Finder")("App.Editor",b.params.editorName,b.params.topContainer,f)},f=function(a){a&&(b.components.editor=a.addDummyBlock(b.params.name,b))};b.enableEditing=function(){return b.isEditing=!0,b},b.disableEditing=function(){return b.isEditing=!1,b},b.getDragNodes=function(){return[b.node]},b.updateDimensions=function(){return b.dimensions=cm.getNodeOffset(b.node,b.styleObject,b.dimensions),b.dimensions},b.clone=function(){return b.node=cm.clone(b.params.node,!0),b},c()}),cm.define("App.Editor",{modules:["Params","Events","DataConfig","DataNodes","Stack","Storage"],events:["onRender","onExpand","onCollapse","onDrop","onAppend","onRemove","onEmbed","onReplace","onUpdate","onForceRender"],params:{node:cm.Node("div"),name:"app-editor",sidebarName:"app-sidebar","App.Dashboard":{}}},function(a){var b=this;b.components={},b.nodes={},b.states={sidebarExpanded:!1},b.zones={},b.blocks={},b.dummyBlocks={},b.isProcessed=!1,b.isExpanded=!1;var c=function(){b.setParams(a),b.convertEvents(b.params.events),b.getDataNodes(b.params.node),b.getDataConfig(b.params.node),d(),b.addToStack(b.params.node),b.triggerEvent("onRender")},d=function(){e(),f(),i(),cm.addEvent(window,"resize",i)},e=function(){new cm.Finder("App.Sidebar",b.params.sidebarName,null,function(a){b.components.sidebar=a.addEvent("onExpand",g).addEvent("onCollapse",h),b.components.sidebar.isExpanded?g():h()})},f=function(){cm.getConstructor("App.Dashboard",function(a){b.components.dashboard=new a(b.params["App.Dashboard"]).addEvent("onDrop",j).addEvent("onReplace",l).addEvent("onRemove",k),cm.forEach(b.dummyBlocks,function(a){b.components.dashboard.addDummyBlock(a)}),cm.forEach(b.zones,function(a){b.components.dashboard.addZone(a)})})},g=function(){return b.isExpanded=!0,cm.forEach(b.zones,function(a){a.enableEditing()}),cm.forEach(b.blocks,function(a){a.enableEditing()}),b.triggerEvent("onExpand"),!1},h=function(){return b.isExpanded=!1,cm.forEach(b.zones,function(a){a.disableEditing()}),cm.forEach(b.blocks,function(a){a.disableEditing()}),b.triggerEvent("onCollapse"),!1},i=function(){animFrame(function(){var a=cm.getPageSize();b.components.sidebar&&(a.winWidth<=cm._config.adaptiveFrom?b.components.sidebar.isExpanded&&b.isExpanded&&(b.states.sidebarExpanded=!0,b.components.sidebar.collapse(!0)):b.states.sidebarExpanded&&!b.isExpanded&&(b.states.sidebarExpanded=!1,b.components.sidebar.expand(!0)))})},j=function(a,c){c.from.isTemporary?(c.dummy=c.item.drag,c.loaderBox=renderLoaderBox(),c.dummy.appendChild(c.loaderBox),cm.addClass(c.loaderBox,"fadein",!0),b.triggerEvent("onAppend",{item:c,node:c.node,to:c.to,index:c.index})):b.triggerEvent("onDrop",c)},k=function(a,c){b.triggerEvent("onRemove",c)},l=function(a,c){b.triggerEvent("onReplace",c)};b.addZone=function(a,c){return b.zones[a]=c,b.components.dashboard&&b.components.dashboard.addZone(c),b},b.removeZone=function(a){return delete b.zones[a],b},b.addBlock=function(a,c){return b.blocks[a]=c,b.components.dashboard&&b.components.dashboard.addBlock(c),b},b.removeBlock=function(a){return delete b.blocks[a],b},b.addDummyBlock=function(a,c){return b.dummyBlocks[a]=c,b.components.dashboard&&b.components.dashboard.addDummyBlock(c),b},b.registerArea=function(a,c){return b.components.dd.registerArea(a,c),b},b.removeArea=function(a,c){return b.components.dd.removeArea(a,c),b},b.removeWidget=function(a,c){return b.components.dd.removeDraggable(a,c),b},b.replaceWidget=function(a,c,d){return b.components.dd.replaceDraggable(a,c,d),b},b.deleteAllTemporary=function(){var a=cm.getByAttr("data-node","dummy",b.nodes.AppTemplate.container);cm.forEach(a,function(a){b.removeWidget(a.parentNode)})},b.updateTemporaryWidget=function(a){var c=cm.getByAttr("data-node","dummy",b.nodes.AppTemplate.container);cm.forEach(c,function(c){var d=cm.strToHTML(a);b.components.dd.replaceDraggable(c.parentNode,d,{noEvent:!0,onStop:function(){var a=cm.getByAttr("data-com-draganddrop","area",d);cm.forEach(a,function(a){b.components.dd.registerArea(a,{})}),b.triggerEvent("onUpdate",{node:d})}})})},b.getWidget=function(a){var c=b.components.dd.getDraggableList(),d=[],e=null;return cm.forEach(c,function(b){d=cm.getByClass("app__block",b.node),d[0]&&d[0].getAttribute("data-block-position-id")==a&&(e=b)}),e},b.updateWidget=function(a,c){var d=b.getWidget(c);if(d){var e=cm.strToHTML(a);b.components.dd.replaceDraggable(d.node,e,{noEvent:!0,onStop:function(){var a=cm.getByAttr("data-com-draganddrop","area",e);cm.forEach(a,function(a){b.components.dd.registerArea(a,{})}),b.triggerEvent("onUpdate",{node:e})}})}},b.deleteWidget=function(a){var c=b.getWidget(a);c&&b.components.dd.removeDraggable(c.node,{noEvent:!0})},c()}),cm.define("App.HelpTour",{modules:["Params","Events","Langs","DataConfig","DataNodes","Stack"],events:["onRender"],params:{node:cm.Node("div"),container:"document.body",name:"app-helptour",sidebarName:"app-sidebar",topMenuName:"app-topmenu",templateName:"app-template",duration:500,adaptiveFrom:768,autoStart:!1,popupIndent:24,"Com.Overlay":{container:"document.body",autoOpen:!1,removeOnClose:!0,showSpinner:!1,showContent:!1,name:"",theme:"transparent",position:"absolute"},langs:{next:"Next",back:"Back",close:"Close",cancel:"Cancel",finish:"Finish"}}},function(a){var b=this,c={sidebarCollapsed:0,sidebarExpanded:0,topMenu:0,popupHeight:0,popupSelfHeight:0,popupContentHeight:0},d={sidebarExpanded:!1,sidebarTab:"modules"};b.nodes={},b.components={overlays:{}},b.currentStage=-1,b.currentScene=null,b.currentSceneNode=null,b.previousStage=null,b.previousScene=null,b.previousSceneNode=null,b.sceneIntervals={};var e=function(){f(),b.setParams(a),b.convertEvents(b.params.events),b.getDataNodes(b.params.node),b.getDataConfig(b.params.node),b.addToStack(b.params.node),g(),h(),b.triggerEvent("onRender"),b.params.autoStart&&j()},f=function(){var a;b.params.duration=cm.getTransitionDurationFromRule(".app__helptour-helper__duration"),(a=cm.getCSSRule(".app__helptour-helper__adaptive-from")[0])&&(b.params.adaptiveFrom=cm.styleToNumber(a.style.width))},g=function(){b.params["Com.Overlay"].container=b.params.container,b.params["Com.Overlay"].name=[b.params.name,"overlay"].join("-")},h=function(){cm.getConstructor("Com.Overlay",function(a){b.components.overlays.main=new a(cm.merge(b.params["Com.Overlay"],{position:"fixed"})),b.components.overlays.sidebar=new a(b.params["Com.Overlay"]),b.components.overlays.topMenu=new a(b.params["Com.Overlay"]),b.components.overlays.template=new a(b.params["Com.Overlay"]),cm.addEvent(b.params.node,"click",j)})},i=function(){var a;(a=cm.getCSSRule(".app__sidebar-helper__width-collapsed")[0])&&(c.sidebarCollapsed=cm.styleToNumber(a.style.width)),(a=cm.getCSSRule(".app__sidebar-helper__width-expanded")[0])&&(c.sidebarExpanded=cm.styleToNumber(a.style.width)),(a=cm.getCSSRule(".app__topmenu-helper__height")[0])&&(c.topMenu=cm.styleToNumber(a.style.height)),c.popupSelfHeight||(c.popupSelfHeight=b.nodes.popup.offsetHeight),b.currentSceneNode&&(c.popupContentHeight=b.currentSceneNode.offsetHeight),c.popupHeight=c.popupSelfHeight+c.popupContentHeight},j=function(){cm.find("App.Sidebar",b.params.sidebarName,null,function(a){b.components.sidebar=a,b.components.overlays.sidebar.embed(b.components.sidebar.getNodes("inner"))}),cm.find("App.TopMenu",b.params.topMenuName,null,function(a){b.components.topMenu=a,b.components.overlays.topMenu.embed(b.components.topMenu.getNodes("inner"))}),cm.find("App.Template",b.params.templateName,null,function(a){b.components.template=a,b.components.overlays.template.embed(b.components.template.getNodes("container"))}),b.components.sidebar&&b.components.topMenu&&b.components.template?k():cm.errorLog({type:"error",name:b._name.full,message:["Required components does not constructed."].join(" ")})},k=function(){o(),d.sidebarExpanded=b.components.sidebar.isExpanded,b.components.sidebar.isExpanded&&b.components.sidebar.collapse(),d.sidebarTab=b.components.sidebar.getTab(),b.components.sidebar.unsetTab(),b.components.topMenu.collapse(),cm.forEach(b.components.overlays,function(a){a.open()}),m(0)},l=function(){p(),d.sidebarExpanded&&!b.components.sidebar.isExpanded?b.components.sidebar.expand():!d.sidebarExpanded&&b.components.sidebar.isExpanded&&b.components.sidebar.collapse(),b.components.sidebar.setTab(d.sidebarTab),cm.forEach(b.components.overlays,function(a){a.close()}),n()},m=function(a){App.HelpTourScenario[a]&&(n(),b.currentStage=a,b.currentScene=App.HelpTourScenario[a],cm.forEach(b.currentScene.overlays,function(a,c){b.components.overlays[c].setTheme(a)}),b.currentScene.sidebar?b.components.sidebar.setTab(b.currentScene.sidebar).expand():b.components.sidebar.unsetTab().collapse(),b.components.topMenu.setActiveItem(b.currentScene.topMenu),b.currentScene.arrow&&cm.addClass(b.nodes.popupArrows[b.currentScene.arrow],"is-show"),0==b.currentStage?(b.nodes.back.innerHTML=b.lang("close"),b.nodes.next.innerHTML=b.lang("next")):b.currentStage==App.HelpTourScenario.length-1?(b.nodes.back.innerHTML=b.lang("back"),b.nodes.next.innerHTML=b.lang("finish")):(b.nodes.back.innerHTML=b.lang("back"),b.nodes.next.innerHTML=b.lang("next")),b.currentSceneNode=cm.Node("div",{"class":"popup__content__item",innerHTML:b.currentScene.content}),b.nodes.popupContent.appendChild(b.currentSceneNode),cm.addClass(b.currentSceneNode,"is-show",!0),s(),b.currentScene.construct&&b.currentScene.construct.call(b))},n=function(){b.currentStage>=0&&(b.previousStage=b.currentStage,b.previousScene=b.currentScene,b.previousSceneNode=b.currentSceneNode,b.components.topMenu.unsetActiveItem(b.previousScene.topMenu),b.previousScene.arrow&&cm.removeClass(b.nodes.popupArrows[b.previousScene.arrow],"is-show"),cm.forEach(b.sceneIntervals,function(a){clearInterval(a)}),function(a){setTimeout(function(){cm.remove(a)},b.params.duration)}(b.previousSceneNode),b.previousScene.destruct&&b.previousScene.destruct.call(b)),b.currentStage=-1},o=function(){b.nodes.popupArrows={},b.nodes.popup=cm.Node("div",{"class":"app__helptour__popup"},b.nodes.popupArrows.top=cm.Node("div",{"class":"popup__arrow popup__arrow--top"}),b.nodes.popupArrows.right=cm.Node("div",{"class":"popup__arrow popup__arrow--right"}),b.nodes.popupArrows.bottom=cm.Node("div",{"class":"popup__arrow popup__arrow--bottom"}),b.nodes.popupArrows.left=cm.Node("div",{"class":"popup__arrow popup__arrow--left"}),b.nodes.popupClose=cm.Node("div",{"class":"popup__close",title:b.lang("close")}),b.nodes.popupContent=cm.Node("div",{"class":"popup__content"}),b.nodes.popupButtons=cm.Node("div",{"class":"popup__buttons"},cm.Node("div",{"class":"btn-wrap pull-center"},b.nodes.back=cm.Node("button",b.lang("back")),b.nodes.next=cm.Node("button",b.lang("next"))))),q(),b.params.container.appendChild(b.nodes.popup),cm.addClass(b.nodes.popup,"is-show",!0),cm.addEvent(b.nodes.popupClose,"click",l),cm.addEvent(b.nodes.next,"click",b.next),cm.addEvent(b.nodes.back,"click",b.prev),cm.addEvent(window,"resize",s),cm.addEvent(window,"keydown",r)},p=function(){cm.removeEvent(window,"resize",s),cm.removeEvent(window,"keydown",r),q(),cm.removeClass(b.nodes.popup,"is-show"),setTimeout(function(){cm.remove(b.nodes.popup)},b.params.duration)},q=function(){var a=[Math.round(cm.getX(b.params.node)+b.params.node.offsetWidth/2),"px"].join(""),c=[Math.round(cm.getY(b.params.node)+b.params.node.offsetHeight/2),"px"].join("");cm.setCSSTranslate(b.nodes.popup,a,c,0,"scale(0)")},r=function(a){switch(a=cm.getEvent(a),a.keyCode){case 27:l();break;case 37:b.prev();break;case 39:b.next()}},s=function(){var a,d,e,f,g,h;if(b.currentScene){if(d=cm.getPageSize(),d.winWidth>b.params.adaptiveFrom)switch(i(),a=b.currentScene.position.split(":"),g=c.popupContentHeight,a[0]){case"window":switch(a[1]){case"top":f=Math.round((d.winWidth-b.nodes.popup.offsetWidth)/2),e=b.params.popupIndent;break;case"bottom":f=Math.round((d.winWidth-b.nodes.popup.offsetWidth)/2),e=d.winHeight-c.popupHeight-b.params.popupIndent;break;case"center":default:f=Math.round((d.winWidth-b.nodes.popup.offsetWidth)/2),e=Math.round((d.winHeight-c.popupHeight)/2)}break;case"topMenu":switch(a[1]){case"center":default:f=Math.round((d.winWidth-b.nodes.popup.offsetWidth)/2),e=c.topMenu+b.params.popupIndent}break;case"topMenuItem":h=b.components.topMenu.getItem(a[1]),f=h?a[2]&&"dropdown"==a[2]&&h.dropdown?a[3]&&"left"==a[3]?cm.getX(h.dropdown)-b.nodes.popup.offsetWidth-b.params.popupIndent:cm.getX(h.dropdown)+h.dropdown.offsetWidth+b.params.popupIndent:h.container?a[3]&&"left"==a[3]?cm.getX(h.container)+h.container.offsetWidth-b.nodes.popup.offsetWidth:cm.getX(h.container):Math.round((d.winWidth-b.nodes.popup.offsetWidth)/2):Math.round((d.winWidth-b.nodes.popup.offsetWidth)/2),e=c.topMenu+b.params.popupIndent;break;case"template":switch(a[1]){case"top":f=b.components.sidebar.isExpanded?c.sidebarExpanded:c.sidebarCollapsed,f=Math.round((d.winWidth+f-b.nodes.popup.offsetWidth)/2),e=c.topMenu+b.params.popupIndent;break;case"bottom":f=b.components.sidebar.isExpanded?c.sidebarExpanded:c.sidebarCollapsed,f=Math.round((d.winWidth+f-b.nodes.popup.offsetWidth)/2),e=d.winHeight-c.popupHeight-b.params.popupIndent;break;case"left":f=(b.components.sidebar.isExpanded?c.sidebarExpanded:c.sidebarCollapsed)+b.params.popupIndent,e=Math.round((d.winHeight-c.popupHeight)/2);break;case"left-top":f=(b.components.sidebar.isExpanded?c.sidebarExpanded:c.sidebarCollapsed)+b.params.popupIndent,e=c.topMenu+b.params.popupIndent;break;case"center":default:f=b.components.sidebar.isExpanded?c.sidebarExpanded:c.sidebarCollapsed,f=Math.round((d.winWidth+f-b.nodes.popup.offsetWidth)/2),e=Math.round((d.winHeight+c.topMenu-c.popupHeight)/2)}break;default:f=Math.round((d.winWidth-b.nodes.popup.offsetWidth)/2),e=Math.round((d.winHeight-c.popupHeight)/2)}else f=0,e=0,g="auto";b.nodes.popupContent.style.height="auto"==g?g:[g,"px"].join(""),cm.setCSSTranslate(b.nodes.popup,[f,"px"].join(""),[e,"px"].join(""),0,"scale(1)")}};b.start=function(){return j(),b},b.stop=function(){return l(),b},b.next=function(){return b.currentStage>=0&&(App.HelpTourScenario[b.currentStage+1]?m(b.currentStage+1):l()),b},b.prev=function(){return b.currentStage>=0&&(App.HelpTourScenario[b.currentStage-1]?m(b.currentStage-1):l()),b},e()}),App.HelpTourScenario=[{position:"window:center",arrow:!1,overlays:{main:"transparent",sidebar:"dark",topMenu:"dark",template:"dark"},sidebar:!1,topMenu:!1,content:"<h3>QuickSilk Online Tour!</h3><p>Welcome to QuickSilk! Use the buttons at the bottom of each help bubble to quickly discover how to navigate and use the QuickSilk software. This online tour automatically appears the first time you login. Anytime after this, simply click on the help tour menu item for a quick refresher.</p>"},{position:"topMenuItem:user:dropdown:left",arrow:"right",overlays:{main:"transparent",sidebar:"dark",topMenu:"transparent",template:"dark"},sidebar:!1,topMenu:"user",content:"<h3>User Menu</h3><p>Click on your name to view the admin panel (future), your profile, or to logout. The View Profile link provides the ability to manage your subscription and billing, password, forum settings, working groups and public profile.</p>"},{position:"topMenuItem:modules:dropdown:right",arrow:"left",overlays:{main:"transparent",sidebar:"dark",topMenu:"transparent",template:"dark"},sidebar:!1,topMenu:"modules",content:"<h3>Modules</h3><p>The Module manager allows you to work on your modules from the administration panel. Simply mouse over the Modules menu and then scroll down and click on the module you wish to work with. </p>"},{position:"template:left-top",arrow:"left",overlays:{main:"transparent",sidebar:"transparent",topMenu:"dark",template:"dark"},sidebar:!1,topMenu:!1,content:"<h3>Left Panel Slider</h3><p>The left slider widget provides you with quick access to the modules, pages, layouts and template features. Simply click on the icon for the tab you wish to use.</p>"},{position:"template:left-top",arrow:"left",overlays:{main:"transparent",sidebar:"transparent",topMenu:"dark",template:"dark"},sidebar:"modules",topMenu:!1,content:"<h3>Installed Modules</h3><p>The modules tab provides quick access to the modules that you've subscribed to. Once you've opened a page or a template, open the modules tab to drag and drop the modules you wish to include.</p>"
},{position:"template:left-top",arrow:"left",overlays:{main:"transparent",sidebar:"transparent",topMenu:"dark",template:"dark"},sidebar:"pages",topMenu:!1,content:"<h3>Site Pages</h3><p>The site pages tab allows you to quickly open, modify and manage your website pages. Simply open the tab and click on the web page you wish to work on.</p>"},{position:"template:left-top",arrow:"left",overlays:{main:"transparent",sidebar:"transparent",topMenu:"dark",template:"dark"},sidebar:"layouts",topMenu:!1,content:"<h3>Page Layouts</h3><p>Use the page layout tab to open, modify and manage the layouts of your various web page templates. A page layout will consist of the common elements you have on every page.</p>"},{position:"template:left-top",arrow:"left",overlays:{main:"transparent",sidebar:"transparent",topMenu:"dark",template:"dark"},sidebar:"templates",topMenu:!1,content:"<h3>Templates</h3><p>The templates tab displays the different custom or predesigned templates that you've installed and are immediately available for use on your website. If you want to view or install other templates, you'll do so from the template gallery.</p>"},{position:"template:center",arrow:!1,overlays:{main:"transparent",sidebar:"dark",topMenu:"dark",template:"light"},sidebar:!1,topMenu:!1,content:"<h3>Drop Area</h3><p>The drop area is where you drag and drop the modules. To move a module onto a page or template place your mouse on the desired module icon, hold down the left button on your mouse, and drag the module to the highlighted area of the page you wish to drop it, then let go of the mouse button.</p>"},{position:"topMenuItem:support:container:right",arrow:"top",overlays:{main:"transparent",sidebar:"dark",topMenu:"transparent",template:"dark"},sidebar:!1,topMenu:"support",content:"<h3>Need Help?</h3><p>Are you stuck, experiencing an issue, found a bug or have a suggestion? Simply click on this link and send us a message. FYI, to assist in the troubleshooting process we automatically collect information on the operating system, browser and browser version you are using. Our goal is to respond to your message within 1 business day.</p>"}],cm.define("App.LoginBox",{modules:["Params","DataConfig","DataNodes"],events:["onRender"],params:{node:cm.Node("div"),"Com.Tooltip":{targetEvent:"click",hideOnReClick:!0,preventClickEvent:!0,adaptiveX:!0,adaptiveY:!0,left:"(targetWidth - selfWidth) / 2",top:"targetHeight + 8",className:"app-pt__box-login__tooltip"}}},function(a){var b=this,c={};b.nodes={button:cm.Node("div"),target:cm.Node("div")};var d=function(){b.setParams(a),b.getDataNodes(b.params.node),b.getDataConfig(b.params.node),e()},e=function(){c.tooltip=new Com.Tooltip(cm.merge(b.params["Com.Tooltip"],{target:b.nodes.button,content:b.nodes.target,events:{onShow:f}}))},f=function(){var a=cm.getByAttr("type","text",b.nodes.target)[0];a&&a.focus()};d()}),cm.define("App.ModuleMenu",{modules:["Params","DataNodes"],params:{node:cm.Node("div")}},function(a){var b=this;b.nodes={select:cm.Node("select")};var c=function(){b.setParams(a),b.getDataNodes(b.params.node),d()},d=function(){cm.addEvent(b.nodes.select,"change",e)},e=function(){var a=b.nodes.select.value;cm.isEmpty(a)||(window.location.href=a)};c()}),App.Rollover=function(a){var b,c=cm.merge({node:cm.Node("div"),height:400,duration:500,nodes:{"app-rollover":{}}},a),d={nodes:{"app-rollover":["button","container"]}},e={},f={},g=0,h=function(){var a;i(),a=e["app-rollover"].container,a.offsetHeight===a.scrollHeight?(g=c.height,b=!0,cm.replaceClass(c.node,"is-close","is-open")):(g=a.offsetHeight,b=!1,cm.replaceClass(c.node,"is-open","is-close")),j()},i=function(){cm.forEach(d.nodes,function(a,b){e[b]={},cm.forEach(a,function(a){e[b][a]=cm.getByAttr(["data",b].join("-"),a,c.node)[0]||cm.Node("div")})}),e=cm.merge(e,c.nodes)},j=function(){f.container=new cm.Animation(e["app-rollover"].container),cm.addEvent(e["app-rollover"].button,"click",k)},k=function(){console.log(1),b?(cm.replaceClass(c.node,"is-open","is-close"),f.container.go({style:{height:[g,"px"].join("")},duration:c.duration,anim:"smooth"})):(cm.replaceClass(c.node,"is-close","is-open"),f.container.go({style:{height:[e["app-rollover"].container.scrollHeight+e["app-rollover"].button.scrollHeight,"px"].join("")},duration:c.duration,anim:"smooth"})),b=!b};h()},cm.define("App.SearchBox",{modules:["Params","DataConfig","DataNodes"],events:["onRender"],params:{node:cm.Node("div"),"Com.Tooltip":{targetEvent:"click",hideOnReClick:!0,preventClickEvent:!0,adaptiveX:!0,adaptiveY:!1,left:"-selfWidth+targetWidth",top:"targetHeight + 8",className:"app-mod__search__tooltip"}}},function(a){var b=this,c={};b.nodes={button:cm.Node("div"),target:cm.Node("div")};var d=function(){b.setParams(a),b.getDataNodes(b.params.node),b.getDataConfig(b.params.node),e()},e=function(){c.tooltip=new Com.Tooltip(cm.merge(b.params["Com.Tooltip"],{target:b.nodes.button,content:b.nodes.target,events:{onShow:f}}))},f=function(){var a=cm.getByAttr("type","text",b.nodes.target)[0];a&&a.focus()};d()}),cm.define("App.Sidebar",{modules:["Params","Events","DataConfig","DataNodes","Storage","Stack"],events:["onRender","onCollapse","onExpand","onTabShow","onTabHide"],params:{node:cm.Node("div"),name:"app-sidebar",active:"modules",target:"document.html",remember:!0,ajax:{type:"json",method:"get",url:"",params:""},"Com.TabsetHelper":{node:cm.Node("div"),name:"",responseHTML:!0}}},function(a){var b,c=this,d=0,e=0;c.nodes={container:cm.Node("div"),inner:cm.Node("div"),collapseButtons:[],labels:[],tabs:[]},c.components={},c.isExpanded=!1;var f=function(){c.setParams(a),c.convertEvents(c.params.events),c.getDataNodes(c.params.node),c.getDataConfig(c.params.node),c.addToStack(c.params.node),g(),h(),c.triggerEvent("onRender")},g=function(){c.params["Com.TabsetHelper"].node=c.nodes.inner,c.params["Com.TabsetHelper"].name=[c.params.name,"tabset"].join("-"),c.params["Com.TabsetHelper"].ajax=c.params.ajax},h=function(){var a,f;i(),d=cm._scrollSize,(a=cm.getCSSRule(".app__sidebar-helper__menu-width")[0])&&(e=cm.styleToNumber(a.style.width)),(f=cm.getCSSRule(".app__sidebar-helper__content-width")[0])&&(b=cm.styleToNumber(f.style.width)),cm.forEach(c.nodes.collapseButtons,function(a){cm.addEvent(a.container,"click",c.toggle)}),j(),c.isExpanded=cm.isClass(c.nodes.container,"is-expanded"),c.params.remember&&(c.isExpanded=c.storageRead("isExpanded")),cm.inDOM(c.nodes.container)&&"none"!=cm.getStyle(c.nodes.container,"display")||(c.isExpanded=!1),c.isExpanded?c.expand(!0):c.collapse(!0),cm.addEvent(window,"resize",k)},i=function(){cm.getConstructor("Com.TabsetHelper",function(a){c.components.tabset=new a(c.params["Com.TabsetHelper"]).addEvent("onLabelClick",function(a,b){c.isExpanded&&a.get()!=b.item.id||c.toggle()}).addEvent("onTabHide",function(a,b){c.triggerEvent("onTabHide",b)}).addEvent("onTabShow",function(a,b){c.triggerEvent("onTabShow",b)}).processTabs(c.nodes.tabs,c.nodes.labels).set(c.params.active)})},j=function(){var a;cm.addClass(c.nodes.container,"is-immediately"),(a=cm.getCSSRule(".app__sidebar .sidebar__content")[0])&&(a.style.width=[b+d,"px"].join("")),(a=cm.getCSSRule(".app__sidebar .sidebar__remove-zone")[0])&&(a.style.width=[b+d,"px"].join("")),((a=cm.getCSSRule(".app__sidebar.is-expanded")[0])||(a=cm.getCSSRule(".is-expanded.app__sidebar")[0]))&&(a.style.width=[e+b+d,"px"].join("")),(a=cm.getCSSRule("html.is-sidebar--expanded .tpl__container")[0])&&(a.style.marginLeft=[e+b+d,"px"].join("")),(a=cm.getCSSRule(".app__sidebar-helper__width-expanded")[0])&&(a.style.width=[e+b+d,"px"].join("")),setTimeout(function(){cm.removeClass(c.nodes.container,"is-immediately")},5)},k=function(){cm._scrollSize!=d&&(d=cm._scrollSize,j())};c.collapse=function(a){return c.isExpanded=!1,a&&(cm.addClass(c.nodes.container,"is-immediately"),cm.addClass(c.params.target,"is-immediately")),cm.replaceClass(c.nodes.container,"is-expanded","is-collapsed",!0),cm.replaceClass(c.params.target,"is-sidebar--expanded","is-sidebar--collapsed",!0),cm.forEach(c.nodes.collapseButtons,function(a){cm.removeClass(a.container,"active")}),a&&setTimeout(function(){cm.removeClass(c.nodes.container,"is-immediately"),cm.removeClass(c.params.target,"is-immediately")},5),c.params.remember&&c.storageWrite("isExpanded",!1),c.triggerEvent("onCollapse"),c},c.expand=function(a){return c.isExpanded=!0,a&&(cm.addClass(c.nodes.container,"is-immediately"),cm.addClass(c.params.target,"is-immediately")),cm.replaceClass(c.nodes.container,"is-collapsed","is-expanded",!0),cm.replaceClass(c.params.target,"is-sidebar--collapsed","is-sidebar--expanded",!0),cm.forEach(c.nodes.collapseButtons,function(a){cm.addClass(a.container,"active")}),a&&setTimeout(function(){cm.removeClass(c.nodes.container,"is-immediately"),cm.removeClass(c.params.target,"is-immediately")},5),c.params.remember&&c.storageWrite("isExpanded",!0),c.triggerEvent("onExpand"),c},c.toggle=function(){return c.isExpanded?c.collapse():c.expand(),c},c.setTab=function(a){return c.components.tabset&&(c.components.tabset.set(a),c.expand()),c},c.unsetTab=function(){return c.components.tabset&&c.components.tabset.unset(),c},c.getTab=function(){return c.components.tabset?c.components.tabset.get():null},c.getNodes=function(a){return c.nodes[a]||c.nodes},f()}),cm.define("App.Stylizer",{modules:["Params","Events","Langs","DataConfig","DataNodes","Stack"],events:["onRender","onSelect","onChange"],params:{node:cm.Node("div"),name:"",active:{},"default":{},styles:{"font-family":["Arial, Helvetica, sans-serif","Arial Black, Gadget, sans-serif","Courier New, Courier, monospace","Georgia, serif","Impact, Charcoal, sans-serif","Lucida Console, Monaco, monospace","Lucida Sans Unicode, Lucida Grande, sans-serif","Palatino Linotype, Book Antiqua, Palatino, serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"],"line-height":[8,10,12,16,20,24,28,32,36,40,48,56,64,72,80,88,96,108,120],"font-size":[8,9,10,11,12,13,14,18,20,22,24,28,32,36,42,48,54,60,72,96],"font-weight":[100,300,400,600,700,800],"font-style":["normal","italic"],"text-decoration":["none","underline"]},styleBinds:{"font-weight":{normal:400,bold:700}},controls:{"font-family":!0,"line-height":!0,"font-size":!0,"font-weight":!0,"font-style":!0,"text-decoration":!0,color:!0},showResetButtons:!0,overrideControls:!0,"Com.Tooltip":{targetEvent:"click",hideOnReClick:!0,top:"targetHeight + 6",left:"-6",className:"app__stylizer-tooltip"},"Com.Select":{renderInBody:!1},"Com.ColorPicker":{renderInBody:!1},langs:{100:"Thin",300:"Light",400:"Regular",600:"Semi-Bold",700:"Bold",800:"Extra-Bold"}}},function(a){var b=this;b.nodes={container:cm.Node("div"),input:cm.Node("input",{type:"hidden"}),preview:cm.Node("div"),tooltip:{}},b.components={},b.value=null,b.previousValue=null;var c=function(){b.setParams(a),b.convertEvents(b.params.events),b.getDataNodes(b.params.node),b.getDataConfig(b.params.node),d(),h(),b.addToStack(b.nodes.container),i(cm.merge(b.params["default"],b.params.active),!1),b.triggerEvent("onRender",b.value)},d=function(){cm.isNode(b.nodes.input)&&(b.params.name=b.nodes.input.getAttribute("name")||b.params.name),b.params["default"]=cm.merge(b.params["default"],b.getNodeDataConfig(b.nodes.input,"data-default")),b.params.active=cm.merge(cm.merge(b.params["default"],b.params.active),b.getNodeDataConfig(b.nodes.input,"value")),e(b.params.active),e(b.params["default"]),f(b.params.active),f(b.params["default"]),g(),b.params.overrideControls&&cm.forEach(b.params.controls,function(a,c){b.params.controls[c]=!!b.params["default"][c]})},e=function(a){return a["line-height"]&&"normal"!=a["line-height"]&&(a["line-height"]=parseInt(a["line-height"])),a["font-size"]&&(a["font-size"]=parseInt(a["font-size"])),a["font-weight"]&&(b.params.styleBinds["font-weight"][a["font-weight"]]&&(a["font-weight"]=b.params.styleBinds["font-weight"][a["font-weight"]]),a["font-weight"]=parseInt(a["font-weight"]),a["font-weight"]=cm.inArray(b.params.styles["font-weight"],a["font-weight"])?a["font-weight"]:400),a["font-style"]&&(a["font-style"]=cm.inArray(b.params.styles["font-style"],a["font-style"])?a["font-style"]:"normal"),a["text-decoration"]&&(a["text-decoration"]=cm.inArray(b.params.styles["text-decoration"],a["text-decoration"])?a["text-decoration"]:"none"),a},f=function(a){a["font-size"]&&!cm.inArray(b.params.styles["font-size"],a["font-size"])&&b.params.styles["font-size"].push(a["font-size"]),a["line-height"]&&!cm.inArray(b.params.styles["line-height"],a["line-height"])&&b.params.styles["line-height"].push(a["line-height"]),a["font-family"]&&!cm.inArray(b.params.styles["font-family"],a["font-family"])&&b.params.styles["font-family"].push(a["font-family"])},g=function(){b.params.styles["font-size"].sort(function(a,b){return a-b}),b.params.styles["line-height"].sort(function(a,b){return"normal"==a?-1:"normal"==b?1:a-b}),b.params.styles["font-family"].sort(function(a,b){var c=a.toLowerCase().replace(/["']/g,""),d=b.toLowerCase().replace(/["']/g,"");return d>c?-1:c>d?1:0})},h=function(){b.nodes.tooltip.container=cm.Node("div",{"class":"pt__toolbar"},cm.Node("div",{"class":"inner"},b.nodes.tooltip.group1=cm.Node("ul",{"class":"group"}),b.nodes.tooltip.group2=cm.Node("ul",{"class":"group"}),b.nodes.tooltip.group3=cm.Node("ul",{"class":"group"}),b.nodes.tooltip.group4=cm.Node("ul",{"class":"group"}))),b.params.controls["font-family"]&&(b.nodes.tooltip.group2.appendChild(cm.Node("li",{"class":"is-select medium"},b.nodes.tooltip["font-family"]=cm.Node("select",{title:b.lang("Font")}))),cm.forEach(b.params.styles["font-family"],function(a){b.nodes.tooltip["font-family"].appendChild(cm.Node("option",{value:a,style:{"font-family":a}},a.replace(/["']/g,"").split(",")[0]))}),b.components["font-family"]=new Com.Select(cm.merge(b.params["Com.Select"],{select:b.nodes.tooltip["font-family"],events:{onChange:function(a,c){i(cm.merge(b.value,{"font-family":c}),!0)}}}))),b.params.controls["font-weight"]&&(b.nodes.tooltip.group1.appendChild(b.nodes.tooltip["font-weight-button"]=cm.Node("li",{"class":"button button-secondary is-icon"},cm.Node("span",{"class":"icon toolbar bold"}))),cm.addEvent(b.nodes.tooltip["font-weight-button"],"click",function(){i(cm.merge(b.value,{"font-weight":b.value["font-weight"]>400?400:700}),!0)}),b.nodes.tooltip.group2.appendChild(cm.Node("li",{"class":"is-select medium"},b.nodes.tooltip["font-weight"]=cm.Node("select",{title:b.lang("Weight")}))),cm.forEach(b.params.styles["font-weight"],function(a){b.nodes.tooltip["font-weight"].appendChild(cm.Node("option",{value:a},b.lang(a)))}),b.components["font-weight"]=new Com.Select(cm.merge(b.params["Com.Select"],{select:b.nodes.tooltip["font-weight"],events:{onChange:function(a,c){i(cm.merge(b.value,{"font-weight":c}),!0)}}}))),b.params.controls["font-style"]&&(b.nodes.tooltip.group1.appendChild(b.nodes.tooltip["font-style-button"]=cm.Node("li",{"class":"button button-secondary is-icon"},cm.Node("span",{"class":"icon toolbar italic"}))),cm.addEvent(b.nodes.tooltip["font-style-button"],"click",function(){i(cm.merge(b.value,{"font-style":"italic"==b.value["font-style"]?"normal":"italic"}),!0)})),b.params.controls["text-decoration"]&&(b.nodes.tooltip.group1.appendChild(b.nodes.tooltip["text-decoration-button"]=cm.Node("li",{"class":"button button-secondary is-icon"},cm.Node("span",{"class":"icon toolbar underline"}))),cm.addEvent(b.nodes.tooltip["text-decoration-button"],"click",function(){i(cm.merge(b.value,{"text-decoration":"underline"==b.value["text-decoration"]?"none":"underline"}),!0)})),b.params.controls["font-size"]&&(b.nodes.tooltip.group2.appendChild(cm.Node("li",{"class":"is-select x-small"},b.nodes.tooltip["font-size"]=cm.Node("select",{title:b.lang("Size")}))),cm.forEach(b.params.styles["font-size"],function(a){b.nodes.tooltip["font-size"].appendChild(cm.Node("option",{value:a},a))}),b.components["font-size"]=new Com.Select(cm.merge(b.params["Com.Select"],{select:b.nodes.tooltip["font-size"],events:{onChange:function(a,c){i(cm.merge(b.value,{"font-size":c}),!0)}}}))),b.params.controls["line-height"]&&(b.nodes.tooltip.group2.appendChild(cm.Node("li",{"class":"is-select x-small"},b.nodes.tooltip["line-height"]=cm.Node("select",{title:b.lang("Leading")}))),cm.forEach(b.params.styles["line-height"],function(a){b.nodes.tooltip["line-height"].appendChild(cm.Node("option",{value:a},"normal"==a?b.lang("auto"):a))}),b.components["line-height"]=new Com.Select(cm.merge(b.params["Com.Select"],{select:b.nodes.tooltip["line-height"],events:{onChange:function(a,c){i(cm.merge(b.value,{"line-height":c}),!0)}}}))),b.params.controls.color&&(b.nodes.tooltip.group3.appendChild(cm.Node("li",{"class":"is-select medium"},b.nodes.tooltip.color=cm.Node("input",{type:"text",title:b.lang("Color")}))),b.components.color=new Com.ColorPicker(cm.merge(b.params["Com.ColorPicker"],{input:b.nodes.tooltip.color,defaultValue:b.params["default"].color,events:{onChange:function(a,c){i(cm.merge(b.value,{color:c}),!0)}}}))),b.params.showResetButtons&&(b.nodes.tooltip.group4.appendChild(cm.Node("li",b.nodes.tooltip["reset-default-button"]=cm.Node("div",{"class":"button button-primary"},b.lang("Reset to default")))),b.nodes.tooltip.group4.appendChild(cm.Node("li",b.nodes.tooltip["reset-current-button"]=cm.Node("div",{"class":"button button-primary"},b.lang("Reset to current")))),cm.addEvent(b.nodes.tooltip["reset-default-button"],"click",function(){i(cm.clone(b.params["default"]),!0)}),cm.addEvent(b.nodes.tooltip["reset-current-button"],"click",function(){i(cm.clone(b.params.active),!0)})),b.components.tooltip=new Com.Tooltip(cm.merge(b.params["Com.Tooltip"],{content:b.nodes.tooltip.container,target:b.nodes.container,events:{onShowStart:function(){cm.addClass(b.nodes.container,"active")},onHideStart:function(){cm.removeClass(b.nodes.container,"active")}}}))},i=function(a,c){var d=cm.clone(a);b.previousValue=cm.clone(b.value),b.value=a,cm.forEach(a,function(a,c){switch(b.components[c]&&b.components[c].set(a,!1),c){case"font-weight":a>400?cm.addClass(b.nodes.tooltip["font-weight-button"],"active"):cm.removeClass(b.nodes.tooltip["font-weight-button"],"active");break;case"text-decoration":"underline"==a?cm.addClass(b.nodes.tooltip["text-decoration-button"],"active"):cm.removeClass(b.nodes.tooltip["text-decoration-button"],"active");break;case"font-style":"italic"==a?cm.addClass(b.nodes.tooltip["font-style-button"],"active"):cm.removeClass(b.nodes.tooltip["font-style-button"],"active");break;case"font-size":d[c]=[a,"px"].join("");break;case"line-height":d[c]="normal"==a?a:[a,"px"].join("")}b.nodes.preview.style[cm.styleStrToKey(c)]=d[c]}),b.nodes.input.value=JSON.stringify(d),c&&(b.triggerEvent("onSelect",b.value),j())},j=function(){JSON.stringify(b.value)!=JSON.stringify(b.previousValue)&&b.triggerEvent("onChange",b.value)};b.set=function(a,c){return c="undefined"!=typeof c?c:!0,a=cm.isObject(a)?e(a):b.params["default"],i(a,c),b},b.get=function(){return b.value},c()}),cm.define("App.Template",{modules:["Params","Events","DataConfig","DataNodes","Stack"],events:["onRender","onRedraw"],params:{node:cm.Node("div"),name:"app-template",fixedHeader:!1,stickyFooter:!1,scroll:"document.body",scrollDuration:1e3}},function(a){var b=this;b.nodes={container:cm.Node("div"),header:cm.Node("div"),content:cm.Node("div"),footer:cm.Node("div"),buttonUp:cm.Node("div")},b.anim={};var c=function(){b.setParams(a),b.convertEvents(b.params.events),b.getDataNodes(b.params.node),b.getDataConfig(b.params.node),b.addToStack(b.params.node),d(),b.triggerEvent("onRender"),e(!0)},d=function(){b.anim.scroll=new cm.Animation(b.params.scroll),cm.addEvent(b.nodes.buttonUp,"click",b.scrollToTop),cm.addEvent(window,"resize",function(){e(!0)})},e=function(a){b.params.fixedHeader,b.params.stickyFooter&&f(),a&&b.triggerEvent("onRedraw")},f=function(){var a=cm.getPageSize("winHeight"),c=cm.getY(b.nodes.content),d=b.nodes.footer.offsetHeight;b.nodes.content.style.minHeight=Math.max(a-c-d,0)+"px"};b.redraw=function(a){return a="undefined"==typeof a?!0:a,e(a),b},b.scrollToTop=function(){return b.anim.scroll.go({style:{docScrollTop:"0"},duration:b.params.scrollDuration,anim:"smooth"}),b},b.getNodes=function(a){return b.nodes[a]||b.nodes},c()}),cm.define("App.TopMenu",{modules:["Params","Events","DataConfig","DataNodes","Stack"],events:["onRender","onCollapse","onExpand"],params:{node:cm.Node("div"),name:"app-topmenu",target:"document.html"}},function(a){var b,c=this;c.nodes={container:cm.Node("div"),inner:cm.Node("div"),button:cm.Node("div"),target:cm.Node("div"),items:{}},c.isExpanded=!1;var d=function(){c.setParams(a),c.convertEvents(c.params.events),c.getDataNodes(c.params.node),c.getDataConfig(c.params.node),c.addToStack(c.params.node),e(),c.triggerEvent("onRender")},e=function(){f(),cm.addEvent(c.nodes.button,"click",c.toggle),c.isExpanded=cm.isClass(c.nodes.container,"is-expanded"),cm.addEvent(window,"resize",f)},f=function(){cm.addClass(c.nodes.container,"cm__transition-disable"),b&&clearTimeout(b),b=setTimeout(function(){cm.removeClass(c.nodes.container,"cm__transition-disable")},5)};c.expand=function(){return c.isExpanded||(c.isExpanded=!0,cm.replaceClass(c.nodes.container,"is-collapsed","is-expanded"),cm.replaceClass(c.params.target,"is-topmenu--collapsed","is-topmenu--expanded",!0),c.triggerEvent("onExpand")),c},c.collapse=function(){return c.isExpanded&&(c.isExpanded=!1,cm.replaceClass(c.nodes.container,"is-expanded","is-collapsed"),cm.replaceClass(c.params.target,"is-topmenu--expanded","is-topmenu--collapsed",!0),c.triggerEvent("onCollapse")),c},c.toggle=function(){return c.isExpanded?c.collapse():c.expand(),c},c.setActiveItem=function(a){var b;return a&&(b=c.nodes.items[a])&&cm.addClass(b.container,"active"),c},c.unsetActiveItem=function(a){var b;return a&&(b=c.nodes.items[a])&&cm.removeClass(b.container,"active"),c},c.getItem=function(a){var b;return a&&(b=c.nodes.items[a])?b:null},c.getNodes=function(a){return c.nodes[a]||c.nodes},d()}),cm.define("App.Zone",{modules:["Params","Events","DataConfig","Stack"],events:["onRender"],params:{node:cm.Node("div"),zone:0,parentId:0,type:"content",locked:!1,editorName:"app-editor",thisContainer:"document.body",topContainer:"top.document.body"}},function(a){var b=this;b.isEditing=!1,b.styleObject=null,b.dimensions=null,b.components={},b.node=null,b.block=null,b.blocks={};var c=function(){b.setParams(a),b.convertEvents(b.params.events),b.getDataConfig(b.params.node),d(),e(),b.addToStack(b.params.node),b.triggerEvent("onRender")},d=function(){b.params.name=[b.params.parentId,b.params.zone].join("_"),b.params.blockName=b.params.parentId,b.node=b.params.node},e=function(){b.styleObject=cm.getStyleObject(b.node),b.dimensions=cm.getNodeOffset(b.node,b.styleObject),cm.addClass(b.node,"app__zone"),cm.addClass(b.node,["is",b.params.type].join("-")),b.params.locked?cm.addClass(b.node,"is-locked"):cm.addClass(b.node,"is-available"),new cm.top("Finder")("App.Block",b.params.blockName,b.params.thisContainer,f),new cm.top("Finder")("App.Editor",b.params.editorName,b.params.topContainer,h)},f=function(a){a&&(b.block=a.addZone(b.params.name,b))},g=function(a){a&&(b.block=a.removeZone(b.params.name),b.block=null)},h=function(a){a&&(b.components.editor=a.addZone(b.params.name,b))},i=function(a){a&&(b.components.editor=a.removeZone(b.params.name))};b.enableEditing=function(){return b.isEditing||(b.isEditing=!0,b.params.locked||cm.addClass(b.node,"is-editing")),b},b.disableEditing=function(){return b.isEditing&&(b.isEditing=!1,cm.removeClass(b.node,"is-editing")),b},b.addBlock=function(a,c){return b.blocks[a]=c,b},b.removeBlock=function(a){return delete b.blocks[a],b},b.highlight=function(){return b.params.locked||cm.addClass(b.node,"is-highlight"),b},b.unhighlight=function(){return b.params.locked||cm.removeClass(b.node,"is-highlight"),b},b.active=function(){return b.params.locked||cm.addClass(b.node,"is-active"),b},b.unactive=function(){return b.params.locked||cm.removeClass(b.node,"is-active"),b},b.remove=function(){return g(b.block),i(b.components.editor),b},b.updateDimensions=function(){return b.dimensions=cm.getNodeOffset(b.node,b.styleObject,b.dimensions),b.dimensions},c()});